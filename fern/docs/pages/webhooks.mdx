---
title: Webhooks
description: Receive real-time event notifications via HTTP
edit-this-page-url: https://github.com/airweave-ai/airweave/blob/main/fern/docs/pages/webhooks.mdx
slug: webhooks
---

<Warning>
**Beta Feature**

Webhooks are currently in beta. The API is stable but may receive enhancements based on feedback. Please report any issues on [GitHub](https://github.com/airweave-ai/airweave/issues).
</Warning>

Webhooks let you receive real-time HTTP notifications when events happen in your Airweave organization. Instead of polling the API, your server gets notified automatically when sync jobs start, complete, or fail.

## Quick Start

<Steps>
  <Step title="Create a webhook subscription">
    Register a URL to receive events:

    <CodeBlocks>
    ```bash title="cURL"
    curl -X POST 'https://api.airweave.ai/events/subscriptions' \
      -H 'x-api-key: YOUR_API_KEY' \
      -H 'Content-Type: application/json' \
      -d '{
        "url": "https://your-server.com/webhook",
        "event_types": ["sync.completed", "sync.failed"]
      }'
    ```

    ```python title="Python"
    import requests

    response = requests.post(
        "https://api.airweave.ai/events/subscriptions",
        headers={"x-api-key": "YOUR_API_KEY"},
        json={
            "url": "https://your-server.com/webhook",
            "event_types": ["sync.completed", "sync.failed"]
        }
    )
    subscription = response.json()
    print(f"Subscription ID: {subscription['id']}")
    ```

    ```javascript title="Node.js"
    const response = await fetch("https://api.airweave.ai/events/subscriptions", {
      method: "POST",
      headers: {
        "x-api-key": "YOUR_API_KEY",
        "Content-Type": "application/json"
      },
      body: JSON.stringify({
        url: "https://your-server.com/webhook",
        event_types: ["sync.completed", "sync.failed"]
      })
    });
    const subscription = await response.json();
    console.log(`Subscription ID: ${subscription.id}`);
    ```
    </CodeBlocks>
  </Step>

  <Step title="Handle incoming events">
    Your endpoint will receive POST requests with event payloads:

    <CodeBlocks>
    ```python title="Python (FastAPI)"
    from fastapi import FastAPI, Request

    app = FastAPI()

    @app.post("/webhook")
    async def handle_webhook(request: Request):
        event = await request.json()

        if event["eventType"] == "sync.completed":
            print(f"Sync completed: {event['payload']['sync_job_id']}")
        elif event["eventType"] == "sync.failed":
            print(f"Sync failed: {event['payload']['error']}")

        return {"status": "ok"}
    ```

    ```javascript title="Node.js (Express)"
    const express = require("express");
    const app = express();

    app.use(express.json());

    app.post("/webhook", (req, res) => {
      const event = req.body;

      if (event.eventType === "sync.completed") {
        console.log(`Sync completed: ${event.payload.sync_job_id}`);
      } else if (event.eventType === "sync.failed") {
        console.log(`Sync failed: ${event.payload.error}`);
      }

      res.json({ status: "ok" });
    });
    ```
    </CodeBlocks>
  </Step>

  <Step title="Verify signatures (recommended)">
    Use the signing secret to verify that requests come from Airweave. See [Signature Verification](#signature-verification) below.
  </Step>
</Steps>

## Event Types

Airweave sends webhook notifications for sync job lifecycle events:

| Event Type | Description |
|------------|-------------|
| `sync.created` | A new sync job has been created |
| `sync.pending` | Sync job is queued and waiting to run |
| `sync.running` | Sync job has started processing |
| `sync.completed` | Sync job finished successfully |
| `sync.failed` | Sync job encountered an error |
| `sync.cancelling` | Sync job cancellation was requested |
| `sync.cancelled` | Sync job was cancelled |

### Event Payload

Each webhook delivery contains:

```json
{
  "id": "msg_2xKvB8LPqM4nRst",
  "eventType": "sync.completed",
  "timestamp": "2025-01-13T14:30:00Z",
  "payload": {
    "sync_job_id": "550e8400-e29b-41d4-a716-446655440000",
    "source_connection_id": "660e8400-e29b-41d4-a716-446655440001",
    "collection_id": "770e8400-e29b-41d4-a716-446655440002",
    "status": "completed",
    "entities_processed": 1250,
    "duration_seconds": 45
  }
}
```

## Managing Subscriptions

### List Subscriptions

<CodeBlocks>
```bash title="cURL"
curl -X GET 'https://api.airweave.ai/events/subscriptions' \
  -H 'x-api-key: YOUR_API_KEY'
```

```python title="Python"
response = requests.get(
    "https://api.airweave.ai/events/subscriptions",
    headers={"x-api-key": "YOUR_API_KEY"}
)
subscriptions = response.json()
```
</CodeBlocks>

### Update Subscription

Change the URL or event types for an existing subscription:

<CodeBlocks>
```bash title="cURL"
curl -X PATCH 'https://api.airweave.ai/events/subscriptions/{subscription_id}' \
  -H 'x-api-key: YOUR_API_KEY' \
  -H 'Content-Type: application/json' \
  -d '{
    "url": "https://new-server.com/webhook",
    "event_types": ["sync.completed", "sync.failed", "sync.running"]
  }'
```
</CodeBlocks>

### Delete Subscription

<CodeBlocks>
```bash title="cURL"
curl -X DELETE 'https://api.airweave.ai/events/subscriptions/{subscription_id}' \
  -H 'x-api-key: YOUR_API_KEY'
```
</CodeBlocks>

## Signature Verification

Every webhook delivery is signed with your subscription's secret. Verify signatures to ensure requests genuinely come from Airweave.

### Get Your Signing Secret

<CodeBlocks>
```bash title="cURL"
curl -X GET 'https://api.airweave.ai/events/subscriptions/{subscription_id}/secret' \
  -H 'x-api-key: YOUR_API_KEY'
```
</CodeBlocks>

The secret is returned in the format `whsec_...`. Store it securely.

### Verify the Signature

Airweave uses [Svix](https://www.svix.com/) for webhook delivery. The signature is included in request headers:

- `svix-id`: Unique message identifier
- `svix-timestamp`: Unix timestamp of the attempt
- `svix-signature`: HMAC-SHA256 signature

<CodeBlocks>
```python title="Python"
import hmac
import hashlib
import base64

def verify_webhook(payload: bytes, headers: dict, secret: str) -> bool:
    """Verify Svix webhook signature."""
    msg_id = headers.get("svix-id")
    timestamp = headers.get("svix-timestamp")
    signature = headers.get("svix-signature")

    if not all([msg_id, timestamp, signature]):
        return False

    # Extract the secret key (remove whsec_ prefix and decode)
    secret_bytes = base64.b64decode(secret.replace("whsec_", ""))

    # Build the signed content
    signed_content = f"{msg_id}.{timestamp}.{payload.decode()}"

    # Compute expected signature
    expected = hmac.new(
        secret_bytes,
        signed_content.encode(),
        hashlib.sha256
    ).digest()
    expected_b64 = base64.b64encode(expected).decode()

    # Compare signatures (signature header may contain multiple, comma-separated)
    for sig in signature.split(","):
        sig_value = sig.split(",")[0].split(" ")[-1]  # Handle "v1,signature" format
        if hmac.compare_digest(expected_b64, sig_value):
            return True

    return False
```

```javascript title="Node.js"
const crypto = require("crypto");

function verifyWebhook(payload, headers, secret) {
  const msgId = headers["svix-id"];
  const timestamp = headers["svix-timestamp"];
  const signature = headers["svix-signature"];

  if (!msgId || !timestamp || !signature) {
    return false;
  }

  // Extract the secret key (remove whsec_ prefix and decode)
  const secretBytes = Buffer.from(secret.replace("whsec_", ""), "base64");

  // Build the signed content
  const signedContent = `${msgId}.${timestamp}.${payload}`;

  // Compute expected signature
  const expected = crypto
    .createHmac("sha256", secretBytes)
    .update(signedContent)
    .digest("base64");

  // Compare signatures
  const signatures = signature.split(",");
  for (const sig of signatures) {
    const sigValue = sig.split(" ").pop();
    if (crypto.timingSafeEqual(Buffer.from(expected), Buffer.from(sigValue))) {
      return true;
    }
  }

  return false;
}
```
</CodeBlocks>

<Tip>
For production use, consider using the official [Svix libraries](https://docs.svix.com/receiving/verifying-payloads/how) which handle signature verification automatically.
</Tip>

## Viewing Event History

You can retrieve recent event messages sent to your organization:

<CodeBlocks>
```bash title="cURL"
# Get all recent messages
curl -X GET 'https://api.airweave.ai/events/messages' \
  -H 'x-api-key: YOUR_API_KEY'

# Filter by event type
curl -X GET 'https://api.airweave.ai/events/messages?event_types=sync.completed&event_types=sync.failed' \
  -H 'x-api-key: YOUR_API_KEY'
```
</CodeBlocks>

## Delivery & Retries

Airweave automatically retries failed webhook deliveries with exponential backoff:

| Attempt | Delay |
|---------|-------|
| 1 | Immediate |
| 2 | 5 seconds |
| 3 | 5 minutes |
| 4 | 30 minutes |
| 5 | 2 hours |

Deliveries are considered failed if:
- Your endpoint returns a non-2xx status code
- The request times out (30 seconds)
- The connection fails

<Note>
You can view delivery attempts for each subscription in the Airweave dashboard or by fetching the subscription details via API.
</Note>

## Best Practices

<AccordionGroup>
  <Accordion title="Respond quickly">
    Return a `200 OK` response as fast as possible. Process events asynchronously in a background job to avoid timeouts.
  </Accordion>

  <Accordion title="Handle duplicates">
    Webhooks may be delivered more than once. Use the `id` field to deduplicate events in your handler.
  </Accordion>

  <Accordion title="Use HTTPS">
    Always use HTTPS endpoints in production. HTTP endpoints are only allowed for local development.
  </Accordion>

  <Accordion title="Verify signatures">
    Always verify webhook signatures in production to ensure requests come from Airweave.
  </Accordion>

  <Accordion title="Log everything">
    Log incoming webhook payloads for debugging. This helps troubleshoot issues with event processing.
  </Accordion>
</AccordionGroup>

## API Reference

<CardGroup cols={2}>
  <Card title="Subscriptions" icon="webhook" href="/api-reference/webhooks/list-subscriptions">
    Create, list, update, and delete webhook subscriptions.
  </Card>
  <Card title="Messages" icon="envelope" href="/api-reference/webhooks/list-messages">
    View event message history for your organization.
  </Card>
</CardGroup>
