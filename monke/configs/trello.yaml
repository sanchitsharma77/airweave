name: trello_test
description: End-to-end test for Trello source using Monke (OAuth1)

connector:
  name: Trello
  type: trello
  auth_mode: composio
  composio_config:
    # UPDATE THESE with the new Composio connection that uses Airweave's consumer credentials
    # Consumer key: 88e61134b0cbdbced53c8b652a1461bf (from dev.integrations.yaml)
    # Consumer secret: ddc6b96b7c9f0854a05dd291bfac082d2a553630cda92c216073d6d39b94f775
    account_id: ca_CQdfhfNklfWg
    auth_config_id: ac_05-vmn6Uv6_s
  config_fields:
    openai_model: "gpt-4.1-mini"
    max_concurrency: 3
    # Consumer credentials are automatically loaded from backend integration settings
    # No need to configure them here - the bongo will use dev.integrations.yaml

test_flow:
  steps:
    - cleanup
    - create
    - sync
    - verify
    - update
    - sync
    - verify
    - partial_delete
    - sync
    - verify_partial_deletion
    - verify_remaining_entities
    - complete_delete
    - sync
    - verify_complete_deletion
    - cleanup
    - collection_cleanup

deletion:
  partial_delete_count: 1
  verify_partial_deletion: true
  verify_remaining_entities: true  # Bongo now tracks cascade deletions
  verify_complete_deletion: true

entity_count: 3

collection:
  name: Trello Test Collection

verification:
  retry_attempts: 5
  retry_delay_seconds: 10
  score_threshold: 0.0
  expected_fields:
    - name
    - desc
    - trello_id
