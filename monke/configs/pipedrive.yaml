name: "pipedrive_test"
description: "End-to-end test for Pipedrive entities (Organizations, Persons, Deals, Activities, Products, Leads, Notes) via Monke"

connector:
  name: "Pipedrive"
  type: "pipedrive"
  auth_mode: direct
  auth_fields:
    api_token: MONKE_PIPEDRIVE_API_TOKEN
  config_fields:
    openai_model: "gpt-4.1-mini"
    rate_limit_delay_ms: 500
    post_create_sleep_seconds: 45  # Time for Pipedrive to index all entity types

test_flow:
  steps:
    - cleanup
    - create
    - sync
    - verify
    - update
    - sync
    - verify
    - partial_delete
    - sync
    - verify_partial_deletion
    - verify_remaining_entities
    - complete_delete
    - sync
    - verify_complete_deletion
    - cleanup

# Number of entities to create per entity type
# Total entities = 7 types Ã— entity_count (Organizations, Persons, Deals, Activities, Products, Leads, Notes)
entity_count: 2

deletion:
  partial_delete_count: 3  # Delete 3 entities across types for partial deletion test
  verify_partial_deletion: true
  verify_remaining_entities: true
  verify_complete_deletion: true

verification:
  retries: 5
  retry_backoff_seconds: 10
  resync_on_miss: true
  search_limit: 100  # Increased to account for multiple entity types
