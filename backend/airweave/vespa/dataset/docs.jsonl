{"entity_id":"1209332293895359","breadcrumbs":[],"name":"airweave.ai","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaWorkspaceEntity\n**Name**: airweave.ai\n\n**Name**: airweave.ai","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaWorkspaceEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"c3e2465cd1eefba8e0c0fb630456eb81dbc403e92b76df84d346d0fc224b068e","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332293895359","is_organization":true,"email_domains":["airweave.ai"],"permalink_url":"https://app.asana.com/0/1209332293895359","web_url":"https://app.asana.com/0/1209332293895359/list"}
{"entity_id":"1209332198044166","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"}],"name":"Build Integrations","created_at":"2025-02-05T15:09:54.987000Z","updated_at":"2025-10-17T14:07:33.091000Z","textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaProjectEntity\n**Name**: Build Integrations\n**Path**: Workspace: airweave.ai\n\n**Name**: Build Integrations\n**Workspace Name**: airweave.ai\n**Html Notes**: <body></body>\n**Notes**: \n**Owner**: {'gid': '1209332203471167', 'name': 'Airweave Apps'}\n**Team**: {'gid': '1209332293895361', 'name': \"Airweave's first team\"}\n**Members**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]\n**Followers**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaProjectEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"b5e0186aee5565a6d2abe80e263febe27d0c1d304e6cda7e386ec6c5a5bec39c","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044166","modified_at":"2025-10-17T14:07:33.091000Z","workspace_gid":"1209332293895359","workspace_name":"airweave.ai","color":"aqua","archived":false,"current_status":null,"default_view":"list","due_date":null,"due_on":null,"html_notes":"<body></body>","notes":"","is_public":false,"start_on":null,"owner":{"gid":"1209332203471167","name":"Airweave Apps"},"team":{"gid":"1209332293895361","name":"Airweave's first team"},"members":[{"gid":"1209332203471167","name":"Airweave Apps"}],"followers":[{"gid":"1209332203471167","name":"Airweave Apps"}],"custom_fields":[],"custom_field_settings":[],"default_access_level":"editor","icon":null,"permalink_url":"https://app.asana.com/1/1209332293895359/project/1209332198044166","web_url":"https://app.asana.com/0/1209332198044166"}
{"entity_id":"1209332198044167","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"}],"name":"To do","created_at":"2025-02-05T15:09:55.507000Z","updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaSectionEntity\n**Name**: To do\n**Path**: Workspace: airweave.ai → Project: Build Integrations\n\n**Name**: To do\n**Projects**: []","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaSectionEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"41fc10e888cd4a29bb6d051556b8e7aa0e69da7ac74a21f60f2646fd98ebf9ae","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044167","project_gid":"1209332198044166","projects":[],"web_url":"https://app.asana.com/0/1209332198044166/list"}
{"entity_id":"1211565181540505","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"},{"entity_id":"1209332198044167","name":"To do","entity_type":"AsanaSectionEntity"}],"name":"Fix problem","created_at":"2025-10-06T15:45:18.543000Z","updated_at":"2025-10-17T14:08:04.432000Z","textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaTaskEntity\n**Name**: Fix problem\n**Path**: Workspace: airweave.ai → Project: Build Integrations → Section: To do\n\n**Name**: Fix problem\n**Assignee**: {'gid': '1209332203471167', 'name': 'Airweave Apps'}\n**Assignee Status**: inbox\n**Completed**: False\n**Dependencies**: []\n**Dependents**: []\n**Due On**: 2026-05-08\n**Html Notes**: <body>Julius schutten needs a vitesse shirt</body>\n**Notes**: Julius schutten needs a vitesse shirt\n**Tags**: []\n**Custom Fields**: []\n**Followers**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]\n**Workspace**: {'gid': '1209332293895359', 'name': 'airweave.ai'}","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaTaskEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"42ef7aa36c5265905680466341774b21b8e288c7261f6b40db6ccdb2948ca285","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1211565181540505","modified_at":"2025-10-17T14:08:04.432000Z","project_gid":"1209332198044166","section_gid":"1209332198044167","actual_time_minutes":null,"approval_status":null,"assignee":{"gid":"1209332203471167","name":"Airweave Apps"},"assignee_status":"inbox","completed":false,"completed_at":null,"completed_by":null,"dependencies":[],"dependents":[],"due_at":null,"due_on":"2026-05-08","external":null,"html_notes":"<body>Julius schutten needs a vitesse shirt</body>","notes":"Julius schutten needs a vitesse shirt","is_rendered_as_separator":false,"liked":false,"memberships":[{}],"num_likes":0,"num_subtasks":0,"parent":null,"permalink_url":"https://app.asana.com/1/1209332293895359/project/1209332198044166/task/1211565181540505","resource_subtype":"default_task","start_at":null,"start_on":null,"tags":[],"custom_fields":[],"followers":[{"gid":"1209332203471167","name":"Airweave Apps"}],"workspace":{"gid":"1209332293895359","name":"airweave.ai"},"web_url":"https://app.asana.com/0/1209332198044166/1211565181540505"}
{"entity_id":"1209332198044185","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"},{"entity_id":"1209332198044167","name":"To do","entity_type":"AsanaSectionEntity"}],"name":"Ship it","created_at":"2025-02-05T15:09:57.541000Z","updated_at":"2025-02-05T15:10:00.278000Z","textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaTaskEntity\n**Name**: Ship it\n**Path**: Workspace: airweave.ai → Project: Build Integrations → Section: To do\n\n**Name**: Ship it\n**Assignee Status**: upcoming\n**Completed**: False\n**Dependencies**: []\n**Dependents**: []\n**Due On**: 2025-02-11\n**Html Notes**: <body></body>\n**Notes**: \n**Start On**: 2025-02-07\n**Tags**: []\n**Custom Fields**: []\n**Followers**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]\n**Workspace**: {'gid': '1209332293895359', 'name': 'airweave.ai'}","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaTaskEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"5f6ba718677d56103c89b538b40283fb784969cd596dba1eeed95b6e3e791a10","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044185","modified_at":"2025-02-05T15:10:00.278000Z","project_gid":"1209332198044166","section_gid":"1209332198044167","actual_time_minutes":null,"approval_status":null,"assignee":null,"assignee_status":"upcoming","completed":false,"completed_at":null,"completed_by":null,"dependencies":[],"dependents":[],"due_at":null,"due_on":"2025-02-11","external":null,"html_notes":"<body></body>","notes":"","is_rendered_as_separator":false,"liked":false,"memberships":[{}],"num_likes":0,"num_subtasks":0,"parent":null,"permalink_url":"https://app.asana.com/1/1209332293895359/project/1209332198044166/task/1209332198044185","resource_subtype":"default_task","start_at":null,"start_on":"2025-02-07","tags":[],"custom_fields":[],"followers":[{"gid":"1209332203471167","name":"Airweave Apps"}],"workspace":{"gid":"1209332293895359","name":"airweave.ai"},"web_url":"https://app.asana.com/0/1209332198044166/1209332198044185"}
{"entity_id":"1209332198044169","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"}],"name":"Doing","created_at":"2025-02-05T15:09:56.213000Z","updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaSectionEntity\n**Name**: Doing\n**Path**: Workspace: airweave.ai → Project: Build Integrations\n\n**Name**: Doing\n**Projects**: []","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaSectionEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"b2b4acfb9bc6695bfc5d51df8b19226bbaccfc5bfe52c8f7b54db18d0dc18e98","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044169","project_gid":"1209332198044166","projects":[],"web_url":"https://app.asana.com/0/1209332198044166/list"}
{"entity_id":"1209332198044170","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"}],"name":"Done","created_at":"2025-02-05T15:09:56.294000Z","updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaSectionEntity\n**Name**: Done\n**Path**: Workspace: airweave.ai → Project: Build Integrations\n\n**Name**: Done\n**Projects**: []","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaSectionEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"0a1ca48170382a04bd215f992238af5fefe92af6eb1bac3691f2343589bf59cb","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044170","project_gid":"1209332198044166","projects":[],"web_url":"https://app.asana.com/0/1209332198044166/list"}
{"entity_id":"1204858079189506","breadcrumbs":[],"name":"neena.io","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaWorkspaceEntity\n**Name**: neena.io\n\n**Name**: neena.io","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaWorkspaceEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"979ffad7d2bda15e5545fe74196839b79b1cdd0c1a76b0fe408faf4d36647a17","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1204858079189506","is_organization":true,"email_domains":["neena.io"],"permalink_url":"https://app.asana.com/0/1204858079189506","web_url":"https://app.asana.com/0/1204858079189506/list"}
{"entity_id":"thread_19998ef97480ebee","breadcrumbs":[],"name":"Thread","created_at":null,"updated_at":"2025-10-06T19:24:29","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailThreadEntity\n**Name**: Thread\n\n**Title**: Thread\n**Snippet**: \n**Label Ids**: ['IMPORTANT', 'STARRED', 'Label_3', 'CATEGORY_PERSONAL', 'INBOX']","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailThreadEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"f8b4420cfdddd69f66bce013fe3055bcad089d8eb6d1276b3b3002c5c5a95ac4","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"thread_key":"thread_19998ef97480ebee","gmail_thread_id":"19998ef97480ebee","title":"Thread","last_message_at":"2025-10-06T19:24:29","snippet":"","history_id":"251389","message_count":5,"label_ids":["IMPORTANT","STARRED","Label_3","CATEGORY_PERSONAL","INBOX"],"web_url":"https://mail.google.com/mail/u/0/#inbox/19998ef97480ebee"}
{"entity_id":"msg_19998ef97480ebee","breadcrumbs":[{"entity_id":"thread_19998ef97480ebee","name":"Thread","entity_type":"GmailThreadEntity"}],"name":"Reply to Your O-1A visa application is ready for review.","created_at":"2025-09-30T04:44:21Z","updated_at":"2025-09-30T04:44:21","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailMessageEntity\n**Name**: Reply to Your O-1A visa application is ready for review.\n**Path**: Thread: Thread\n\n**Subject**: Reply to Your O-1A visa application is ready for review.\n**Sender**: Robby Villanueva <success@lighthousehq.com>\n**To**: ['Daan Manneke <daan@airweave.ai>']\n**Cc**: ['\"lennert@airweave.ai\" <lennert@airweave.ai>']\n**Bcc**: []\n**Date**: 2025-09-30T04:44:21+00:00\n**Snippet**: Hi Daan, Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer. Please login to your Lighthouse\n**Label Ids**: ['IMPORTANT', 'STARRED', 'Label_3', 'CATEGORY_PERSONAL', 'INBOX']\n\n# Content\n\nHi Daan,\n\n  \n\nOur team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer.\n\n  \n\n[Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/).\n\nBelow is a list of pending items and clarifying questions:\n\n  \n\n1. Please note, since you indicated you have a dependent (legal spouse or child), once the O1 is approved, your dependent can join you for your visa appointment.   \n  1. Each Applicant for a visa will need to fill out a DS-160, an appointment (can be completed together), and proof of the qualifying relationship (**original** marriage license for spouses and **original** birth certificates for children - with an English translation if needed).\n\n\n  \n\nPlease let us know if you have any comments or edits. We’ll promptly incorporate and revert with a final copy for your confirmation to send this out to USCIS.\n\n  \n\nAs a reminder, we plan on filing your case as Consular, effective immediately, which means that in order to activate the O1, you will need to retrieve a U.S. visa stamp in your passport before returning to the U.S. in O1 status. You can complete this requirement as soon as the O1 is approved by booking an appointment at a US Embassy or Consulate abroad. Please note, you face no travel restrictions during the pendency of the O1 filing.\n\n  \n\nExcited to be near the finish line!\n\n  \n\n  \n\n\n—\n\n**Robby Villanueva**\n\nHead of Legal Operations, Lighthouse\n\n[www.lighthousehq.com](http://www.lighthousehq.com/)\n\n[LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n\n![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ei3ou8m/han_8mburiu/4ad7a41e.gif)  \n> On September 26, 2025 at 1:43 PM PDT <daan@airweave.ai> wrote:\n> \n> \n> \n> Hi Robby,\n> \n> \n> \n> The letter is signed!\n> \n> \n> \n> \n> \n> \n> \n> \n> \n> \n> > On 26 Sep 2025, at 00:10, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> >\n> >\n> >\n> >\n> > Hi Daan - Thanks for your emails. Your portal reflects accurately on our end. We're just waiting for the advisory opinion letter to be signed. Your case is undergoing final legal review - we'll send this to you before end of week. Once the letter is signed and your case is approved by you, we can proceed to print and ship.\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> > —\n> >\n> > **Robby Villanueva**\n> >\n> > Head of Legal Operations, Lighthouse\n> >\n> > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> >\n> > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> >\n> > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eg3tw46/han_8mburiu/fb79af22.gif)\n> >\n> >\n> >\n> > > On September 24, 2025 at 12:19 AM PDT <daan@airweave.ai> wrote:\n> > >\n> > >\n> > >\n> > > Hi Robby,\n> > >\n> > >\n> > >\n> > > Thank you for the update! Also, the “High Compensation” looks good. But “Original Contribution” still does not. Can you maybe fix that?\n> > >\n> > > And what are the next steps after that is done and the letter is signed?\n> > >\n> > >\n> > >\n> > > Thank you,\n> > >\n> > > Daan Manneke\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > > On 23 Sep 2025, at 23:45, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > Hi Daan,\n> > > >\n> > > >\n> > > >\n> > > > Yes, updated the email address to <sammiestoel@gmail.com> for the advisory opinion letter.\n> > > >\n> > > >\n> > > >\n> > > > Regarding the portal errors - I'll need to manually refresh those sections on our end. The high compensation and original contributions criteria should now reflect accurately.\n> > > >\n> > > >\n> > > >\n> > > > Thank you,\n> > > >\n> > > > Robby\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > —\n> > > >\n> > > > **Robby Villanueva**\n> > > >\n> > > > Head of Legal Operations, Lighthouse\n> > > >\n> > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > >\n> > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > >\n> > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eeww192/han_8mburiu/1df71a51.gif)","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailMessageEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"a13186b05157f76eb72830b1288530d14c9ad4df5309fafc8dc23eb4f08028df","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://mail.google.com/mail/u/0/#inbox/19998ef97480ebee","size":18267,"file_type":"html","mime_type":"text/html","local_path":"/tmp/airweave/processing/ef07f3d3-ac0b-41af-97d6-1d332ca5c613/7901ab6c-8bdd-481e-9904-bf9b1d5a564a-Reply to Your O-1A visa application is ready for review.html","message_key":"msg_19998ef97480ebee","message_id":"19998ef97480ebee","subject":"Reply to Your O-1A visa application is ready for review.","sent_at":"2025-09-30T04:44:21Z","internal_timestamp":"2025-09-30T04:44:21","thread_id":"19998ef97480ebee","sender":"Robby Villanueva <success@lighthousehq.com>","to":["Daan Manneke <daan@airweave.ai>"],"cc":["\"lennert@airweave.ai\" <lennert@airweave.ai>"],"bcc":[],"date":"2025-09-30T04:44:21Z","snippet":"Hi Daan, Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer. Please login to your Lighthouse","label_ids":["IMPORTANT","STARRED","Label_3","CATEGORY_PERSONAL","INBOX"],"internal_date":"2025-09-30T04:44:21","web_url_value":"https://mail.google.com/mail/u/0/#inbox/19998ef97480ebee","web_url":"https://mail.google.com/mail/u/0/#inbox/19998ef97480ebee"}
{"entity_id":"msg_199a2cc2d9bf79c4","breadcrumbs":[{"entity_id":"thread_19998ef97480ebee","name":"Thread","entity_type":"GmailThreadEntity"}],"name":"Re: Reply to Your O-1A visa application is ready for review.","created_at":"2025-10-02T02:41:52Z","updated_at":"2025-10-02T02:41:52","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailMessageEntity\n**Name**: Re: Reply to Your O-1A visa application is ready for review.\n**Path**: Thread: Thread\n\n**Subject**: Re: Reply to Your O-1A visa application is ready for review.\n**Sender**: Robby Villanueva <success@lighthousehq.com>\n**To**: ['Daan Manneke <daan@airweave.ai>']\n**Cc**: ['\"lennert@airweave.ai\" <lennert@airweave.ai>']\n**Bcc**: []\n**Date**: 2025-10-02T02:41:52+00:00\n**Snippet**: Hi Daan - Gently checking in on my last email. Please login to your Lighthouse portal for your draft final petition. All you need to do is approve the draft on your portal and we will proceed to print\n**Label Ids**: ['IMPORTANT', 'STARRED', 'Label_3', 'CATEGORY_PERSONAL', 'INBOX']\n\n# Content\n\nHi Daan - Gently checking in on my last email. [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/). All you need to do is approve the draft on your portal and we will proceed to print and ship to the USCIS for processing.\n\n  \n\nThank you!\n\n  \n\n  \n\n\n—\n\n**Robby Villanueva**\n\nHead of Legal Operations, Lighthouse\n\n[www.lighthousehq.com](http://www.lighthousehq.com/)\n\n[LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n\n![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ej7rbdi/han_8mburiu/24dea612.gif)  \n> On September 29, 2025 at 9:44 PM PDT <success@lighthousehq.com> wrote:\n> \n> \n> \n> Hi Daan,\n> \n> \n> \n> Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer.\n> \n> \n> \n> [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/).\n> \n> Below is a list of pending items and clarifying questions:\n> \n> \n> \n> 1. Please note, since you indicated you have a dependent (legal spouse or child), once the O1 is approved, your dependent can join you for your visa appointment.\n> 1. Each Applicant for a visa will need to fill out a DS-160, an appointment (can be completed together), and proof of the qualifying relationship (**original** marriage license for spouses and **original** birth certificates for children - with an English translation if needed).\n> \n> \n> \n> \n> Please let us know if you have any comments or edits. We’ll promptly incorporate and revert with a final copy for your confirmation to send this out to USCIS.\n> \n> \n> \n> As a reminder, we plan on filing your case as Consular, effective immediately, which means that in order to activate the O1, you will need to retrieve a U.S. visa stamp in your passport before returning to the U.S. in O1 status. You can complete this requirement as soon as the O1 is approved by booking an appointment at a US Embassy or Consulate abroad. Please note, you face no travel restrictions during the pendency of the O1 filing.\n> \n> \n> \n> Excited to be near the finish line!\n> \n> \n> \n> \n> \n> \n> —\n> \n> **Robby Villanueva**\n> \n> Head of Legal Operations, Lighthouse\n> \n> [www.lighthousehq.com](http://www.lighthousehq.com/)\n> \n> [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> \n> \n> \n> \n> \n> > On September 26, 2025 at 1:43 PM PDT <daan@airweave.ai> wrote:\n> >\n> >\n> >\n> > Hi Robby,\n> >\n> >\n> >\n> > The letter is signed!\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> >\n> > > On 26 Sep 2025, at 00:10, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > >\n> > >\n> > >\n> > >\n> > > Hi Daan - Thanks for your emails. Your portal reflects accurately on our end. We're just waiting for the advisory opinion letter to be signed. Your case is undergoing final legal review - we'll send this to you before end of week. Once the letter is signed and your case is approved by you, we can proceed to print and ship.\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > —\n> > >\n> > > **Robby Villanueva**\n> > >\n> > > Head of Legal Operations, Lighthouse\n> > >\n> > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > >\n> > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > >\n> > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eg3tw46/han_8mburiu/fb79af22.gif)\n> > >\n> > >\n> > >\n> > > > On September 24, 2025 at 12:19 AM PDT <daan@airweave.ai> wrote:\n> > > >\n> > > >\n> > > >\n> > > > Hi Robby,\n> > > >\n> > > >\n> > > >\n> > > > Thank you for the update! Also, the “High Compensation” looks good. But “Original Contribution” still does not. Can you maybe fix that?\n> > > >\n> > > > And what are the next steps after that is done and the letter is signed?\n> > > >\n> > > >\n> > > >\n> > > > Thank you,\n> > > >\n> > > > Daan Manneke\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > > On 23 Sep 2025, at 23:45, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > Hi Daan,\n> > > > >\n> > > > >\n> > > > >\n> > > > > Yes, updated the email address to <sammiestoel@gmail.com> for the advisory opinion letter.\n> > > > >\n> > > > >\n> > > > >\n> > > > > Regarding the portal errors - I'll need to manually refresh those sections on our end. The high compensation and original contributions criteria should now reflect accurately.\n> > > > >\n> > > > >\n> > > > >\n> > > > > Thank you,\n> > > > >\n> > > > > Robby\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > —\n> > > > >\n> > > > > **Robby Villanueva**\n> > > > >\n> > > > > Head of Legal Operations, Lighthouse\n> > > > >\n> > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > >\n> > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > >\n> > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eeww192/han_8mburiu/1df71a51.gif)","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailMessageEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"f29ab470ff4a9113723de1c8bce7ce6bff34bb77cccc1bece57bd9b4fb540d7c","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://mail.google.com/mail/u/0/#inbox/199a2cc2d9bf79c4","size":20338,"file_type":"html","mime_type":"text/html","local_path":"/tmp/airweave/processing/ef07f3d3-ac0b-41af-97d6-1d332ca5c613/04c79382-a037-40e2-a1a0-5604462bf437-Re Reply to Your O-1A visa application is ready for review.html","message_key":"msg_199a2cc2d9bf79c4","message_id":"199a2cc2d9bf79c4","subject":"Re: Reply to Your O-1A visa application is ready for review.","sent_at":"2025-10-02T02:41:52Z","internal_timestamp":"2025-10-02T02:41:52","thread_id":"19998ef97480ebee","sender":"Robby Villanueva <success@lighthousehq.com>","to":["Daan Manneke <daan@airweave.ai>"],"cc":["\"lennert@airweave.ai\" <lennert@airweave.ai>"],"bcc":[],"date":"2025-10-02T02:41:52Z","snippet":"Hi Daan - Gently checking in on my last email. Please login to your Lighthouse portal for your draft final petition. All you need to do is approve the draft on your portal and we will proceed to print","label_ids":["IMPORTANT","STARRED","Label_3","CATEGORY_PERSONAL","INBOX"],"internal_date":"2025-10-02T02:41:52","web_url_value":"https://mail.google.com/mail/u/0/#inbox/199a2cc2d9bf79c4","web_url":"https://mail.google.com/mail/u/0/#inbox/199a2cc2d9bf79c4"}
{"entity_id":"msg_199a975a44f13fda","breadcrumbs":[{"entity_id":"thread_19998ef97480ebee","name":"Thread","entity_type":"GmailThreadEntity"}],"name":"Re: Reply to Your O-1A visa application is ready for review.","created_at":"2025-10-03T11:44:32+02:00","updated_at":"2025-10-03T09:44:32","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailMessageEntity\n**Name**: Re: Reply to Your O-1A visa application is ready for review.\n**Path**: Thread: Thread\n\n**Subject**: Re: Reply to Your O-1A visa application is ready for review.\n**Sender**: Daan Manneke <daan@airweave.ai>\n**To**: ['Robby Villanueva <success@lighthousehq.com>']\n**Cc**: ['\"lennert@airweave.ai\" <lennert@airweave.ai>']\n**Bcc**: []\n**Date**: 2025-10-03T11:44:32+02:00\n**Snippet**: Hi Robby, I left a couple very small comments. Once those are changed, it is ready! Best, Daan Manneke On 2 Oct 2025, at 04:41, Robby Villanueva &lt;success@lighthousehq.com&gt; wrote: Hi Daan - Gently\n**Label Ids**: ['SENT']\n\n# Content\n\n---\nmeta-content-type: text/html; charset=utf-8\n---\n\nHi Robby,\n\n  \n\nI left a couple very small comments. Once those are changed, it is ready!\n\n  \n\nBest,\n\nDaan Manneke  \n\n\n  \n> On 2 Oct 2025, at 04:41, Robby Villanueva <success@lighthousehq.com> wrote:\n> \n> \n> \n> \n> Hi Daan - Gently checking in on my last email. [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/). All you need to do is approve the draft on your portal and we will proceed to print and ship to the USCIS for processing.\n> \n> \n> \n> Thank you!\n> \n> \n> \n> \n> \n> \n> —\n> \n> **Robby Villanueva**\n> \n> Head of Legal Operations, Lighthouse\n> \n> [www.lighthousehq.com](http://www.lighthousehq.com/)\n> \n> [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> \n> ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ej7rbdi/han_8mburiu/24dea612.gif)\n> \n> \n> \n> > On September 29, 2025 at 9:44 PM PDT <success@lighthousehq.com> wrote:\n> >\n> >\n> >\n> > Hi Daan,\n> >\n> >\n> >\n> > Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer.\n> >\n> >\n> >\n> > [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/).\n> >\n> > Below is a list of pending items and clarifying questions:\n> >\n> >\n> >\n> > 1. Please note, since you indicated you have a dependent (legal spouse or child), once the O1 is approved, your dependent can join you for your visa appointment.\n> > 1. Each Applicant for a visa will need to fill out a DS-160, an appointment (can be completed together), and proof of the qualifying relationship (**original** marriage license for spouses and **original** birth certificates for children - with an English translation if needed).\n> >\n> >\n> >\n> >\n> > Please let us know if you have any comments or edits. We’ll promptly incorporate and revert with a final copy for your confirmation to send this out to USCIS.\n> >\n> >\n> >\n> > As a reminder, we plan on filing your case as Consular, effective immediately, which means that in order to activate the O1, you will need to retrieve a U.S. visa stamp in your passport before returning to the U.S. in O1 status. You can complete this requirement as soon as the O1 is approved by booking an appointment at a US Embassy or Consulate abroad. Please note, you face no travel restrictions during the pendency of the O1 filing.\n> >\n> >\n> >\n> > Excited to be near the finish line!\n> >\n> >\n> >\n> >\n> >\n> >\n> > —\n> >\n> > **Robby Villanueva**\n> >\n> > Head of Legal Operations, Lighthouse\n> >\n> > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> >\n> > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> >\n> >\n> >\n> >\n> >\n> > > On September 26, 2025 at 1:43 PM PDT <daan@airweave.ai> wrote:\n> > >\n> > >\n> > >\n> > > Hi Robby,\n> > >\n> > >\n> > >\n> > > The letter is signed!\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > > On 26 Sep 2025, at 00:10, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > Hi Daan - Thanks for your emails. Your portal reflects accurately on our end. We're just waiting for the advisory opinion letter to be signed. Your case is undergoing final legal review - we'll send this to you before end of week. Once the letter is signed and your case is approved by you, we can proceed to print and ship.\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > —\n> > > >\n> > > > **Robby Villanueva**\n> > > >\n> > > > Head of Legal Operations, Lighthouse\n> > > >\n> > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > >\n> > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > >\n> > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eg3tw46/han_8mburiu/fb79af22.gif)\n> > > >\n> > > >\n> > > >\n> > > > > On September 24, 2025 at 12:19 AM PDT <daan@airweave.ai> wrote:\n> > > > >\n> > > > >\n> > > > >\n> > > > > Hi Robby,\n> > > > >\n> > > > >\n> > > > >\n> > > > > Thank you for the update! Also, the “High Compensation” looks good. But “Original Contribution” still does not. Can you maybe fix that?\n> > > > >\n> > > > > And what are the next steps after that is done and the letter is signed?\n> > > > >\n> > > > >\n> > > > >\n> > > > > Thank you,\n> > > > >\n> > > > > Daan Manneke\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > > On 23 Sep 2025, at 23:45, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Hi Daan,\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Yes, updated the email address to <sammiestoel@gmail.com> for the advisory opinion letter.\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Regarding the portal errors - I'll need to manually refresh those sections on our end. The high compensation and original contributions criteria should now reflect accurately.\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Thank you,\n> > > > > >\n> > > > > > Robby\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > —\n> > > > > >\n> > > > > > **Robby Villanueva**\n> > > > > >\n> > > > > > Head of Legal Operations, Lighthouse\n> > > > > >\n> > > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > > >\n> > > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > > >\n> > > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eeww192/han_8mburiu/1df71a51.gif)","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailMessageEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"04ff8294fb42330d840e686933287c307ea552739d7f22fdc18681ac34b3b87d","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://mail.google.com/mail/u/0/#inbox/199a975a44f13fda","size":17734,"file_type":"html","mime_type":"text/html","local_path":"/tmp/airweave/processing/ef07f3d3-ac0b-41af-97d6-1d332ca5c613/9034f99f-f0af-4c1e-a3c3-663dacca5614-Re Reply to Your O-1A visa application is ready for review.html","message_key":"msg_199a975a44f13fda","message_id":"199a975a44f13fda","subject":"Re: Reply to Your O-1A visa application is ready for review.","sent_at":"2025-10-03T11:44:32+02:00","internal_timestamp":"2025-10-03T09:44:32","thread_id":"19998ef97480ebee","sender":"Daan Manneke <daan@airweave.ai>","to":["Robby Villanueva <success@lighthousehq.com>"],"cc":["\"lennert@airweave.ai\" <lennert@airweave.ai>"],"bcc":[],"date":"2025-10-03T11:44:32+02:00","snippet":"Hi Robby, I left a couple very small comments. Once those are changed, it is ready! Best, Daan Manneke On 2 Oct 2025, at 04:41, Robby Villanueva &lt;success@lighthousehq.com&gt; wrote: Hi Daan - Gently","label_ids":["SENT"],"internal_date":"2025-10-03T09:44:32","web_url_value":"https://mail.google.com/mail/u/0/#inbox/199a975a44f13fda","web_url":"https://mail.google.com/mail/u/0/#inbox/199a975a44f13fda"}
{"entity_id":"msg_199abc0c027c11c6","breadcrumbs":[{"entity_id":"thread_19998ef97480ebee","name":"Thread","entity_type":"GmailThreadEntity"}],"name":"Re: Reply to Your O-1A visa application is ready for review.","created_at":"2025-10-03T20:25:59Z","updated_at":"2025-10-03T20:25:59","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailMessageEntity\n**Name**: Re: Reply to Your O-1A visa application is ready for review.\n**Path**: Thread: Thread\n\n**Subject**: Re: Reply to Your O-1A visa application is ready for review.\n**Sender**: Robby Villanueva <success@lighthousehq.com>\n**To**: ['Daan Manneke <daan@airweave.ai>']\n**Cc**: ['\"lennert@airweave.ai\" <lennert@airweave.ai>']\n**Bcc**: []\n**Date**: 2025-10-03T20:25:59+00:00\n**Snippet**: Thank you, Daan! We reviewed your feedback and actioned your requested edits. The only item we didn&#39;t update is the GitHub stars data - we only have documentation of 2.7k stars - if you have the\n**Label Ids**: ['IMPORTANT', 'Label_3', 'CATEGORY_PERSONAL', 'INBOX']\n\n# Content\n\nThank you, Daan! We reviewed your feedback and [actioned your requested edits](http://portal.lighthousehq.com/). The only item we didn't update is the GitHub stars data - we only have documentation of 2.7k stars - if you have the documentation for 3.4k stars, we can have this updated for you.\n\n  \n\nOtherwise, once you approve your draft, we'll proceed to print and ship to the USCIS.\n\n  \n\n  \n\n\n—\n\n**Robby Villanueva**\n\nHead of Legal Operations, Lighthouse\n\n[www.lighthousehq.com](http://www.lighthousehq.com/)\n\n[LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n\n![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ek48w46/han_8mburiu/f74ec7a6.gif)  \n> On October 3, 2025 at 2:44 AM PDT <daan@airweave.ai> wrote:\n> \n> \n> \n> Hi Robby,\n> \n> \n> \n> I left a couple very small comments. Once those are changed, it is ready!\n> \n> \n> \n> Best,\n> \n> Daan Manneke\n> \n> \n> \n> \n> \n> \n> > On 2 Oct 2025, at 04:41, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> >\n> >\n> >\n> >\n> > Hi Daan - Gently checking in on my last email. [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/). All you need to do is approve the draft on your portal and we will proceed to print and ship to the USCIS for processing.\n> >\n> >\n> >\n> > Thank you!\n> >\n> >\n> >\n> >\n> >\n> >\n> > —\n> >\n> > **Robby Villanueva**\n> >\n> > Head of Legal Operations, Lighthouse\n> >\n> > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> >\n> > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> >\n> > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ej7rbdi/han_8mburiu/24dea612.gif)\n> >\n> >\n> >\n> > > On September 29, 2025 at 9:44 PM PDT <success@lighthousehq.com> wrote:\n> > >\n> > >\n> > >\n> > > Hi Daan,\n> > >\n> > >\n> > >\n> > > Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer.\n> > >\n> > >\n> > >\n> > > [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/).\n> > >\n> > > Below is a list of pending items and clarifying questions:\n> > >\n> > >\n> > >\n> > > 1. Please note, since you indicated you have a dependent (legal spouse or child), once the O1 is approved, your dependent can join you for your visa appointment.\n> > > 1. Each Applicant for a visa will need to fill out a DS-160, an appointment (can be completed together), and proof of the qualifying relationship (**original** marriage license for spouses and **original** birth certificates for children - with an English translation if needed).\n> > >\n> > >\n> > >\n> > >\n> > > Please let us know if you have any comments or edits. We’ll promptly incorporate and revert with a final copy for your confirmation to send this out to USCIS.\n> > >\n> > >\n> > >\n> > > As a reminder, we plan on filing your case as Consular, effective immediately, which means that in order to activate the O1, you will need to retrieve a U.S. visa stamp in your passport before returning to the U.S. in O1 status. You can complete this requirement as soon as the O1 is approved by booking an appointment at a US Embassy or Consulate abroad. Please note, you face no travel restrictions during the pendency of the O1 filing.\n> > >\n> > >\n> > >\n> > > Excited to be near the finish line!\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > —\n> > >\n> > > **Robby Villanueva**\n> > >\n> > > Head of Legal Operations, Lighthouse\n> > >\n> > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > >\n> > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > > On September 26, 2025 at 1:43 PM PDT <daan@airweave.ai> wrote:\n> > > >\n> > > >\n> > > >\n> > > > Hi Robby,\n> > > >\n> > > >\n> > > >\n> > > > The letter is signed!\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > > On 26 Sep 2025, at 00:10, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > Hi Daan - Thanks for your emails. Your portal reflects accurately on our end. We're just waiting for the advisory opinion letter to be signed. Your case is undergoing final legal review - we'll send this to you before end of week. Once the letter is signed and your case is approved by you, we can proceed to print and ship.\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > —\n> > > > >\n> > > > > **Robby Villanueva**\n> > > > >\n> > > > > Head of Legal Operations, Lighthouse\n> > > > >\n> > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > >\n> > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > >\n> > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eg3tw46/han_8mburiu/fb79af22.gif)\n> > > > >\n> > > > >\n> > > > >\n> > > > > > On September 24, 2025 at 12:19 AM PDT <daan@airweave.ai> wrote:\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Hi Robby,\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Thank you for the update! Also, the “High Compensation” looks good. But “Original Contribution” still does not. Can you maybe fix that?\n> > > > > >\n> > > > > > And what are the next steps after that is done and the letter is signed?\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Thank you,\n> > > > > >\n> > > > > > Daan Manneke\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > > On 23 Sep 2025, at 23:45, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Hi Daan,\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Yes, updated the email address to <sammiestoel@gmail.com> for the advisory opinion letter.\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Regarding the portal errors - I'll need to manually refresh those sections on our end. The high compensation and original contributions criteria should now reflect accurately.\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Thank you,\n> > > > > > >\n> > > > > > > Robby\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > —\n> > > > > > >\n> > > > > > > **Robby Villanueva**\n> > > > > > >\n> > > > > > > Head of Legal Operations, Lighthouse\n> > > > > > >\n> > > > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > > > >\n> > > > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > > > >\n> > > > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eeww192/han_8mburiu/1df71a51.gif)","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailMessageEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"4dd6e4da710070cd21ff8f393692a606fcb60f2adb3d8ffc5e3dec7e124878f2","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://mail.google.com/mail/u/0/#inbox/199abc0c027c11c6","size":23861,"file_type":"html","mime_type":"text/html","local_path":"/tmp/airweave/processing/ef07f3d3-ac0b-41af-97d6-1d332ca5c613/e3ec54e9-0839-4851-bb4c-fabb69679ad6-Re Reply to Your O-1A visa application is ready for review.html","message_key":"msg_199abc0c027c11c6","message_id":"199abc0c027c11c6","subject":"Re: Reply to Your O-1A visa application is ready for review.","sent_at":"2025-10-03T20:25:59Z","internal_timestamp":"2025-10-03T20:25:59","thread_id":"19998ef97480ebee","sender":"Robby Villanueva <success@lighthousehq.com>","to":["Daan Manneke <daan@airweave.ai>"],"cc":["\"lennert@airweave.ai\" <lennert@airweave.ai>"],"bcc":[],"date":"2025-10-03T20:25:59Z","snippet":"Thank you, Daan! We reviewed your feedback and actioned your requested edits. The only item we didn&#39;t update is the GitHub stars data - we only have documentation of 2.7k stars - if you have the","label_ids":["IMPORTANT","Label_3","CATEGORY_PERSONAL","INBOX"],"internal_date":"2025-10-03T20:25:59","web_url_value":"https://mail.google.com/mail/u/0/#inbox/199abc0c027c11c6","web_url":"https://mail.google.com/mail/u/0/#inbox/199abc0c027c11c6"}
{"entity_id":"msg_199bafb876ccd5f0","breadcrumbs":[{"entity_id":"thread_19998ef97480ebee","name":"Thread","entity_type":"GmailThreadEntity"}],"name":"Re: Reply to Your O-1A visa application is ready for review.","created_at":"2025-10-06T19:24:29Z","updated_at":"2025-10-06T19:24:29","textual_representation":"# Metadata\n\n**Source**: gmail\n**Type**: GmailMessageEntity\n**Name**: Re: Reply to Your O-1A visa application is ready for review.\n**Path**: Thread: Thread\n\n**Subject**: Re: Reply to Your O-1A visa application is ready for review.\n**Sender**: Robby Villanueva <success@lighthousehq.com>\n**To**: ['Daan Manneke <daan@airweave.ai>']\n**Cc**: ['\"lennert@airweave.ai\" <lennert@airweave.ai>']\n**Bcc**: []\n**Date**: 2025-10-06T19:24:29+00:00\n**Snippet**: Thanks for approving your draft! We&#39;ll proceed to print and ship your case to the USCIS. We&#39;ll send over next steps as soon as this is confirmed shipped to the USCIS. More updates to follow! —\n**Label Ids**: ['IMPORTANT', 'Label_3', 'CATEGORY_PERSONAL', 'INBOX']\n\n# Content\n\nThanks for approving your draft! We'll proceed to print and ship your case to the USCIS. We'll send over next steps as soon as this is confirmed shipped to the USCIS.\n\n  \n\nMore updates to follow!\n\n  \n\n  \n\n\n—\n\n**Robby Villanueva**\n\nHead of Legal Operations, Lighthouse\n\n[www.lighthousehq.com](http://www.lighthousehq.com/)\n\n[LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n\n![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ekwvfh2/han_8mburiu/ee3848a9.gif)  \n> On October 3, 2025 at 1:25 PM PDT <success@lighthousehq.com> wrote:\n> \n> \n> \n> Thank you, Daan! We reviewed your feedback and [actioned your requested edits](http://portal.lighthousehq.com/). The only item we didn't update is the GitHub stars data - we only have documentation of 2.7k stars - if you have the documentation for 3.4k stars, we can have this updated for you.\n> \n> \n> \n> Otherwise, once you approve your draft, we'll proceed to print and ship to the USCIS.\n> \n> \n> \n> \n> \n> \n> —\n> \n> **Robby Villanueva**\n> \n> Head of Legal Operations, Lighthouse\n> \n> [www.lighthousehq.com](http://www.lighthousehq.com/)\n> \n> [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> \n> \n> \n> \n> \n> > On October 3, 2025 at 2:44 AM PDT <daan@airweave.ai> wrote:\n> >\n> >\n> >\n> > Hi Robby,\n> >\n> >\n> >\n> > I left a couple very small comments. Once those are changed, it is ready!\n> >\n> >\n> >\n> > Best,\n> >\n> > Daan Manneke\n> >\n> >\n> >\n> >\n> >\n> >\n> > > On 2 Oct 2025, at 04:41, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > >\n> > >\n> > >\n> > >\n> > > Hi Daan - Gently checking in on my last email. [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/). All you need to do is approve the draft on your portal and we will proceed to print and ship to the USCIS for processing.\n> > >\n> > >\n> > >\n> > > Thank you!\n> > >\n> > >\n> > >\n> > >\n> > >\n> > >\n> > > —\n> > >\n> > > **Robby Villanueva**\n> > >\n> > > Head of Legal Operations, Lighthouse\n> > >\n> > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > >\n> > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > >\n> > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2ej7rbdi/han_8mburiu/24dea612.gif)\n> > >\n> > >\n> > >\n> > > > On September 29, 2025 at 9:44 PM PDT <success@lighthousehq.com> wrote:\n> > > >\n> > > >\n> > > >\n> > > > Hi Daan,\n> > > >\n> > > >\n> > > >\n> > > > Our team has finalized preparing your O-1A materials. Your talent and expertise in your field is captured in a concise, clear and obvious way for the officer.\n> > > >\n> > > >\n> > > >\n> > > > [Please login to your Lighthouse portal for your draft final petition](http://portal.lighthousehq.com/).\n> > > >\n> > > > Below is a list of pending items and clarifying questions:\n> > > >\n> > > >\n> > > >\n> > > > 1. Please note, since you indicated you have a dependent (legal spouse or child), once the O1 is approved, your dependent can join you for your visa appointment.\n> > > > 1. Each Applicant for a visa will need to fill out a DS-160, an appointment (can be completed together), and proof of the qualifying relationship (**original** marriage license for spouses and **original** birth certificates for children - with an English translation if needed).\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > Please let us know if you have any comments or edits. We’ll promptly incorporate and revert with a final copy for your confirmation to send this out to USCIS.\n> > > >\n> > > >\n> > > >\n> > > > As a reminder, we plan on filing your case as Consular, effective immediately, which means that in order to activate the O1, you will need to retrieve a U.S. visa stamp in your passport before returning to the U.S. in O1 status. You can complete this requirement as soon as the O1 is approved by booking an appointment at a US Embassy or Consulate abroad. Please note, you face no travel restrictions during the pendency of the O1 filing.\n> > > >\n> > > >\n> > > >\n> > > > Excited to be near the finish line!\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > —\n> > > >\n> > > > **Robby Villanueva**\n> > > >\n> > > > Head of Legal Operations, Lighthouse\n> > > >\n> > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > >\n> > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > >\n> > > >\n> > > >\n> > > >\n> > > >\n> > > > > On September 26, 2025 at 1:43 PM PDT <daan@airweave.ai> wrote:\n> > > > >\n> > > > >\n> > > > >\n> > > > > Hi Robby,\n> > > > >\n> > > > >\n> > > > >\n> > > > > The letter is signed!\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > >\n> > > > > > On 26 Sep 2025, at 00:10, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > Hi Daan - Thanks for your emails. Your portal reflects accurately on our end. We're just waiting for the advisory opinion letter to be signed. Your case is undergoing final legal review - we'll send this to you before end of week. Once the letter is signed and your case is approved by you, we can proceed to print and ship.\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > —\n> > > > > >\n> > > > > > **Robby Villanueva**\n> > > > > >\n> > > > > > Head of Legal Operations, Lighthouse\n> > > > > >\n> > > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > > >\n> > > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > > >\n> > > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eg3tw46/han_8mburiu/fb79af22.gif)\n> > > > > >\n> > > > > >\n> > > > > >\n> > > > > > > On September 24, 2025 at 12:19 AM PDT <daan@airweave.ai> wrote:\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Hi Robby,\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Thank you for the update! Also, the “High Compensation” looks good. But “Original Contribution” still does not. Can you maybe fix that?\n> > > > > > >\n> > > > > > > And what are the next steps after that is done and the letter is signed?\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > Thank you,\n> > > > > > >\n> > > > > > > Daan Manneke\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > >\n> > > > > > > > On 23 Sep 2025, at 23:45, Robby Villanueva <<success@lighthousehq.com>> wrote:\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > > Hi Daan,\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > > Yes, updated the email address to <sammiestoel@gmail.com> for the advisory opinion letter.\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > > Regarding the portal errors - I'll need to manually refresh those sections on our end. The high compensation and original contributions criteria should now reflect accurately.\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > > Thank you,\n> > > > > > > >\n> > > > > > > > Robby\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > >\n> > > > > > > > —\n> > > > > > > >\n> > > > > > > > **Robby Villanueva**\n> > > > > > > >\n> > > > > > > > Head of Legal Operations, Lighthouse\n> > > > > > > >\n> > > > > > > > [www.lighthousehq.com](http://www.lighthousehq.com/)\n> > > > > > > >\n> > > > > > > > [LinkedIn](https://www.linkedin.com/in/robert-villanueva-bb6134118/) | [Twitter](https://x.com/robbyvisanueva)\n> > > > > > > >\n> > > > > > > > ![Sent from Front](https://app.frontapp.com/api/1/noauth/companies/c05a3de3d478b0a3b524/seen/msg_2eeww192/han_8mburiu/1df71a51.gif)","airweave_system_metadata":{"source_name":"gmail","entity_type":"GmailMessageEntity","sync_id":"9ca6bbbb-ff87-4c48-8ca1-be62d4151b31","sync_job_id":"ef07f3d3-ac0b-41af-97d6-1d332ca5c613","hash":"db82747515f113d31304a4a2e82018fa53388bbcf9a070934913828e4c1d2785","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://mail.google.com/mail/u/0/#inbox/199bafb876ccd5f0","size":25715,"file_type":"html","mime_type":"text/html","local_path":"/tmp/airweave/processing/ef07f3d3-ac0b-41af-97d6-1d332ca5c613/36769ad2-d3f4-475a-abf4-3aa77f2ff5d4-Re Reply to Your O-1A visa application is ready for review.html","message_key":"msg_199bafb876ccd5f0","message_id":"199bafb876ccd5f0","subject":"Re: Reply to Your O-1A visa application is ready for review.","sent_at":"2025-10-06T19:24:29Z","internal_timestamp":"2025-10-06T19:24:29","thread_id":"19998ef97480ebee","sender":"Robby Villanueva <success@lighthousehq.com>","to":["Daan Manneke <daan@airweave.ai>"],"cc":["\"lennert@airweave.ai\" <lennert@airweave.ai>"],"bcc":[],"date":"2025-10-06T19:24:29Z","snippet":"Thanks for approving your draft! We&#39;ll proceed to print and ship your case to the USCIS. We&#39;ll send over next steps as soon as this is confirmed shipped to the USCIS. More updates to follow! —","label_ids":["IMPORTANT","Label_3","CATEGORY_PERSONAL","INBOX"],"internal_date":"2025-10-06T19:24:29","web_url_value":"https://mail.google.com/mail/u/0/#inbox/199bafb876ccd5f0","web_url":"https://mail.google.com/mail/u/0/#inbox/199bafb876ccd5f0"}
{"entity_id":"2b420d45-f5f8-800e-b61c-e524b765ed42","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","name":"Airweave Admin Runbook","entity_type":"NotionPageEntity"}],"name":"Set up connection with Airweave","created_at":"2025-11-23T01:26:00","updated_at":"2025-11-25T20:23:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Set up connection with Airweave\n**Path**: Page: Mistral → Page: Airweave Admin Runbook\n\n**Title**: Set up connection with Airweave\n**Content**: # SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n- **NTLM authentication** to call the SharePoint REST API\n\n- **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n- Testing - requires CRUD rights on selected test environment\n\n- Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n1. Navigate to **Collections** → Create or select a collection\n\n1. Click **Add Source Connection**\n\n1. Select **SharePoint 2019 On-Premise**\n\n1. Fill in credentials:\n\n  - Site URL\n\n  - SharePoint Username / Password / Domain\n\n  - AD Server / Username / Password / Domain / Search Base\n\n1. Click **Test Connection**\n\n1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n- Service account credentials\n\n- Network connectivity to SharePoint server and AD domain controller\n\n- Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"c098b5b115e0636a00c71b59436a4dc8d957c9f838eaec9c53820f3bfc07db35","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b420d45-f5f8-800e-b61c-e524b765ed42","parent_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","parent_type":"page_id","title":"Set up connection with Airweave","created_time":"2025-11-23T01:26:00","updated_time":"2025-11-25T20:23:00","content":"# SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n- **NTLM authentication** to call the SharePoint REST API\n\n- **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n- Testing - requires CRUD rights on selected test environment\n\n- Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n1. Navigate to **Collections** → Create or select a collection\n\n1. Click **Add Source Connection**\n\n1. Select **SharePoint 2019 On-Premise**\n\n1. Fill in credentials:\n\n  - Site URL\n\n  - SharePoint Username / Password / Domain\n\n  - AD Server / Username / Password / Domain / Search Base\n\n1. Click **Test Connection**\n\n1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n- Service account credentials\n\n- Network connectivity to SharePoint server and AD domain controller\n\n- Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"📋"},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/d4c0232c-26ba-447a-8104-9f7b723cf487/Screenshot_2025-11-22_at_17.24.03.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466U6P6S3EX%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215615Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDZ89ML4aF9xESrN54IWuhbG%2FK0xU6Cd4z%2FT0SjeCrQMwIhAMARz%2FsXtURbelZ%2F9P60OcH9BGfP4gVQyVpVtyR2UMmeKv8DCE4QABoMNjM3NDIzMTgzODA1IgxhDuaKW8o0%2FvjJvp8q3ANivQtLDH268aalwFl3oyNitY0wQsB2dNlmhdmciHiOIb04Z6vz51cfrX1kPFcYAWLwLy%2B7msGrmHDELBWPvHn%2Bpzwl%2FkE3pQzaRn5QMKlkOQT7SjZULGRemRPo0qufn%2FErdfL0JPTOEf0NXN4bo4SlWxi7zqgoguNqcls9rScO6P5JUkWGAXzBrLw41RHzGIx%2B2%2BmBhy33d04N0sLHFzdhApTeDQSfQwMxisilUCd2xcl12zFPlHHEUcMrOf8SajnxHlM1ECW9UUjs%2Ft5G6uO4%2BVwp0GFJSNYBWWcJugw0ibjAjp%2BGetf1sJO4o1NGQVRGd3pjNPL3B%2BAaV2UAixtbwoDHpo4NFWj6wWT0ytXZQjhQYR8HlExw5p%2F54IPi4NdtPXZK13E6lm19m4tXBC%2ByWzkEEvMyyhJ2BmCW6BvO8AenZlLNPVXIaZHBoBlNvXaYK%2FNaLOgjPJAa1%2B7aU31370vxM1H3N5lGbkw7qIM8Q60KfVBU9jQBYj0wMcKTquIRtffvkPGjf9FHOZSwpznaisgVQ5WUBJV7bKpqxSNuzXUaFsrPgiEvvvBgFR%2BiitWY9kM8IHbWJqJJwgU2FBm%2FySDkho5a%2FfOL9DfZSzqvI%2FSt9Zfxhz3ICf6lSzCK8cfJBjqkAZictajCsPkUg25i2ofcNCIOjZStPssnCNQND8WSIcAMs0eB18JpuLhD84xtCQIxSHSxwwo%2BqXPUvucb4fS5DPobUxbN2K9QW9t6cYnjKItiMaujhnMYRZwOe2p8Xk7uPEgYB4d72LsBVESmt5cOx3OO%2BGhJqJFiLkSnLSlpg9PDkDkucvQpneB4c8Q42RslJxbawrNcMhVFG9JEwMg04kkwz8WX&X-Amz-Signature=ca8d0f9fe1ab37c9e56f1e3b0469954254eef3760ad056eeaebc7ea739a9446d&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:56:15.526Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/Set-up-connection-with-Airweave-2b420d45f5f8800eb61ce524b765ed42","content_blocks_count":71,"max_depth":1,"web_url":"https://www.notion.so/Set-up-connection-with-Airweave-2b420d45f5f8800eb61ce524b765ed42"}
{"entity_id":"2b420d45-f5f8-8097-8640-e1f617efa7c1","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","name":"Airweave Admin Runbook","entity_type":"NotionPageEntity"}],"name":"Helm deploy","created_at":"2025-11-23T01:18:00","updated_at":"2025-11-23T02:29:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Helm deploy\n**Path**: Page: Mistral → Page: Airweave Admin Runbook\n\n**Title**: Helm deploy\n**Content**: # Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n- **Scalable**: Supports horizontal scaling of backend and workers.\n\n- **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n- **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n- Airweave Backend (FastAPI)\n\n- Airweave Frontend (React)\n\n- Temporal Workers\n\n- (Optional) PostgreSQL\n\n- (Optional) Redis\n\n- (Optional) Temporal Server\n\n- (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n- [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n- [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"89051ad125ef7f75e01e58675609e3fcf9549cf4433830c12d21d0a868b85391","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b420d45-f5f8-8097-8640-e1f617efa7c1","parent_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","parent_type":"page_id","title":"Helm deploy","created_time":"2025-11-23T01:18:00","updated_time":"2025-11-23T02:29:00","content":"# Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n- **Scalable**: Supports horizontal scaling of backend and workers.\n\n- **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n- **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n- Airweave Backend (FastAPI)\n\n- Airweave Frontend (React)\n\n- Temporal Workers\n\n- (Optional) PostgreSQL\n\n- (Optional) Redis\n\n- (Optional) Temporal Server\n\n- (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n- [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n- [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"external","external":{"url":"https://www.notion.so/icons/helm_gray.svg"}},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/574c43a6-0974-44b0-892e-e32b80285a94/Screenshot_2025-11-22_at_17.24.03.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4667NQ3DL5P%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215621Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDEvdkS1ojj3RZvIbVtkIy1TUJi2Jyylu%2B9WA5gOrOYQwIgNP0zZPcSPaN0JnPr%2BH%2FOlt4i5fPieKb6rkHasUeiScgq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDKmt14OwtnaZZ83mQyrcA16MVbsjlXwbIEgtw14c7RxkqimOAzhvpGls9Jc0oskhjDDSjhW%2FvyuS0AVUNmVcXsfVoaWPopfSZWHaU%2B%2BgjaG4QoUCIxWL33MraDHKrLEidgfXjHBJalxn6AaRWM95FBXjCYVfgpVv52020QwBR%2FKLpvG7cLEaWFXJIekqb0%2F59P36qYrehBZRT%2FoZYTwX7pV9nrBxpLgzsBbhO0bN8%2F3YRtbUeEcOMVpDo6H3qmZtZlvppjqLqKndUSSfrQ5XdRISMm2sCkmpMKXTYt7UtqKsCmZqCKvBmsQngQlQql3babvd%2B%2FU%2FKaahIUvOtHxPT0AuMksY4vNGBK%2F6L%2B99lWGEgMbCjZ8tn4yQxJwunmb4IM%2F85yEoHJfI%2FeaktQBUJZ7hZcntBVt8C6jVdlUSfRMUfF0Oy3P2nFVblDQqySphkbMMdbPkPsOO3cRHBq7mr%2FzZsogqwqxZnmPVa9SNM63GzRudBoFnVjrT3gCHuNjRvnuLxFMCaAc14EzSbUq4PNFTuqhuhiFJr0bR0k5tNhi7PRgpD4A%2FYDZRvjQsLl9Cj3iBKu1g6B217INILfNiKZlTgr4fgzOtCz4rtS8Z4uk%2FLNIRbK51x6hv2UYZrTXUmkehPhXty%2FXQS0HvMIrxx8kGOqUBiAWEI7yTMPpitFz2YnMCWE3DUZXEDa%2Fwz%2FdZgCdvh3yn3VpVCZOUdNiw20zzwtY8Hn0MeM9uv8XD4UtvtjlJ7yvDl1%2Bu2F2KWUKTU%2BklqAgKJTFPgkhTLLlKunaV5uQmjpnEB66%2BDMNGJnYM3dCANYjAKlHGYqsOjN6%2BYhvXiDk6GFtvG5fUFV0Y0a8vkehLTV6%2FLLmMa7GoB6yxcroVQm%2BUL2NP&X-Amz-Signature=0e647fe4b790745b6fbec8e95b05dbed7f0e9ea9859aa6517a21cb256dfaf274&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:56:21.888Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/Helm-deploy-2b420d45f5f880978640e1f617efa7c1","content_blocks_count":45,"max_depth":0,"web_url":"https://www.notion.so/Helm-deploy-2b420d45f5f880978640e1f617efa7c1"}
{"entity_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"Airweave Admin Runbook","created_at":"2025-11-23T01:16:00","updated_at":"2025-11-23T02:05:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Airweave Admin Runbook\n**Path**: Page: Mistral\n\n**Title**: Airweave Admin Runbook\n**Content**: This runbook helps you install Airweave on a Kubernetes cluster and point to a SharePoint 2019 environment for data and access syncing.\n\n📄 **[Helm deploy]** (Child Page)\n\n# Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n  - **Scalable**: Supports horizontal scaling of backend and workers.\n\n  - **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n  - **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n  - Airweave Backend (FastAPI)\n\n  - Airweave Frontend (React)\n\n  - Temporal Workers\n\n  - (Optional) PostgreSQL\n\n  - (Optional) Redis\n\n  - (Optional) Temporal Server\n\n  - (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n  - [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n  - [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.\n\n📄 **[Set up connection with Airweave]** (Child Page)\n\n# SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n  - **NTLM authentication** to call the SharePoint REST API\n\n  - **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n  - Testing - requires CRUD rights on selected test environment\n\n  - Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n  1. Navigate to **Collections** → Create or select a collection\n\n  1. Click **Add Source Connection**\n\n  1. Select **SharePoint 2019 On-Premise**\n\n  1. Fill in credentials:\n\n    - Site URL\n\n    - SharePoint Username / Password / Domain\n\n    - AD Server / Username / Password / Domain / Search Base\n\n  1. Click **Test Connection**\n\n  1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n  - Service account credentials\n\n  - Network connectivity to SharePoint server and AD domain controller\n\n  - Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)\n\n📄 **[Static integration tests (coming soon)]** (Child Page)\n\n📄 **[User Acceptance Tests]** (Child Page)\n\n## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n  1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n  1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n  1. Get first signal on perceived relevance and latency for realistic queries.\n\n  1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n  - Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n  - Content: SharePoint documents in selected sites and libraries\n\n  - Participants: ~10 employees across different departments and permission profiles\n\n  - Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n  1. **Environment ready**\n\n    1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n  1. **Test users and content ready**\n\n    1. At least 10 test users mapped one-to-one to real AD accounts\n\n    1. For each user, a small curated set of documents with clear expected visibility:\n\n      1. 5 private docs (only that user)\n\n      1. 5 team docs (shared with a specific group or team site)\n\n      1. 5 org wide docs (everyone)\n\n      1. A few docs they must *not* see but colleagues can\n\n  1. **Planned permission changes are documented with timestamps**\n\n    1. A list of documents where you will:\n\n      1. Grant access to a new user or group\n\n      1. Remove access from a user or group\n\n      - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n  1. **Time windows**\n\n    1. Agreed test window where sync jobs are running and stable\n\n    1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"6aaaa087342a6a511bf4641a821dbc50b127ad52c626f0d42024a4b42e42de46","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","parent_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","parent_type":"page_id","title":"Airweave Admin Runbook","created_time":"2025-11-23T01:16:00","updated_time":"2025-11-23T02:05:00","content":"This runbook helps you install Airweave on a Kubernetes cluster and point to a SharePoint 2019 environment for data and access syncing.\n\n📄 **[Helm deploy]** (Child Page)\n\n# Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n  - **Scalable**: Supports horizontal scaling of backend and workers.\n\n  - **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n  - **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n  - Airweave Backend (FastAPI)\n\n  - Airweave Frontend (React)\n\n  - Temporal Workers\n\n  - (Optional) PostgreSQL\n\n  - (Optional) Redis\n\n  - (Optional) Temporal Server\n\n  - (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n  - [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n  - [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.\n\n📄 **[Set up connection with Airweave]** (Child Page)\n\n# SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n  - **NTLM authentication** to call the SharePoint REST API\n\n  - **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n  - Testing - requires CRUD rights on selected test environment\n\n  - Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n  1. Navigate to **Collections** → Create or select a collection\n\n  1. Click **Add Source Connection**\n\n  1. Select **SharePoint 2019 On-Premise**\n\n  1. Fill in credentials:\n\n    - Site URL\n\n    - SharePoint Username / Password / Domain\n\n    - AD Server / Username / Password / Domain / Search Base\n\n  1. Click **Test Connection**\n\n  1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n  - Service account credentials\n\n  - Network connectivity to SharePoint server and AD domain controller\n\n  - Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)\n\n📄 **[Static integration tests (coming soon)]** (Child Page)\n\n📄 **[User Acceptance Tests]** (Child Page)\n\n## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n  1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n  1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n  1. Get first signal on perceived relevance and latency for realistic queries.\n\n  1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n  - Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n  - Content: SharePoint documents in selected sites and libraries\n\n  - Participants: ~10 employees across different departments and permission profiles\n\n  - Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n  1. **Environment ready**\n\n    1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n  1. **Test users and content ready**\n\n    1. At least 10 test users mapped one-to-one to real AD accounts\n\n    1. For each user, a small curated set of documents with clear expected visibility:\n\n      1. 5 private docs (only that user)\n\n      1. 5 team docs (shared with a specific group or team site)\n\n      1. 5 org wide docs (everyone)\n\n      1. A few docs they must *not* see but colleagues can\n\n  1. **Planned permission changes are documented with timestamps**\n\n    1. A list of documents where you will:\n\n      1. Grant access to a new user or group\n\n      1. Remove access from a user or group\n\n      - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n  1. **Time windows**\n\n    1. Agreed test window where sync jobs are running and stable\n\n    1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"📘"},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/661263b0-7398-46ab-9589-315c41c7f0d2/airweave.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466TWPG6CCZ%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215624Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIDSIQTDw3kC0t3i5n7Hi5KzGHFSaJHY0TL7fpePxqJ%2BfAiEA%2FZ0Fb8IdYg6aThCgx%2Fn3vBwZqRGabm58CxkgX6OPamsq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDBEgM1owtUBKNbuOcSrcA1HKH51ofKkP%2FH87bP9bYT5hk9EFoEgWlQ2MJKypCwss%2B8Mm8vWw7TTZuY0yV6RL1Ij3AURMucKl8hdCykqD1YFuLwKxBh5v%2FFsWrw3%2F7yzjWIkyc%2F0qQD1fLDGilkA3MQXAIVO5Nvewwd2RMe4i9zCUiL2bHS%2BCPviILf6aWjv8SCAdMPVgiP0WcV%2Frxn7UwfUnlyxfpg%2BT5tpJSt7KYkXpOlgPYXuZlblZILDfNTECHjfi9N2kCHVYoxBKZteXG%2BUfDiA04sF%2BnfTn0mC%2BDK2BRQrayX1bA0vdjVciYO7K2CLA994%2FN0U0At4bZ0%2B02iuieLZyPiRtq5ilsP%2BBETh5eKHfyJYUNS7q35yFjfkn%2BcQQiX6Gm%2Fd3IZJfudJMCos33stfx3LRVrxglhAkBfDM6nUJMMeCPQArHtsfG9SfixNre%2F%2BohIYjF6pq%2FzgwtaNjfmsGGPRZOGL3eDL%2FGSurQyMGY2l%2F3TVD7yrnC8YbQHByNs%2FBKgN4AQO97JGH2x6PYF70KSefylE8PYWXDKiZzW8AXUPkz%2BsLu4nSJyNlK1DY9rfEPG8uaZL0rJtNr5nNBxIgNye9lwqkbFJ%2Fmiw00KLUB5z9Wj1LWQ4JvYCSYK%2Fh0kJ%2FROaSygsUMK3xx8kGOqUBM0DFN01%2FCmzhArALziCwm0dD59Ao0Qr%2F1L1s6K%2FrdKq6nTZdqEaBd00HxmJp4zQdkpPgXA6qobDkjExqguH%2BZAuDnHsR8CjF0n1i7AYy5mLsH8DSuEUUiT6MRoj5ea1haw4UpCHMcLmeL%2Fy2JABgmdjuAEQzUzGr3OGkZKu8wa%2Blck7XbQDdUkNfomxzr9BqjwQxv%2BIRqt6N4TQdQcgKIOXJkFLH&X-Amz-Signature=8f0346678a3e37b96e7602c5d0db7ce9d4ab2bd2cac7fb6d8115e846b4dd75bf&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:56:24.945Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/Airweave-Admin-Runbook-2b420d45f5f8802fbdc0f3e3f7d2c3cf","content_blocks_count":159,"max_depth":3,"web_url":"https://www.notion.so/Airweave-Admin-Runbook-2b420d45f5f8802fbdc0f3e3f7d2c3cf"}
{"entity_id":"2b420d45-f5f8-80e0-b738-e7483e107bec","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","name":"Airweave Admin Runbook","entity_type":"NotionPageEntity"}],"name":"Static integration tests (coming soon)","created_at":"2025-11-23T01:24:00","updated_at":"2025-11-23T01:40:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Static integration tests (coming soon)\n**Path**: Page: Mistral → Page: Airweave Admin Runbook\n\n**Title**: Static integration tests (coming soon)\n**Content**: \n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"c58995c2698fd188424086ef90d9a4845266f9c5e17e0833bc768b6d4f041000","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b420d45-f5f8-80e0-b738-e7483e107bec","parent_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","parent_type":"page_id","title":"Static integration tests (coming soon)","created_time":"2025-11-23T01:24:00","updated_time":"2025-11-23T01:40:00","content":"","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"📝"},"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/Static-integration-tests-coming-soon-2b420d45f5f880e0b738e7483e107bec","content_blocks_count":0,"max_depth":0,"web_url":"https://www.notion.so/Static-integration-tests-coming-soon-2b420d45f5f880e0b738e7483e107bec"}
{"entity_id":"2ac20d45-f5f8-8003-af54-dddc703e0814","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"POC Vision and Over-delivery","created_at":"2025-11-15T20:42:00","updated_at":"2025-11-22T19:29:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: POC Vision and Over-delivery\n**Path**: Page: Mistral\n\n**Title**: POC Vision and Over-delivery\n**Content**: # **POC Vision**\n\n### **Ultimate Successful POC**\n\nA package they can deploy in minutes that runs flawlessly for the full trial period.\n\n**Deliverables**\n\n- A Helm chart they can install with minimal input.\n\n  - Supports re-using their infra resources such as Temporal and Redis.\n\n  - Supports direct integration into their Helm chart\n\n- Stable for at least 4 weeks without degradation or manual intervention.\n\n- Fully working SharePoint connector.\n\n- User specific endpoint where they can pass a user principal and receive permission resolved retrieval.\n\n- A clear manual on how to deploy, debug, contact us to resolve cases smoothly in unforeseen events.\n\n---\n\n# **Functional Requirements**\n\n### **Retrieval and Querying**\n\n- p95 search latency under two seconds.\n\n- Strong native integration with Mistral models (embedders and LLMs) and the open-source rerankers they use\n\n### **Sync and Ingestion**\n\n- p95 incremental sync under five minutes for data and permissions.\n\n- Permission sync time should remain lower than data sync time.\n\n- Initial full sync finishes < 1 day.\n\n- Telemetry that sends sync and latency metrics to us in real time → if they let us\n\n### **Quality and Testing**\n\n- Strong test suite that covers common flows and edge cases.\n\n- Acceptance checklist included.\n\n- Strong evidence of load testing with reproducible results.\n\n---\n\n# **Non Functional Requirements**\n\nThese are the overdelivery targets that show polish and enterprise readiness.\n\n### **Retrieval Quality Targets**\n\n- Run evals on a representative test set (>1M docs)\n\n### **Posture: Reliability, Delivery Rhythm, and Experience**\n\n- Get to know ASAP about customer, way-of-work and other questions\n\n- Consistent delivery cadence and proactive progress updates.\n\n  - Send updates twice a week\n\n    - Updates should include: demo recordings of new functionality along with instruction for Nayef on how to test himself\n\n- Weekly sync with Nayef and \n\n- Sync with the customer every 2 weeks\n\n- No silent failures, clear logging, and visible sync pipelines.\n\n- High reliability posture proven over the full trial window.\n\n- At least one in-person hackathon with Nayef in Paris\n\n- Show more connectors (like Outlook, maybe Atlassian, Google, tbd)\n\n---\n\n# **Open Questions We Need to Clarify**\n\n- Which specific customer they want to base the POC on\n\n- Number of employees and users in scope.\n\n- Expected size of corpus.\n\n  - how can we estimate this with the minimal information we will get from the beginning?\n\n- Deployment environment constraints or preferences.\n\n  - need to figure out ASAP if we can - with very close eyes - still SSH in their environment\n\n- Are other solutions being evaluated simultaneously?\n\n- LeChat / Mistal solution architecture\n\n  - SSO?\n\n  - private subdomain?\n\n  - general way of work with the customer\n\n---\n\n## From the SOW agreement:\n\nThe Supplier undertakes to deliver to Mistral AI the following Deliverables:\n\n- Running on‑prem deployment of SharePoint connector.\n\n- Reusable role-based access control (RBAC) module with index‑time access control lists (ACL) and query‑time enforcement.\n\n- Admin runbook and deployment documentation.\n\n- Test plan with results and acceptance checklist.\n\n### Timeline:\n\n- **Week ≤ 0: Internal Prep**\n\n→ We beginnen nu al het implementeren van de hele access control stack voor M365 Online, maar werken tegelijkertijd aan de validation test suite op de on-prem omgeving. Het idee is dat we nu al kunnen werken met M365 \n\n→ Betalen voor en opzetten van de self-hosted SharePoint environment op Azure\n\n→ Toegang krijgen tot een on-prem SharePoint environment\n\n  - lijntjes uitgooien (wellicht met bounty prize) via Bookface, Ophelia, en Investor Updates (dit pas na tekenen van POC contract)\n\n→ @Rauf Akdemir must seriously hand over onboarding, technical management and KT-ing to Felix and Daan, so nothing is obstructed\n\n- **Week 1: Kickoff**\n\n  - Discuss timelines, deliverables and checks&tests (UATs) with Mistral\n\n→ @Lennert maak slide deck voor eerste weekly sync met hele concrete uitgestippelde delivery timeline tot aan eind van POC. Ook vervolgstappen en vooruitblikken na POC: i.e., welke extra connectors, integratie in Le Chat, uitbreiden naar Atlassian en/of Google access controls\n\n→ @Rauf Akdemir think of very strong UAT suite (discuss with Matt? how did he do it?)\n\n→ Clear metrics, observability and process alignment - how Mistral works must already be answered by now\n\n- **Week 2: Full Access Control layer implementation and validation**\n\n  - 100% solution for M365 Online (includes p95 <5min sync metric)\n\n  - 100% solution, backed by **very** comprehensive test suite of over 300 validation tests of edge cases on on-prem test instance that host ourselves\n\n  - POC run on an existing enterprise on-prem deployment of Sharepoint\n\n→ Should be clear from description, but really making this clear in the timeline delivery will be extremely important\n\n- **Week 3: integration into Le Chat**\n\n  - working with Mistral Le Chat team on integrating Airweave in private/demo environment\n\n→ can also be an async process that we kick-off earlier tbh \n\n- **Week 4: Initial deployment at customer**\n\n  - Run first Airweave deployment\n\n    - Use handbook to setup environment variables\n\n    - Set up monitoring for air-gapped environment, and whatever may be sent to us.\n\n    - Work with networking team to make sure Airweave can access necessary resources (Mistral models, SharePoint) and Airweave is reachable by Le Chat, while still secure\n\n  - Run first syncs and anecdotal validations\n\n    - directly on Airweave / through Le Chat\n\n→ Align on how much can be sent to us. By now we must absolutely have a clear picture of the whole network architecture and process. Ideally we also have contact with the networking team already\n\n- **Week 5: SharePoint baseline sync and indexing tests**\n\n  - Run first department level sync of 500+ people\n\n  - Run UAT for at this scale\n\n→ Airweave should already be fully working here, and we should be able to coordinate with the infra team to set this up. UAT is long defined of course.\n\n- **Week 6: Hardening, scale tests, and reliability checks.**\n\n  - Scale up syncs, work with the infra team to monitor resource utilization, sync speed\n\n  - Finish entire organization sync\n\n→ Probably want to be in Paris for this. Stay very close with the team and make sure everything runs properly for them. These will be long hours and days of waiting for syncs to complete, and rerunning and redeploying until it works.\n\n- **Week 7:  UAT and test cases**\n\n  - Run UAT with defined test cases\n\n→ Close contract with the enterprise, to make sure they interpret things correctly\n\n- **Week 8: Handover, runbook, and acceptance review.**\n\n  - Present test plan results, load tests, telemetry summary with Mistral\n\n  - Show multiple connectors already built\n\n→ we must already have this slide ready in week 1\n\n---\n\n## Stakeholders\n\n### Mistral\n\n- Nayef (⭐️)\n\n- Ina\n\n- Lélio\n\n- Louis\n\n- [Solution Engineers]\n\n- [Account Manager to this particular customer]\n\n- [Mistral Le Chat Product Engineer that integrate Airweave → Nayef?]\n\n### Customer X\n\n- [Account Manager]\n\n- [Implementing Engineer]\n\n- [Sharepoint Admin]\n\n- [End-users of Mistral product]\n\n- [Infra Team]\n\n---\n\n### Actions after this session (2025-11-15)\n\n- [x] Schedule weekly sync with Nayef, Rauf, and Ina, (also add someone from Solutions team?) (@Lennert)\n\n---\n\n### TODOs for weekly check-in 2025-11-19 \n\n- [ ] Plan meeting with Nayef and solution team to get clarity on what their deployment process is like for the customer (@Lennert)\n\n- [x] Figure out whether there is a competing POC happening in parallel (@Lennert)\n\n- [x] Prep slide deck for check-in @Lennert \n\n- [ ] @Lennert Align on when they (at least Nayef and Solution engineer(s)) will be in Paris so we can book a visit. Possible weeks:\n\n  - ….\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"0902b305836188e2f3aabc18a033c4abef066b679e0699e3276496066c1537cb","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2ac20d45-f5f8-8003-af54-dddc703e0814","parent_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","parent_type":"page_id","title":"POC Vision and Over-delivery","created_time":"2025-11-15T20:42:00","updated_time":"2025-11-22T19:29:00","content":"# **POC Vision**\n\n### **Ultimate Successful POC**\n\nA package they can deploy in minutes that runs flawlessly for the full trial period.\n\n**Deliverables**\n\n- A Helm chart they can install with minimal input.\n\n  - Supports re-using their infra resources such as Temporal and Redis.\n\n  - Supports direct integration into their Helm chart\n\n- Stable for at least 4 weeks without degradation or manual intervention.\n\n- Fully working SharePoint connector.\n\n- User specific endpoint where they can pass a user principal and receive permission resolved retrieval.\n\n- A clear manual on how to deploy, debug, contact us to resolve cases smoothly in unforeseen events.\n\n---\n\n# **Functional Requirements**\n\n### **Retrieval and Querying**\n\n- p95 search latency under two seconds.\n\n- Strong native integration with Mistral models (embedders and LLMs) and the open-source rerankers they use\n\n### **Sync and Ingestion**\n\n- p95 incremental sync under five minutes for data and permissions.\n\n- Permission sync time should remain lower than data sync time.\n\n- Initial full sync finishes < 1 day.\n\n- Telemetry that sends sync and latency metrics to us in real time → if they let us\n\n### **Quality and Testing**\n\n- Strong test suite that covers common flows and edge cases.\n\n- Acceptance checklist included.\n\n- Strong evidence of load testing with reproducible results.\n\n---\n\n# **Non Functional Requirements**\n\nThese are the overdelivery targets that show polish and enterprise readiness.\n\n### **Retrieval Quality Targets**\n\n- Run evals on a representative test set (>1M docs)\n\n### **Posture: Reliability, Delivery Rhythm, and Experience**\n\n- Get to know ASAP about customer, way-of-work and other questions\n\n- Consistent delivery cadence and proactive progress updates.\n\n  - Send updates twice a week\n\n    - Updates should include: demo recordings of new functionality along with instruction for Nayef on how to test himself\n\n- Weekly sync with Nayef and \n\n- Sync with the customer every 2 weeks\n\n- No silent failures, clear logging, and visible sync pipelines.\n\n- High reliability posture proven over the full trial window.\n\n- At least one in-person hackathon with Nayef in Paris\n\n- Show more connectors (like Outlook, maybe Atlassian, Google, tbd)\n\n---\n\n# **Open Questions We Need to Clarify**\n\n- Which specific customer they want to base the POC on\n\n- Number of employees and users in scope.\n\n- Expected size of corpus.\n\n  - how can we estimate this with the minimal information we will get from the beginning?\n\n- Deployment environment constraints or preferences.\n\n  - need to figure out ASAP if we can - with very close eyes - still SSH in their environment\n\n- Are other solutions being evaluated simultaneously?\n\n- LeChat / Mistal solution architecture\n\n  - SSO?\n\n  - private subdomain?\n\n  - general way of work with the customer\n\n---\n\n## From the SOW agreement:\n\nThe Supplier undertakes to deliver to Mistral AI the following Deliverables:\n\n- Running on‑prem deployment of SharePoint connector.\n\n- Reusable role-based access control (RBAC) module with index‑time access control lists (ACL) and query‑time enforcement.\n\n- Admin runbook and deployment documentation.\n\n- Test plan with results and acceptance checklist.\n\n### Timeline:\n\n- **Week ≤ 0: Internal Prep**\n\n→ We beginnen nu al het implementeren van de hele access control stack voor M365 Online, maar werken tegelijkertijd aan de validation test suite op de on-prem omgeving. Het idee is dat we nu al kunnen werken met M365 \n\n→ Betalen voor en opzetten van de self-hosted SharePoint environment op Azure\n\n→ Toegang krijgen tot een on-prem SharePoint environment\n\n  - lijntjes uitgooien (wellicht met bounty prize) via Bookface, Ophelia, en Investor Updates (dit pas na tekenen van POC contract)\n\n→ @Rauf Akdemir must seriously hand over onboarding, technical management and KT-ing to Felix and Daan, so nothing is obstructed\n\n- **Week 1: Kickoff**\n\n  - Discuss timelines, deliverables and checks&tests (UATs) with Mistral\n\n→ @Lennert maak slide deck voor eerste weekly sync met hele concrete uitgestippelde delivery timeline tot aan eind van POC. Ook vervolgstappen en vooruitblikken na POC: i.e., welke extra connectors, integratie in Le Chat, uitbreiden naar Atlassian en/of Google access controls\n\n→ @Rauf Akdemir think of very strong UAT suite (discuss with Matt? how did he do it?)\n\n→ Clear metrics, observability and process alignment - how Mistral works must already be answered by now\n\n- **Week 2: Full Access Control layer implementation and validation**\n\n  - 100% solution for M365 Online (includes p95 <5min sync metric)\n\n  - 100% solution, backed by **very** comprehensive test suite of over 300 validation tests of edge cases on on-prem test instance that host ourselves\n\n  - POC run on an existing enterprise on-prem deployment of Sharepoint\n\n→ Should be clear from description, but really making this clear in the timeline delivery will be extremely important\n\n- **Week 3: integration into Le Chat**\n\n  - working with Mistral Le Chat team on integrating Airweave in private/demo environment\n\n→ can also be an async process that we kick-off earlier tbh \n\n- **Week 4: Initial deployment at customer**\n\n  - Run first Airweave deployment\n\n    - Use handbook to setup environment variables\n\n    - Set up monitoring for air-gapped environment, and whatever may be sent to us.\n\n    - Work with networking team to make sure Airweave can access necessary resources (Mistral models, SharePoint) and Airweave is reachable by Le Chat, while still secure\n\n  - Run first syncs and anecdotal validations\n\n    - directly on Airweave / through Le Chat\n\n→ Align on how much can be sent to us. By now we must absolutely have a clear picture of the whole network architecture and process. Ideally we also have contact with the networking team already\n\n- **Week 5: SharePoint baseline sync and indexing tests**\n\n  - Run first department level sync of 500+ people\n\n  - Run UAT for at this scale\n\n→ Airweave should already be fully working here, and we should be able to coordinate with the infra team to set this up. UAT is long defined of course.\n\n- **Week 6: Hardening, scale tests, and reliability checks.**\n\n  - Scale up syncs, work with the infra team to monitor resource utilization, sync speed\n\n  - Finish entire organization sync\n\n→ Probably want to be in Paris for this. Stay very close with the team and make sure everything runs properly for them. These will be long hours and days of waiting for syncs to complete, and rerunning and redeploying until it works.\n\n- **Week 7:  UAT and test cases**\n\n  - Run UAT with defined test cases\n\n→ Close contract with the enterprise, to make sure they interpret things correctly\n\n- **Week 8: Handover, runbook, and acceptance review.**\n\n  - Present test plan results, load tests, telemetry summary with Mistral\n\n  - Show multiple connectors already built\n\n→ we must already have this slide ready in week 1\n\n---\n\n## Stakeholders\n\n### Mistral\n\n- Nayef (⭐️)\n\n- Ina\n\n- Lélio\n\n- Louis\n\n- [Solution Engineers]\n\n- [Account Manager to this particular customer]\n\n- [Mistral Le Chat Product Engineer that integrate Airweave → Nayef?]\n\n### Customer X\n\n- [Account Manager]\n\n- [Implementing Engineer]\n\n- [Sharepoint Admin]\n\n- [End-users of Mistral product]\n\n- [Infra Team]\n\n---\n\n### Actions after this session (2025-11-15)\n\n- [x] Schedule weekly sync with Nayef, Rauf, and Ina, (also add someone from Solutions team?) (@Lennert)\n\n---\n\n### TODOs for weekly check-in 2025-11-19 \n\n- [ ] Plan meeting with Nayef and solution team to get clarity on what their deployment process is like for the customer (@Lennert)\n\n- [x] Figure out whether there is a competing POC happening in parallel (@Lennert)\n\n- [x] Prep slide deck for check-in @Lennert \n\n- [ ] @Lennert Align on when they (at least Nayef and Solution engineer(s)) will be in Paris so we can book a visit. Possible weeks:\n\n  - ….","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"🇫🇷"},"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/POC-Vision-and-Over-delivery-2ac20d45f5f88003af54dddc703e0814","content_blocks_count":130,"max_depth":2,"web_url":"https://www.notion.so/POC-Vision-and-Over-delivery-2ac20d45f5f88003af54dddc703e0814"}
{"entity_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"Mistral x Airweave","created_at":"2025-09-23T17:11:00","updated_at":"2025-11-20T21:56:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Mistral x Airweave\n**Path**: Page: Mistral\n\n**Title**: Mistral x Airweave\n**Content**: 📄 **[Solution Architecture]** (Child Page)\n\nThe system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n  - System of record for entities and metadata\n\n  - CRUD operations and durability\n\n  - Entity hash comparison for idempotent sync\n\n  - Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n  - Vector database storing embeddings and payloads\n\n  - Supports hybrid and semantic search with filters\n\n  - Can be replaced by different Vector Database\n\n### 3. Redis\n\n  - Pub/Sub for sync and cache invalidation\n\n  - Low‑latency caching\n\n  - In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n  - Public endpoints for UI\n\n  - Triggers and schedules syncs\n\n  - Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n  - TypeScript React application\n\n  - Collections and sync schedule management\n\n### 3. Temporal\n\n  - Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n  - Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n  - Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n  - Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n  - Source permissions are ingested and normalized\n\n  - *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n  - Build in‑memory transitive permission principals from Postgres\n\n  - Load or refresh into Redis for fast evaluation\n\n## Summary\n\nThis document outlines Airweave’s self-hosted data sync pipeline for Mistral that:\n\n1. runs on-premise, optionally air-gapped,\n\n1. ingests from SharePoint,\n\n1. replicates the RBAC graph (users, groups, ACLs) with read-only scope, and\n\n1. emits raw chunks + RBAC to an S3-compatible object store.\n\n1. can be extended to an Airweave-native neural retrieval layer with Mistral embeddings/LLMs\n\n---\n\n## Proposed Architecture\n\n- **Sources:** SharePoint on-prem first; extensible to others later.\n\n- **Airweave Data Sync (k8s, self-hosted):** crawl/normalize content, RBAC replication, chunking, incremental real-time sync:\n\n- **Destinations (choose one or both):**\n\n  - **S3-compatible object store (recommended)** — `airweave-outbound/` in JSONL/Parquet\n\n- **Retrieval layer **either, \n\n  1. Airweave retrieval layer (self-hosted) using **Mistral embeddings, OCR, and LLMs **or,\n\n  1. Mistral’s native retrieval stack.\n\n[Image: airweave-mistral-high-level.png]\n\n### How it works\n\n1. **Connect and configure source** (service/principal account; read-only).\n\n1. **Sync job** produces two streams:\n\n  - **Chunks** (content units)\n\n  - **RBAC graph** (users, groups, memberships, permissions)\n\n1. Airweave writes to:\n\n  - **S3-compatible storage**\n\n  - **Qdrant** for retrieval (used through Airweave API\n\n---\n\n## S3 layout\n\n```xml\nmistral-airweave-bucket/\n└── airweave-outbound/                                 # Data FROM Airweave\n    └── collections/{collection_id}/\n        └── {source_connection_id}/\n            ├── entities/\n            │   ├── {ts}_{entity_type}_{batch_id}.jsonl\n            │   └── ...\n            ├── chunks/\n            │   ├── {ts}_{batch_id}.jsonl\n            │   └── ...\n            └── rbac/\n                ├── users_{ts}.jsonl\n                ├── groups_{ts}.jsonl\n                ├── memberships_{ts}.jsonl\n                └── acls_{ts}.json\n```\n\n## Data formats\n\n### Outbound chunk (JSONL)\n\n```json\n{\n  \"chunk_id\": \"sp_doc_42#3\",\n  \"doc_id\": \"sp_doc_42\",\n  \"entity_type\": \"SharePointDocument\",\n  \"source_path\": \"/sites/Eng/Docs/specs/42.docx\",\n  \"content\": \"text of chunk...\",\n  \"chunk_index\": 3,\n  \"metadata\": {\n    \"site\": \"Eng\",\n    \"library\": \"Docs\",\n    \"filetype\": \"docx\",\n    \"last_modified\": \"2025-09-20T12:34:56Z\",\n    \"checksum\": \"sha256:...\"\n  },\n  \"access_principals\": [\"user:alice@corp\", \"group:eng-readers\"],\n  \"sync\": {\n    \"sync_id\": \"uuid\",\n    \"action\": \"insert|update|delete\",\n    \"version\": 17\n  }\n}\n```\n\n---\n\n## Deployment and ops\n\n- **Self-hosted Helm**, air-gapped supported (images/licensing pre-loaded).\n\n- **Single-node VM install available** (for environments without k8s).\n\n- Telemetry **OFF by default**; opt-in only when not air-gapped.\n\n---\n\n## **Integration options on your side**\n\n- **Object store route (preferred):** S3-compatible bucket notifications → Kafka/NATS/Webhook; or directory polling.\n\n---\n\n## **Security principles**\n\n- Read-only connectors; **least-permissive export**.\n\n- No credential egress; secrets in your KMS.\n\n---\n\n## Potential path to search\n\nWhen/if you want retrieval:\n\n- Enable dual-destination: continue S3, plus Airweave Vector DB (self-hosted)\n\n- Accommodate Mistral embeddings/LLMs; we tune chunking/recency/rerank for Mistral models.\n\n- Airweave Search API respects the same RBAC graph (policy-aware retrieval).\n\n[Image: image.png]\n\n📄 **[Mistral x Airweave POC]** (Child Page)\n\n## Context & Goals\n\n  - **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n  - **Scope:**\n\n    - Connect and index SharePoint content through Airweave.\n\n    - Serve retrievals, embedding and reranking through Mistral.\n\n    - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n  - Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n  - Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n  1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n  1. **Performance:** <2s latency for query-response - p95.\n\n  1. **Security:** Only deployed Mistral applications can access Airweave. \n\n  1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n  1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n  1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n  1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n  1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n  - Measure search quality, search and sync latency in an on-prem environment\n\n  - Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n  - Measure involvement necessary from both parties\n\n    - how many hours of infra rollout hours are necessary?\n\n    - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n  - Angles for modularization\n\n    - what must modules be drop-in replaceable?\n\n    - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"27642c781d46ed5491a4f8e0975ee5703f12d746831745857a6b5ea66bc8fd92","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","parent_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","parent_type":"page_id","title":"Mistral x Airweave","created_time":"2025-09-23T17:11:00","updated_time":"2025-11-20T21:56:00","content":"📄 **[Solution Architecture]** (Child Page)\n\nThe system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n  - System of record for entities and metadata\n\n  - CRUD operations and durability\n\n  - Entity hash comparison for idempotent sync\n\n  - Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n  - Vector database storing embeddings and payloads\n\n  - Supports hybrid and semantic search with filters\n\n  - Can be replaced by different Vector Database\n\n### 3. Redis\n\n  - Pub/Sub for sync and cache invalidation\n\n  - Low‑latency caching\n\n  - In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n  - Public endpoints for UI\n\n  - Triggers and schedules syncs\n\n  - Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n  - TypeScript React application\n\n  - Collections and sync schedule management\n\n### 3. Temporal\n\n  - Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n  - Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n  - Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n  - Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n  - Source permissions are ingested and normalized\n\n  - *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n  - Build in‑memory transitive permission principals from Postgres\n\n  - Load or refresh into Redis for fast evaluation\n\n## Summary\n\nThis document outlines Airweave’s self-hosted data sync pipeline for Mistral that:\n\n1. runs on-premise, optionally air-gapped,\n\n1. ingests from SharePoint,\n\n1. replicates the RBAC graph (users, groups, ACLs) with read-only scope, and\n\n1. emits raw chunks + RBAC to an S3-compatible object store.\n\n1. can be extended to an Airweave-native neural retrieval layer with Mistral embeddings/LLMs\n\n---\n\n## Proposed Architecture\n\n- **Sources:** SharePoint on-prem first; extensible to others later.\n\n- **Airweave Data Sync (k8s, self-hosted):** crawl/normalize content, RBAC replication, chunking, incremental real-time sync:\n\n- **Destinations (choose one or both):**\n\n  - **S3-compatible object store (recommended)** — `airweave-outbound/` in JSONL/Parquet\n\n- **Retrieval layer **either, \n\n  1. Airweave retrieval layer (self-hosted) using **Mistral embeddings, OCR, and LLMs **or,\n\n  1. Mistral’s native retrieval stack.\n\n[Image: airweave-mistral-high-level.png]\n\n### How it works\n\n1. **Connect and configure source** (service/principal account; read-only).\n\n1. **Sync job** produces two streams:\n\n  - **Chunks** (content units)\n\n  - **RBAC graph** (users, groups, memberships, permissions)\n\n1. Airweave writes to:\n\n  - **S3-compatible storage**\n\n  - **Qdrant** for retrieval (used through Airweave API\n\n---\n\n## S3 layout\n\n```xml\nmistral-airweave-bucket/\n└── airweave-outbound/                                 # Data FROM Airweave\n    └── collections/{collection_id}/\n        └── {source_connection_id}/\n            ├── entities/\n            │   ├── {ts}_{entity_type}_{batch_id}.jsonl\n            │   └── ...\n            ├── chunks/\n            │   ├── {ts}_{batch_id}.jsonl\n            │   └── ...\n            └── rbac/\n                ├── users_{ts}.jsonl\n                ├── groups_{ts}.jsonl\n                ├── memberships_{ts}.jsonl\n                └── acls_{ts}.json\n```\n\n## Data formats\n\n### Outbound chunk (JSONL)\n\n```json\n{\n  \"chunk_id\": \"sp_doc_42#3\",\n  \"doc_id\": \"sp_doc_42\",\n  \"entity_type\": \"SharePointDocument\",\n  \"source_path\": \"/sites/Eng/Docs/specs/42.docx\",\n  \"content\": \"text of chunk...\",\n  \"chunk_index\": 3,\n  \"metadata\": {\n    \"site\": \"Eng\",\n    \"library\": \"Docs\",\n    \"filetype\": \"docx\",\n    \"last_modified\": \"2025-09-20T12:34:56Z\",\n    \"checksum\": \"sha256:...\"\n  },\n  \"access_principals\": [\"user:alice@corp\", \"group:eng-readers\"],\n  \"sync\": {\n    \"sync_id\": \"uuid\",\n    \"action\": \"insert|update|delete\",\n    \"version\": 17\n  }\n}\n```\n\n---\n\n## Deployment and ops\n\n- **Self-hosted Helm**, air-gapped supported (images/licensing pre-loaded).\n\n- **Single-node VM install available** (for environments without k8s).\n\n- Telemetry **OFF by default**; opt-in only when not air-gapped.\n\n---\n\n## **Integration options on your side**\n\n- **Object store route (preferred):** S3-compatible bucket notifications → Kafka/NATS/Webhook; or directory polling.\n\n---\n\n## **Security principles**\n\n- Read-only connectors; **least-permissive export**.\n\n- No credential egress; secrets in your KMS.\n\n---\n\n## Potential path to search\n\nWhen/if you want retrieval:\n\n- Enable dual-destination: continue S3, plus Airweave Vector DB (self-hosted)\n\n- Accommodate Mistral embeddings/LLMs; we tune chunking/recency/rerank for Mistral models.\n\n- Airweave Search API respects the same RBAC graph (policy-aware retrieval).\n\n[Image: image.png]\n\n📄 **[Mistral x Airweave POC]** (Child Page)\n\n## Context & Goals\n\n  - **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n  - **Scope:**\n\n    - Connect and index SharePoint content through Airweave.\n\n    - Serve retrievals, embedding and reranking through Mistral.\n\n    - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n  - Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n  - Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n  1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n  1. **Performance:** <2s latency for query-response - p95.\n\n  1. **Security:** Only deployed Mistral applications can access Airweave. \n\n  1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n  1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n  1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n  1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n  1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n  - Measure search quality, search and sync latency in an on-prem environment\n\n  - Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n  - Measure involvement necessary from both parties\n\n    - how many hours of infra rollout hours are necessary?\n\n    - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n  - Angles for modularization\n\n    - what must modules be drop-in replaceable?\n\n    - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"external","external":{"url":"https://www.notion.so/icons/wind_lightgray.svg"}},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/cd92a158-ed99-4989-934d-c8abfade0213/Twitter_banner_-_2.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466TRKAA2QA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215656Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIB6Qdy%2B8ata36lWYXXKY3mb4xrIY%2BVy4zEXfOrudtlmkAiEAhD6s3R6afLa6Fjlo7Rmo8z8CrywtsVSSWXsuDiLgg%2BMq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDPtZ6MJAZb9t5FdRxircA6cUXIj%2BFuWwMSiTFZ5PwlrFhemmywBva%2Flno9XZsmJdgBwlI5lSRjOkHcsFhg3Gzghj6ZOimB%2FtEX5hsXtXKriXv%2F%2FjEf2Ie3QOuSe6B7wkvW62JZe8pYm5qhDBL99RM5T6KxvMC%2BdlYq4S92XMBvM4vBtvnyNJ2X%2FZMg3cY67xbgVq0vlELLB513MwzCWY56MonC%2BlB5aKoSaMhvarTIEMWbWTfUw8YrFaAhXL9AG9QZaEjr6vznRDQBP12FTdTjnF11Ps%2BL9nH%2Fq5T%2FIwl%2FU16vbpGmS7yDsOouU0ZKdahmHizy%2BKojH4K9CVglKOkEc3yjjjbZjDDne0XfdTswC7wUOdNCbdI4609%2BKa9nUFPgzPqv6Jkap%2FyFxrK4B2cOal0Pqo3Yb9qUMS3jQxmsKyiXcB%2FP%2BX0XqDWGAdre4XRqL3dZSXzj%2F8PAFBqnF4Mkp99vfEKCvZYgynCNSHBp8bojlkKH8CGJC6by%2BPAf7XNVFkdNIryup%2BHiAfMrrAVfLzTZERmxHSoF55a2n3f8o28XFbY7cXSFxuQCct0d6YP%2BbK6XfJtLnIWIwsl21PpwL%2Fet2zgkxEDNsvYQpVrwKa0LrJHb5bixlRcD32ebL1R%2F5CfNbLE6jWU5xUMK7xx8kGOqUB4Qy5gjGBINZJWQ7E9ee5uq2%2FBptgRFDq0hAWAbcV%2F9AlXCkNLiOsz%2Bys0UdspAHArdpQo%2Blv%2FQPJTPWHh%2FpRVxN5F19gXuvSgGjFo0YONyIXdVAo9XewZXLzKTqeYxBVZ5IJE2dinqy%2BPlLJ5z0wAnRMpAOnJ9gzNdGnj%2FfEWSqekihma9GnZu6jTWJlI962dUFKxLcKAjyO%2BE%2FnzGfPJI5NEMqP&X-Amz-Signature=b6407c3fd1be6fac168ce5c896b523af9a52e409af2230562805da545ccc0a44&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:56:56.634Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/Mistral-x-Airweave-27720d45f5f8803599fcdf7f6a327c8b","content_blocks_count":136,"max_depth":2,"web_url":"https://www.notion.so/Mistral-x-Airweave-27720d45f5f8803599fcdf7f6a327c8b"}
{"entity_id":"24920d45-f5f8-80c8-8625-ff86a664649c","breadcrumbs":[],"name":"SF Relocation to discuss & do","created_at":"2025-08-08T07:34:00","updated_at":"2025-08-21T08:20:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: SF Relocation to discuss & do\n\n**Title**: SF Relocation to discuss & do\n**Content**: - Discuss neighborhood\n\n- geolocation (binnen of buiten de stad)\n\n- ⁠wel of niet hacker house (voor mij en lennert) vs dedicated office\n\n- ⁠wel of niet furnished\n\n- ⁠wel of niet 1 huis overlaten post SF haul (office overlaten?)\n\n- Ewan in artikel\n\n- kantoor in ams houden?\n\n**[Table]**\n\n### **Suburbia 5BR+ 3BA+**\n\n**TLDR:** \n\n*As expected, er zijn wel opties voor hackerhouse als we bereid zijn meer naar het Zuiden te gaan.*\n\n[https://www.zillow.com/homedetails/740-Fairfield-Rd-Burlingame-CA-](https://www.zillow.com/homedetails/740-Fairfield-Rd-Burlingame-CA-94010/15517589_zpid/)\n\n[https://www.zillow.com/homedetails/1285-Tartan-Trail-Rd-Hillsborough-CA-94010/15535101_zpid/](https://www.zillow.com/homedetails/1285-Tartan-Trail-Rd-Hillsborough-CA-94010/15535101_zpid/)?\n\n[https://www.zillow.com/homedetails/1082-Lupin-Way-San-Carlos-CA-94070/15557997_zpid/](https://www.zillow.com/homedetails/1082-Lupin-Way-San-Carlos-CA-94070/15557997_zpid/)\n\n[https://www.zillow.com/homedetails/2124-Oakley-Ave-Menlo-Park-CA-94025/15598543_zpid/](https://www.zillow.com/homedetails/2124-Oakley-Ave-Menlo-Park-CA-94025/15598543_zpid/)\n\n### Marina\n\n- (D&F) [https://www.zillow.com/homedetails/2357-N-Point-St-San-Francisco-CA-94123/2090302930_zpid/](https://www.zillow.com/homedetails/2357-N-Point-St-San-Francisco-CA-94123/2090302930_zpid/) \n\n### North beach\n\n- (D&F) [https://www.zillow.com/homedetails/409-Lombard-St-San-Francisco-CA-94133/2083352714_zpid/](https://www.zillow.com/homedetails/409-Lombard-St-San-Francisco-CA-94133/2083352714_zpid/) \n\n- [https://www.airbnb.nl/rooms/37093943?adults=2&check_in=2025-10-01&check_out=2026-10-01&location=San Francisco%2C Californië%2C Verenigde Staten&search_mode=regular_search&children=0&infants=0&pets=0&source_impression_id=p3_1755096162_P3Almp3CHktK3jyg&previous_page_section_name=1001&federated_search_id=7d38e61f-2437-4d0c-bf45-f673c93d8ecf] \n\n- 6 units: [https://www.zillow.com/apartments/san-francisco-ca/the-bay/5Xhzkj/](https://www.zillow.com/apartments/san-francisco-ca/the-bay/5Xhzkj/)\n\n### Outer richmond\n\n- (D&F) [https://www.zillow.com/homedetails/250-Point-Lobos-Ave-APT-402-San-Francisco-CA-94121/455892810_zpid/](https://www.zillow.com/homedetails/250-Point-Lobos-Ave-APT-402-San-Francisco-CA-94121/455892810_zpid/)\n\n### **Mission**\n\n- [https://www.zillow.com/homedetails/2861-Folsom-St-San-Francisco-CA-94110/2080529477_zpid/](https://www.zillow.com/homedetails/2861-Folsom-St-San-Francisco-CA-94110/2080529477_zpid/)?\n\n### Richmond\n\n- Offices:\n\n  - [https://www.loopnet.com/Listing/5300-5320-Geary-Blvd-San-Francisco-CA/35462138/](https://www.loopnet.com/Listing/5300-5320-Geary-Blvd-San-Francisco-CA/35462138/)\n\n### Sunset\n\n- Offices:\n\n  - [https://www.loopnet.com/Listing/1927-1929-Taraval-St-San-Francisco-CA/35280379/](https://www.loopnet.com/Listing/1927-1929-Taraval-St-San-Francisco-CA/35280379/)\n\n  - [https://www.loopnet.com/Listing/1727-1729-Taraval-St-San-Francisco-CA/35127003/](https://www.loopnet.com/Listing/1727-1729-Taraval-St-San-Francisco-CA/35127003/)\n\n  - [https://www.loopnet.com/Listing/2201-2209-Irving-St-San-Francisco-CA/20361643/](https://www.loopnet.com/Listing/2201-2209-Irving-St-San-Francisco-CA/20361643/)\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"e7fefbf49138ea8c08459e6df4cbfd3701cbba5efa9e5746fef7ba5f81d32bbc","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"24920d45-f5f8-80c8-8625-ff86a664649c","parent_id":"25620d45-f5f8-8090-8c92-e612e6c2e6c3","parent_type":"page_id","title":"SF Relocation to discuss & do","created_time":"2025-08-08T07:34:00","updated_time":"2025-08-21T08:20:00","content":"- Discuss neighborhood\n\n- geolocation (binnen of buiten de stad)\n\n- ⁠wel of niet hacker house (voor mij en lennert) vs dedicated office\n\n- ⁠wel of niet furnished\n\n- ⁠wel of niet 1 huis overlaten post SF haul (office overlaten?)\n\n- Ewan in artikel\n\n- kantoor in ams houden?\n\n**[Table]**\n\n### **Suburbia 5BR+ 3BA+**\n\n**TLDR:** \n\n*As expected, er zijn wel opties voor hackerhouse als we bereid zijn meer naar het Zuiden te gaan.*\n\n[https://www.zillow.com/homedetails/740-Fairfield-Rd-Burlingame-CA-](https://www.zillow.com/homedetails/740-Fairfield-Rd-Burlingame-CA-94010/15517589_zpid/)\n\n[https://www.zillow.com/homedetails/1285-Tartan-Trail-Rd-Hillsborough-CA-94010/15535101_zpid/](https://www.zillow.com/homedetails/1285-Tartan-Trail-Rd-Hillsborough-CA-94010/15535101_zpid/)?\n\n[https://www.zillow.com/homedetails/1082-Lupin-Way-San-Carlos-CA-94070/15557997_zpid/](https://www.zillow.com/homedetails/1082-Lupin-Way-San-Carlos-CA-94070/15557997_zpid/)\n\n[https://www.zillow.com/homedetails/2124-Oakley-Ave-Menlo-Park-CA-94025/15598543_zpid/](https://www.zillow.com/homedetails/2124-Oakley-Ave-Menlo-Park-CA-94025/15598543_zpid/)\n\n### Marina\n\n- (D&F) [https://www.zillow.com/homedetails/2357-N-Point-St-San-Francisco-CA-94123/2090302930_zpid/](https://www.zillow.com/homedetails/2357-N-Point-St-San-Francisco-CA-94123/2090302930_zpid/) \n\n### North beach\n\n- (D&F) [https://www.zillow.com/homedetails/409-Lombard-St-San-Francisco-CA-94133/2083352714_zpid/](https://www.zillow.com/homedetails/409-Lombard-St-San-Francisco-CA-94133/2083352714_zpid/) \n\n- [https://www.airbnb.nl/rooms/37093943?adults=2&check_in=2025-10-01&check_out=2026-10-01&location=San Francisco%2C Californië%2C Verenigde Staten&search_mode=regular_search&children=0&infants=0&pets=0&source_impression_id=p3_1755096162_P3Almp3CHktK3jyg&previous_page_section_name=1001&federated_search_id=7d38e61f-2437-4d0c-bf45-f673c93d8ecf] \n\n- 6 units: [https://www.zillow.com/apartments/san-francisco-ca/the-bay/5Xhzkj/](https://www.zillow.com/apartments/san-francisco-ca/the-bay/5Xhzkj/)\n\n### Outer richmond\n\n- (D&F) [https://www.zillow.com/homedetails/250-Point-Lobos-Ave-APT-402-San-Francisco-CA-94121/455892810_zpid/](https://www.zillow.com/homedetails/250-Point-Lobos-Ave-APT-402-San-Francisco-CA-94121/455892810_zpid/)\n\n### **Mission**\n\n- [https://www.zillow.com/homedetails/2861-Folsom-St-San-Francisco-CA-94110/2080529477_zpid/](https://www.zillow.com/homedetails/2861-Folsom-St-San-Francisco-CA-94110/2080529477_zpid/)?\n\n### Richmond\n\n- Offices:\n\n  - [https://www.loopnet.com/Listing/5300-5320-Geary-Blvd-San-Francisco-CA/35462138/](https://www.loopnet.com/Listing/5300-5320-Geary-Blvd-San-Francisco-CA/35462138/)\n\n### Sunset\n\n- Offices:\n\n  - [https://www.loopnet.com/Listing/1927-1929-Taraval-St-San-Francisco-CA/35280379/](https://www.loopnet.com/Listing/1927-1929-Taraval-St-San-Francisco-CA/35280379/)\n\n  - [https://www.loopnet.com/Listing/1727-1729-Taraval-St-San-Francisco-CA/35127003/](https://www.loopnet.com/Listing/1727-1729-Taraval-St-San-Francisco-CA/35127003/)\n\n  - [https://www.loopnet.com/Listing/2201-2209-Irving-St-San-Francisco-CA/20361643/](https://www.loopnet.com/Listing/2201-2209-Irving-St-San-Francisco-CA/20361643/)","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"🌉"},"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/SF-Relocation-to-discuss-do-24920d45f5f880c88625ff86a664649c","content_blocks_count":34,"max_depth":1,"web_url":"https://www.notion.so/SF-Relocation-to-discuss-do-24920d45f5f880c88625ff86a664649c"}
{"entity_id":"1211673490428967","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"},{"entity_id":"1211565181540505","name":"Fix problem","entity_type":"AsanaTaskEntity"}],"name":"Story2.pdf","created_at":"2025-10-17T14:08:04.272000Z","updated_at":null,"textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaFileEntity\n**Name**: Story2.pdf\n**Path**: Workspace: airweave.ai → Project: Build Integrations → Task: Fix problem\n\n**Name**: Story2.pdf\n\n# Content\n\nJulius Schutten really wants a new Vitesse t-shirt. As a dedicated fan of the Dutch soccer club, he's been dreaming of wearing the latest jersey to support his team in style. Every time he sees someone sporting the black and yellow, he feels a pang of envy and a renewed desire to get his own.\n\nInstead, Julius keeps buying Kleenex for his little brother. With an endless cold that never seems to go away, his brother goes through tissues like water. Julius has become a regular at the store, sacrificing his jersey dreams for sniffles and sneezes.","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaFileEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"916a38aacf26b594b9c0bc4d0e788531d64d7226097b8a8eb8e259589e4b10b0","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://asana-user-private-us-east-1.s3.amazonaws.com/assets/1209332293895359/1211673490428966/f1c04ca2b7fb2e0049b38ecf03a4207e?X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIb%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJIMEYCIQCrUINgNk13%2FMgq9VERYWEjgWEhp5nsDK43%2BCGYvbpBZAIhAMGARedcEQFXyFXpNuozLNLKQosmvY1fyZnG%2FP8xfoNMKpcFCE4QABoMNDAzNDgzNDQ2ODQwIgzLSzl1O2ElFrPV0Wcq9ATTq%2BI4lOQyS47Oy3eJdWuTzpCC7sUZJ%2FJ1yyu0qLAmQ54sHBrFx%2FT68gwJ8Kr6mFuhBqSTYOCVsygUSbCiWJCaPnP14laFoMogcecpPxyKhQ7pOMe3LT6ZA0yFQlAHgC%2Fzqxdv6XX9WmD2ocrB5xyPO0Uc5xm7PtPY4UYKGgDAzVW9aPRUD%2Bi4j3ZkHqJQ%2BryHLMtUMYZcGVWOB2UqMeXuInQHZzlBlfZGWuCZ3MHlH7x6RJgpJhMR9jW1jqMgT1M%2FRnXGfYXgI0cjLj4qJXzooEQ%2F1lMBUKd1yfEwYDhpUjZ2gtqWpEk8rLIYi6%2BDPkYoM%2FBP4v1SK4HANZq3O49HchvxCPySYvGumpNCRbAEoI8saC6y8pmCMQok6jnD25obeIqTp8%2B3tSb5zBargcu6JLHtcYPASWRqqjCcbAinHX9XIatQMd7NdLinAn1WAw0pjWExVgGwjy7Ba7zEef%2FJnVhjY7KrHdrA3JM9ztO0mdHfpIGx%2FoEnPdPElZjwmUJ1Maks5aNc0jYmKBHIs1yqmyA%2F5LzsEGHyciBLg25O0wSi56lPrwZ0NFKn3vvWvLGeakDSLFZAAUxEzzCoQCdQudtFqpKeSL1mH2LSS8ZuqeU39F8zuY6FxisIOftkYP3GWoYqeGF0HXC3ZgrGtuwXUoVpcssWOCi2mxmnpOVbyTtyKE%2F3HXBhCy1q8Ydrye2u4AB2j8ZUijH0VHvPmHCXMdJd8U%2Bo4mzS5QhyTZU0gxDdUnCVyzQ4LV3O2cAQiBmhNZImBwfdhjhfQaTf8CmSTIfmnNtRmVSIbN3zq3QXg9DkPblG5R1N%2F2xcZKpMf%2Bl%2FlSiSMNv1x8kGOpgBetiCbj5rSX33xUVcgtd4srcTMTcnjMah5uS5NmQPswIIUnzBWycV%2BGjXUDoPE%2F9lHER58wVAUEf6NE1JF8toeJJashljS%2FSsLmtyTjfBQpRayaHEs7SvSa09RmcW1Z%2Bfu4tGmIGkRFoGjp6zDODzZf21PKgjQI9drfTW9ck61J6OLNCGkB1b2i48PqLL%2B3xiz%2FHu33T%2Fa4A%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20251204T215326Z&X-Amz-SignedHeaders=host&X-Amz-Credential=ASIAV34L4ZY4PGXJ5UTB%2F20251204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Expires=1800&X-Amz-Signature=8d8cdfca2ef87f0c7f737d14418f9f8a3bc7185adb498c60ccb32d82ef1f2d2d#_=_","size":1367,"file_type":"application","mime_type":"application/octet-stream","local_path":"/tmp/airweave/processing/661ade35-32bd-4926-823e-4df2f072d59d/c783bb4e-4f19-4ff5-a48f-077edd84feb5-Story2.pdf","gid":"1211673490428967","task_gid":"1211565181540505","task_name":"Fix problem","project_gid":"1209332198044166","resource_type":"attachment","host":"asana","parent":{"gid":"1211565181540505","name":"Fix problem"},"view_url":"https://asana-user-private-us-east-1.s3.amazonaws.com/assets/1209332293895359/1211673490428966/f1c04ca2b7fb2e0049b38ecf03a4207e?X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIb%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLWVhc3QtMSJIMEYCIQCrUINgNk13%2FMgq9VERYWEjgWEhp5nsDK43%2BCGYvbpBZAIhAMGARedcEQFXyFXpNuozLNLKQosmvY1fyZnG%2FP8xfoNMKpcFCE4QABoMNDAzNDgzNDQ2ODQwIgzLSzl1O2ElFrPV0Wcq9ATTq%2BI4lOQyS47Oy3eJdWuTzpCC7sUZJ%2FJ1yyu0qLAmQ54sHBrFx%2FT68gwJ8Kr6mFuhBqSTYOCVsygUSbCiWJCaPnP14laFoMogcecpPxyKhQ7pOMe3LT6ZA0yFQlAHgC%2Fzqxdv6XX9WmD2ocrB5xyPO0Uc5xm7PtPY4UYKGgDAzVW9aPRUD%2Bi4j3ZkHqJQ%2BryHLMtUMYZcGVWOB2UqMeXuInQHZzlBlfZGWuCZ3MHlH7x6RJgpJhMR9jW1jqMgT1M%2FRnXGfYXgI0cjLj4qJXzooEQ%2F1lMBUKd1yfEwYDhpUjZ2gtqWpEk8rLIYi6%2BDPkYoM%2FBP4v1SK4HANZq3O49HchvxCPySYvGumpNCRbAEoI8saC6y8pmCMQok6jnD25obeIqTp8%2B3tSb5zBargcu6JLHtcYPASWRqqjCcbAinHX9XIatQMd7NdLinAn1WAw0pjWExVgGwjy7Ba7zEef%2FJnVhjY7KrHdrA3JM9ztO0mdHfpIGx%2FoEnPdPElZjwmUJ1Maks5aNc0jYmKBHIs1yqmyA%2F5LzsEGHyciBLg25O0wSi56lPrwZ0NFKn3vvWvLGeakDSLFZAAUxEzzCoQCdQudtFqpKeSL1mH2LSS8ZuqeU39F8zuY6FxisIOftkYP3GWoYqeGF0HXC3ZgrGtuwXUoVpcssWOCi2mxmnpOVbyTtyKE%2F3HXBhCy1q8Ydrye2u4AB2j8ZUijH0VHvPmHCXMdJd8U%2Bo4mzS5QhyTZU0gxDdUnCVyzQ4LV3O2cAQiBmhNZImBwfdhjhfQaTf8CmSTIfmnNtRmVSIbN3zq3QXg9DkPblG5R1N%2F2xcZKpMf%2Bl%2FlSiSMNv1x8kGOpgBetiCbj5rSX33xUVcgtd4srcTMTcnjMah5uS5NmQPswIIUnzBWycV%2BGjXUDoPE%2F9lHER58wVAUEf6NE1JF8toeJJashljS%2FSsLmtyTjfBQpRayaHEs7SvSa09RmcW1Z%2Bfu4tGmIGkRFoGjp6zDODzZf21PKgjQI9drfTW9ck61J6OLNCGkB1b2i48PqLL%2B3xiz%2FHu33T%2Fa4A%3D&X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Date=20251204T215326Z&X-Amz-SignedHeaders=host&X-Amz-Credential=ASIAV34L4ZY4PGXJ5UTB%2F20251204%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Expires=1800&X-Amz-Signature=8d8cdfca2ef87f0c7f737d14418f9f8a3bc7185adb498c60ccb32d82ef1f2d2d#_=_","permanent":false,"web_url":"https://app.asana.com/0/1209332198044166/1211565181540505"}
{"entity_id":"1209332198044181","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"},{"entity_id":"1209332198044167","name":"To do","entity_type":"AsanaSectionEntity"}],"name":"Draft integration","created_at":"2025-02-05T15:09:56.912000Z","updated_at":"2025-02-06T23:07:33.263000Z","textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaTaskEntity\n**Name**: Draft integration\n**Path**: Workspace: airweave.ai → Project: Build Integrations → Section: To do\n\n**Name**: Draft integration\n**Assignee**: {'gid': '1209332203471167', 'name': 'Airweave Apps'}\n**Assignee Status**: inbox\n**Completed**: False\n**Dependencies**: []\n**Dependents**: []\n**Due On**: 2025-02-07\n**Html Notes**: <body></body>\n**Notes**: \n**Start On**: 2025-02-05\n**Tags**: []\n**Custom Fields**: []\n**Followers**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]\n**Workspace**: {'gid': '1209332293895359', 'name': 'airweave.ai'}","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaTaskEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"994282e765c3038cf83c95d8aaaf8972c14d073682ead44671984cbeca33ad99","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044181","modified_at":"2025-02-06T23:07:33.263000Z","project_gid":"1209332198044166","section_gid":"1209332198044167","actual_time_minutes":null,"approval_status":null,"assignee":{"gid":"1209332203471167","name":"Airweave Apps"},"assignee_status":"inbox","completed":false,"completed_at":null,"completed_by":null,"dependencies":[],"dependents":[],"due_at":null,"due_on":"2025-02-07","external":null,"html_notes":"<body></body>","notes":"","is_rendered_as_separator":false,"liked":false,"memberships":[{}],"num_likes":0,"num_subtasks":0,"parent":null,"permalink_url":"https://app.asana.com/1/1209332293895359/project/1209332198044166/task/1209332198044181","resource_subtype":"default_task","start_at":null,"start_on":"2025-02-05","tags":[],"custom_fields":[],"followers":[{"gid":"1209332203471167","name":"Airweave Apps"}],"workspace":{"gid":"1209332293895359","name":"airweave.ai"},"web_url":"https://app.asana.com/0/1209332198044166/1209332198044181"}
{"entity_id":"1209332198044183","breadcrumbs":[{"entity_id":"1209332293895359","name":"airweave.ai","entity_type":"AsanaWorkspaceEntity"},{"entity_id":"1209332198044166","name":"Build Integrations","entity_type":"AsanaProjectEntity"},{"entity_id":"1209332198044167","name":"To do","entity_type":"AsanaSectionEntity"}],"name":"Build it","created_at":"2025-02-05T15:09:57.235000Z","updated_at":"2025-08-15T14:45:09.421000Z","textual_representation":"# Metadata\n\n**Source**: asana\n**Type**: AsanaTaskEntity\n**Name**: Build it\n**Path**: Workspace: airweave.ai → Project: Build Integrations → Section: To do\n\n**Name**: Build it\n**Assignee**: {'gid': '1209332203471167', 'name': 'Airweave Apps'}\n**Assignee Status**: inbox\n**Completed**: True\n**Completed At**: 2025-08-15T14:45:09.195000+00:00\n**Completed By**: {'gid': '1209332203471167', 'name': 'Airweave Apps'}\n**Dependencies**: []\n**Dependents**: []\n**Due On**: 2025-02-10\n**Html Notes**: <body>SECRET: HARRY POTTER\n\n</body>\n**Notes**: SECRET: HARRY POTTER\n\n\n**Start On**: 2025-02-06\n**Tags**: []\n**Custom Fields**: []\n**Followers**: [{'gid': '1209332203471167', 'name': 'Airweave Apps'}]\n**Workspace**: {'gid': '1209332293895359', 'name': 'airweave.ai'}","airweave_system_metadata":{"source_name":"asana","entity_type":"AsanaTaskEntity","sync_id":"081670c1-404f-457a-bedd-ec60aa7b2b1e","sync_job_id":"661ade35-32bd-4926-823e-4df2f072d59d","hash":"30d628aae4ad4ad7a135028da1336e3e09daa21091d0dc22bf8e8d5fd2d602ab","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"gid":"1209332198044183","modified_at":"2025-08-15T14:45:09.421000Z","project_gid":"1209332198044166","section_gid":"1209332198044167","actual_time_minutes":null,"approval_status":null,"assignee":{"gid":"1209332203471167","name":"Airweave Apps"},"assignee_status":"inbox","completed":true,"completed_at":"2025-08-15T14:45:09.195000Z","completed_by":{"gid":"1209332203471167","name":"Airweave Apps"},"dependencies":[],"dependents":[],"due_at":null,"due_on":"2025-02-10","external":null,"html_notes":"<body>SECRET: HARRY POTTER\n\n</body>","notes":"SECRET: HARRY POTTER\n\n","is_rendered_as_separator":false,"liked":false,"memberships":[{}],"num_likes":0,"num_subtasks":0,"parent":null,"permalink_url":"https://app.asana.com/1/1209332293895359/project/1209332198044166/task/1209332198044183","resource_subtype":"default_task","start_at":null,"start_on":"2025-02-06","tags":[],"custom_fields":[],"followers":[{"gid":"1209332203471167","name":"Airweave Apps"}],"workspace":{"gid":"1209332293895359","name":"airweave.ai"},"web_url":"https://app.asana.com/0/1209332198044166/1209332198044183"}
{"entity_id":"file_2b020d45-f5f8-80ad-9601-e17b0d11bbd2_-7220954739668602519","breadcrumbs":[],"name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n\n**File Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n**Caption**: \n\n# Content\n\n# Airweave\n\n## ACCESS SYNC\n\n### USER : ROLE\n\n### ROLE : ACCESS\n\n### ENTITY : ORG\n\n### SCHEDULES\n\n### AIRWEAVE API\n\n### TEMPORAL\n\n### SCHEDULES\n\n### AIRWEAVE API\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n### AIR\n\n## AIRWEAVE\n\n","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"1a41e3dd8a0a3432f41ff3bd18d85d41216f7eff3bcaaabf99a9586f9e6bd69c","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4662GC3LHYW%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215552Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCAHzob4Xz9p5m9RZcwIkzQjoVYSxvNdXW%2F7HkcA98nQwIgB6LFpEuFZY1h6fLd0HtsriZsGokEJaQR2f6PjV1hp9sq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDOBFA%2BdxoEHCbXtHRSrcA2nhrNvsJM%2FRRuYSKO1mAQT6ZVlLdaJWAU9vPoiqehATBZntR1KZgkqYnyHlL2y1DjeT4BKGuBHer7GKCvUMt7vq3kNPrSgw241xOlCCWds6yTl5UJrHCzESaRoj6GG8caRzuFXqvlykdtPC9ukDf4tt0Vw7it0%2FHlx0XFdRSg1rITEgj5XOemulPdgVzTvkmwJ5AB4ptjF4CWjfENCqfPgvwaM99PghT7EfQ9pt%2BNVYjvzqFxxGVuEVP%2BOWgQ4ag8Z%2FfRpsuibdLgpVoPM1w6GM8Mnf8Iv97zlLK%2B1MtT3x%2BdbqF64t598pkp1zHp6LC8iXgSgCbzGWYmv%2Fv%2BJtkBXeg%2FvWmzF3lei72wtsVfnieudSKGP%2FQLoHA%2BfQ%2BagDSBhwusvSR67%2FMGe%2F1RZTd8%2BaBDs%2BD%2BpEF%2FOzFNkmSfpQf7tCKW0e7qCjwRz8wp9hu1wOUXQS%2F1FrI2KKdm%2Bh9%2FvqNkgsZLJ%2F9ymsUgcgf%2BVvYxYKoip5WeIkuLEI8W9J6BR8r2eYLrDBGNq2BEjfAiJZA67TiblSer6r8TXm8y02ivKbQ6pE4iQxOVq4ZeXmbJ9uahLiecJkrluGrXYXf5VDpPOySCTFuH%2B3pNGxdJJnN%2BQX2voPTbSvZsulMNPxx8kGOqUB6OTxV84fjtVGbyOFltdNYXZOKlbOJoFyCMotKo6ey2qwu7NJgNYeOq7hKJ8DEsJKWdagF%2BGGLbYBeIV9YXrCE7HX7C3ccsM%2BWTvA7sPM70RZz95Tmhd5nqKbW%2F%2Fc5WQr2qTeI8VajuGDTXUowQ%2BkM%2BF8dEiLd474k0HGlgokJWLqdumU%2F35r76UMw%2F0ySEK3Xm3NuctZCf0PqLkIm2xNf0Hlx2Fz&X-Amz-Signature=0eed3f7e51d893d55e695364b9242ffa9ed4127fb83318d241dd58ff5abefd54&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/55abe1f7-5dfb-4746-8671-938dc64b1004-f85251e5-058b-483f-9b2e-debf4dd99667.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4662GC3LHYW%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215552Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCAHzob4Xz9p5m9RZcwIkzQjoVYSxvNdXW%2F7HkcA98nQwIgB6LFpEuFZY1h6fLd0HtsriZsGokEJaQR2f6PjV1hp9sq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDOBFA%2BdxoEHCbXtHRSrcA2nhrNvsJM%2FRRuYSKO1mAQT6ZVlLdaJWAU9vPoiqehATBZntR1KZgkqYnyHlL2y1DjeT4BKGuBHer7GKCvUMt7vq3kNPrSgw241xOlCCWds6yTl5UJrHCzESaRoj6GG8caRzuFXqvlykdtPC9ukDf4tt0Vw7it0%2FHlx0XFdRSg1rITEgj5XOemulPdgVzTvkmwJ5AB4ptjF4CWjfENCqfPgvwaM99PghT7EfQ9pt%2BNVYjvzqFxxGVuEVP%2BOWgQ4ag8Z%2FfRpsuibdLgpVoPM1w6GM8Mnf8Iv97zlLK%2B1MtT3x%2BdbqF64t598pkp1zHp6LC8iXgSgCbzGWYmv%2Fv%2BJtkBXeg%2FvWmzF3lei72wtsVfnieudSKGP%2FQLoHA%2BfQ%2BagDSBhwusvSR67%2FMGe%2F1RZTd8%2BaBDs%2BD%2BpEF%2FOzFNkmSfpQf7tCKW0e7qCjwRz8wp9hu1wOUXQS%2F1FrI2KKdm%2Bh9%2FvqNkgsZLJ%2F9ymsUgcgf%2BVvYxYKoip5WeIkuLEI8W9J6BR8r2eYLrDBGNq2BEjfAiJZA67TiblSer6r8TXm8y02ivKbQ6pE4iQxOVq4ZeXmbJ9uahLiecJkrluGrXYXf5VDpPOySCTFuH%2B3pNGxdJJnN%2BQX2voPTbSvZsulMNPxx8kGOqUB6OTxV84fjtVGbyOFltdNYXZOKlbOJoFyCMotKo6ey2qwu7NJgNYeOq7hKJ8DEsJKWdagF%2BGGLbYBeIV9YXrCE7HX7C3ccsM%2BWTvA7sPM70RZz95Tmhd5nqKbW%2F%2Fc5WQr2qTeI8VajuGDTXUowQ%2BkM%2BF8dEiLd474k0HGlgokJWLqdumU%2F35r76UMw%2F0ySEK3Xm3NuctZCf0PqLkIm2xNf0Hlx2Fz&X-Amz-Signature=0eed3f7e51d893d55e695364b9242ffa9ed4127fb83318d241dd58ff5abefd54&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","expiry_time":"2025-12-04T22:55:52.075000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4662GC3LHYW%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215552Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCAHzob4Xz9p5m9RZcwIkzQjoVYSxvNdXW%2F7HkcA98nQwIgB6LFpEuFZY1h6fLd0HtsriZsGokEJaQR2f6PjV1hp9sq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDOBFA%2BdxoEHCbXtHRSrcA2nhrNvsJM%2FRRuYSKO1mAQT6ZVlLdaJWAU9vPoiqehATBZntR1KZgkqYnyHlL2y1DjeT4BKGuBHer7GKCvUMt7vq3kNPrSgw241xOlCCWds6yTl5UJrHCzESaRoj6GG8caRzuFXqvlykdtPC9ukDf4tt0Vw7it0%2FHlx0XFdRSg1rITEgj5XOemulPdgVzTvkmwJ5AB4ptjF4CWjfENCqfPgvwaM99PghT7EfQ9pt%2BNVYjvzqFxxGVuEVP%2BOWgQ4ag8Z%2FfRpsuibdLgpVoPM1w6GM8Mnf8Iv97zlLK%2B1MtT3x%2BdbqF64t598pkp1zHp6LC8iXgSgCbzGWYmv%2Fv%2BJtkBXeg%2FvWmzF3lei72wtsVfnieudSKGP%2FQLoHA%2BfQ%2BagDSBhwusvSR67%2FMGe%2F1RZTd8%2BaBDs%2BD%2BpEF%2FOzFNkmSfpQf7tCKW0e7qCjwRz8wp9hu1wOUXQS%2F1FrI2KKdm%2Bh9%2FvqNkgsZLJ%2F9ymsUgcgf%2BVvYxYKoip5WeIkuLEI8W9J6BR8r2eYLrDBGNq2BEjfAiJZA67TiblSer6r8TXm8y02ivKbQ6pE4iQxOVq4ZeXmbJ9uahLiecJkrluGrXYXf5VDpPOySCTFuH%2B3pNGxdJJnN%2BQX2voPTbSvZsulMNPxx8kGOqUB6OTxV84fjtVGbyOFltdNYXZOKlbOJoFyCMotKo6ey2qwu7NJgNYeOq7hKJ8DEsJKWdagF%2BGGLbYBeIV9YXrCE7HX7C3ccsM%2BWTvA7sPM70RZz95Tmhd5nqKbW%2F%2Fc5WQr2qTeI8VajuGDTXUowQ%2BkM%2BF8dEiLd474k0HGlgokJWLqdumU%2F35r76UMw%2F0ySEK3Xm3NuctZCf0PqLkIm2xNf0Hlx2Fz&X-Amz-Signature=0eed3f7e51d893d55e695364b9242ffa9ed4127fb83318d241dd58ff5abefd54&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4662GC3LHYW%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215552Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQCAHzob4Xz9p5m9RZcwIkzQjoVYSxvNdXW%2F7HkcA98nQwIgB6LFpEuFZY1h6fLd0HtsriZsGokEJaQR2f6PjV1hp9sq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDOBFA%2BdxoEHCbXtHRSrcA2nhrNvsJM%2FRRuYSKO1mAQT6ZVlLdaJWAU9vPoiqehATBZntR1KZgkqYnyHlL2y1DjeT4BKGuBHer7GKCvUMt7vq3kNPrSgw241xOlCCWds6yTl5UJrHCzESaRoj6GG8caRzuFXqvlykdtPC9ukDf4tt0Vw7it0%2FHlx0XFdRSg1rITEgj5XOemulPdgVzTvkmwJ5AB4ptjF4CWjfENCqfPgvwaM99PghT7EfQ9pt%2BNVYjvzqFxxGVuEVP%2BOWgQ4ag8Z%2FfRpsuibdLgpVoPM1w6GM8Mnf8Iv97zlLK%2B1MtT3x%2BdbqF64t598pkp1zHp6LC8iXgSgCbzGWYmv%2Fv%2BJtkBXeg%2FvWmzF3lei72wtsVfnieudSKGP%2FQLoHA%2BfQ%2BagDSBhwusvSR67%2FMGe%2F1RZTd8%2BaBDs%2BD%2BpEF%2FOzFNkmSfpQf7tCKW0e7qCjwRz8wp9hu1wOUXQS%2F1FrI2KKdm%2Bh9%2FvqNkgsZLJ%2F9ymsUgcgf%2BVvYxYKoip5WeIkuLEI8W9J6BR8r2eYLrDBGNq2BEjfAiJZA67TiblSer6r8TXm8y02ivKbQ6pE4iQxOVq4ZeXmbJ9uahLiecJkrluGrXYXf5VDpPOySCTFuH%2B3pNGxdJJnN%2BQX2voPTbSvZsulMNPxx8kGOqUB6OTxV84fjtVGbyOFltdNYXZOKlbOJoFyCMotKo6ey2qwu7NJgNYeOq7hKJ8DEsJKWdagF%2BGGLbYBeIV9YXrCE7HX7C3ccsM%2BWTvA7sPM70RZz95Tmhd5nqKbW%2F%2Fc5WQr2qTeI8VajuGDTXUowQ%2BkM%2BF8dEiLd474k0HGlgokJWLqdumU%2F35r76UMw%2F0ySEK3Xm3NuctZCf0PqLkIm2xNf0Hlx2Fz&X-Amz-Signature=0eed3f7e51d893d55e695364b9242ffa9ed4127fb83318d241dd58ff5abefd54&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"file_27720d45-f5f8-802d-8de5-d00bdef43488_5444122696782971919","breadcrumbs":[],"name":"airweave-mistral-high-level.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: airweave-mistral-high-level.png\n\n**File Name**: airweave-mistral-high-level.png\n**Caption**: \n\n# Content\n\n![img-0.jpeg](img-0.jpeg)\n\n# 2. Mistral Search\n\n- **Raw data + ACLs**\n- **1. Airweave Search**\n- **/search?user_email=jean@acme.corp**\n- **S3 (airweave-outbound)**\n- **example: Lambda set on S3 events**\n\n## 1. Airweave Search\n\n- **1. Airweave Search**\n- **Mistral's Native retrieval stack**\n- **2. Mistral Search**\n- **2. Mistral embeddings/LLMs**","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"e9bf6c17d7218b66cbf7a7ef09927913b203575249f48d66c57f737dd93c4b7d","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=995f1bc45d46e61417c20e038e0eb91c79c7f88efc4f6cb20e044dfd5c485571&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/3068af25-1450-40c0-b47b-879b705bdf08-airweave-mistral-high-level.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=995f1bc45d46e61417c20e038e0eb91c79c7f88efc4f6cb20e044dfd5c485571&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"airweave-mistral-high-level.png","expiry_time":"2025-12-04T22:55:51.823000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=995f1bc45d46e61417c20e038e0eb91c79c7f88efc4f6cb20e044dfd5c485571&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=995f1bc45d46e61417c20e038e0eb91c79c7f88efc4f6cb20e044dfd5c485571&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","breadcrumbs":[],"name":"Mistral","created_at":"2025-11-15T20:42:00","updated_at":"2025-12-04T21:19:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Mistral\n\n**Title**: Mistral\n**Content**: 📄 **[POC Vision and Over-delivery]** (Child Page)\n\n# **POC Vision**\n\n### **Ultimate Successful POC**\n\nA package they can deploy in minutes that runs flawlessly for the full trial period.\n\n**Deliverables**\n\n  - A Helm chart they can install with minimal input.\n\n    - Supports re-using their infra resources such as Temporal and Redis.\n\n    - Supports direct integration into their Helm chart\n\n  - Stable for at least 4 weeks without degradation or manual intervention.\n\n  - Fully working SharePoint connector.\n\n  - User specific endpoint where they can pass a user principal and receive permission resolved retrieval.\n\n  - A clear manual on how to deploy, debug, contact us to resolve cases smoothly in unforeseen events.\n\n---\n\n# **Functional Requirements**\n\n### **Retrieval and Querying**\n\n  - p95 search latency under two seconds.\n\n  - Strong native integration with Mistral models (embedders and LLMs) and the open-source rerankers they use\n\n### **Sync and Ingestion**\n\n  - p95 incremental sync under five minutes for data and permissions.\n\n  - Permission sync time should remain lower than data sync time.\n\n  - Initial full sync finishes < 1 day.\n\n  - Telemetry that sends sync and latency metrics to us in real time → if they let us\n\n### **Quality and Testing**\n\n  - Strong test suite that covers common flows and edge cases.\n\n  - Acceptance checklist included.\n\n  - Strong evidence of load testing with reproducible results.\n\n---\n\n# **Non Functional Requirements**\n\nThese are the overdelivery targets that show polish and enterprise readiness.\n\n### **Retrieval Quality Targets**\n\n  - Run evals on a representative test set (>1M docs)\n\n### **Posture: Reliability, Delivery Rhythm, and Experience**\n\n  - Get to know ASAP about customer, way-of-work and other questions\n\n  - Consistent delivery cadence and proactive progress updates.\n\n    - Send updates twice a week\n\n      - Updates should include: demo recordings of new functionality along with instruction for Nayef on how to test himself\n\n  - Weekly sync with Nayef and \n\n  - Sync with the customer every 2 weeks\n\n  - No silent failures, clear logging, and visible sync pipelines.\n\n  - High reliability posture proven over the full trial window.\n\n  - At least one in-person hackathon with Nayef in Paris\n\n  - Show more connectors (like Outlook, maybe Atlassian, Google, tbd)\n\n---\n\n# **Open Questions We Need to Clarify**\n\n  - Which specific customer they want to base the POC on\n\n  - Number of employees and users in scope.\n\n  - Expected size of corpus.\n\n    - how can we estimate this with the minimal information we will get from the beginning?\n\n  - Deployment environment constraints or preferences.\n\n    - need to figure out ASAP if we can - with very close eyes - still SSH in their environment\n\n  - Are other solutions being evaluated simultaneously?\n\n  - LeChat / Mistal solution architecture\n\n    - SSO?\n\n    - private subdomain?\n\n    - general way of work with the customer\n\n---\n\n## From the SOW agreement:\n\nThe Supplier undertakes to deliver to Mistral AI the following Deliverables:\n\n  - Running on‑prem deployment of SharePoint connector.\n\n  - Reusable role-based access control (RBAC) module with index‑time access control lists (ACL) and query‑time enforcement.\n\n  - Admin runbook and deployment documentation.\n\n  - Test plan with results and acceptance checklist.\n\n### Timeline:\n\n  - **Week ≤ 0: Internal Prep**\n\n→ We beginnen nu al het implementeren van de hele access control stack voor M365 Online, maar werken tegelijkertijd aan de validation test suite op de on-prem omgeving. Het idee is dat we nu al kunnen werken met M365 \n\n→ Betalen voor en opzetten van de self-hosted SharePoint environment op Azure\n\n→ Toegang krijgen tot een on-prem SharePoint environment\n\n    - lijntjes uitgooien (wellicht met bounty prize) via Bookface, Ophelia, en Investor Updates (dit pas na tekenen van POC contract)\n\n→ @Rauf Akdemir must seriously hand over onboarding, technical management and KT-ing to Felix and Daan, so nothing is obstructed\n\n  - **Week 1: Kickoff**\n\n    - Discuss timelines, deliverables and checks&tests (UATs) with Mistral\n\n→ @Lennert maak slide deck voor eerste weekly sync met hele concrete uitgestippelde delivery timeline tot aan eind van POC. Ook vervolgstappen en vooruitblikken na POC: i.e., welke extra connectors, integratie in Le Chat, uitbreiden naar Atlassian en/of Google access controls\n\n→ @Rauf Akdemir think of very strong UAT suite (discuss with Matt? how did he do it?)\n\n→ Clear metrics, observability and process alignment - how Mistral works must already be answered by now\n\n  - **Week 2: Full Access Control layer implementation and validation**\n\n    - 100% solution for M365 Online (includes p95 <5min sync metric)\n\n    - 100% solution, backed by **very** comprehensive test suite of over 300 validation tests of edge cases on on-prem test instance that host ourselves\n\n    - POC run on an existing enterprise on-prem deployment of Sharepoint\n\n→ Should be clear from description, but really making this clear in the timeline delivery will be extremely important\n\n  - **Week 3: integration into Le Chat**\n\n    - working with Mistral Le Chat team on integrating Airweave in private/demo environment\n\n→ can also be an async process that we kick-off earlier tbh \n\n  - **Week 4: Initial deployment at customer**\n\n    - Run first Airweave deployment\n\n      - Use handbook to setup environment variables\n\n      - Set up monitoring for air-gapped environment, and whatever may be sent to us.\n\n      - Work with networking team to make sure Airweave can access necessary resources (Mistral models, SharePoint) and Airweave is reachable by Le Chat, while still secure\n\n    - Run first syncs and anecdotal validations\n\n      - directly on Airweave / through Le Chat\n\n→ Align on how much can be sent to us. By now we must absolutely have a clear picture of the whole network architecture and process. Ideally we also have contact with the networking team already\n\n  - **Week 5: SharePoint baseline sync and indexing tests**\n\n    - Run first department level sync of 500+ people\n\n    - Run UAT for at this scale\n\n→ Airweave should already be fully working here, and we should be able to coordinate with the infra team to set this up. UAT is long defined of course.\n\n  - **Week 6: Hardening, scale tests, and reliability checks.**\n\n    - Scale up syncs, work with the infra team to monitor resource utilization, sync speed\n\n    - Finish entire organization sync\n\n→ Probably want to be in Paris for this. Stay very close with the team and make sure everything runs properly for them. These will be long hours and days of waiting for syncs to complete, and rerunning and redeploying until it works.\n\n  - **Week 7:  UAT and test cases**\n\n    - Run UAT with defined test cases\n\n→ Close contract with the enterprise, to make sure they interpret things correctly\n\n  - **Week 8: Handover, runbook, and acceptance review.**\n\n    - Present test plan results, load tests, telemetry summary with Mistral\n\n    - Show multiple connectors already built\n\n→ we must already have this slide ready in week 1\n\n---\n\n## Stakeholders\n\n### Mistral\n\n  - Nayef (⭐️)\n\n  - Ina\n\n  - Lélio\n\n  - Louis\n\n  - [Solution Engineers]\n\n  - [Account Manager to this particular customer]\n\n  - [Mistral Le Chat Product Engineer that integrate Airweave → Nayef?]\n\n### Customer X\n\n  - [Account Manager]\n\n  - [Implementing Engineer]\n\n  - [Sharepoint Admin]\n\n  - [End-users of Mistral product]\n\n  - [Infra Team]\n\n---\n\n### Actions after this session (2025-11-15)\n\n  - [x] Schedule weekly sync with Nayef, Rauf, and Ina, (also add someone from Solutions team?) (@Lennert)\n\n---\n\n### TODOs for weekly check-in 2025-11-19 \n\n  - [ ] Plan meeting with Nayef and solution team to get clarity on what their deployment process is like for the customer (@Lennert)\n\n  - [x] Figure out whether there is a competing POC happening in parallel (@Lennert)\n\n  - [x] Prep slide deck for check-in @Lennert \n\n  - [ ] @Lennert Align on when they (at least Nayef and Solution engineer(s)) will be in Paris so we can book a visit. Possible weeks:\n\n    - ….\n\n📄 **[Reads for Mistral POC]** (Child Page)\n\n[https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups](https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups)\n\n[https://learn.microsoft.com/en-gb/graph/overview](https://learn.microsoft.com/en-gb/graph/overview)\n\n[https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data](https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data)\n\n[https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG](https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG)\n\n[[link]\n\n[File: Claims-Based Identity for Windows.pdf]\n\n**Active Directory\n**[https://en.wikipedia.org/wiki/Active_Directory](https://en.wikipedia.org/wiki/Active_Directory) \n[https://www.youtube.com/watch?v=vy3e6ekuqqg](https://www.youtube.com/watch?v=vy3e6ekuqqg)\n\n[https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol](https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)\n\n📄 **[Mistral x Airweave]** (Child Page)\n\n📄 **[Solution Architecture]** (Child Page)\n\nThe system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n    - System of record for entities and metadata\n\n    - CRUD operations and durability\n\n    - Entity hash comparison for idempotent sync\n\n    - Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n    - Vector database storing embeddings and payloads\n\n    - Supports hybrid and semantic search with filters\n\n    - Can be replaced by different Vector Database\n\n### 3. Redis\n\n    - Pub/Sub for sync and cache invalidation\n\n    - Low‑latency caching\n\n    - In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n    - Public endpoints for UI\n\n    - Triggers and schedules syncs\n\n    - Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n    - TypeScript React application\n\n    - Collections and sync schedule management\n\n### 3. Temporal\n\n    - Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n    - Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n    - Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n    - Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n    - Source permissions are ingested and normalized\n\n    - *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n    - Build in‑memory transitive permission principals from Postgres\n\n    - Load or refresh into Redis for fast evaluation\n\n## Summary\n\nThis document outlines Airweave’s self-hosted data sync pipeline for Mistral that:\n\n  1. runs on-premise, optionally air-gapped,\n\n  1. ingests from SharePoint,\n\n  1. replicates the RBAC graph (users, groups, ACLs) with read-only scope, and\n\n  1. emits raw chunks + RBAC to an S3-compatible object store.\n\n  1. can be extended to an Airweave-native neural retrieval layer with Mistral embeddings/LLMs\n\n---\n\n## Proposed Architecture\n\n  - **Sources:** SharePoint on-prem first; extensible to others later.\n\n  - **Airweave Data Sync (k8s, self-hosted):** crawl/normalize content, RBAC replication, chunking, incremental real-time sync:\n\n  - **Destinations (choose one or both):**\n\n    - **S3-compatible object store (recommended)** — `airweave-outbound/` in JSONL/Parquet\n\n  - **Retrieval layer **either, \n\n    1. Airweave retrieval layer (self-hosted) using **Mistral embeddings, OCR, and LLMs **or,\n\n    1. Mistral’s native retrieval stack.\n\n[Image: airweave-mistral-high-level.png]\n\n### How it works\n\n  1. **Connect and configure source** (service/principal account; read-only).\n\n  1. **Sync job** produces two streams:\n\n    - **Chunks** (content units)\n\n    - **RBAC graph** (users, groups, memberships, permissions)\n\n  1. Airweave writes to:\n\n    - **S3-compatible storage**\n\n    - **Qdrant** for retrieval (used through Airweave API\n\n---\n\n## S3 layout\n\n```xml\nmistral-airweave-bucket/\n└── airweave-outbound/                                 # Data FROM Airweave\n    └── collections/{collection_id}/\n        └── {source_connection_id}/\n            ├── entities/\n            │   ├── {ts}_{entity_type}_{batch_id}.jsonl\n            │   └── ...\n            ├── chunks/\n            │   ├── {ts}_{batch_id}.jsonl\n            │   └── ...\n            └── rbac/\n                ├── users_{ts}.jsonl\n                ├── groups_{ts}.jsonl\n                ├── memberships_{ts}.jsonl\n                └── acls_{ts}.json\n```\n\n## Data formats\n\n### Outbound chunk (JSONL)\n\n```json\n{\n  \"chunk_id\": \"sp_doc_42#3\",\n  \"doc_id\": \"sp_doc_42\",\n  \"entity_type\": \"SharePointDocument\",\n  \"source_path\": \"/sites/Eng/Docs/specs/42.docx\",\n  \"content\": \"text of chunk...\",\n  \"chunk_index\": 3,\n  \"metadata\": {\n    \"site\": \"Eng\",\n    \"library\": \"Docs\",\n    \"filetype\": \"docx\",\n    \"last_modified\": \"2025-09-20T12:34:56Z\",\n    \"checksum\": \"sha256:...\"\n  },\n  \"access_principals\": [\"user:alice@corp\", \"group:eng-readers\"],\n  \"sync\": {\n    \"sync_id\": \"uuid\",\n    \"action\": \"insert|update|delete\",\n    \"version\": 17\n  }\n}\n```\n\n---\n\n## Deployment and ops\n\n  - **Self-hosted Helm**, air-gapped supported (images/licensing pre-loaded).\n\n  - **Single-node VM install available** (for environments without k8s).\n\n  - Telemetry **OFF by default**; opt-in only when not air-gapped.\n\n---\n\n## **Integration options on your side**\n\n  - **Object store route (preferred):** S3-compatible bucket notifications → Kafka/NATS/Webhook; or directory polling.\n\n---\n\n## **Security principles**\n\n  - Read-only connectors; **least-permissive export**.\n\n  - No credential egress; secrets in your KMS.\n\n---\n\n## Potential path to search\n\nWhen/if you want retrieval:\n\n  - Enable dual-destination: continue S3, plus Airweave Vector DB (self-hosted)\n\n  - Accommodate Mistral embeddings/LLMs; we tune chunking/recency/rerank for Mistral models.\n\n  - Airweave Search API respects the same RBAC graph (policy-aware retrieval).\n\n[Image: image.png]\n\n📄 **[Mistral x Airweave POC]** (Child Page)\n\n## Context & Goals\n\n    - **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n    - **Scope:**\n\n      - Connect and index SharePoint content through Airweave.\n\n      - Serve retrievals, embedding and reranking through Mistral.\n\n      - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n    - Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n    - Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n    1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n    1. **Performance:** <2s latency for query-response - p95.\n\n    1. **Security:** Only deployed Mistral applications can access Airweave. \n\n    1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n    1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n    1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n    1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n    1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n    - Measure search quality, search and sync latency in an on-prem environment\n\n    - Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n    - Measure involvement necessary from both parties\n\n      - how many hours of infra rollout hours are necessary?\n\n      - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n    - Angles for modularization\n\n      - what must modules be drop-in replaceable?\n\n      - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)\n\n📄 **[Airweave Admin Runbook]** (Child Page)\n\nThis runbook helps you install Airweave on a Kubernetes cluster and point to a SharePoint 2019 environment for data and access syncing.\n\n📄 **[Helm deploy]** (Child Page)\n\n# Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n    - **Scalable**: Supports horizontal scaling of backend and workers.\n\n    - **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n    - **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n    - Airweave Backend (FastAPI)\n\n    - Airweave Frontend (React)\n\n    - Temporal Workers\n\n    - (Optional) PostgreSQL\n\n    - (Optional) Redis\n\n    - (Optional) Temporal Server\n\n    - (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n    - [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n    - [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.\n\n📄 **[Set up connection with Airweave]** (Child Page)\n\n# SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n    - **NTLM authentication** to call the SharePoint REST API\n\n    - **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n    - Testing - requires CRUD rights on selected test environment\n\n    - Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n    1. Navigate to **Collections** → Create or select a collection\n\n    1. Click **Add Source Connection**\n\n    1. Select **SharePoint 2019 On-Premise**\n\n    1. Fill in credentials:\n\n      - Site URL\n\n      - SharePoint Username / Password / Domain\n\n      - AD Server / Username / Password / Domain / Search Base\n\n    1. Click **Test Connection**\n\n    1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n    - Service account credentials\n\n    - Network connectivity to SharePoint server and AD domain controller\n\n    - Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)\n\n📄 **[Static integration tests (coming soon)]** (Child Page)\n\n📄 **[User Acceptance Tests]** (Child Page)\n\n## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n    1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n    1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n    1. Get first signal on perceived relevance and latency for realistic queries.\n\n    1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n    - Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n    - Content: SharePoint documents in selected sites and libraries\n\n    - Participants: ~10 employees across different departments and permission profiles\n\n    - Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n    1. **Environment ready**\n\n      1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n    1. **Test users and content ready**\n\n      1. At least 10 test users mapped one-to-one to real AD accounts\n\n      1. For each user, a small curated set of documents with clear expected visibility:\n\n        1. 5 private docs (only that user)\n\n        1. 5 team docs (shared with a specific group or team site)\n\n        1. 5 org wide docs (everyone)\n\n        1. A few docs they must *not* see but colleagues can\n\n    1. **Planned permission changes are documented with timestamps**\n\n      1. A list of documents where you will:\n\n        1. Grant access to a new user or group\n\n        1. Remove access from a user or group\n\n        - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n    1. **Time windows**\n\n      1. Agreed test window where sync jobs are running and stable\n\n      1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"0e94b7286459fbdd8e101c6b2f080a604c8cbe193cc70d90ad5415a456487b9a","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","parent_id":"","parent_type":"workspace","title":"Mistral","created_time":"2025-11-15T20:42:00","updated_time":"2025-12-04T21:19:00","content":"📄 **[POC Vision and Over-delivery]** (Child Page)\n\n# **POC Vision**\n\n### **Ultimate Successful POC**\n\nA package they can deploy in minutes that runs flawlessly for the full trial period.\n\n**Deliverables**\n\n  - A Helm chart they can install with minimal input.\n\n    - Supports re-using their infra resources such as Temporal and Redis.\n\n    - Supports direct integration into their Helm chart\n\n  - Stable for at least 4 weeks without degradation or manual intervention.\n\n  - Fully working SharePoint connector.\n\n  - User specific endpoint where they can pass a user principal and receive permission resolved retrieval.\n\n  - A clear manual on how to deploy, debug, contact us to resolve cases smoothly in unforeseen events.\n\n---\n\n# **Functional Requirements**\n\n### **Retrieval and Querying**\n\n  - p95 search latency under two seconds.\n\n  - Strong native integration with Mistral models (embedders and LLMs) and the open-source rerankers they use\n\n### **Sync and Ingestion**\n\n  - p95 incremental sync under five minutes for data and permissions.\n\n  - Permission sync time should remain lower than data sync time.\n\n  - Initial full sync finishes < 1 day.\n\n  - Telemetry that sends sync and latency metrics to us in real time → if they let us\n\n### **Quality and Testing**\n\n  - Strong test suite that covers common flows and edge cases.\n\n  - Acceptance checklist included.\n\n  - Strong evidence of load testing with reproducible results.\n\n---\n\n# **Non Functional Requirements**\n\nThese are the overdelivery targets that show polish and enterprise readiness.\n\n### **Retrieval Quality Targets**\n\n  - Run evals on a representative test set (>1M docs)\n\n### **Posture: Reliability, Delivery Rhythm, and Experience**\n\n  - Get to know ASAP about customer, way-of-work and other questions\n\n  - Consistent delivery cadence and proactive progress updates.\n\n    - Send updates twice a week\n\n      - Updates should include: demo recordings of new functionality along with instruction for Nayef on how to test himself\n\n  - Weekly sync with Nayef and \n\n  - Sync with the customer every 2 weeks\n\n  - No silent failures, clear logging, and visible sync pipelines.\n\n  - High reliability posture proven over the full trial window.\n\n  - At least one in-person hackathon with Nayef in Paris\n\n  - Show more connectors (like Outlook, maybe Atlassian, Google, tbd)\n\n---\n\n# **Open Questions We Need to Clarify**\n\n  - Which specific customer they want to base the POC on\n\n  - Number of employees and users in scope.\n\n  - Expected size of corpus.\n\n    - how can we estimate this with the minimal information we will get from the beginning?\n\n  - Deployment environment constraints or preferences.\n\n    - need to figure out ASAP if we can - with very close eyes - still SSH in their environment\n\n  - Are other solutions being evaluated simultaneously?\n\n  - LeChat / Mistal solution architecture\n\n    - SSO?\n\n    - private subdomain?\n\n    - general way of work with the customer\n\n---\n\n## From the SOW agreement:\n\nThe Supplier undertakes to deliver to Mistral AI the following Deliverables:\n\n  - Running on‑prem deployment of SharePoint connector.\n\n  - Reusable role-based access control (RBAC) module with index‑time access control lists (ACL) and query‑time enforcement.\n\n  - Admin runbook and deployment documentation.\n\n  - Test plan with results and acceptance checklist.\n\n### Timeline:\n\n  - **Week ≤ 0: Internal Prep**\n\n→ We beginnen nu al het implementeren van de hele access control stack voor M365 Online, maar werken tegelijkertijd aan de validation test suite op de on-prem omgeving. Het idee is dat we nu al kunnen werken met M365 \n\n→ Betalen voor en opzetten van de self-hosted SharePoint environment op Azure\n\n→ Toegang krijgen tot een on-prem SharePoint environment\n\n    - lijntjes uitgooien (wellicht met bounty prize) via Bookface, Ophelia, en Investor Updates (dit pas na tekenen van POC contract)\n\n→ @Rauf Akdemir must seriously hand over onboarding, technical management and KT-ing to Felix and Daan, so nothing is obstructed\n\n  - **Week 1: Kickoff**\n\n    - Discuss timelines, deliverables and checks&tests (UATs) with Mistral\n\n→ @Lennert maak slide deck voor eerste weekly sync met hele concrete uitgestippelde delivery timeline tot aan eind van POC. Ook vervolgstappen en vooruitblikken na POC: i.e., welke extra connectors, integratie in Le Chat, uitbreiden naar Atlassian en/of Google access controls\n\n→ @Rauf Akdemir think of very strong UAT suite (discuss with Matt? how did he do it?)\n\n→ Clear metrics, observability and process alignment - how Mistral works must already be answered by now\n\n  - **Week 2: Full Access Control layer implementation and validation**\n\n    - 100% solution for M365 Online (includes p95 <5min sync metric)\n\n    - 100% solution, backed by **very** comprehensive test suite of over 300 validation tests of edge cases on on-prem test instance that host ourselves\n\n    - POC run on an existing enterprise on-prem deployment of Sharepoint\n\n→ Should be clear from description, but really making this clear in the timeline delivery will be extremely important\n\n  - **Week 3: integration into Le Chat**\n\n    - working with Mistral Le Chat team on integrating Airweave in private/demo environment\n\n→ can also be an async process that we kick-off earlier tbh \n\n  - **Week 4: Initial deployment at customer**\n\n    - Run first Airweave deployment\n\n      - Use handbook to setup environment variables\n\n      - Set up monitoring for air-gapped environment, and whatever may be sent to us.\n\n      - Work with networking team to make sure Airweave can access necessary resources (Mistral models, SharePoint) and Airweave is reachable by Le Chat, while still secure\n\n    - Run first syncs and anecdotal validations\n\n      - directly on Airweave / through Le Chat\n\n→ Align on how much can be sent to us. By now we must absolutely have a clear picture of the whole network architecture and process. Ideally we also have contact with the networking team already\n\n  - **Week 5: SharePoint baseline sync and indexing tests**\n\n    - Run first department level sync of 500+ people\n\n    - Run UAT for at this scale\n\n→ Airweave should already be fully working here, and we should be able to coordinate with the infra team to set this up. UAT is long defined of course.\n\n  - **Week 6: Hardening, scale tests, and reliability checks.**\n\n    - Scale up syncs, work with the infra team to monitor resource utilization, sync speed\n\n    - Finish entire organization sync\n\n→ Probably want to be in Paris for this. Stay very close with the team and make sure everything runs properly for them. These will be long hours and days of waiting for syncs to complete, and rerunning and redeploying until it works.\n\n  - **Week 7:  UAT and test cases**\n\n    - Run UAT with defined test cases\n\n→ Close contract with the enterprise, to make sure they interpret things correctly\n\n  - **Week 8: Handover, runbook, and acceptance review.**\n\n    - Present test plan results, load tests, telemetry summary with Mistral\n\n    - Show multiple connectors already built\n\n→ we must already have this slide ready in week 1\n\n---\n\n## Stakeholders\n\n### Mistral\n\n  - Nayef (⭐️)\n\n  - Ina\n\n  - Lélio\n\n  - Louis\n\n  - [Solution Engineers]\n\n  - [Account Manager to this particular customer]\n\n  - [Mistral Le Chat Product Engineer that integrate Airweave → Nayef?]\n\n### Customer X\n\n  - [Account Manager]\n\n  - [Implementing Engineer]\n\n  - [Sharepoint Admin]\n\n  - [End-users of Mistral product]\n\n  - [Infra Team]\n\n---\n\n### Actions after this session (2025-11-15)\n\n  - [x] Schedule weekly sync with Nayef, Rauf, and Ina, (also add someone from Solutions team?) (@Lennert)\n\n---\n\n### TODOs for weekly check-in 2025-11-19 \n\n  - [ ] Plan meeting with Nayef and solution team to get clarity on what their deployment process is like for the customer (@Lennert)\n\n  - [x] Figure out whether there is a competing POC happening in parallel (@Lennert)\n\n  - [x] Prep slide deck for check-in @Lennert \n\n  - [ ] @Lennert Align on when they (at least Nayef and Solution engineer(s)) will be in Paris so we can book a visit. Possible weeks:\n\n    - ….\n\n📄 **[Reads for Mistral POC]** (Child Page)\n\n[https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups](https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups)\n\n[https://learn.microsoft.com/en-gb/graph/overview](https://learn.microsoft.com/en-gb/graph/overview)\n\n[https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data](https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data)\n\n[https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG](https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG)\n\n[[link]\n\n[File: Claims-Based Identity for Windows.pdf]\n\n**Active Directory\n**[https://en.wikipedia.org/wiki/Active_Directory](https://en.wikipedia.org/wiki/Active_Directory) \n[https://www.youtube.com/watch?v=vy3e6ekuqqg](https://www.youtube.com/watch?v=vy3e6ekuqqg)\n\n[https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol](https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)\n\n📄 **[Mistral x Airweave]** (Child Page)\n\n📄 **[Solution Architecture]** (Child Page)\n\nThe system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n    - System of record for entities and metadata\n\n    - CRUD operations and durability\n\n    - Entity hash comparison for idempotent sync\n\n    - Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n    - Vector database storing embeddings and payloads\n\n    - Supports hybrid and semantic search with filters\n\n    - Can be replaced by different Vector Database\n\n### 3. Redis\n\n    - Pub/Sub for sync and cache invalidation\n\n    - Low‑latency caching\n\n    - In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n    - Public endpoints for UI\n\n    - Triggers and schedules syncs\n\n    - Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n    - TypeScript React application\n\n    - Collections and sync schedule management\n\n### 3. Temporal\n\n    - Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n    - Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n    - Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n    - Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n    - Source permissions are ingested and normalized\n\n    - *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n    - Build in‑memory transitive permission principals from Postgres\n\n    - Load or refresh into Redis for fast evaluation\n\n## Summary\n\nThis document outlines Airweave’s self-hosted data sync pipeline for Mistral that:\n\n  1. runs on-premise, optionally air-gapped,\n\n  1. ingests from SharePoint,\n\n  1. replicates the RBAC graph (users, groups, ACLs) with read-only scope, and\n\n  1. emits raw chunks + RBAC to an S3-compatible object store.\n\n  1. can be extended to an Airweave-native neural retrieval layer with Mistral embeddings/LLMs\n\n---\n\n## Proposed Architecture\n\n  - **Sources:** SharePoint on-prem first; extensible to others later.\n\n  - **Airweave Data Sync (k8s, self-hosted):** crawl/normalize content, RBAC replication, chunking, incremental real-time sync:\n\n  - **Destinations (choose one or both):**\n\n    - **S3-compatible object store (recommended)** — `airweave-outbound/` in JSONL/Parquet\n\n  - **Retrieval layer **either, \n\n    1. Airweave retrieval layer (self-hosted) using **Mistral embeddings, OCR, and LLMs **or,\n\n    1. Mistral’s native retrieval stack.\n\n[Image: airweave-mistral-high-level.png]\n\n### How it works\n\n  1. **Connect and configure source** (service/principal account; read-only).\n\n  1. **Sync job** produces two streams:\n\n    - **Chunks** (content units)\n\n    - **RBAC graph** (users, groups, memberships, permissions)\n\n  1. Airweave writes to:\n\n    - **S3-compatible storage**\n\n    - **Qdrant** for retrieval (used through Airweave API\n\n---\n\n## S3 layout\n\n```xml\nmistral-airweave-bucket/\n└── airweave-outbound/                                 # Data FROM Airweave\n    └── collections/{collection_id}/\n        └── {source_connection_id}/\n            ├── entities/\n            │   ├── {ts}_{entity_type}_{batch_id}.jsonl\n            │   └── ...\n            ├── chunks/\n            │   ├── {ts}_{batch_id}.jsonl\n            │   └── ...\n            └── rbac/\n                ├── users_{ts}.jsonl\n                ├── groups_{ts}.jsonl\n                ├── memberships_{ts}.jsonl\n                └── acls_{ts}.json\n```\n\n## Data formats\n\n### Outbound chunk (JSONL)\n\n```json\n{\n  \"chunk_id\": \"sp_doc_42#3\",\n  \"doc_id\": \"sp_doc_42\",\n  \"entity_type\": \"SharePointDocument\",\n  \"source_path\": \"/sites/Eng/Docs/specs/42.docx\",\n  \"content\": \"text of chunk...\",\n  \"chunk_index\": 3,\n  \"metadata\": {\n    \"site\": \"Eng\",\n    \"library\": \"Docs\",\n    \"filetype\": \"docx\",\n    \"last_modified\": \"2025-09-20T12:34:56Z\",\n    \"checksum\": \"sha256:...\"\n  },\n  \"access_principals\": [\"user:alice@corp\", \"group:eng-readers\"],\n  \"sync\": {\n    \"sync_id\": \"uuid\",\n    \"action\": \"insert|update|delete\",\n    \"version\": 17\n  }\n}\n```\n\n---\n\n## Deployment and ops\n\n  - **Self-hosted Helm**, air-gapped supported (images/licensing pre-loaded).\n\n  - **Single-node VM install available** (for environments without k8s).\n\n  - Telemetry **OFF by default**; opt-in only when not air-gapped.\n\n---\n\n## **Integration options on your side**\n\n  - **Object store route (preferred):** S3-compatible bucket notifications → Kafka/NATS/Webhook; or directory polling.\n\n---\n\n## **Security principles**\n\n  - Read-only connectors; **least-permissive export**.\n\n  - No credential egress; secrets in your KMS.\n\n---\n\n## Potential path to search\n\nWhen/if you want retrieval:\n\n  - Enable dual-destination: continue S3, plus Airweave Vector DB (self-hosted)\n\n  - Accommodate Mistral embeddings/LLMs; we tune chunking/recency/rerank for Mistral models.\n\n  - Airweave Search API respects the same RBAC graph (policy-aware retrieval).\n\n[Image: image.png]\n\n📄 **[Mistral x Airweave POC]** (Child Page)\n\n## Context & Goals\n\n    - **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n    - **Scope:**\n\n      - Connect and index SharePoint content through Airweave.\n\n      - Serve retrievals, embedding and reranking through Mistral.\n\n      - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n    - Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n    - Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n    1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n    1. **Performance:** <2s latency for query-response - p95.\n\n    1. **Security:** Only deployed Mistral applications can access Airweave. \n\n    1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n    1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n    1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n    1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n    1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n    - Measure search quality, search and sync latency in an on-prem environment\n\n    - Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n    - Measure involvement necessary from both parties\n\n      - how many hours of infra rollout hours are necessary?\n\n      - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n    - Angles for modularization\n\n      - what must modules be drop-in replaceable?\n\n      - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)\n\n📄 **[Airweave Admin Runbook]** (Child Page)\n\nThis runbook helps you install Airweave on a Kubernetes cluster and point to a SharePoint 2019 environment for data and access syncing.\n\n📄 **[Helm deploy]** (Child Page)\n\n# Airweave Helm Chart\n\n[Airweave documentation](https://docs.airweave.ai/welcome)\n\nThis repository hosts the Helm chart for deploying Airweave on Kubernetes.\n\n## Usage\n\n### Option 1: Install from Registry (Recommended)\n\n```bash\n# Login to GitHub Container Registry\necho $CR_PAT | helm registry login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n\n# Install the chart\nhelm install airweave oci://ghcr.io/airweave-ai/charts/airweave --version 0.1.0\n```\n\n### Option 2: Install from Source\n\n```bash\ngit clone <https://github.com/airweave-ai/airweave-helm.git>\ncd airweave-helm\nhelm install airweave ./charts/airweave\n```\n\nFor more in-depth usage documentation, see [the helm chart's README](https://www.notion.so/charts/airweave/README.md).\n\n## Features\n\n    - **Scalable**: Supports horizontal scaling of backend and workers.\n\n    - **Configurable**: Easily switch between internal (bundled) and external services for Postgres, Redis, and Temporal.\n\n    - **Secure**: Supports external secret management and existing secret injection.\n\n## Architecture\n\nThe chart deploys the following components:\n\n    - Airweave Backend (FastAPI)\n\n    - Airweave Frontend (React)\n\n    - Temporal Workers\n\n    - (Optional) PostgreSQL\n\n    - (Optional) Redis\n\n    - (Optional) Temporal Server\n\n    - (Optional) Qdrant\n\n## Upgrading\n\nTo upgrade to the latest version:\n\n```bash\nhelm repo update\nhelm upgrade my-airweave airweave/airweave\n```\n\n### Testing\n\nWe use [Terratest](https://terratest.gruntwork.io/) for robust unit testing of Helm templates. This ensures that configuration changes (like switching to external databases) generate the correct Kubernetes manifests.\n\n```bash\nmake test-unit\n```\n\n---\n\n# Setup instructions\n\nDeploy Airweave on Kubernetes.\n\n## Prerequisites\n\nCreate these secrets before installation:\n\n```bash\n# Database (required)\nkubectl create secret generic airweave-db-credentials \\\\\n  --from-literal=username=airweave \\\\\n  --from-literal=password=<your-password>\n\n# Redis (required)\nkubectl create secret generic airweave-redis-credentials \\\\\n  --from-literal=password=<your-password>\n\n# App Secrets (required)\nkubectl create secret generic airweave-app-secrets \\\\\n  --from-literal=encryption-key=$(openssl rand -base64 32) \\\\\n  --from-literal=state-secret=$(openssl rand -base64 32) \\\\\n  --from-literal=first-superuser-password=<admin-password>\n\n# AI Keys (required)\nkubectl create secret generic airweave-ai-secrets \\\\\n  --from-literal=openai-api-key=<sk-...>\n\n```\n\n## Configuration\n\n### Services (Internal vs External)\n\nBy default, the chart deploys internal PostgreSQL, Redis, Temporal, and Qdrant.\n\nTo use external services, disable the subchart and configure the external connection:\n\n```yaml\n# Example: Use external PostgreSQL\npostgresql:\n  enabled: false\n\nexternalDatabase:\n  host: my-postgres.example.com\n  port: 5432\n```\n\nSee [values.yaml](https://www.notion.so/values.yaml) for all options.\n\n### Examples\n\n    - [Internal Dependencies (Default)](https://www.notion.so/examples/internal-values.yaml)\n\n    - [External Dependencies](https://www.notion.so/examples/external-values.yaml)\n\n## Notes\n\nWe currently do not support SSL for redis.\n\n📄 **[Set up connection with Airweave]** (Child Page)\n\n# SharePoint 2019 On-Prem: Admin Setup\n\n## Overview\n\nAirweave connects to SharePoint 2019 On-Premise using:\n\n    - **NTLM authentication** to call the SharePoint REST API\n\n    - **LDAP** to query Active Directory for group membership expansion (needed for access control)\n\nThere are two phases:\n\n    - Testing - requires CRUD rights on selected test environment\n\n    - Syncing - requires read rights on all data\n\nWe recommend separate service accounts per phase to isolate permissions and simplify auditing.\n\n---\n\n## Service Accounts\n\n**[Table]**\n\n---\n\n## Phase 1: Test Environment\n\nUsed for static programmatic tests against a small, isolated site collection. Tests create, update, and delete operations to validate connector behavior before production rollout.\n\n**SharePoint:**\n\n**[Table]**\n\nFull Control includes: create/update/delete items, manage lists, view permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Phase 2: Production Sync\n\nRead-only crawl of SharePoint content. The service account can access everything but cannot modify anything.\n\n**SharePoint (Central Administration):**\n\n**[Table]**\n\nFull Read grants read access to all site collections in that web application without write permissions.\n\n**Active Directory:**\n\n**[Table]**\n\n---\n\n## Credentials Reference\n\nOnce the service accounts are provisioned, collect these values:\n\n### SharePoint Credentials\n\n**[Table]**\n\n### Active Directory Credentials\n\n**[Table]**\n\n---\n\n## Running Validation Tests\n\nBefore adding the connector to Airweave, run the atomic tests to validate connectivity and permissions.\n\n### 1. Setup\n\n```bash\ncd infra-core/sharepoint-2019-trial/3-atomic-tests\n\n# Install dependencies\npip install -r requirements.txt\n\n# Create .env file with credentials\ncat > .env << EOF\n# SharePoint\nSHAREPOINT_URL= https://sharepoint.corp.local \nSHAREPOINT_USERNAME=svc_airweave_test\nSHAREPOINT_PASSWORD=your_password_here\nSHAREPOINT_DOMAIN=CORP\n\n# Active Directory\nAD_SERVER=dc01.corp.local\nAD_USERNAME=svc_airweave_test\nAD_PASSWORD=your_password_here\nAD_DOMAIN=CORP\nAD_SEARCH_BASE=DC=corp,DC=local\nEOF\n```\n\n### 2. Verify Environment\n\n```bash\npython scripts/verify_ environment.py\n```\n\n### 3. Run Tests\n\n```bash\n# Run all tests\npytest tests/ -v\n\n# Run by category\npytest -m file -v      # File operations\npytest -m permission -v # Permission operations\npytest -m group -v     # Group operations\n```\n\n### 4. Run Access Graph Tests\n\n```bash\ncd ../4-static-access-graph-tests/test-data-generator\n\n# Generate test data with complex permissions\npython  generate.py \n\n# Verify generated data\npython  verify.py\n```\n\n---\n\n## Adding to Airweave\n\n### Option A: Via UI\n\n    1. Navigate to **Collections** → Create or select a collection\n\n    1. Click **Add Source Connection**\n\n    1. Select **SharePoint 2019 On-Premise**\n\n    1. Fill in credentials:\n\n      - Site URL\n\n      - SharePoint Username / Password / Domain\n\n      - AD Server / Username / Password / Domain / Search Base\n\n    1. Click **Test Connection**\n\n    1. If successful, click **Save** to start syncing\n\n### Option B: Via API\n\n**1. Create a Collection** (if you don't have one):\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/collections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 Documents\",\n    \"readable_id\": \"sharepoint-2019-docs\"\n  }'\n```\n\n**2. Create Source Connection:**\n\n```bash\ncurl -X POST \" https://your-airweave-instance/api/v1/source-connections \" \\\n  -H \"Authorization: Bearer $TOKEN\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"name\": \"SharePoint 2019 - Production\",\n    \"short_name\": \"sharepoint2019\",\n    \"collection\": \"sharepoint-2019-docs\",\n    \"auth_fields\": {\n      \"sharepoint_username\": \"svc_airweave_sync\",\n      \"sharepoint_password\": \"your_password_here\",\n      \"sharepoint_domain\": \"CORP\",\n      \"ad_username\": \"svc_airweave_sync\",\n      \"ad_password\": \"your_password_here\",\n      \"ad_domain\": \"CORP\"\n    },\n    \"config_fields\": {\n      \"site_url\": \" https://sharepoint.corp.local \",\n      \"ad_server\": \"dc01.corp.local\",\n      \"ad_search_base\": \"DC=corp,DC=local\"\n    },\n    \"sync_immediately\": true\n  }'\n```\n\n---\n\n## Validation\n\nAfter setup, the connection test verifies:\n\n**[Table]**\n\nIf either fails, check:\n\n    - Service account credentials\n\n    - Network connectivity to SharePoint server and AD domain controller\n\n    - Firewall rules for LDAP ports (636 for LDAPS, 389 for STARTTLS)\n\n📄 **[Static integration tests (coming soon)]** (Child Page)\n\n📄 **[User Acceptance Tests]** (Child Page)\n\n## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n    1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n    1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n    1. Get first signal on perceived relevance and latency for realistic queries.\n\n    1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n    - Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n    - Content: SharePoint documents in selected sites and libraries\n\n    - Participants: ~10 employees across different departments and permission profiles\n\n    - Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n    1. **Environment ready**\n\n      1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n    1. **Test users and content ready**\n\n      1. At least 10 test users mapped one-to-one to real AD accounts\n\n      1. For each user, a small curated set of documents with clear expected visibility:\n\n        1. 5 private docs (only that user)\n\n        1. 5 team docs (shared with a specific group or team site)\n\n        1. 5 org wide docs (everyone)\n\n        1. A few docs they must *not* see but colleagues can\n\n    1. **Planned permission changes are documented with timestamps**\n\n      1. A list of documents where you will:\n\n        1. Grant access to a new user or group\n\n        1. Remove access from a user or group\n\n        - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n    1. **Time windows**\n\n      1. Agreed test window where sync jobs are running and stable\n\n      1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"💨"},"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/Mistral-2ac20d45f5f88016b699fd0990ca8ab1","content_blocks_count":437,"max_depth":4,"web_url":"https://www.notion.so/Mistral-2ac20d45f5f88016b699fd0990ca8ab1"}
{"entity_id":"file_2af20d45-f5f8-8014-8456-c58ebdcd656e_-2564213642331092260","breadcrumbs":[],"name":"Claims-Based Identity for Windows.pdf","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: Claims-Based Identity for Windows.pdf\n\n**File Name**: Claims-Based Identity for Windows.pdf\n**Caption**: \n\n# Content\n\n# 2 DavidChappell \\& Associates \n\n## CLAIMS-BASED IDENTITY FOR WINDOWS\n\nTECHNOLOGIES AND SCENARIOS\n\nDAVID CHAPPELL\nFEBRUARY 2011\n\nUnderstanding Claims-Based Identity ..... 3\nThe Problem: Working with Identity in Applications ..... 3\nThe Solution: Claims-Based Identity ..... 4\nClaims, Tokens, and STSs ..... 4\nIdentity Providers and Identity Libraries ..... 5\nUsing Multiple Identity Providers ..... 7\nFederation Providers ..... 8\nImplementing Claims-Based Identity: Microsoft Technologies ..... 10\nWindows Live ID ..... 11\nActive Directory Federation Services 2.0 ..... 11\nWindows Azure AppFabric Access Control ..... 12\nWindows Identity Foundation ..... 13\nUsing Claims-Based Identity: Scenarios ..... 13\nOn-Premises Scenarios ..... 14\nAccessing an Enterprise Application ..... 14\nAccessing an Enterprise Application via the Internet ..... 15\nProviding Single Sign-On to an Enterprise Application in Another Organization ..... 16\nCloud Scenarios ..... 19\nProviding Single Sign-On to an Enterprise Application in the Cloud ..... 19\nProviding Single Sign-On to a SaaS Application ..... 20\nAllowing Logins with Facebook, Google, and Other Cloud Identity Providers ..... 22\nConclusion ..... 24\nAbout the Author ..... 24\n\n# UNDERSTANDING CLAIMS-BASED IDENTITY \n\nFor people who create applications, working with identity traditionally hasn't been much fun. First, a developer needs to decide which identity technology is right for a particular application. If the application will be accessed in different ways, such as within an organization, across different organizations, and via the public Internet, one identity technology might not be enough-the application might need to support multiple options. The developer also needs to figure out how to find and keep track of identity information for each of the application's users. The application will get some of what it needs directly from those users, but it might also need to look up other information in a directory service or someplace else. IT administrators must also be involved to configure this software correctly. Add the cloud to the mix, and things get even more complicated.\n\nThis is all more complex than it needs to be. Why not create a single interoperable approach to identity that works in pretty much every situation, both on-premises and in the cloud? And rather than making applications hunt for identity information, why not make sure that this single approach lets users supply each application with the identity information it requires?\n\nClaims-based identity achieves these goals. It provides a common way for applications to acquire the identity information they need about users inside their organization, in other organizations, and on the Internet. It also provides a consistent approach for applications running on-premises or in the cloud.\n\nTaking advantage of claims-based identity requires developers to understand how and why to create claims-based applications. It also requires infrastructure software that applications can rely on. This overview describes the basics of claims-based identity, then looks at how a group of Microsoft technologies help make this world a reality. Those technologies are Active Directory Federation Services (AD FS) 2.0, the Windows Azure AppFabric Access Control service (ACS), and Windows Identity Foundation (WIF).\n\n## THE PROBLEM: WORKING WITH IDENTITY IN APPLICATIONS\n\nSometimes, working with identity is simple. Think of a Windows application that doesn't need to know much about its users, for example, and that will be accessed only by people within a single organization. This application can just rely on Windows Integrated Authentication (WIA), which uses Kerberos under the covers. Kerberos is implemented as part of Active Directory Domain Services (AD DS, originally known as just \"Active Directory\"), and it provides a way to authenticate users and convey basic information about them. Or suppose you're creating an application that will be accessed solely by Internet users. Again, the common approach to handling identity is straightforward: just require each user to supply a username and password.\n\nYet the requirements for modern applications are rarely this simple. What if you need more information about each user than is provided by either Kerberos or a simple username and password? Your application will now need to acquire this information from some other source, such as AD DS, or keep track of the information itself. Or suppose the application must be accessed both by employees inside the organization and by customers via the Internet-what now? Should the application support both Kerberos and username/password-based logins? And what about the case where you'd like to let users from a business partner access this application without requiring a separate login? This kind of access can't be accomplished very well with either Kerberos or username/password logins-more is required.\n\nThe right solution is to have one approach to identity that works in all of these scenarios. To be effective, this single approach must be based on widely recognized industry standards that interoperate across both platform and organizational boundaries. But standards alone aren't enough. The solution also needs to be widely implemented in products from multiple vendors and be simple for developers to use. This unified, broadly supported approach is exactly what claims-based identity is meant to provide.\n\n# THE SOLUTION: CLAIMS-BASED IDENTITY \n\nClaims-based identity is a straightforward idea, founded on a small number of concepts: claims, tokens, identity providers, and a few more. This section describes the basics of this technology, starting with a look at these fundamental notions.\n\nBefore launching into this description, however, there's an important point to make. While this paper focuses on the mechanics, using the technology described here can require more, such as business agreements between different organizations. Addressing the technical challenges is essential, but they're not always the whole story.\n\n## Claims, Tokens, and STSs\n\nWhat is an identity? In the real world, the question is hard to answer-the discussion quickly veers into the metaphysical. In the digital world, however, the answer is simple: A digital identity is a set of information about somebody or something. While all kinds of entities can have digital identities, including computers and applications, we're most often concerned with identifying people. Accordingly, this overview will always refer to things with identities as \"users\".\n\nWhen a digital identity is transferred across a network, it's just a bunch of bytes. It's common to refer to a set of bytes containing identity information as a security token or just a token. In a claims-based world, a token contains one or more claims, each of which carries some piece of information about the user it identifies. Figure 1 shows how this looks.\n![img-0.jpeg](img-0.jpeg)\n\nFigure 1: A token contains claims about a user along with a digital signature that can be used to verify its issuer.\n\nClaims can represent pretty much anything about a user. In this example, for instance, the first three claims in the token contain the user's name, an identifier for a role she belongs to, and her age. Other tokens can contain other claims, depending on what's required. A claim might also indicate the user's right to do something, such as access a file, or restrict some right, such as setting an employee's\n\npurchasing limit. And while it's common today to use tokens defined with the XML-based Security Assertion Markup Language (SAML), this isn't required. Web applications might use a simpler approach called Simple Web Token (SWT), for example.\n\nTo verify its source and to guard against unauthorized changes, a token's issuer digitally signs each token when it's created. As Figure 1 shows, the resulting digital signature is carried as part of the token.\n\nBut who issues tokens? In a claims-based world, tokens are created by software known as a security token service (STS). Figure 2 illustrates the process.\n![img-1.jpeg](img-1.jpeg)\n\nFigure 2: A user acquires a token containing some set of claims from an STS.\nIn a typical scenario, an application working on behalf of a user, such as a Web browser or some other client, asks an STS for a token containing claims for this user (step 1). Various protocols can be used to make this request, but however it's done, the STS authenticates the user in some way, such as by validating her Kerberos ticket or checking her password (step 2). This lets the STS be certain that the user is who she claims to be.\n\nThe request sent to an STS typically contains a URI identifying the application this user wishes to access. The STS then looks up information about both the user and the application in a database (step 3). As the figure shows, this database maintains account information and other attributes about users and applications. Once the STS has found what it needs, it generates the token and returns it to the requester (step 4).\n\n# Identity Providers and Identity Libraries \n\nClaims, tokens, and STSs are the foundation of claims-based identity. They're all just means to an end, however. The real goal is to help a user present her digital identity to an application, then let the application use this information to make decisions. Figure 3 shows a simple picture of how this happens.\n\n![img-2.jpeg](img-2.jpeg)\n\nFigure 3: A browser or other client can acquire a token from an STS, then present this token and the claims it contains to an application.\n\nAs the figure shows, a Web browser or other client acting on behalf of a user gets a token for a particular application from an STS (step 1). Once it has this token, the browser or client sends it to the application (step 2), which is configured with a list of one or more trusted STSs. To process the token, the application depends on an identity library, a reusable set of code for working with tokens and the protocols that convey them. This library verifies the token's signature, which lets the application know which STS issued the token, then checks whether this STS is on the trusted list (step 3). If the application does trust the STS that issued this token, it accepts the token's claims as correct and uses them to decide what the user is allowed to do or in other ways (step 4).\n\nIf the token contains the user's role, for example, the application can assume that the user really has the rights and permissions associated with that role. Since the user was required to authenticate herself to get this token, the application doesn't need to authenticate her again. (In fact, because it relies on the claims in the token, an application is sometimes referred to as a relying party.)\n\nNotice an important difference between what's happening here and the way that applications frequently handle identity: Rather than requiring the application itself to authenticate the user, claims-based identity relies on the STS to do this. This gets developers out of the business of authenticating users, something that definitely counts as progress. All an application needs to do is determine that the token a user presents was created by an STS this application trusts. How the user proved its identity to this STS—with a password, a digital signature, or something else-isn't the application's problem. This lets the application be deployed unchanged in different contexts, a significant improvement over the usual situation today.\n\nAlthough it's not shown in the figure, there's an essential first step before any of this can happen: An administrator must configure the STS to issue the right claims for this user and this application. Without this, the STS likely can't create a token containing the claims that the application needs. While doing this might seem like a burden, the reality is that this information must also be configured in the non-claims-\n\nbased world. The big difference is that now the claims are all in one place, accessible through the STS, rather than spread across different systems.\n\nFigure 3 also illustrates another important concept, which is that an STS can be owned by some identity provider (IdP). Sometimes called an issuer, the identity provider is what stands behind the truth of the claims in the tokens this STS creates. In fact, this is why the contents of a token are called \"claims\": They're statements that this identity provider claims are true. An application that receives this token can decide whether it trusts this identity provider and the claims it makes about this user.\n\nIdentity providers come in many forms. If you use a token issued by an STS on your company's network, for example, the identity provider is your company. If you use a token issued by the STS provided by a service on the Internet, such as Windows Live ID, Facebook, or Google, this service is acting as the identity provider. But whoever the identity provider is, being able to acquire and use a token containing claims is useful.\n\nTo see why, think about the pre-claims world we (mostly) live in today. In this environment, an application typically gets only simple identity information from a user, such as her login name. All of the other information it needs about that user must be acquired from somewhere else. The application might need to access a local directory service, for instance, or maintain its own application-specific database. With claims-based identity, however, an application can specify exactly what claims it needs and which identity providers it trusts, then expect each user to present those claims in a token issued by one of those providers. A claims-aware application is still free to create its own user database, of course, but the need to do this shrinks. Instead, each request can potentially contain everything the application needs to know about this user.\n\n# Using Multiple Identity Providers \n\nIn many cases, a user has only one identity provider-and thus one STS-to choose. When you access an application inside your organization, for example, the application might only accept tokens issued by your company's STS. In some situations, though, an application might accept tokens issued by multiple identity providers-it might trust several different STSs.\n\nFor example, think about an application on the public Internet that wishes to let its users log in using a Facebook identity, a Google identity, or a Windows Live ID identity. Since hundreds of millions of people have accounts with these services, why not accept them? Or suppose the application wishes to accept identities directly from multiple instances of Active Directory-what then? Both of these situations require the application to trust multiple STSs at multiple identity providers, then to let the user choose which one he wants to use. Figure 4 shows how this looks.\n\n![img-3.jpeg](img-3.jpeg)\n\nFigure 4: If an application accepts identities from multiple identity providers, the user can select which one to use.\n\nIn this situation, the user accesses the application and learns which STSs it trusts (step 1). For example, the application might provide a login screen that lets the user choose to use his Facebook identity, his Google identity, or his Windows Live ID identity. The user then chooses one, and his browser or other client software contacts that identity provider. This provider's STS authenticates the user, perhaps by requiring him to enter a username and password, then returns a token for this identity (step 3). As before, this token is then sent to the application (step 4), which validates it as usual and uses the claims it contains (step 4).\n\nFor some applications, accepting tokens from multiple identity providers, especially public providers, makes no sense. Letting employees use their Facebook identity to log into a critical business application inside your company probably isn't a good idea. But there are plenty of situations where this can be useful. Think of an enterprise application that must be accessible to employees, partners, and customers, for example, or a consumer application on the public Internet that wishes to make login as painless as possible. Addressing this requirement is an important part of modern identity technology.\n\n# Federation Providers \n\nIn a claims-based world, a user always initially gets her identity from an STS owned by some identity provider. But suppose the application she wants to access doesn't trust this STS-what then? One possibility is that there's just no way for her to access this application. There's also another option, however: even though the application she wants to access doesn't trust her STS, it might trust another STS that in turn trusts her STS. This approach, called identity federation, is both common and useful. With federation, an identity provider offers an STS as usual, but another STS is also offered by a federation provider (FP). The federation provider STS is then configured by an administrator to trust the identity\n\nprovider STS. Figure 5 shows how a user can provide identity information to an application when federation is used.\n![img-4.jpeg](img-4.jpeg)\n\nFigure 5: An STS can act as a federation provider, accepting one token and producing another.\nAs always, the process begins when the user accesses an application from a browser or another client, learning which STSs that application trusts (step 1). Here, the application trusts only the federation provider STS. The user's browser or client software then contacts that federation provider, learning which STSs it trusts (step 2). In this example, the federation provider STS is configured to trust the identity provider's STS, and so the user's browser or client software contacts this STS. As usual, the user is authenticated in some way, then gets back an IdP token created by this STS (step 3).\n\nThis token can't be used to access the application, however, since that application doesn't trust the STS that issued it. Fortunately, this token can be used to acquire a token that the application will accept. To do this, the browser or client software sends the IdP token to the federation provider (step 4). The federation provider validates this token, ensuring that it came from an STS it trusts. Once it determines this, it creates a new token for this user (step 5), then returns this FP token (step 6). The user's software submits this token to the application (step 7), which verifies that the FP token was issued by an STS that it trusts. The application then uses the claims in the token as usual (step 8).\n\nFrom the user's point of view, all of these exchanges are invisible. She accesses the application without explicitly logging into it, that is, she gets what's known as single sign-on. The mechanics are a little more complex, but the core idea underlying identity federation is straightforward. It is that not only applications can trust STSs; one STS can trust another STS as well.\n\nStep 5 in the figure is worth examining in more detail. As just described, the federation provider receives a token issued by another STS, then generates a new token for the user. But exactly what claims does this\n\nnew token contain? The answer depends on what the federation provider's STS is configured to do. In the simplest case, it might copy every claim from the IdP token directly into the FP token unchanged. In a more realistic scenario, the federation provider STS performs claims transformation, emitting a token that doesn't contain the exact set of claims that it received from the identity provider.\n\nFor example, suppose the IdP token contains a claim indicating that this user is a member of the role \"Administrator\", expressing that claim as a character string containing this English word. It's possible that the application understands the administrator role, but expects the claim to be expressed as a numeric code or in Chinese or in some other way. The federation provider can perform this translation, inserting a claim in the correct format in the FP token it generates.\n\nClaims transformation can do other things as well. When it creates the FP token, for example, the federation provider might omit claims from the IdP token that aren't meaningful to this application. Or it might add claims to the FP token that aren't present in the IdP token, such as an indication of the IdP that issued the original token. Claims transformation is a powerful idea, and it can be used in a variety of ways.\n\n# IMPLEMENTING CLAIMS-BASED IDENTITY: MICROSOFT TECHNOLOGIES \n\nImplementing claims-based identity requires several things. Identity provider STSs must be available to issue tokens to users. Because identity federation is common, federation provider STSs are also essential. And finally, developers will need to build claims-aware applications that know how to receive tokens and use the claims they contain. Rather than having every developer write this code from scratch, it makes sense to provide a standard identity library that any application can use.\n\nThe rise of cloud computing adds another requirement. All three of these things-an identity provider STS, a federation provider STS, and an identity library-should be available both on premises (e.g., running in an organization's data center) and in the cloud. Without this, some important scenarios are hard to address.\n\nThe Microsoft platform for claims-based identity targets all of these options. Figure 6 summarizes the technologies it includes today.\n![img-5.jpeg](img-5.jpeg)\n\nFigure 6: Microsoft provides cloud and on-premises technologies for an identity provider STS, a federation provider STS, and an identity library.\n\nIn the cloud, Microsoft provides Windows Live ID as an identity provider STS, while Windows Azure AppFabric Access Control provides a federation provider STS. For an identity library, applications can use Windows Identity Foundation (WIF, commonly pronounced \"Dub-I-F\").\n\nFor on-premises use, Microsoft makes available Active Directory Federation Services (AD FS) 2.0. As Figure 6 shows, this technology can be used as both an identity provider STS and a federation provider STS. And for an identity library, applications once again can use Windows Identity Foundation.\n\nIt's important to note that while this overview focuses on Microsoft technologies, claims-based identity is a multi-vendor effort. Given this, there are alternative technologies from other vendors for all of the boxes in this figure. And because interactions among the parties are based on industry standards, the offerings from Microsoft and other vendors can be combined in various ways. For example, using the Microsoft identity platform doesn't require relying on Windows Live ID for a cloud identity provider STSother providers, such as those from Google and Facebook, can also be used. Similarly, AD FS 2.0 isn't the only option for on-premises STSs; WIF can work with tokens created by products from IBM and other vendors.\n\nThe focus here is on the Microsoft technologies, however, and the best way to understand how they fit together is to walk through scenarios showing how they're used. Before doing this, we first need to look at the basics of each one.\n\n# WINDOWS LIVE ID \n\nWindows Live ID implements an identity provider STS in the cloud. Today, the most popular applications that accept tokens issued by this STS are Microsoft offerings such as Hotmail. Any application can choose to accept these tokens, however-it's not usable only by Microsoft itself.\n\nThe token provided by Windows Live ID contains a very simple set of claims, primarily just a globally unique identifier. The structure of this identifier is opaque, which means that an application can't derive any meaning from the identifier's content or structure. An application can use this value to recognize individual users, however. For example, a Web site that accepts Windows Live ID logins might ask each user for information such as his name and shipping address, then store this data along with the user's Windows Live ID identifier. The next time the user logs in, the application can use this identifier to look up his information.\n\n## ACTIVE DIRECTORY FEDERATION SERVICES 2.0\n\nHaving an identity provider STS in the cloud is useful. But for enterprises, having one on-premises is much more important. Business applications inside your organization probably don't let employees log in with a Windows Live ID, a Facebook identity, or any other token issued by an identity provider STS in the cloud. Instead, they require a token issued by an STS that they control.\n\nActive Directory Federation Services 2.0 can fill this role. As its name suggests, AD FS 2.0 is the follow-on to the original Active Directory Federation Services technology. Don't be misled by the word \"federation\" in the technology's name, however. In fact, AD FS 2.0 can act as either an identity provider STS or a federation provider STS. The same AD FS 2.0 instance can even act in both roles simultaneously. And since it's part of Active Directory, AD FS 2.0 is available to current users at no extra cost. This makes claims-\n\nbased identity immediately accessible to the large number of organizations that use Active Directory today.\n\nAD FS 2.0 contains several advances over its predecessor. It supports both browsers and other clients, for example, such as those built using Windows Communication Foundation (WCF) ${ }^{1}$. Also unlike the first AD FS release, AD FS 2.0 supports the SAML 2.0 protocol as well as WS-Federation and WS-Trust, letting it work in a broader range of environments.\n\nThe AD FS 2.0 STS can be used entirely inside an organization, exposed on the Internet, or both. The claims it supplies can come from Active Directory Domain Services, of course, but this isn't the only choice. AD FS 2.0 also supports using SQL Server as an attribute store, that is, a source for claims, and developers are free to create custom attribute stores as well. To help manage an organization's attribute stores, including Active Directory and others, Microsoft provides Forefront Identity Manager (FIM). This technology offers a way to synchronize information across different attribute stores, along with an identity management portal with pre-defined workflows for password resets, group management, and more.\n\nYet it's worth reiterating that claims-based identity doesn't require using AD FS 2.0. Any STS from any vendor (or even a custom-built STS) that supports standard protocols and token formats can be used. Still, one of Microsoft's primary goals in providing AD FS 2.0 is to make widely available a fully-featured STS built on Active Directory. Ubiquitous STSs are fundamental to making the benefits of claims-based identity real.\n\n# WINDOWS AZURE APPFABRIC ACCESS CONTROL \n\nIdentity federation is useful in many situations. For applications running on premises, such as a business application within an enterprise, using a federation provider STS that's also on premises is often the right choice. But for an application running in the cloud, using a federation provider STS that runs in the cloud is likely to be better. The Windows Azure AppFabric Access Control service fills that role.\n\nACS is most commonly applied today in two scenarios:\n\nLetting an application running in the cloud accept tokens issued by multiple on-premises identity provider STSs, such as AD FS 2.0. This can give on-premises users in various organizations single signon to the cloud application. This is especially useful for independent software vendors (ISVs) who wish to allow easy access to a Software as a Service (SaaS) application by customers in many different enterprises.\n\nLetting an application running in the cloud accept identities issued by multiple cloud identity provider STSs. ACS has built-in support for handling the protocols and token formats used by Windows Live ID, Google, Facebook, Yahoo, and OpenID. An application that trusts the ACS federation provider STS can choose to accept identities from any of these identity providers while still being shielded from the idiosyncratic details of each one.\n\n[^0]\n[^0]:    ${ }^{1}$ In the jargon of identity, AD FS 2.0 supports both active and passive clients, while the first release of AD FS supported only passive clients.\n\nACS also provides another important function: built-in support for claims transformation. As described earlier, a federation provider STS commonly emits a token whose claims differ from the IdP token it received. To help do this more intelligently, ACS includes a rules engine for defining these transformations.\n\nACS lets clients request tokens using various protocols, including WS-Federation, WS-Trust, OpenID 2.0, and OAuth 2.0. It can accept and issue tokens in various formats as well, including SAML 1.1, SAML 2.0, and Simple Web Token (SWT). The technology also allows delegated authorization using OAuth 2.0, which provides a controlled way for an application to act on behalf of a user.\n\n# WINDOWS IDENTITY FOUNDATION \n\nWhether it's offered by an identity provider or a federation provider, an STS creates tokens containing claims. Yet those tokens are useless unless applications are able to accept and use them. The goal of WIF is to make this easier by helping developers create claims-aware Windows applications.\n\nWIF is a set of .NET Framework classes that implement essential identity functions, such as receiving a token, verifying its signature, and accessing the claims it contains. It supports tokens created using either the SAML 1.1 or SAML 2.0 formats, so it can accept tokens issued by AD FS 2.0, ACS, or STSs from other vendors. WIF supports various standard protocols as well, including WS-Federation and WS-Trust, and it's extensible, allowing other technologies to be added. For example, Microsoft provides a sample WIF extension that implements the OAuth 2.0 protocol with SWT tokens.\n\nEach claim is extracted into an instance of a WIF-defined Claim class, providing a consistent way for developers to work with a token's information. This class's properties include things such as:\n\nClaimType, indicating what kind of claim this is. Does the claim contain a user's name, for example, or a role, or something else? Claim types are identified by strings, which are just URIs.\n\nValue, containing the actual content of the claim, such as the user's name.\n$\\square$ Issuer, which specifies the identity provider STS this claim came from. In other words, this is the entity asserting that this claim is true.\n\nMicrosoft itself is using WIF to add support for claims-based identity to its own products, including SharePoint 2010 and others.\n\nAlong with helping developers create claims-aware applications, WIF also provides support for creating a custom STS. Even though a primary goal of AD FS 2.0 is to reduce the need to hand roll your own STS, there are situations where building an STS can make sense. One important example of using WIF in this way already exists: AD FS 2.0 itself is built on WIF.\n\n## USING CLAIMS-BASED IDENTITY: SCENARIOS\n\nGetting your mind around claims-based identity requires understanding the basics of this technology. Still, the best way to get a feel for the approach is to walk through examples of how it's applied. Accordingly, this section looks at a number of different ways that claims can be used both on premises and in the cloud, each illustrated using the Microsoft technologies just described.\n\nClaims-based identity was first used to address problems within and between enterprises. This is still where the technology is most widely used today, and so it makes sense to look at on-premises scenarios first. This section walks through three examples:\n\nAccessing an enterprise application, where the application, the identity provider STS, and all of the users are within the same organization.\n\nAccessing an enterprise application via the Internet, which extends the first scenario to include remote Internet access by users outside the organization.\n\nUsing identity federation between enterprises, where a user in one organization accesses an application in another organization.\n\n# Accessing an Enterprise Application \n\nMost enterprises act as an identity provider today, and nearly every enterprise application must deal with identity. AD FS 2.0 and WIF can provide the foundation for using claims-based identity with on-premises applications, those running inside an organization. Figure 7 shows how this looks.\n![img-6.jpeg](img-6.jpeg)\n\nFigure 7: An enterprise can use AD FS 2.0 and WIF to support claims-based identity for its internal applications.\n\nIn this example, a user logs in using AD DS, getting an initial Kerberos ticket (step 1). The user then accesses a claims-aware application built using WIF, learning which STSs it trusts (step 2). This application only trusts the STS within its own enterprise, and so the user's browser or client requests a token from\n\nthat STS, supplying a Kerberos ticket to authenticate the user (step 3). AD FS 2.0, acting as an identity provider STS, verifies the ticket, then looks in AD DS for the information it needs to create the requested token (step 4). Exactly what claims appear in this token depends on both the user requesting it and the application that user is accessing - each application can indicate which claims it needs. Once the token has been created, the AD FS 2.0 STS sends it back to the user's browser or client (step 5), which sends it on to the application (step 6). The application then uses WIF to verify the token's signature and make its claims available for use (step 7).\n\nOne big plus of a claims-based approach is worth re-emphasizing here: Rather than having to go look for the information it needs about a user, the application can instead get everything handed to it in the token. If the application needs, say, the user's job title, it can specify this in its list of required claims. When the STS creates a token for the application, it finds the user's job title in AD DS and inserts it as a claim that the application can use. Without this, the application developer must write his own code to dig this information out of AD DS. Claims-based identity makes the developer's life significantly easier.\n\n# Accessing an Enterprise Application via the Internet \n\nSuppose this organization wishes to make this on-premises application accessible to remote employees via the Internet. Rather than modifying the application to accept username/password logins, a traditional solution, the same claims-based approach can be used-the application remains unchanged. Figure 8 shows how this looks.\n![img-7.jpeg](img-7.jpeg)\n\nFigure 8: An enterprise can use the AD FS 2.0 STS to create tokens for users on the Internet.\n\nHere, the user is on another computer outside the enterprise. As before, she accesses the application and learns which STSs it trusts (step 1). Once again, the application trusts only the STS in its own enterprise, and so the user's browser or client requests a token from that STS. Implemented using AD FS 2.0, that STS authenticates the user and sends back the token ${ }^{2}$ (step 2). The user's browser or client then submits this token to the application (step 3). The application relies on WIF to verify the token, then uses the claims it contains (step 4).\n\nRather than requiring the application to implement a different way of handling identity for Internet access, a claims-based approach lets it handle this situation just like the inside-the-enterprise case. Still, some extra complexity creeps in. When the user requests a token in step 2, for example, how does she authenticate herself to the STS? Kerberos tickets work just fine for users inside the enterprise, as shown earlier in Figure 7, but they don't work as well for Internet users. Instead, the user might provide a username and password in step 2 to authenticate her request, an option that Microsoft supports in AD FS 2.0. Since the users in this scenario are employees, they already have accounts in AD DS, and so they can log in with no trouble.\n\nBut what if the users aren't employees? Suppose the application needs to be exposed via the Internet to customers as well. Can this approach still work? The answer, unsurprisingly, is yes. Although it's not an especially common option, information about external users can also be stored in AD DS, letting it be accessed by AD FS 2.0.\n\nBut wait a minute: If Internet users still need usernames and passwords, how is the claims-based approach making things better? One important improvement is that it frees each application from the need to store sensitive password information, moving that responsibility instead to the much smaller number of STSs. Also, users no longer have a password for each application. Instead, they'll (at most) have one for each STS they use. While claims-based identity doesn't eliminate the need for usernames and passwords, it does help make the world simpler and more secure.\n\n# Providing Single Sign-On to an Enterprise Application in Another Organization \n\nAnother common identity challenge is letting users in one organization access an application running in some other organization. For example, suppose your company wishes to make an internal SharePoint site accessible to employees at a partner firm. One way to do this is to give each of these external users their own account in your company. While this approach works, it's unappealing. Those users won't like having a separate login, and your firm's administrators won't like having to administer accounts for people outside your company. Doing this also creates security risks-how can your administrators know when an external user has left his company and so should no longer have an account?\n\nA better solution is to let the external users access your application using their own identities. This approach requires no separate logins and no new accounts. What it does require, however, is creating a relationship between your firm and its partner. Doing this will likely require some kind of business\n\n[^0]\n[^0]:    ${ }^{2}$ To avoid opening the enterprise's firewall, it's possible to run an instance of AD FS 2.0 in a proxy role inside this organization's DMZ. This proxy then forwards requests to the full AD FS 2.0 service running inside the firewall.\n\nagreement between the two organizations, a topic that's beyond the scope of this discussion. It also, of course, requires putting in place the right technology.\n\nOne approach is to configure an application running in one organization to trust the identity provider STS in another. Figure 9 shows how this looks.\n![img-8.jpeg](img-8.jpeg)\n\nFigure 9: If the application trusts the STS in the client's enterprise, it can accept and use a token issued by that STS.\n\nIn this scenario, a user in enterprise $X$ accesses an application in enterprise $Y$ and learns which STSs it trusts (step 1). Here, that application is configured to trust both its own STS (the one in enterprise $Y$ ) and the identity provider STS in enterprise $X$. All that's required is for the user in enterprise $X$ to get a token from its own STS (step 2), then submit this token to the application (step 3). The application uses WIF to verify the token and extract its claims, then uses those claims in any way it likes (step 4).\n\nThis solution is simple to understand, but it's not without problems. Suppose this application has users in several different enterprises, for instance. With the approach shown here, the application would need to be configured to trust the identity provider STS in each one, an unappealing prospect. A better solution is to use federated identity, introducing a federation provider STS into the mix. Doing this means that the application only needs to trust its own STS, making life significantly simpler for the people who build and administer this application. Figure 10 shows this more likely situation.\n\n![img-9.jpeg](img-9.jpeg)\n\nFigure 10: If the application trusts only the STS in its own enterprise, the client must get a token from that STS to access the application.\n\nThis scenario starts in the same way: The user in enterprise $X$ accesses an application in enterprise $Y$ and learns which STSs it trusts (step 1). This time, however, that application is configured to trust only its own STS, the one in enterprise $Y$. Once it determines this, the browser or client on the user's system contacts the STS in enterprise $Y$ to learn which STSs it trusts (step 2). Here, that STS is acting in the role of federation provider, and so it's configured to trust the STS in enterprise X. Accordingly, the user's client or browser requests a token from the enterprise $X$ STS (step 3), which is acting in the role of identity provider.\n\nThe application won't accept this IdP token, however-it was issued by an STS that the application doesn't trust. Instead, the user's browser or client submits the IdP token to the federation provider STS in enterprise $Y$ (step 4). Because this STS is configured to trust the STS in enterprise $X$, the enterprise $Y$ STS can verify the token it receives from enterprise $X$, then issue an FP token that allows this user to access the application (step 5). The user presents this token to the application (step 6), and the application uses WIF to verify the token and extract its claims. The application can now use these claims as usual (step 7).\n\nNotice that the federation provider STS in enterprise $Y$ is acting as a claims transformer, accepting a token issued by STS $X$, then creating its own token. The contents of the token STS $Y$ creates might well be different from those in the token it receives from STS X-it's free to add, remove, or modify the claims. In fact, AD FS 2.0 provides a fairly sophisticated way for an administrator to define rules for these transformations. It's even possible to prohibit issuing tokens entirely when necessary.\n\nNotice also how convenient it is for the application to get the information it needs about a user directly in the token. When both user and application are in the same organization, the application might be able to access, say, AD DS directly to get information such as the user's job title. When they're in different organizations, as in the scenario shown here, the application almost certainly won't be allowed to do this. Getting everything it needs handed to it in the user's token is very nice indeed.\n\nOne final issue worth discussing is this: In step 2 above, the federation provider STS directs the user's browser or client to an identity provider STS. But if the federation provider STS trusts multiple identity providers, as it probably does, how does it know which one it should send this user to? This problem is known as home realm discovery, and there are several possible solutions. One option, which AD FS 2.0 supports, is to present the user with a list of possibilities, letting her choose the one she recognizes as her own organization. Another option is to have the user provide her email address, then let the federation provider STS infer her identity provider from the address's domain name. However it's done, using identity federation typically requires solving this problem in some way.\n\n# CLOUD SCENARIOS \n\nOn-premises scenarios are important, but more and more applications run in the cloud. Using claimsbased identity can simplify life for developers and users here, too. Once again, it's useful to look at several possibilities:\n\nAccessing a cloud-based application, where the user and the identity provider STS are inside an enterprise, but the application is running in the cloud.\n\nUsing cloud-based identity federation, which extends the first scenario by adding a federation provider STS that runs in the cloud.\n\nUsing multiple identity providers with cloud-based federation, where an application running in the cloud uses a cloud-based federation provider STS to accept identities issued by multiple identity provider STSs.\n\n## Providing Single Sign-On to an Enterprise Application in the Cloud\n\nSuppose a developer wants to build an application on a cloud platform, such as Windows Azure or Amazon Web Services, then make it available to users in her enterprise. Or suppose an enterprise decides to move an existing on-premises application to a cloud platform. How can users in the enterprise access this application without having a separate login with its own username and password?\n\nOne approach is to configure the application to trust the enterprise's identity provider STS. Figure 11 shows how this might look.\n\n![img-10.jpeg](img-10.jpeg)\n\nFigure 11: An enterprise can use AD FS 2.0 and WIF to provide single sign-on to an application running in the cloud.\n\nThis scenario isn't really new; in fact, it's very similar to the first scenario shown back in Figure 7. As in that example, the user accesses the application and learns which STS it trusts (step 1), then gets a token from that STS (step 2). Although it's not shown in the figure, the user probably authenticates himself to the STS using a Kerberos ticket, just as in Figure 7. Once the user has a token from this identity provider STS, his browser or client submits it to the application (step 3). The application uses WIF to validate and process the token, then uses the claims as usual (step 4).\n\nFrom the user's point of view, this looks just like accessing an on-premises application. And since the application is configured to trust the identity provider STS in enterprise $X$, there's no need for identity federation. This simple scenario can work well for cloud applications used by a single enterprise.\n\n# Providing Single Sign-On to a SaaS Application \n\nIn the identity federation scenario shown earlier in Figure 10, the federation provider STS ran inside the same organization as the application being accessed. This isn't required, however. As long as the application trusts the federation provider STS, that STS can run anywhere-even in the cloud.\n\nWindows Azure AppFabric Access Control is exactly that: a federation provider STS that runs in the cloud. While it can be used by applications running either on-premises or in the cloud, the most interesting ACS\n\nscenarios today are for cloud-based applications. For example, suppose a SaaS application wishes to provide single sign-on to users in many organizations, each with its own identity provider STS. While it would be possible to configure the application to trust the STS in each organization, doing this is problematic. A better solution is to use ACS. Figure 12 shows how the interaction works with one of those organizations.\n![img-11.jpeg](img-11.jpeg)\n\nFigure 12: A cloud application can use the Access Control service as a federation provider STS, making it easier to offer single sign-on to users in multiple enterprises.\n\nAlthough the figure looks a bit different, this is really just another example of federation like those shown earlier. Here's what happens, step by step:\n\nAs before, the user accesses the application and learns that it trusts only the federation provider STS provided by ACS (step 1).\n\nThe user's browser or client contacts that STS to learn which STSs it trusts, a list that includes the STS in enterprise $X$ (step 2).\n\nThe browser or client gets a token from this identity provider STS, implemented here with AD FS 2.0 (step 3).\n\nThe browser or client sends the token to the ACS STS (step 4).\nThe ACS STS validates this IdP token, then creates an FP token using the ACS rules engine (step 5). This new token may well contain some claims that are different from those in the original AD FS token; as usual, the federation provider STS can perform claims transformation.\n\nThe token created by ACS is then returned to the browser or client (step 6).\n\nThe browser or client sends the token to the application (step 7).\n\n- The application uses WIF to validate the FP token, then uses the claims it contains (step 8).\n\nNotice how using ACS as a federation provider STS simplifies life for the cloud application. Rather than trusting the identity provider STS in each of its customers, it can instead trust only the ACS STS. Because ACS is explicitly designed to handle this kind of federation scenario, configuring it to trust various identity provider STSs is straightforward. Using this cloud-based federation provider STS also lets the application rely on the rules engine ACS provides, giving it one place to define any necessary claims transformations. Rather than dealing with diverse tokens issued by diverse identity provider STSs, the application always gets a token in the same format containing an expected set of claims.\n\n# Allowing Logins with Facebook, Google, and Other Cloud Identity Providers \n\nIn the example just described, the identity provider STSs were assumed to be inside enterprises, and so they were provided by technologies such as AD FS 2.0. For a SaaS vendor providing a multi-tenant business application, this is a common situation. But think about a cloud application that's used mostly by consumers rather than business users. Consumers don't get their identities from AD FS 2.0-pretty much nobody runs Active Directory in their home. Instead, people rely on cloud identity providers such as Google, Facebook, Windows Live ID, and Yahoo.\n\nAccepting these identities can make life simpler for a cloud application's users. For the creators of the application, however, doing this introduces some complexities. Because these identity providers use different protocols and token formats-they don't all conform to a single standard-implementing support for them is non-trivial. And without a federation provider STS, the cloud application must be configured to trust all of them.\n\nThe Access Control service addresses both problems. It's designed to maintain trust relationships with multiple identity providers, as already described, and it also has built-in support for the protocols and token formats used by today's most popular cloud identity providers. Because of this, using ACS can make it simpler for cloud applications to accept diverse identities. Figure 13 shows how this looks.\n\n![img-12.jpeg](img-12.jpeg)\n\nFigure 13: The Access Control service makes it easier for an application to accept identities from multiple cloud identity providers.\n\nOnce again, this is really just a federation scenario like those already described, and so it starts with the user accessing the application and learning which STSs it trusts (step 1). Here, the only directly trusted STS is provided by ACS, as the figure shows. But suppose this application will actually accept identities from, say, Google and Facebook-how does it convey this to the user? One popular option is to display icons on the login page presented to the user for each identity provider that this application trusts, then let the user select the one it wishes to use, which is what's done here (step 2). Once this choice has been made, the user's browser contacts the chosen identity provider STS. This STS authenticates the user, probably by making him enter a username and password, then returns a token for this identity (step 3).\n\nThe application doesn't directly trust the identity provider STS, however, so the user's browser must send this newly received IdP token to ACS (step 4). An administrator has configured the ACS STS to indicate that this application trusts both Google and Facebook, and so once it has verified that the incoming token is from one of these identity providers, the ACS STS creates a new token (step 5). This FP token is returned to the user's browser (step 6), then forwarded to the application (step 7). As usual, the application relies on WIF to validate the FP token, then uses the claims it contains (step 8).\n\nAs the figure shows, ACS has built-in support for Windows Live ID, Google, Facebook, Yahoo, and any identity provider that uses OpenID 2.0. As the figure also shows, however, this scenario only supports Web browsers-these cloud identity providers don't currently allow any other option. Another challenge with cloud identity providers is that they typically provide only very simple claims. Recall, for instance, that Windows Live ID sends just an opaque unique identifier. An application is free to request other information from the user, of course, then store that information itself, but ACS doesn't provide a service to do this.\n\n# CONCLUSION \n\nWithout claims-based identity, application developers are faced with a diverse set of scenarios, each with its own identity solution. Using claims-based identity collapses all of these down to just one problem: How does an application get information about a user from a trusted source? As this overview has shown, claims-based identity provides a consistent answer across a wide range of scenarios, both on premises and in the cloud. And even though the technologies described in this overview are from Microsoft, there are no proprietary links between them; all communication is based on industry standards.\n\nChanging how people and applications work with identity is not a small thing. The whole world needn't change at once, however. Claims-based applications can be built and deployed alongside existing applications, which makes migration to this much-improved approach simpler. And with the advent of AD FS 2.0, Windows Azure AppFabric Access Control, and Windows Identity Foundation, all of the pieces required to use claims-based identity on Windows are here.\n\nClaims-based identity is far from a Microsoft-only initiative-many vendors are involved. Still, making these components widely available for Windows is bound to make the approach more popular. For anyone who cares about improving the way we use identity in the digital world, this is certainly a step forward.\n\n## ABOUT THE AUTHOR\n\nDavid Chappell is Principal of Chappell \\& Associates (www.davidchappell.com) in San Francisco, California. Through his speaking, writing, and consulting, he helps people around the world understand, use, and make better decisions about new technology.","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"919c7f1338793ae2fac54c67aa63d4787f7489c0f785a51b4a26af5e75ba6f15","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466X5ZXXDFA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDshJeduGsNOjbUrsv3X0gM0%2BRVbZiMcI%2FOOaW8VsszpQIhANcPyzMH4h6GEEkv87dWj%2FH7Y0lRfHQtX1AhZSlPCIaBKv8DCE4QABoMNjM3NDIzMTgzODA1IgxrXzJX11BfXNgCKXEq3AMxA2Y1ecfAmBsCyK49eJoplxLEVzupla9GAP02lNvYnDuKmDVhs2iCLABpTfPTcLRLXu9RuAXALlDTcI52lxNPnuWzqY%2Fva1DJbwFyH4J5XxtZNu0lttUwFRqMoDhwlD9nq3l4haFg8Zac9kJ3zjFgVqD98aubQx3kYTrhPwIZqjuldzTvmq%2FaIi9riX3zK47cyR%2BxIByDV7ak9dJhq5ibmjgfRjaBHa8gRDx0FN6qapVQ3hDepYoD%2Bll8DCxaS4UKb3hOun0Q%2FGMm16AkridjkrdbtjjzQuEdtIcKlt58wwww7CLPPlE8xlLZ6y7zgFDehp%2BmHWNDh1xSQ3qDMYtAHDcp46tMmG%2F%2Bkq6aRpQipo2DBBrBzKCBkiUnyUkP5OqIi1kQ%2BW594qiQGdwvwESqgHNMnjD1Fa79FqmnxTasexbybdv%2B8OrLjy%2BvmkZh8mI6f%2ByKlYBEzuYktrGrvnVaw3h0RUoQcEIq3TrXT%2BJbgUM%2ByX%2Fq1Irpw2ROvm%2Fz3kSK0fnFQl%2BnAPvdholz1zZ7vtTwjIp16PxU%2BDnFETtqRD2cnUMlL3%2BgwbCzwlyEzKf%2BYi65XoUDYoOjiIRr60E6KxfjClO9RyCNeqyBXDUl0jx0WpDxUfZd%2F%2BRa6jDg8MfJBjqkASWkU8CcIN8yry3ZmeIn1XxHah6B87kS8I1h7uZa9DyxXqDav0w72pJ0C3V%2B6oJSXrWD8I7MtmrBxjTeC%2BU6QH%2F0v9lqm3gblQzvFcLKrfDF%2BCtAGpA7auhge8fGDi6r2ORNLBBhVgu6hsbhjHTWvN%2BVWdCL0bq5f2ARfnkou1hmcAVHlPEAb8V%2BcZr9qkMxtw%2BNJwnNR3vTdOdihZeFQc4GvqPd&X-Amz-Signature=a9de6defa6dd4b86e3977ca0cd1d0a074fbe1cd54f0f948131403ca4fb8581e6&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"application","mime_type":"application/pdf","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/edad5008-5883-462d-8b4e-c52187ca0849-Claims-Based Identity for Windows.pdf","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466X5ZXXDFA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDshJeduGsNOjbUrsv3X0gM0%2BRVbZiMcI%2FOOaW8VsszpQIhANcPyzMH4h6GEEkv87dWj%2FH7Y0lRfHQtX1AhZSlPCIaBKv8DCE4QABoMNjM3NDIzMTgzODA1IgxrXzJX11BfXNgCKXEq3AMxA2Y1ecfAmBsCyK49eJoplxLEVzupla9GAP02lNvYnDuKmDVhs2iCLABpTfPTcLRLXu9RuAXALlDTcI52lxNPnuWzqY%2Fva1DJbwFyH4J5XxtZNu0lttUwFRqMoDhwlD9nq3l4haFg8Zac9kJ3zjFgVqD98aubQx3kYTrhPwIZqjuldzTvmq%2FaIi9riX3zK47cyR%2BxIByDV7ak9dJhq5ibmjgfRjaBHa8gRDx0FN6qapVQ3hDepYoD%2Bll8DCxaS4UKb3hOun0Q%2FGMm16AkridjkrdbtjjzQuEdtIcKlt58wwww7CLPPlE8xlLZ6y7zgFDehp%2BmHWNDh1xSQ3qDMYtAHDcp46tMmG%2F%2Bkq6aRpQipo2DBBrBzKCBkiUnyUkP5OqIi1kQ%2BW594qiQGdwvwESqgHNMnjD1Fa79FqmnxTasexbybdv%2B8OrLjy%2BvmkZh8mI6f%2ByKlYBEzuYktrGrvnVaw3h0RUoQcEIq3TrXT%2BJbgUM%2ByX%2Fq1Irpw2ROvm%2Fz3kSK0fnFQl%2BnAPvdholz1zZ7vtTwjIp16PxU%2BDnFETtqRD2cnUMlL3%2BgwbCzwlyEzKf%2BYi65XoUDYoOjiIRr60E6KxfjClO9RyCNeqyBXDUl0jx0WpDxUfZd%2F%2BRa6jDg8MfJBjqkASWkU8CcIN8yry3ZmeIn1XxHah6B87kS8I1h7uZa9DyxXqDav0w72pJ0C3V%2B6oJSXrWD8I7MtmrBxjTeC%2BU6QH%2F0v9lqm3gblQzvFcLKrfDF%2BCtAGpA7auhge8fGDi6r2ORNLBBhVgu6hsbhjHTWvN%2BVWdCL0bq5f2ARfnkou1hmcAVHlPEAb8V%2BcZr9qkMxtw%2BNJwnNR3vTdOdihZeFQc4GvqPd&X-Amz-Signature=a9de6defa6dd4b86e3977ca0cd1d0a074fbe1cd54f0f948131403ca4fb8581e6&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"Claims-Based Identity for Windows.pdf","expiry_time":"2025-12-04T22:55:51.051000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466X5ZXXDFA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDshJeduGsNOjbUrsv3X0gM0%2BRVbZiMcI%2FOOaW8VsszpQIhANcPyzMH4h6GEEkv87dWj%2FH7Y0lRfHQtX1AhZSlPCIaBKv8DCE4QABoMNjM3NDIzMTgzODA1IgxrXzJX11BfXNgCKXEq3AMxA2Y1ecfAmBsCyK49eJoplxLEVzupla9GAP02lNvYnDuKmDVhs2iCLABpTfPTcLRLXu9RuAXALlDTcI52lxNPnuWzqY%2Fva1DJbwFyH4J5XxtZNu0lttUwFRqMoDhwlD9nq3l4haFg8Zac9kJ3zjFgVqD98aubQx3kYTrhPwIZqjuldzTvmq%2FaIi9riX3zK47cyR%2BxIByDV7ak9dJhq5ibmjgfRjaBHa8gRDx0FN6qapVQ3hDepYoD%2Bll8DCxaS4UKb3hOun0Q%2FGMm16AkridjkrdbtjjzQuEdtIcKlt58wwww7CLPPlE8xlLZ6y7zgFDehp%2BmHWNDh1xSQ3qDMYtAHDcp46tMmG%2F%2Bkq6aRpQipo2DBBrBzKCBkiUnyUkP5OqIi1kQ%2BW594qiQGdwvwESqgHNMnjD1Fa79FqmnxTasexbybdv%2B8OrLjy%2BvmkZh8mI6f%2ByKlYBEzuYktrGrvnVaw3h0RUoQcEIq3TrXT%2BJbgUM%2ByX%2Fq1Irpw2ROvm%2Fz3kSK0fnFQl%2BnAPvdholz1zZ7vtTwjIp16PxU%2BDnFETtqRD2cnUMlL3%2BgwbCzwlyEzKf%2BYi65XoUDYoOjiIRr60E6KxfjClO9RyCNeqyBXDUl0jx0WpDxUfZd%2F%2BRa6jDg8MfJBjqkASWkU8CcIN8yry3ZmeIn1XxHah6B87kS8I1h7uZa9DyxXqDav0w72pJ0C3V%2B6oJSXrWD8I7MtmrBxjTeC%2BU6QH%2F0v9lqm3gblQzvFcLKrfDF%2BCtAGpA7auhge8fGDi6r2ORNLBBhVgu6hsbhjHTWvN%2BVWdCL0bq5f2ARfnkou1hmcAVHlPEAb8V%2BcZr9qkMxtw%2BNJwnNR3vTdOdihZeFQc4GvqPd&X-Amz-Signature=a9de6defa6dd4b86e3977ca0cd1d0a074fbe1cd54f0f948131403ca4fb8581e6&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466X5ZXXDFA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDshJeduGsNOjbUrsv3X0gM0%2BRVbZiMcI%2FOOaW8VsszpQIhANcPyzMH4h6GEEkv87dWj%2FH7Y0lRfHQtX1AhZSlPCIaBKv8DCE4QABoMNjM3NDIzMTgzODA1IgxrXzJX11BfXNgCKXEq3AMxA2Y1ecfAmBsCyK49eJoplxLEVzupla9GAP02lNvYnDuKmDVhs2iCLABpTfPTcLRLXu9RuAXALlDTcI52lxNPnuWzqY%2Fva1DJbwFyH4J5XxtZNu0lttUwFRqMoDhwlD9nq3l4haFg8Zac9kJ3zjFgVqD98aubQx3kYTrhPwIZqjuldzTvmq%2FaIi9riX3zK47cyR%2BxIByDV7ak9dJhq5ibmjgfRjaBHa8gRDx0FN6qapVQ3hDepYoD%2Bll8DCxaS4UKb3hOun0Q%2FGMm16AkridjkrdbtjjzQuEdtIcKlt58wwww7CLPPlE8xlLZ6y7zgFDehp%2BmHWNDh1xSQ3qDMYtAHDcp46tMmG%2F%2Bkq6aRpQipo2DBBrBzKCBkiUnyUkP5OqIi1kQ%2BW594qiQGdwvwESqgHNMnjD1Fa79FqmnxTasexbybdv%2B8OrLjy%2BvmkZh8mI6f%2ByKlYBEzuYktrGrvnVaw3h0RUoQcEIq3TrXT%2BJbgUM%2ByX%2Fq1Irpw2ROvm%2Fz3kSK0fnFQl%2BnAPvdholz1zZ7vtTwjIp16PxU%2BDnFETtqRD2cnUMlL3%2BgwbCzwlyEzKf%2BYi65XoUDYoOjiIRr60E6KxfjClO9RyCNeqyBXDUl0jx0WpDxUfZd%2F%2BRa6jDg8MfJBjqkASWkU8CcIN8yry3ZmeIn1XxHah6B87kS8I1h7uZa9DyxXqDav0w72pJ0C3V%2B6oJSXrWD8I7MtmrBxjTeC%2BU6QH%2F0v9lqm3gblQzvFcLKrfDF%2BCtAGpA7auhge8fGDi6r2ORNLBBhVgu6hsbhjHTWvN%2BVWdCL0bq5f2ARfnkou1hmcAVHlPEAb8V%2BcZr9qkMxtw%2BNJwnNR3vTdOdihZeFQc4GvqPd&X-Amz-Signature=a9de6defa6dd4b86e3977ca0cd1d0a074fbe1cd54f0f948131403ca4fb8581e6&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"file_27720d45-f5f8-8072-a1f5-f115df5b57c9_-3111494336121123896","breadcrumbs":[],"name":"image.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: image.png\n\n**File Name**: image.png\n**Caption**: \n\n# Content\n\nBUILD SMARTER AGENTS.\n\n![img-0.jpeg](img-0.jpeg)","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"a557cdad6610dd7598dbbbec55ad77408d8d015bb54be7410af85c0f2b4c9f4e","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=aef226aa067d5cc0303a45dcdd9d190bcf06eb4fb99e36d1f55b7b376dbeadf0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/661725fb-062f-4f93-a200-768a26555fb9-image.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=aef226aa067d5cc0303a45dcdd9d190bcf06eb4fb99e36d1f55b7b376dbeadf0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"image.png","expiry_time":"2025-12-04T22:55:51.884000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=aef226aa067d5cc0303a45dcdd9d190bcf06eb4fb99e36d1f55b7b376dbeadf0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466T7H2ETXA%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215551Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIQDWymPZ5j%2FU%2BHxb%2BWZJyK%2BuLNNL93ImSkcxr3SdDkb8ogIgNB%2F195Kk3%2Bl3PxHlMaPCSm%2FdUjB6zbBnQywjS5MKn08q%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDLtHWYcLt7OsIOvTQSrcA2xqgSxcb%2FQ5N40hAV%2FonhXvmJMb4sp%2BcSyV50tv%2FyU0WLyrVCWS%2Bjk3kGxSS5riIpYMjzCvrqp2th4h4NB5L7%2BB39W5%2BlruTWxGclfdNFCnK48n%2FAgdW59YfkCVQzmMeTFkLsHNhz2abRIbIQOx9beZgNyhX5g5v%2F8QGqpXzLGP8fFFTxL%2BQJXru0T62boq6n%2FcxnzaQNLDzSxXpN3lsNdje7MPFMiEWuR7KVAadPx3ai8EQ9T3Ru2Ue7OtKsMu5ceKMJkUiTe%2FrL5uR%2B%2Bc%2BUBlPoGF9qt0Kc9ToYvTO4xq%2FkQDBcFchOpT92tRvBgq7tNTZSMVXE8bTU7RtulHNL8tRllKPzttRivcYnzjZP8oHujx2k%2F%2FB%2F5vy8HOH6qsxGyKWQWCMRY7Z7Mkcz0lA7HO4a2j8ZeymXsh4GXZHr2pZPWpvBYSIyfm3OLrrEmFzOAf1yyhO%2F%2BKAwVy1uvt39VEZRp%2FDi5F0vqcLPRjgrVPds53S6qqh5HVvrt3heIVa%2F6f0VZ26Yp0nK2UTqa48Y5R2%2BiUkQvdjnx7fWQEjlT3fTP%2By7yRIdHNs5E9I9SXn55NodgJ%2BA3wDnd%2F44IsypQk7Bq7pxlcP42O7mfddrObs2IpDWwXuRwh3gOSMPfwx8kGOqUBO%2BHjIvdDynhTfWZ1Kcg9S4y2eWGp1bZqE%2FidAKJ62luytD9jg024wL6z7XktJQVaBwiIeshtDdyqjXpCcFrdKrdv96SnsWLNzzY%2FrFQoJAFAsPdQVFihojzSs2osn4cwFkoHtOQ3rkgSERashd9qCqtiegOkouJraKCnru1egkZrVTBItovLIgiYvGJWELEzJVHjUE5%2BndY2msEGtV3nETGy2YQ0&X-Amz-Signature=aef226aa067d5cc0303a45dcdd9d190bcf06eb4fb99e36d1f55b7b376dbeadf0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"2b320d45-f5f8-8046-8302-d937394f7f28","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","name":"Airweave Admin Runbook","entity_type":"NotionPageEntity"}],"name":"User Acceptance Tests","created_at":"2025-11-22T21:43:00","updated_at":"2025-11-26T04:05:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: User Acceptance Tests\n**Path**: Page: Mistral → Page: Airweave Admin Runbook\n\n**Title**: User Acceptance Tests\n**Content**: ## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n1. Get first signal on perceived relevance and latency for realistic queries.\n\n1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n- Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n- Content: SharePoint documents in selected sites and libraries\n\n- Participants: ~10 employees across different departments and permission profiles\n\n- Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n1. **Environment ready**\n\n  1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n1. **Test users and content ready**\n\n  1. At least 10 test users mapped one-to-one to real AD accounts\n\n  1. For each user, a small curated set of documents with clear expected visibility:\n\n    1. 5 private docs (only that user)\n\n    1. 5 team docs (shared with a specific group or team site)\n\n    1. 5 org wide docs (everyone)\n\n    1. A few docs they must *not* see but colleagues can\n\n1. **Planned permission changes are documented with timestamps**\n\n  1. A list of documents where you will:\n\n    1. Grant access to a new user or group\n\n    1. Remove access from a user or group\n\n    - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n1. **Time windows**\n\n  1. Agreed test window where sync jobs are running and stable\n\n  1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"ac972d4978999ae52a3cf4618923aab3f1e14852621ad48888111d347f0c7143","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b320d45-f5f8-8046-8302-d937394f7f28","parent_id":"2b420d45-f5f8-802f-bdc0-f3e3f7d2c3cf","parent_type":"page_id","title":"User Acceptance Tests","created_time":"2025-11-22T21:43:00","updated_time":"2025-11-26T04:05:00","content":"## Purpose\n\nThis user acceptance test (UAT) handbook a structured way for real users at Customer to verify that “Le Chat + Airweave on SharePoint” behaves correctly for their access rules and workflows. This is how we will prove RBAC and search quality are correct in production.\n\n---\n\n## Goals\n\nFor the UAT round with ~10 users at Customer:\n\n1. Validate that users only see what they are allowed to see in Le Chat search results, across key permission patterns.\n\n1. Validate that permission and content changes in SharePoint are reflected in Le Chat after the agreed sync window.\n\n1. Get first signal on perceived relevance and latency for realistic queries.\n\n1. Produce a clear Pass / Needs work summary aligned with SOW deliverables and functional requirements.\n\n---\n\n## **1. Scope**\n\n- Environment: [Le Chat instance name] connected to Airweave SharePoint 2019 connector\n\n- Content: SharePoint documents in selected sites and libraries\n\n- Participants: ~10 employees across different departments and permission profiles\n\n- Out of scope: performance load testing, non SharePoint connectors, UI design review\n\n## **2. Environment and prerequisites checklist**\n\nTick these before starting:\n\n1. **Environment ready**\n\n  1. Le Chat instance configured to use Airweave search endpoint with permission aware retrieval\n\n1. **Test users and content ready**\n\n  1. At least 10 test users mapped one-to-one to real AD accounts\n\n  1. For each user, a small curated set of documents with clear expected visibility:\n\n    1. 5 private docs (only that user)\n\n    1. 5 team docs (shared with a specific group or team site)\n\n    1. 5 org wide docs (everyone)\n\n    1. A few docs they must *not* see but colleagues can\n\n1. **Planned permission changes are documented with timestamps**\n\n  1. A list of documents where you will:\n\n    1. Grant access to a new user or group\n\n    1. Remove access from a user or group\n\n    - *With timestamps recorded so we can validate that we respect the incremental sync expectations (p95 under 5 minutes, permissions faster than data).*\n\n1. **Time windows**\n\n  1. Agreed test window where sync jobs are running and stable\n\n  1. UAT sessions scheduled inside that window\n\n---\n\n## **3. UAT scenarios and instructions**\n\nThis section describes a minimal set of scenarios that map to the POC’s requirements and are simple enough for non technical users.\n\n### **5.1 Scenario A - Private document visibility**","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"emoji","emoji":"🧪"},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/57e13072-24d2-4da6-928a-f92f7b094923/Twitter_post_-_24.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB46627CFWXHI%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215610Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQC18kpWv5LkttXmPBj7F0MyG5Zsdoq2pLCaMjf37bOnVwIhAM4itjWrXbYu4PZ8JnZaQcPraJWaZnY544ge9vpDm1bjKv8DCE4QABoMNjM3NDIzMTgzODA1Igx5f1vHGLSQDcnywrYq3APWkFWXEVppsJbFEKvetk7jbb%2FFeFYuOs2px06a37r4WG6W7ZdTD2hAQNL88UJK3Vq996XZx1xuwcDDETwA9bBR24wCOxhyfPki2xVJ8Yptx0lsstlkeL6DnYsdW2ZQlUOkKJb4lUNavK%2BPhxVBXeCseyIZOI75cSTKzJ3CVO0EA4KKEyI2cl63t2zWhfKOewyDI76hC8K4bEsatbqfHME7dfxTXtYnL6aVaYl3wnFIAx1A549kGk94F%2FC3SmJ133IfP8Mr%2FGK4uFUEc1KI%2Fco%2F4moopmRqTPTNaAyKPf5rZe3nna9H0euObZi5Emz4iubG5NzKOdxXukF%2Fq0t5%2BbOKfWF65%2Bufisj2hJDYrB9f3XIxI%2FmreS48r55hVnspiTw%2F4D9DodHJIgfG2EPOvQCbKmCgFL3tsW0LiAQYn4ZnWx6qWAvBsW2BXahWUlpq87Gdg%2ByZyJcbFv3TUU9CrFaJU6YdwmQy5x1B2b1IhmFz8IdTKP6yVNmHGwzxzBzosHB%2BU2rGbCT1oqNrGB4kXvrHeVpvlsO2ZreS3T9lIywccY4HoX0u6PPK1EqMBUE7X6TKD%2F5s0ZaSk5X0l%2BkDF22qc3vNKuX06f69OLTFdJ%2BNgYO47gvZkQTj%2Fwv01TCC8cfJBjqkAW6XydpvHzC%2FtDbXbcZgm4lIOUQn7py26tXIsi993vRM28dySEUZ7UHORZoI1ZR%2BIda%2FvziFxjILoXsljIRfD3Y0xaxxx%2Fz%2B%2Fee7RBr7RJS6JFiYGJlYq1B%2FDazC6yNsgFII5szoeoGEmS1oSlS1%2FfWqk3WOEAGcFIQS4p3%2BaXftg%2FkJ5oxc%2F9LfrtIgMmfCgPl1N%2F6tW5b2h6tkSxD%2Fg1qRWJiu&X-Amz-Signature=9fbfbb62b9ae0a9ef1d3ddcf16353a40def24d3bf4088687fe0b4b3ec7cf4bb0&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:56:10.511Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/User-Acceptance-Tests-2b320d45f5f880468302d937394f7f28","content_blocks_count":38,"max_depth":2,"web_url":"https://www.notion.so/User-Acceptance-Tests-2b320d45f5f880468302d937394f7f28"}
{"entity_id":"0AI9wULv34ENVUk9PVA","breadcrumbs":[],"name":"Airweave","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: google_drive\n**Type**: GoogleDriveDriveEntity\n**Name**: Airweave\n\n**Title**: Airweave","airweave_system_metadata":{"source_name":"google_drive","entity_type":"GoogleDriveDriveEntity","sync_id":"fc35b7d2-5f26-409b-988d-288d322bffc6","sync_job_id":"55ed7cd1-0f08-4d86-9027-0594e96ac986","hash":"a878dc0d1b193862643d4e46e60ec968b3ea092801ff4ee74115c62ebea00656","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"drive_id":"0AI9wULv34ENVUk9PVA","title":"Airweave","created_time":null,"kind":"drive#drive","color_rgb":null,"hidden":false,"org_unit_id":null,"web_url":"https://drive.google.com/drive/folders/0AI9wULv34ENVUk9PVA"}
{"entity_id":"1wg2fKDoYTrONKXrut1E69yZmQRHEAWhJ","breadcrumbs":[{"entity_id":"my_drive","name":"My Drive","entity_type":"GoogleDriveDriveEntity"}],"name":"Amazon-2024-Annual-Report.pdf","created_at":"2025-12-02T00:08:49.951000Z","updated_at":"2025-11-05T11:46:48Z","textual_representation":"# Metadata\n\n**Source**: google_drive\n**Type**: GoogleDriveFileEntity\n**Name**: Amazon-2024-Annual-Report.pdf\n**Path**: DriveDrive: My Drive\n\n**Title**: Amazon-2024-Annual-Report.pdf\n\n# Content\n\n$$\n\\begin{array}{llll}\n2 & 0 & 2 & 4\n\\end{array}\n$$\n\n# amazon \n\nANNUAL REPORT\n\n# amazon \n\nDear Shareholders:\n2024 was a strong year for Amazon.\nOur total revenue grew $11 \\%$ year-over-year (\"YoY\") from $\\$ 575$ B to $\\$ 638$ B. By segment, North America revenue increased $10 \\%$ YoY from $\\$ 353$ B to $\\$ 387$ B, International revenue grew $9 \\%$ YoY from $\\$ 131$ B to $\\$ 143$ B, and AWS revenue increased $19 \\%$ YoY, from $\\$ 91$ B to $\\$ 108$ B. For perspective, just 10 years ago, AWS revenue was $\\$ 4.6 \\mathrm{~B}$; and in that same year, Amazon's total revenue was $\\$ 89 \\mathrm{~B}$.\n\nAmazon's operating income in 2024 improved $86 \\%$ YoY, from $\\$ 36.9 \\mathrm{~B}$ (an operating margin of $6.4 \\%$ ) to $\\$ 68.6 \\mathrm{~B}$ (an operating margin of $10.8 \\%$ ). Free Cash Flow, adjusted for equipment finance leases improved from $\\$ 35.5 \\mathrm{~B}$ in 2023 to $\\$ 36.2 \\mathrm{~B}$.\n\nApart from the financial results, we made our customers' lives meaningfully better and easier. In our Stores business, we substantially expanded selection, continued lowering prices (independent research firm, Profitero, found Amazon the lowest-priced online U.S. Retailer for the eighth year in a row), and for the second year in a row, we shipped at record speed to our Prime members. AWS launched a slew of new infrastructure and AI services that make it even easier to build remarkable customer experiences, including our latest custom AI silicon (Trainium2), a new set of frontier foundation models in Amazon Nova, and significant expansion of available models and features in our leading Generative AI (\"GenAI\") services Amazon SageMaker and Amazon Bedrock. Prime Video continued to offer compelling original shows, including new seasons for Fallout, Reacher, The Boys, and The Lord of the Rings: Rings of Power, movies like Road House, The Idea of You, and Red One, live sports like Thursday Night Football and UEFA Champions League in Europe (with the NBA and NASCAR coming in 2025), and new selection, highlighted by Apple TV+ joining Prime Video Channels. We launched a series of new Kindle devices that included a new color version, a larger Scribe option, and our fastest Paperwhites ever (the collection of which drove the highest Kindle unit sales for a single quarter in over a decade). And, we continued to add more selection, price transparency, and same day shipping for Amazon Pharmacy.\n\nThese accomplishments are a subset of what the team launched in 2024, but represent a lot of invention, hard work, and thoughtful execution across Amazon. I'm thankful for my teammates and their delivery this past year (some of which you can see in our 2024 results, others of which won't be visible for the next few years).\n\n## A Why Culture\n\nEvery year in my annual letter, I try to share insight into what makes Amazon tick. At the highest level, we're aiming to be Earth's most customer-centric company, making customers' lives better and easier every day. This is not easy to do in general, let alone year after year. In fact, it's actually quite hard, especially with the rapid rate of change in technology, customer habits, and new products from large and small companies alike. If we want to have a chance at succeeding in our mission, we have to constantly question everything around us.\n\nWe've had this long-held philosophy at Amazon about two-way and one-way door decisions. A two-way door decision is one where if you get the decision wrong, you can walk back through that door, revert to where you were, and there are few (if any) ramifications. You can make these decisions quickly and locally. A oneway door decision is one where it's quite difficult (if not impossible) to walk back through that door if you get the decision wrong, so these decisions are made more methodically. But, both of these constructs assume the door is unlocked. A lot of invention is about trying to open doors that have historically seemed bolted shut. And, over the past 30 years, we've found one of the most important keys to unlock these doors has been a simple question: \"Why?\"\n\n\"Why does this customer experience have to be this way?\" \"Why can't it be better?\" \"What are the constraintswhy must we accept them?\" \"Why can't we invent around that?\" \"Why will it take so long to get to customers?\" Why?\n\nMy Dad has told me that I was the kind of kid who kept asking why, perhaps to an annoying extent. He's also reminded me how shortly after I joined Amazon in 1997, he tried to persuade me to work somewhere more traditional (and on the east coast closer to family)-only to realize that I'd already found the perfect fit.\n\nThat's because Amazon is a Why company. We ask why, and why not, constantly. It helps us deconstruct problems, get to root causes, understand blockers, and unlock doors that might have previously seemed impenetrable. Amazon has an unusually high quotient of this WhyQ (let's call it \"YQ\"), and it frames the way we think about everything that we do.\n\nStarting in 1995, we asked why can't we offer customers every in-print book?\nThen, we asked, why limit ourselves to in-print-why can't we also offer every out-of-print book?\nWhy not offer every book, ever written, in any language-all available within 60 seconds on a device that's light and fits in the palm of your hand (Kindle)?\n\nWhen we offer reviews, why must they all come from professional \"experts?\" Customers are great resources and will be brutally honest. Why not include customer reviews even if they sometimes dissuade a purchase?\n\nWhy not offer more than Books? What about Music, Video, Electronics, Tools, Kitchen, Apparel, Home Furnishings?\n\nWhy not practically everything?\nWhy should we be the only sellers of these items? Millions of third-party merchants and small sellers offer similar or unique items. Why not let customers choose the selection, price, and delivery speed they prefer from among these millions of sellers?\n\nAfter struggling for a couple years to create awareness for sellers' selection, we asked ourselves why not show their selection on the same product detail pages as our first-party selection (where all the traffic was)?\n\nWhy not allow our sellers to also store items in our fulfillment network, enable those items to have fast, Prime delivery, and fulfill those items for sellers (a program called Fulfillment by Amazon)?\n\nWhy not experiment with relevant advertisements in our store to expose customers to new sellers and items (versus only what our algorithms might surface based on past purchases)?\n\nWhy does every company need their own capital-intensive datacenters and infrastructure? Why should every development team keep reinventing services like compute, storage, database, and analytics? Why should builders spend $80 \\%$ of their time on the undifferentiated heavy lifting vs. their unique customer experience? Why not build a set of services (AWS) to solve that for internal and external builders?\n\nWhy do I have to buy a physical video to watch a movie? Why do I need cable or linear TV to watch amazing TV shows (Prime Video)?\n\nWhy can't I get my Prime shipping benefits on other websites than just Amazon (Buy with Prime)?\nI can go on. But, you get the idea. Every one of these Whys have led to significant invention, and every one of them have made customers' lives better and easier. Some of these seem obvious now. But at the time, these were provocative questions that required curiosity, risk-taking, experimentation, and persistence to make these into success stories.\n\n# Enabling a Why Culture \n\nIf you believe having high YQ is critical to inventing for customers, how do you enable it? In my opinion, it's not solved with one mechanism. It needs to be built deeply into your culture and leadership team, and has to be fiercely protected over time if you're lucky enough to be successful. Here are a few of the strategies we employ.\n\nCreate leadership principles that set the tone. We have 16 Leadership Principles that guide our behavior. They're all integral underpinnings to our YQ, but I'll touch on three in particular:\n\n# Are Right a Lot \n\n\"Leaders are right a lot. They have strong judgment and good instincts. They seek diverse perspectives and work to disconfirm their beliefs.\"\n\nWhen we first instituted this leadership principle, some people incorrectly assumed it meant that the best leaders were the ones whose ideas were chosen (i.e. they were right, a lot). It led to some people overly digging in and fighting for their ideas. There's nothing wrong with pushing for what you believe. But, in my experience, the best leaders want to hear others' views. They don't wilt or bristle when challenged; they're intrigued. Effective leaders change their minds when presented with new compelling information (which makes it ironic how people dismiss politicians as \"flip-floppers\" when they change their position). Ultimately, leaders are responsible for getting to the best answer for customers, regardless of whose original idea is chosen.\n\n## Learn and be Curious\n\n\"Leaders are never done learning and always seek to improve themselves. They are curious about new possibilities and act to explore them.\"\n\nIn the nearly 28 years I've been at Amazon, the biggest difference in the relative growth of companies and individuals has been their aptitude to learn. At a certain point, some leaders seem to lose their thirst to learn. It's hard to know the reason in each case, but it's as if some people find it too exhausting, too timeconsuming, or too threatening to not have all the answers. Regardless, the day we stop learning at Amazon is the day we risk undermining what we're capable of building in the future. People with high YQ are always curious how they can get better, become wiser, and incorporate their new knowledge into better customer experiences.\n\n## Have Backbone; Disagree and Commit\n\n\"Leaders are obligated to respectfully challenge decisions when they disagree, even when doing so is uncomfortable or exhausting. Leaders have conviction and are tenacious. They do not compromise for the sake of social cohesion. Once a decision is determined, they commit wholly.\"\n\nWe don't just empower people to challenge one another, we obligate them to do so if they disagree. Questioning, asking the hard questions, forcing the discussion (versus silently thinking a mistake is being made) is necessary to getting to better answers for customers. \"I told you so\" has no currency at Amazon. It's also important to focus on the second part of this leadership principle: disagree and commit. While constructive debate is useful; at some point, teams need to make a decision and take action. From that point on, everybody-even those who advocated for a different solution than the one chosen-must commit to making that decision a success. That means the team goes all in-no pocket-vetoing nor hedging between other options. That's the only way we can preserve speed and confidence that if an issue is heavily debated, the team will ultimately pull together.\n\nCreate norms that support the Why. Similar to how our Leadership Principles guide our behavior, we've built norms over the years that guide how we work. Here are a few examples:\n\nNarratives. We stopped presenting information to each other inside the company via powerpoint in 2004. Given how high level powerpoints are, we found that powerpoint was easy for the presenter to prepare, but harder for the audience to understand the substantive issues. Instead, we moved to writing narratives with a maximum of six pages in the body. Narratives are harder for the presenter (it's hard to write a thoughtful sixpage document that highlights the key issues in enough detail to be crisp and clear), but much easier for the audience to engage with and ask the right Why questions.\n\nWorking backwards documents. When we build services or features, before we start coding, we write Press Release and Frequently Asked Questions (\"FAQ\") documents. The Press Release is intended to ensure that what we're proposing building is remarkable to customers (so we don't get to launch and ask \"wait, why did we think customers would find this interesting?\"). And, the FAQ is designed to force ourselves to ask the\n\nhard questions about which customers will use this capability, what they'll like most, what they'll be most disappointed with, why are we drawing the launch line where we are, why is it better than current alternatives, how should we think about pricing, what pricing dimensions we recommend, and why have we made the architectural decisions we have. The Press Release and FAQ are how we work backwards from customers, and how we push ourselves to ask questions customers would if they were in these meetings.\n\nBe together whenever possible. There are many paths that can lead to breakthrough innovation. Occasionally, a lone genius comes up with a brilliant idea, and everyone else simply executes it. While that can work, it's not how we typically operate. Amazon invention is deeply collaborative. It starts with a seed of an idea, then a group of smart, mission-driven people refine, challenge, and build on it together. And, we've found that this process is far more effective in person than remote. Of course, you can invent with everybody remote (and some cultures seem to prefer that). However, in my experience, it doesn't compare to being in the same room. The energy, the pace, the spontaneous brainstorming, the willingness for people to jump in, the way ideas evolve in real time, and the post-meeting iteration is much better when in the same room-and yields better outcomes for our customers and teams. With what's happening in AI right now, and the likelihood that every customer experience we've ever known will be reinvented, there has never been a more important time, in my opinion, to optimize to invent well.\n\nTolerating messy meetings. It's hard to \"schedule\" innovation. You can't book 60 minutes to invent Amazon Prime, or AWS, or Alexa+, or Fulfillment by Amazon, or Regionalization in our Fulfillment Network, or Project Kuiper. These inventions are borne out of somebody asking why we can't change what's possible for customers, and then they take on a life of their own, often meandering down multiple dead ends before getting to a final destination. This might bother some regimented folks. But, when we're inventing, we accept the process being beautifully imperfect.\n\nOperate like a startup (in our case, the world's largest startup). We strive to operate like the world's largest startup. What does that mean?\n\nFirst, whatever we're contemplating building has to be focused on solving a real customer problem or meaningfully improving a customer experience. Companies can get off track prioritizing technology because they're excited about the technology. Great startups are on a mission to change what's possible for customers.\n\nSecond, we have a disproportionate need for builders. These are inventors. They're people constantly dissecting customer experiences, even ones that seem pretty good today, and asking why they can't be better. They're divinely discontent (maybe annoyingly so for team members proud of what they've previously built), and never feel like the job is done.\n\nThird, we want owners. One of the strengths of Amazon over the first 30 years is that we've hired really smart, motivated, inventive, ambitious people who have been great owners. And, that means that our teammates are constantly asking themselves, \"What would I do if this was my own money?\" \"What would I do if I started this company and I was the majority owner?\" \"Hey, I know I've only been asked to own a part of this project, but I'm not sure if the other parts are being driven well-should I stick my nose into this and make sure or just trust somebody's got it?\" Owners feel accountable. They care deeply about the quality and effectiveness of what they own, and view the company's mission as their mission (we want missionaries, not mercenaries). That's part of what our effort to increase the ratio of individual contributors versus managers is about. We want flatter organizations where our owners doing the work feel like they own the two-way door decisions (which are the vast majority), can move rapidly, and are fully accountable for solving the Whys of their customer experiences.\n\nFourth, speed disproportionately matters for every business, in every industry, at all times. It's a false binary to argue that you can move fast or deliver high standards. If you want to be fast, you can be fast, and still be high quality. We've done it for many years (though we can still be faster). Speed is a leadership decision. The leadership team has to believe it's a priority, reinforce it constantly, organize and remove structural barriers, and build in modular ways that enable pace. But, speed does not happen unless the entire company and culture embrace it. We have this persistent feeling, throughout the company and in every business in which we operate, that there are closing windows all around us. We operate in fiercely competitive market segments, with highly talented, well-funded, ambitious companies at every turn. Customers are always looking\n\nfor something better. We spend a lot of time identifying how to unlock these experiences for them as quickly as possible, and know if we don't, somebody else will.\n\nAnother way to gain speed is to eliminate bureaucracy. There is a difference between process and bureaucracy. When you're running something at scale, you need mechanisms to deliver the right experience and constant improvement for customers. However, as companies grow and add more managers, unneeded processes get layered on that add little value. Last fall, I asked teammates across the company to send me bureaucracy examples that they were experiencing. I've received almost 1,000 of these emails, and read every single one. Builders hate bureaucracy. It slows them down, frustrates them, and keeps them from doing what they came here to do. As leaders, we don't always see the red tape buried deep in our organizations, but we can sure as heck eliminate it when we do. We've already made over 375 changes based on this feedback. We need to move fast, and we are committed to rooting out bureaucracy that ties up time and dispirits our teammates.\n\nFifth, you have to be scrappy. As businesses succeed and get larger, they sometimes forget how things got started. We built Amazon Simple Storage Service (S3) with 13 people; Amazon Elastic Compute Cloud (EC2) with 11 people. Managers can confuse themselves that the way to grow and get ahead is to accumulate large teams. Historically, we've had periods where we've allowed this thinking to hold sway. But, it's not the way we fundamentally think about building teams and products, and have adjusted to reflect that again. Our best leaders get the most done with the least number of resources required to do the job. They pride themselves on being lean.\n\nSixth, you have to be willing to take risks. This sounds easier than it is. You need clever enough people to identify worthwhile bets. And if you have these inventive, ambitious builders with high standards, they're not used to failure. They suspect external (and maybe internal) ridicule awaits them if they try something very different that doesn't work out. So, people often play it safe. But, you can't achieve something extraordinary for customers by playing \"not to lose.\" If your Whys take you down an invention path that delivers an experience that doesn't look like what's been done before, let customer obsession be your compass. You rarely, if ever, change the world by doing the same thing as everybody else.\n\nAnd finally, you have to care most about delivering compelling results for customers. It's not how charismatic you are. It's not whether you're really good at managing up or sideways. What matters is what we actually get done for customers. That's what we want to reward.\n\n# Next generation Whys \n\nWhile the team and I feel quite optimistic about the progress and potential of our existing businesses, we have plenty of new Whys we're asking. Below are a few of them and some quick thoughts.\n\n## Why is AI so important? Will it really have as much impact as some claim and when?\n\nGenerative AI is going to reinvent virtually every customer experience we know, and enable altogether new ones about which we've only fantasized. The early AI workloads being deployed focus on productivity and cost avoidance (e.g. customer service, business process orchestration, workflow, translation, etc.). This is saving companies a lot of money. Increasingly, you'll see AI change the norms in coding, search, shopping, personal assistants, primary care, cancer and drug research, biology, robotics, space, financial services, neighborhood networks-everything. Some of these areas are already seeing rapid progress; others are still in their infancy. But, if your customer experiences aren't planning to leverage these intelligent models, their ability to query giant corpuses of data and quickly find your needle in the haystack, their ability to keep getting smarter with more feedback and data, and their future agentic capabilities, you will not be competitive. How soon? It won't all happen in a year or two, but, it won't take ten either. It's moving faster than almost anything technology has ever seen.\n\n# OK, I buy AI is big; but why invest this much this quickly? \n\nFundamentally, if your mission is to make customers' lives better and easier every day, and you believe every customer experience will be reinvented by AI, you're going to invest deeply and broadly in AI. That's why there are more than 1,000 GenAI applications being built across Amazon, aiming to meaningfully change customer experiences in shopping, coding, personal assistants, streaming video and music, advertising, healthcare, reading, and home devices, to name a few. It's also why AWS is quickly developing the key primitives (or building blocks) for AI development, such as custom silicon AI chips in Amazon Trainium to provide better price-performance on training and inference, highly flexible model-building and inference services in Amazon SageMaker and Amazon Bedrock, our own frontier models in Amazon Nova to provide lower cost and latency for customers' applications, and agent creation and management capabilities.\n\nThere is also substantial capital investment required. In AWS, the faster demand grows, the more datacenters, chips, and hardware we need to procure (and AI chips are much more expensive than CPU chips). We spend this capital upfront, even though these assets are useful for many years (in the case of datacenters, for at least 15-20 years). We only start monetizing this capital investment many months after we spend the capital, and over many years-which leads to attractive long-term FCF and ROIC (as people have seen in AWS over the last several years). But in periods, like now, of unusually high demand (our AI revenue is growing at triple digit YoY percentages and represents a multi-billion-dollar annual revenue run rate), you're deploying a lot of capital. We continue to believe AI is a once-in-a-lifetime reinvention of everything we know, the demand is unlike anything we've seen before, and our customers, shareholders, and business will be well-served by our investing aggressively now.\n\n## Why do chips and AI have to be this expensive for customers?\n\nAI does not have to be as expensive as it is today, and it won't be in the future. Chips are the biggest culprit. Most AI to date has been built on one chip provider. It's pricey. Trainium should help, as our new Trainium2 chips offer $30-40 \\%$ better price-performance than the current GPU-powered compute instances generally available today. While model training still accounts for a large amount of the total AI spend, inference (which are the predictions or outputs of the models) will represent the overwhelming majority of future AI cost because customers train their models periodically, but produce inferences constantly in large-scale AI applications. Inference will become another building block service, along with compute, storage, database, and others. We feel strong urgency to make inference less expensive for customers. More price-performant chips will help. But, inference will also get meaningfully more efficient in the next couple of years with improvements in model distillation, prompt caching, computing infrastructure, and model architectures. Reducing the cost per unit in AI will unleash AI being used as expansively as customers desire, and also lead to more overall AI spending. It's like what happened with AWS. Revolutionizing the cost of compute and storage happily led to lower cost per unit, and more invention, better customer experiences, and more absolute infrastructure spend.\n\n## Why have personal assistants not yet taken off? How can Alexa help?\n\nA great personal assistant can answer virtually any question and get things done on your behalf. There have been no digital solutions that can do both yet. That is, until Alexa+ arrived. Alexa+ is not only comparably intelligent to the leading chatbots, but can take a plethora of real actions for you. She can play music, play video, move media from one of your devices to another, set alarms and timers, control your smart home, order across hundreds of millions of ecommerce items, make reservations for restaurants or Ubers, order concert tickets, alert you when your favorite artist announces a tour, find a plumber to fix your sink, and memorize whatever you've done on Amazon. This is pretty game-changing for consumers, and just the start of what Alexa+ will do. We have over 600 million Alexa devices out there today, and expect Alexa+ to play an even more vital role in the lives of these hundreds of millions of customers in the future.\n\n## Why can't we get items to customers even faster? Does it matter?\n\nEvery year, people ask whether we've reached the law of diminishing returns on speed of delivery. Our data shows this not to be the case. When we promise faster delivery times, customers complete purchases at a meaningfully higher rate and shop with us more frequently. Amazon Prime started with unlimited, free, twoday delivery for a million products; it's now grown to over 300 million items, with tens of millions available\n\nin one day (or better). An increasing number of deliveries happen same day. This speed improvement is primarily due to our regionalization redesign of our fulfillment network, our new placement algorithms, and the introduction of our innovative same-day fulfillment centers. Although we've set speed records for two consecutive years, we're still honing these innovations, and have others planned. And, don't forget Prime Air, our drones that will get items to customers inside an hour. We are not done improving speed.\n\n# Why can't people in small towns enjoy the same fast delivery speeds as people in cities? \n\nAs some other companies are abandoning small-town customers due to cost to serve, we're going the other way-we're investing to serve our rural customers even better. We've already expanded Same-Day and Overnight Delivery to dozens of smaller cities and towns across the U.S., with more coming. This expansion will provide even faster Amazon delivery speeds for many millions of customers, particularly in less densely populated areas, enabling us to deliver over a billion packages each year to customers living in 13,000 zip codes spanning 1.2 million square miles.\n\n## Related, why can't we help the hundreds of millions of people without broadband connectivity?\n\nThere are about 400-500 million households around the world, most in small, rural towns that don't have access to broadband connectivity. They can't leverage the Internet to learn, shop, do business, access entertainment, and communicate the same way people take for granted in bigger cities. This digital divide is what Project Kuiper, our low Earth orbit satellite network, aims to solve. We're just launching our first production satellites, and will ultimately have over 3,200 in orbit over the next few years. While capitalintensive to launch, we believe Kuiper will be a meaningful operating income and ROIC business for us.\n\n## Why does healthcare have to be so stressful?\n\nHealthcare, especially in the U.S., is quite frustrating. It's hard to get fast appointments with primary care physicians, often harder with specialists. There's a lot of waiting around. Physicians spend only a few minutes with patients. Then, patients have to drive somewhere (often not close) to get their medications. And, when they get to the pharmacy, they're often surprised by the pricing, what's covered by their insurance, and what you can easily access that's not behind a locked shelf. Customers deserve better. It's why you see such positive customer sentiment and growth for Amazon Pharmacy and Amazon One Medical, and we continue to iterate quickly on selection and transparency for Amazon Pharmacy, and physical clinic capacity for One Medical.\n\nThese are some of the Why questions we're asking ourselves right now, and I'm excited about the future inventions to come. We're not going to be bored any time soon.\n\nWhen I first started working, I thought it was unfathomable that my Dad worked at the same place for 45 years. How could that be? That's so long. I used to tell my friends that would never be me. Now, with almost 28 years and counting at Amazon, I have to answer those same friends with their own Why question.\n\nAfter all these years, why are you still at Amazon?\nI'm obviously a Superfan, but there are several compelling parts to working at Amazon. First, I'm not sure that any company prioritizes customers as relentlessly as we do. Lots of companies say they will; few follow through. Second, it's challenging to find a company where you can make a bigger impact on the world than you can at Amazon. Third, we make significant long-term investments and bets in both inventions and people. This allows our teams to iterate on ideas, and make the right long-term decisions for customers and the company. And, I've never encountered a more intelligent, creative, ambitious, hungry, hard-working, and missionary group of teammates than we have at Amazon. In my opinion, this is a remarkable set of qualities to have at a company. And, for builders who want to change the world, and who have fire in their belly, there's no better place to be than Amazon.\n\nWe operate like the world's largest startup in large part because of our culture of Why. We don't always get everything right, and we learn and iterate like crazy. But, we're constantly choosing to prioritize customers, delivery, invention, ownership, speed, scrappiness, curiosity, and building a company that outlasts us all. It remains Day One.\n\nSincerely,\n![img-0.jpeg](img-0.jpeg)\n\nAndy Jassy\nPresident and Chief Executive Officer\nAmazon.com, Inc.\nP.S. As we have always done, our original 1997 Shareholder Letter follows. What's written there is as true today as it was in 1997.\n\n# amazon.com \n\n## 1997 LETTER TO SHAREHOLDERS <br> (Reprinted from the 1997 Annual Report)\n\nTo our shareholders:\nAmazon.com passed many milestones in 1997: by year-end, we had served more than 1.5 million customers, yielding $838 \\%$ revenue growth to $\\$ 147.8$ million, and extended our market leadership despite aggressive competitive entry.\n\nBut this is Day 1 for the Internet and, if we execute well, for Amazon.com. Today, online commerce saves customers money and precious time. Tomorrow, through personalization, online commerce will accelerate the very process of discovery. Amazon.com uses the Internet to create real value for its customers and, by doing so, hopes to create an enduring franchise, even in established and large markets.\n\nWe have a window of opportunity as larger players marshal the resources to pursue the online opportunity and as customers, new to purchasing online, are receptive to forming new relationships. The competitive landscape has continued to evolve at a fast pace. Many large players have moved online with credible offerings and have devoted substantial energy and resources to building awareness, traffic, and sales. Our goal is to move quickly to solidify and extend our current position while we begin to pursue the online commerce opportunities in other areas. We see substantial opportunity in the large markets we are targeting. This strategy is not without risk: it requires serious investment and crisp execution against established franchise leaders.\n\n## It's All About the Long Term\n\nWe believe that a fundamental measure of our success will be the shareholder value we create over the long term. This value will be a direct result of our ability to extend and solidify our current market leadership position. The stronger our market leadership, the more powerful our economic model. Market leadership can translate directly to higher revenue, higher profitability, greater capital velocity, and correspondingly stronger returns on invested capital.\n\nOur decisions have consistently reflected this focus. We first measure ourselves in terms of the metrics most indicative of our market leadership: customer and revenue growth, the degree to which our customers continue to purchase from us on a repeat basis, and the strength of our brand. We have invested and will continue to invest aggressively to expand and leverage our customer base, brand, and infrastructure as we move to establish an enduring franchise.\n\nBecause of our emphasis on the long term, we may make decisions and weigh tradeoffs differently than some companies. Accordingly, we want to share with you our fundamental management and decision-making approach so that you, our shareholders, may confirm that it is consistent with your investment philosophy:\n\n- We will continue to focus relentlessly on our customers.\n- We will continue to make investment decisions in light of long-term market leadership considerations rather than short-term profitability considerations or short-term Wall Street reactions.\n- We will continue to measure our programs and the effectiveness of our investments analytically, to jettison those that do not provide acceptable returns, and to step up our investment in those that work best. We will continue to learn from both our successes and our failures.\n\n- We will make bold rather than timid investment decisions where we see a sufficient probability of gaining market leadership advantages. Some of these investments will pay off, others will not, and we will have learned another valuable lesson in either case.\n- When forced to choose between optimizing the appearance of our GAAP accounting and maximizing the present value of future cash flows, we'll take the cash flows.\n- We will share our strategic thought processes with you when we make bold choices (to the extent competitive pressures allow), so that you may evaluate for yourselves whether we are making rational long-term leadership investments.\n- We will work hard to spend wisely and maintain our lean culture. We understand the importance of continually reinforcing a cost-conscious culture, particularly in a business incurring net losses.\n- We will balance our focus on growth with emphasis on long-term profitability and capital management. At this stage, we choose to prioritize growth because we believe that scale is central to achieving the potential of our business model.\n- We will continue to focus on hiring and retaining versatile and talented employees, and continue to weight their compensation to stock options rather than cash. We know our success will be largely affected by our ability to attract and retain a motivated employee base, each of whom must think like, and therefore must actually be, an owner.\n\nWe aren't so bold as to claim that the above is the \"right\" investment philosophy, but it's ours, and we would be remiss if we weren't clear in the approach we have taken and will continue to take.\n\nWith this foundation, we would like to turn to a review of our business focus, our progress in 1997, and our outlook for the future.\n\n# Obsess Over Customers \n\nFrom the beginning, our focus has been on offering our customers compelling value. We realized that the Web was, and still is, the World Wide Wait. Therefore, we set out to offer customers something they simply could not get any other way, and began serving them with books. We brought them much more selection than was possible in a physical store (our store would now occupy 6 football fields), and presented it in a useful, easyto-search, and easy-to-browse format in a store open 365 days a year, 24 hours a day. We maintained a dogged focus on improving the shopping experience, and in 1997 substantially enhanced our store. We now offer customers gift certificates, 1-Click ${ }^{\\mathrm{SM}}$ shopping, and vastly more reviews, content, browsing options, and recommendation features. We dramatically lowered prices, further increasing customer value. Word of mouth remains the most powerful customer acquisition tool we have, and we are grateful for the trust our customers have placed in us. Repeat purchases and word of mouth have combined to make Amazon.com the market leader in online bookselling.\n\nBy many measures, Amazon.com came a long way in 1997:\n\n- Sales grew from $\\$ 15.7$ million in 1996 to $\\$ 147.8$ million - an $838 \\%$ increase.\n- Cumulative customer accounts grew from 180,000 to $1,510,000$ - a $738 \\%$ increase.\n- The percentage of orders from repeat customers grew from over $46 \\%$ in the fourth quarter of 1996 to over $58 \\%$ in the same period in 1997.\n- In terms of audience reach, per Media Metrix, our Web site went from a rank of 90th to within the top 20 .\n- We established long-term relationships with many important strategic partners, including America Online, Yahoo!, Excite, Netscape, GeoCities, AltaVista, @Home, and Prodigy.\n\n# Infrastructure \n\nDuring 1997, we worked hard to expand our business infrastructure to support these greatly increased traffic, sales, and service levels:\n\n- Amazon.com's employee base grew from 158 to 614 , and we significantly strengthened our management team.\n- Distribution center capacity grew from 50,000 to 285,000 square feet, including a $70 \\%$ expansion of our Seattle facilities and the launch of our second distribution center in Delaware in November.\n- Inventories rose to over 200,000 titles at year-end, enabling us to improve availability for our customers.\n- Our cash and investment balances at year-end were $\\$ 125$ million, thanks to our initial public offering in May 1997 and our $\\$ 75$ million loan, affording us substantial strategic flexibility.\n\n\n## Our Employees\n\nThe past year's success is the product of a talented, smart, hard-working group, and I take great pride in being a part of this team. Setting the bar high in our approach to hiring has been, and will continue to be, the single most important element of Amazon.com's success.\n\nIt's not easy to work here (when I interview people I tell them, \"You can work long, hard, or smart, but at Amazon.com you can't choose two out of three\"), but we are working to build something important, something that matters to our customers, something that we can all tell our grandchildren about. Such things aren't meant to be easy. We are incredibly fortunate to have this group of dedicated employees whose sacrifices and passion build Amazon.com.\n\n## Goals for 1998\n\nWe are still in the early stages of learning how to bring new value to our customers through Internet commerce and merchandising. Our goal remains to continue to solidify and extend our brand and customer base. This requires sustained investment in systems and infrastructure to support outstanding customer convenience, selection, and service while we grow. We are planning to add music to our product offering, and over time we believe that other products may be prudent investments. We also believe there are significant opportunities to better serve our customers overseas, such as reducing delivery times and better tailoring the customer experience. To be certain, a big part of the challenge for us will lie not in finding new ways to expand our business, but in prioritizing our investments.\n\nWe now know vastly more about online commerce than when Amazon.com was founded, but we still have so much to learn. Though we are optimistic, we must remain vigilant and maintain a sense of urgency. The challenges and hurdles we will face to make our long-term vision for Amazon.com a reality are several: aggressive, capable, well-funded competition; considerable growth challenges and execution risk; the risks of product and geographic expansion; and the need for large continuing investments to meet an expanding market opportunity. However, as we've long said, online bookselling, and online commerce in general, should prove to be a very large market, and it's likely that a number of companies will see significant benefit. We feel good about what we've done, and even more excited about what we want to do.\n\n1997 was indeed an incredible year. We at Amazon.com are grateful to our customers for their business and trust, to each other for our hard work, and to our shareholders for their support and encouragement.\n![img-1.jpeg](img-1.jpeg)\n\nJeffrey P. Bezos\nFounder and Chief Executive Officer\nAmazon.com, Inc.\n\n# UNITED STATES SECURITIES AND EXCHANGE COMMISSION Washington, D.C. 20549\n\nFORM 10-K (Mark One) [x] ANNUAL REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934 For the fiscal year ended December 31, 2024 or [ ] TRANSITION REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934 For the transition period from to Commission File No. 000-22513\n\nAMAZON.COM, INC. (Exact name of registrant as specified in its charter)\n\n|  Delaware | 91-1646860  |\n| --- | --- |\n|  (State or other jurisdiction of | (LR.S. Employer  |\n|  incorporation or organization) | Identification No.)  |\n\n410 Terry Avenue North Seattle, Washington 98109-5210 (206) 266-1000 (Address and telephone number, including area code, of registrant's principal executive offices) Securities registered pursuant to Section 12(b) of the Act: Title of Each Class Trading Symbol(s) Name of Each Exchange on Which Registered Common Stock, par value $.01 per share AMZN Nasdaq Global Select Market Securities registered pursuant to Section 12(g) of the Act: None\n\nIndicate by check mark if the registrant is a well-known seasoned issuer, as defined in Rule 405 of the Securities Act. Yes [x] No [ ] Indicate by check mark if the registrant is not required to file reports pursuant to Section 13 or Section 15(d) of the Exchange Act. Yes [ ] No [x] Indicate by check mark whether the registrant (1) has filed all reports required to be filed by Section 13 or 15(d) of the Securities Exchange Act of 1934 during the preceding 12 months (or for such shorter period that the registrant was required to file such reports), and (2) has been subject to such filing requirements for the past 90 days. Yes [x] No [ ] Indicate by check mark whether the registrant has submitted electronically every Interactive Data File required to be submitted pursuant to Rule 405 of Regulation S-T during the preceding 12 months (or for such shorter period that the registrant was required to submit such files). Yes [x] No [ ] Indicate by check mark whether the registrant is a large accelerated filer, an accelerated filer, a non-accelerated filer, a smaller reporting company, or an emerging growth company. See the definitions of \"large accelerated filer,\" \"accelerated filer,\" \"smaller reporting company,\" and \"emerging growth company\" in Rule 12b-2 of the Exchange Act.\n\n|  Large accelerated filer | [x] | Accelerated filer | [ ]  |\n| --- | --- | --- | --- |\n|  Non-accelerated filer | [ ] | Smaller reporting company | [ ]  |\n|   |  | Emerging growth company | [ ]  |\n\nIf an emerging growth company, indicate by check mark if the registrant has elected not to use the extended transition period for complying with any new or revised financial accounting standards provided pursuant to Section 13(a) of the Exchange Act. [ ] Indicate by check mark whether the registrant has filed a report on and attestation to its management's assessment of the effectiveness of its internal control over financial reporting under Section 404(b) of the Sarbanes-Oxley Act (15 U.S.C. 7262(b)) by the registered public accounting firm that prepared or issued its audit report. [x] If securities are registered pursuant to Section 12(b) of the Exchange Act, indicate by check mark whether the financial statements of the registrant included in the filing reflect the correction of an error to previously issued financial statements. [ ] Indicate by check mark whether any of those error corrections are restatements that required a recovery analysis of incentive-based compensation received by any of the registrant's executive officers during the relevant recovery period pursuant to §240.10D-1(b). [ ] Indicate by check mark whether the registrant is a shell company (as defined in Rule 12b-2 of the Exchange Act). Yes [ ] No [x] Aggregate market value of voting stock held by non-affiliates of the registrant as of June 30, 2024 $ 1,815,014,489,485 Number of shares of common stock outstanding as of January 29, 2025 10,597,729,352\n\nDOCUMENTS INCORPORATED BY REFERENCE The information required by Part III of this Report, to the extent not set forth herein, is incorporated herein by reference from the registrant's definitive proxy statement relating to the Annual Meeting of Shareholders to be held in 2025, which definitive proxy statement shall be filed with the Securities and Exchange Commission within 120 days after the end of the fiscal year to which this Report relates.\n\n|   | AMAZON.COM, INC.FORM 10-KFor the Fiscal Year Ended December 31, 2024 |   |\n| --- | --- | --- |\n|  INDEX | |   |   |\n|   |  | Page  |\n|  PART I | |   |   |\n|  Item 1. | Business | 3  |\n|  Item 1A. | Risk Factors | 6  |\n|  Item 1B. | Unresolved Staff Comments | 16  |\n|  Item 1C. | Cybersecurity | 17  |\n|  Item 2. | Properties | 18  |\n|  Item 3. | Legal Proceedings | 18  |\n|  Item 4. | Mine Safety Disclosures | 18  |\n|  PART II | |   |   |\n|  Item 5. | Market for the Registrant’s Common Stock, Related Shareholder Matters, and Issuer Purchases of Equity Securities | 19  |\n|  Item 6. | Reserved | 19  |\n|  Item 7. | Management’s Discussion and Analysis of Financial Condition and Results of Operations | 20  |\n|  Item 7A. | Quantitative and Qualitative Disclosures About Market Risk | 31  |\n|  Item 8. | Financial Statements and Supplementary Data | 33  |\n|  Item 9. | Changes in and Disagreements with Accountants on Accounting and Financial Disclosure | 70  |\n|  Item 9A. | Controls and Procedures | 70  |\n|  Item 9B. | Other Information | 72  |\n|  Item 9C. | Disclosure Regarding Foreign Jurisdictions that Prevent Inspections | 72  |\n|  PART III | |   |   |\n|  Item 10. | Directors, Executive Officers, and Corporate Governance | 72  |\n|  Item 11. | Executive Compensation | 72  |\n|  Item 12. | Security Ownership of Certain Beneficial Owners and Management and Related Shareholder Matters | 72  |\n|  Item 13. | Certain Relationships and Related Transactions, and Director Independence | 72  |\n|  Item 14. | Principal Accountant Fees and Services | 73  |\n|  PART IV | |   |   |\n|  Item 15. | Exhibits, Financial Statement Schedules | 74  |\n|  Item 16. | Form 10-K Summary | 76  |\n|  Signatures |   | 77  |\n\n# AMAZON.COM, INC. \n\n## PART I\n\n## Item 1. Business\n\nThis Annual Report on Form 10-K and the documents incorporated herein by reference contain forward-looking statements based on expectations, estimates, and projections as of the date of this filing. Actual results and outcomes may differ materially from those expressed in forward-looking statements. See Item 1A of Part I - \"Risk Factors.\" As used herein, \"Amazon.com,\" \"we,\" \"our,\" and similar terms include Amazon.com, Inc. and its subsidiaries, unless the context indicates otherwise.\n\n## General\n\nWe seek to be Earth's most customer-centric company. We are guided by four principles: customer obsession rather than competitor focus, passion for invention, commitment to operational excellence, and long-term thinking. In each of our segments, we serve our primary customer sets, consisting of consumers, sellers, developers, enterprises, content creators, advertisers, and employees.\n\nWe have organized our operations into three segments: North America, International, and Amazon Web Services (\"AWS\"). These segments reflect the way the Company evaluates its business performance and manages its operations. Information on our net sales is contained in Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 Segment Information.\"\n\n## Consumers\n\nWe serve consumers through our online and physical stores and focus on selection, price, and convenience. We design our stores to enable hundreds of millions of unique products to be sold by us and by third parties across dozens of product categories. Customers access our offerings through our websites, mobile apps, Alexa, devices, streaming, and physically visiting our stores. We also manufacture and sell electronic devices, including Kindle, Fire tablet, Fire TV, Echo, Ring, Blink, and eero, and we develop and produce media content. We seek to offer our customers low prices, fast and free delivery, easy-to-use functionality, and timely customer service. In addition, we offer subscription services such as Amazon Prime, a membership program that includes fast, free shipping on tens of millions of items, access to award-winning movies and series, live sports, and other benefits.\n\nWe fulfill customer orders in a number of ways, including through: North America and International fulfillment networks that we operate; co-sourced and outsourced arrangements in certain countries; digital delivery; and through our physical stores. We operate customer service centers globally, which are supplemented by co-sourced arrangements. See Item 2 of Part I, \"Properties.\"\n\n## Sellers\n\nWe offer programs that enable sellers to grow their businesses, sell their products in our stores, and fulfill orders using our services. We are not the seller of record in these transactions. We earn fixed fees, a percentage of sales, per-unit activity fees, interest, or some combination thereof, for our seller programs.\n\n## Developers and Enterprises\n\nWe serve developers and enterprises of all sizes, including start-ups, government agencies, and academic institutions, through AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services.\n\n## Content Creators\n\nWe offer programs that allow authors, independent publishers, musicians, filmmakers, Twitch streamers, skill and app developers, and others to publish and sell content.\n\n## Advertisers\n\nWe provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising.\n\n# Competition \n\nOur businesses encompass a large variety of product types, service offerings, and delivery channels. The worldwide marketplace in which we compete is evolving rapidly and intensely competitive, and we face a broad array of competitors from many different industry sectors around the world. Our current and potential competitors include: (1) physical, e-commerce, and omnichannel retailers, publishers, vendors, distributors, manufacturers, and producers of the products we offer and sell to consumers and businesses; (2) publishers, producers, and distributors of physical, digital, and interactive media of all types and all distribution channels; (3) web search engines, comparison shopping websites, social networks, web portals, virtual assistants, and other online and app-based means of discovering, using, or acquiring goods and services, either directly or in collaboration with other retailers; (4) companies that provide e-commerce services, including website development and hosting, omnichannel sales, inventory and supply chain management, advertising, fulfillment, customer service, and payment processing; (5) companies that provide fulfillment and logistics services for themselves or for third parties, whether online or offline; (6) companies that provide information technology services or products, including on-premises or cloud-based infrastructure, tools and services relating to artificial intelligence, and other services; (7) companies that design, manufacture, market, or sell consumer electronics, communications, and other electronic devices and services; (8) companies that sell grocery products online and in physical stores; (9) companies that provide advertising services, whether in digital or other formats; and (10) providers of virtual or in-person healthcare services. We believe that the principal competitive factors in our retail businesses include selection, price, and convenience, including fast and reliable fulfillment. Additional competitive factors for our seller and enterprise services include the quality, speed, and reliability of our services and tools, as well as customers' ability and willingness to change business practices. Some of our current and potential competitors have greater resources, longer histories, more customers, greater brand recognition, and greater control over inputs critical to our various businesses. They may secure better terms from suppliers, adopt more aggressive pricing, pursue restrictive distribution agreements that restrict our access to supply, direct consumers to their own offerings instead of ours, lock-in potential customers with restrictive terms, and devote more resources to technology, infrastructure, fulfillment, and marketing. The internet facilitates competitive entry and comparison shopping, which enhances the ability of new, smaller, or lesser-known businesses to compete against us. Each of our businesses is also subject to rapid change and the development of new business models and the entry of new and well-funded competitors. Other companies also may enter into business combinations or alliances that strengthen their competitive positions.\n\n## Intellectual Property\n\nWe regard our trademarks, service marks, copyrights, patents, domain names, trade dress, trade secrets, proprietary technologies, and similar intellectual property as critical to our success, and we rely on trademark, copyright, and patent law, trade-secret protection, and confidentiality and/or license agreements with our employees, customers, partners, and others to protect our proprietary rights. We have registered, or applied for the registration of, a number of U.S. and international domain names, trademarks, service marks, and copyrights. Additionally, we have filed U.S. and international patent applications covering certain of our proprietary technology.\n\n## Seasonality\n\nOur business is affected by seasonality, which historically has resulted in higher sales volume during our fourth quarter, which ends December 31.\n\n## Human Capital\n\nOur employees are critical to our mission of being Earth's most customer-centric company. As of December 31, 2024, we employed approximately $1,556,000$ full-time and part-time employees. Additionally, we use independent contractors and temporary personnel to supplement our workforce. Competition for qualified personnel is intense, particularly for software engineers, computer scientists, and other technical staff, and constrained labor markets have increased competition for personnel across other parts of our business.\n\nWe strive to be Earth's best employer. We rely on numerous and evolving initiatives to implement this objective and invent mechanisms for talent development, including competitive pay and benefits, flexible work arrangements, and skills training and educational programs such as Amazon Career Choice (education funding for eligible employees). Over 240,000 Amazon employees around the world have participated in Career Choice. We also continue to inspect and refine the mechanisms we use to hire, develop, evaluate, and retain our employees. In addition, safety is integral to everything we do at Amazon and we continue to invest in safety improvements such as capital improvements, new safety technology, vehicle safety controls, and engineering ergonomic solutions. Our safety team is dedicated to using the science of safety to solve complex problems and establish new industry best practices. We also provide mentorship and support resources to our employees, and have deployed numerous programs that advance employee engagement, communication, and feedback.\n\n# Available Information \n\nOur investor relations website is amazon.com/ir and we encourage investors to use it as a way of easily finding information about us. We promptly make available on this website, free of charge, the reports that we file or furnish with the Securities and Exchange Commission (\"SEC\"), corporate governance information (including our Code of Business Conduct and Ethics), and select press releases.\n\n## Executive Officers and Directors\n\nThe following tables set forth certain information regarding our Executive Officers and Directors as of January 29, 2025:\n\n## Information About Our Executive Officers\n\n| Name | Age | Position |\n| :-- | :--: | :-- |\n| Jeffrey P. Bezos | 61 | Executive Chair |\n| Andrew R. Jassy | 57 | President and Chief Executive Officer |\n| Matthew S. Garman | 48 | CEO Amazon Web Services |\n| Douglas J. Herrington | 58 | CEO Worldwide Amazon Stores |\n| Brian T. Olsavsky | 61 | Senior Vice President and Chief Financial Officer |\n| Shelley L. Reynolds | 60 | Vice President, Worldwide Controller, and Principal Accounting Officer |\n| David A. Zapolsky | 61 | Senior Vice President, Global Public Policy and General Counsel |\n\nJeffrey P. Bezos. Mr. Bezos founded Amazon.com in 1994 and has served as Executive Chair since July 2021. He has served as Chair of the Board since 1994 and served as Chief Executive Officer from May 1996 until July 2021, and as President from 1994 until June 1999 and again from October 2000 to July 2021.\n\nAndrew R. Jassy. Mr. Jassy has served as President and Chief Executive Officer since July 2021, CEO Amazon Web Services from April 2016 until July 2021, and Senior Vice President, Amazon Web Services, from April 2006 until April 2016.\n\nMatthew S. Garman. Mr. Garman has served as CEO Amazon Web Services since June 2024, Senior Vice President, Amazon Web Services from February 2021 until June 2024, Vice President, Marketing, Sales and Support of Amazon Web Services from January 2020 to February 2021, Vice President, AWS Compute Services from September 2018 to January 2020, and Vice President, EC2 from December 2012 to September 2018.\n\nDouglas J. Herrington. Mr. Herrington has served as CEO Worldwide Amazon Stores since July 2022, Senior Vice President, North America Consumer from January 2015 to July 2022, Senior Vice President, Consumables from May 2014 to December 2014, and Vice President, Consumables from May 2005 to April 2014.\n\nBrian T. Olsavsky. Mr. Olsavsky has served as Senior Vice President and Chief Financial Officer since June 2015, Vice President, Finance for the Global Consumer Business from December 2011 to June 2015, and numerous financial leadership roles across Amazon with global responsibility since April 2002.\n\nShelley L. Reynolds. Ms. Reynolds has served as Vice President, Worldwide Controller, and Principal Accounting Officer since April 2007.\n\nDavid A. Zapolsky. Mr. Zapolsky has served as Senior Vice President, Global Public Policy and General Counsel since May 2023. He served as our Secretary from September 2012 to January 2024, Senior Vice President and General Counsel from May 2014 to May 2023, Vice President and General Counsel from September 2012 to May 2014, and as Vice President and Associate General Counsel for Litigation and Regulatory matters from April 2002 until September 2012.\n\n|  Board of Directors |  |   |\n| --- | --- | --- |\n|  Name | Age | Position  |\n|  Jeffrey P. Bezos | 61 | Executive Chair  |\n|  Andrew R. Jassy | 57 | President and Chief Executive Officer  |\n|  Keith B. Alexander | 73 | Former Chair and CEO of IronNet, Inc.  |\n|  Edith W. Cooper | 63 | Former Executive Vice President, Goldman Sachs Group, Inc.  |\n|  Jamie S. Gorelick | 74 | Partner, Wilmer Cutler Pickering Hale and Dorr LLP  |\n|  Daniel P. Huttenlocher | 66 | Dean, MIT Schwarzman College of Computing  |\n|  Andrew Y. Ng | 48 | Managing General Partner, AI Fund, L.P.  |\n|  Indra K. Nooyi | 69 | Former Chair and CEO, PepsiCo, Inc.  |\n|  Jonathan J. Rubinstein | 68 | Former co-CEO, Bridgewater Associates, LP  |\n|  Brad D. Smith | 60 | President, Marshall University  |\n|  Patricia Q. Stonesifer | 68 | Former President and Chief Executive Officer, Martha’s Table  |\n|  Wendell P. Weeks | 65 | Chairman and CEO, Corning Incorporated  |\n\n# Item 1A. Risk Factors\n\nPlease carefully consider the following discussion of significant factors, events, and uncertainties that make an investment in our securities risky. The events and consequences discussed in these risk factors could, in circumstances we may or may not be able to accurately predict, recognize, or control, have a material adverse effect on our business, growth, reputation, prospects, financial condition, operating results (including components of our financial results), cash flows, liquidity, and stock price. These risk factors do not identify all risks that we face; our operations could also be affected by factors, events, or uncertainties that are not presently known to us or that we currently do not consider to present significant risks to our operations. In addition to the factors discussed in Item 7 of Part II, \"Management’s Discussion and Analysis of Financial Condition and Results of Operations,\" and in the risk factors below, global economic and geopolitical conditions and additional or unforeseen circumstances, developments, or events may give rise to or amplify many of the risks discussed below. Many of the risks discussed below also impact our customers, including third-party sellers, which could indirectly have a material adverse effect on us.\n\n## Business and Industry Risks\n\n## We Face Intense Competition\n\nOur businesses are rapidly evolving and intensely competitive, and we have many competitors across geographies, including cross-border competition, and in different industries, including physical, e-commerce, and omnichannel retail, ecommerce services, web and infrastructure computing services, electronic devices, digital content, advertising, grocery, healthcare, communications, and transportation and logistics services. Some of our current and potential competitors have greater resources, longer histories, more customers, and/or greater brand recognition, particularly with our newly-launched products and services and in our newer geographic regions. They may secure better terms from vendors, adopt more aggressive pricing, and devote more resources to technology, infrastructure, fulfillment, and marketing.\n\nCompetition continues to intensify, including with the development of new business models and the entry of new and well-funded competitors, and as our competitors enter into business combinations or alliances and established companies in other market segments expand to become competitive with our business. In addition, new and enhanced technologies, including search, web and infrastructure computing services, practical applications of artificial intelligence and machine learning, digital content, satellites, and electronic devices continue to increase our competition. The internet facilitates competitive entry and comparison shopping, which enhances the ability of new, smaller, or lesser known businesses to compete against us. As a result of competition, our product and service offerings may not be successful, we may fail to gain or may lose business, and we may be required to increase our spending or lower prices, any of which could materially reduce our sales and profits.\n\n## Our Expansion into New Products, Services, Technologies, and Geographic Regions Subjects Us to Additional Risks\n\nWe may have limited or no experience in our newer market segments, and our customers may not adopt our product or service offerings. These offerings, which can present new and difficult technology challenges, may subject us to claims if customers of these offerings experience, or are otherwise impacted by, service disruptions, delays, setbacks, or failures or quality issues. In addition, profitability or other intended benefits, if any, in our newer activities may not meet our expectations, and we may not be successful enough in these newer activities to recoup our investments in them, which investments are often significant. Failure to realize the benefits of amounts we invest in new technologies, products, or services could result in the\n\nvalue of those investments being written down or written off. In addition, our sustainability initiatives may be unsuccessful for a variety of reasons, including if we are unable to realize the expected benefits of new technologies or if we do not successfully plan or execute new strategies, which could harm our business or damage our reputation.\n\n# Our International Operations Expose Us to a Number of Risks \n\nOur international activities are significant to our revenues and profits, and we plan to further expand internationally. In certain international market segments, we have relatively little operating experience and may not benefit from any first-tomarket advantages or otherwise succeed. It is costly to establish, develop, and maintain international operations and stores, and promote our brand internationally. Our international operations may not become profitable on a sustained basis.\n\nIn addition to risks described elsewhere in this section, our international sales and operations are subject to a number of risks, including:\n\n- local economic and political conditions;\n- government regulation (such as regulation of our product and service offerings and of competition); restrictive governmental actions (such as trade protection measures, including export duties and quotas and custom duties and tariffs, and restrictions around the import and export of certain products, technologies, and components); nationalization; and restrictions on foreign ownership;\n- restrictions on sales or distribution of certain products or services and uncertainty regarding liability for products, services, and content, including uncertainty as a result of less internet-friendly legal systems, local laws, lack of legal precedent, and varying rules, regulations, and practices regarding the physical and digital distribution of media products and enforcement of intellectual property rights;\n- business licensing or certification requirements, such as for imports, exports, web services, electronic devices, and communications services;\n- limitations on the repatriation and investment of funds and foreign currency exchange restrictions;\n- limited fulfillment and technology infrastructure;\n- shorter payable and longer receivable cycles and the resultant negative impact on cash flow;\n- laws and regulations regarding privacy, data use, data protection, data security, data localization, network security, consumer protection, payments, advertising, and restrictions on pricing or discounts;\n- lower levels of use of the internet;\n- lower levels of consumer spending and fewer opportunities for growth compared to the U.S.;\n- lower levels of credit card usage and increased payment risk;\n- difficulty in staffing, developing, and managing foreign operations as a result of distance, language, and cultural differences;\n- different employee/employer relationships and the existence of works councils and labor unions;\n- compliance with the U.S. Foreign Corrupt Practices Act and other applicable U.S. and foreign laws prohibiting corrupt payments to government officials and other third parties;\n- laws and policies of the U.S. and other jurisdictions affecting trade, foreign investment, loans, and taxes; and\n- geopolitical events, including war and terrorism.\n\nAs international physical, e-commerce, and omnichannel retail, cloud services, and other services grow, competition will intensify, including through adoption of evolving business models. Local companies may have a substantial competitive advantage because of their greater understanding of, and focus on, the local customer, as well as their more established local brand names. The inability to hire, train, retain, and manage sufficient required personnel may limit our international growth.\n\nThe People's Republic of China (\"PRC\") and India regulate Amazon's and its affiliates' businesses and operations in country through regulations and license requirements that may restrict (i) foreign investment in and operation of the internet, IT infrastructure, data centers, retail, delivery, and other sectors, (ii) internet content, and (iii) the sale of media and other products and services. For example, in order to meet local ownership, regulatory licensing, and cybersecurity requirements, we provide certain technology services in China through contractual relationships with third parties that hold PRC licenses to provide services. In India, the government restricts the ownership or control of Indian companies by foreign entities involved in online multi-brand retail trading activities. For www.amazon.in, we provide certain marketing tools and logistics services to thirdparty sellers to enable them to sell online and deliver to customers, and we hold an indirect minority interest in an entity that is a third-party seller on the www.amazon.in marketplace. Although we believe these structures and activities comply with existing\n\nlaws, they involve unique risks, and the PRC and India may from time to time consider and implement additional changes in their regulatory, licensing, or other requirements that could impact these structures and activities. There are substantial uncertainties regarding the interpretation of PRC and Indian laws and regulations, and it is possible that these governments will ultimately take a view contrary to ours. In addition, our Chinese and Indian businesses and operations may be unable to continue to operate if we or our affiliates are unable to access sufficient funding or, in China, enforce contractual relationships we or our affiliates have in place. Violation of any existing or future PRC, Indian, or other laws or regulations or changes in the interpretations of those laws and regulations could result in our businesses in those countries being subject to fines and other financial penalties, having licenses revoked, or being forced to restructure our operations or shut down entirely.\n\nIn addition, because China-based sellers account for significant portions of our third-party seller services and advertising revenues, and China-based suppliers provide significant portions of our components and finished goods, regulatory and trade restrictions, data protection and cybersecurity laws, economic factors, geopolitical events, security issues, or other factors negatively impacting China-based sellers and suppliers could adversely affect our operating results.\n\n# The Variability in Our Retail Business Places Increased Strain on Our Operations \n\nDemand for our products and services can fluctuate significantly for many reasons, including as a result of seasonality, promotions, product launches, or unforeseeable events, such as in response to global economic conditions such as recessionary fears or rising inflation, natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), or geopolitical events. For example, we expect a disproportionate amount of our retail sales to occur during our fourth quarter. Our failure to stock or restock popular products in sufficient amounts such that we fail to meet customer demand could significantly affect our revenue and our future growth. When we overstock products, we may be required to take significant inventory markdowns or write-offs and incur commitment costs, which could materially reduce profitability. We regularly experience increases in our net shipping cost due to complimentary upgrades, split-shipments, and additional long-zone shipments necessary to ensure timely delivery for the holiday season. If too many customers access our websites within a short period of time due to increased demand, we may experience system interruptions that make our websites unavailable or prevent us from efficiently fulfilling orders, which may reduce the volume of goods we offer or sell and the attractiveness of our products and services. In addition, we may be unable to adequately staff our fulfillment network and customer service centers during these peak periods and delivery and other fulfillment companies and customer service cosourcers may be unable to meet the seasonal demand. Risks described elsewhere in this Item 1A relating to fulfillment network optimization and inventory are magnified during periods of high demand.\n\nAs a result of holiday sales, as of December 31 of each year, our cash, cash equivalents, and marketable securities balances typically reach their highest level (other than as a result of cash flows provided by or used in investing and financing activities) because consumers primarily use credit cards in our stores and the related receivables settle quickly. Typically, there is also a corresponding increase in accounts payable as of December 31 due to inventory purchases and third-party seller sales. Our accounts payable balance generally declines during the first three months of the year as vendors and sellers are paid, resulting in a corresponding decline in our cash, cash equivalents, and marketable securities balances.\n\n## We Are Impacted by Fraudulent or Unlawful Activities of Sellers\n\nThe law relating to the liability of online service providers is currently unsettled. In addition, governmental agencies have in the past and could in the future require changes in the way this business is conducted. Under our seller programs, we maintain policies and processes designed to prevent sellers from collecting payments, fraudulently or otherwise, when buyers never receive the products they ordered or when the products received are materially different from the sellers' descriptions, and to prevent sellers in our stores or through other stores from selling unlawful, counterfeit, pirated, or stolen goods, selling goods in an unlawful or unethical manner, violating the proprietary rights of others, or otherwise violating our policies. When these policies and processes are circumvented or fail to operate sufficiently, it can harm our business or damage our reputation and we could face civil or criminal liability for unlawful activities by our sellers. Under our A-to-z Guarantee, we may reimburse customers for payments up to certain limits in these situations, and as our third-party seller sales grow, the cost of this program will increase and could negatively affect our operating results.\n\n## We Face Risks Related to Adequately Protecting Our Intellectual Property Rights and Being Accused of Infringing Intellectual Property Rights of Third Parties\n\nWe regard our trademarks, service marks, copyrights, patents, trade dress, trade secrets, proprietary technology, and similar intellectual property as critical to our success, and we rely on trademark, copyright, and patent law, trade secret protection, and confidentiality and/or license agreements with our employees, customers, and others to protect our proprietary rights. Effective intellectual property protection is not available in every country in which our products and services are made available. We also may not be able to acquire or maintain appropriate domain names in all countries in which we do business. Furthermore, regulations governing domain names may not protect our trademarks and similar proprietary rights. We may be\n\nunable to prevent third parties from acquiring domain names that are similar to, infringe upon, or diminish the value of our trademarks and other proprietary rights.\n\nWe are not always able to discover or determine the extent of any unauthorized use of our proprietary rights. Actions taken by third parties that license our proprietary rights may materially diminish the value of our proprietary rights or reputation. The protection of our intellectual property requires the expenditure of significant financial and managerial resources. Moreover, the steps we take to protect our intellectual property do not always adequately protect our rights or prevent third parties from infringing or misappropriating our proprietary rights. We also cannot be certain that others will not independently develop or otherwise acquire equivalent or superior technology or other intellectual property rights.\n\nWe have been subject to, and expect to continue to be subject to, claims and legal proceedings regarding alleged infringement by us of the intellectual property rights of third parties. Such claims, whether or not meritorious, have in the past, and may in the future, result in the expenditure of significant financial and managerial resources, injunctions against us, or significant payments for damages, including to satisfy indemnification obligations or to obtain licenses from third parties who allege that we have infringed their rights. Such licenses may not be available on terms acceptable to us or at all. These risks have been amplified by the increase in third parties whose sole or primary business is to assert such claims. In addition, our and our customers' development and use of artificial intelligence may result in increased claims of infringement or other claims, including those based on unauthorized use of third-party technology or content.\n\nOur digital content offerings depend in part on effective digital rights management technology to control access to digital content. Breach or malfunctioning of the digital rights management technology that we use could subject us to claims, and content providers may be unwilling to include their content in our service.\n\n# We Have Foreign Exchange Risk \n\nThe results of operations of, and certain of our intercompany balances associated with, our international stores and product and service offerings are exposed to foreign exchange rate fluctuations. Due to these fluctuations, operating results may differ materially from expectations, and we may record significant gains or losses on the remeasurement of intercompany balances. As we have expanded our international operations, our exposure to exchange rate fluctuations has increased. We also hold cash equivalents and/or marketable securities in foreign currencies such as British Pounds, Canadian Dollars, Euros, and Japanese Yen. When the U.S. Dollar strengthens compared to these currencies, cash equivalents, and marketable securities balances, when translated, may be materially less than expected and vice versa.\n\n## Operating Risks\n\n## Our Expansion Places a Significant Strain on our Management, Operational, Financial, and Other Resources\n\nWe are continuing to rapidly and significantly expand our global operations, including increasing our product and service offerings and scaling our infrastructure to support our retail and services businesses. The complexity of the current scale of our business can place significant strain on our management, personnel, operations, systems, technical performance, financial resources, and internal financial control and reporting functions, and our expansion increases these factors. Failure to manage growth effectively could damage our reputation, limit our growth, and negatively affect our operating results.\n\n## We Experience Significant Fluctuations in Our Operating Results and Growth Rate\n\nWe are not always able to accurately forecast our growth rate. We base our expense levels and investment plans on sales estimates. A significant portion of our expenses and investments is fixed, and we are not always able to adjust our spending quickly enough if our sales are less than expected.\n\nOur revenue growth may not be sustainable, and our percentage growth rates may decrease. Our revenue and operating profit growth depends on the continued growth of demand for the products and services offered by us or our sellers, and our business is affected by, among other things, general economic, business, and geopolitical conditions worldwide. A softening of demand, whether caused by changes in customer preferences or a weakening of the U.S. or global economies, may result in decreased revenue or growth.\n\nOur sales and operating results will also fluctuate for many other reasons, including due to factors described elsewhere in this section and the following:\n\n- our ability to retain and increase sales to existing customers, attract new customers, and satisfy our customers' demands;\n- our ability to retain and expand our network of sellers;\n- our ability to offer products on favorable terms, manage inventory, and fulfill orders;\n- the introduction of competitive stores, websites, products, services, price decreases, or improvements;\n\n- changes in usage or adoption rates of the internet, e-commerce, electronic devices, web services, satellite communications services, and artificial intelligence and machine learning technologies, products, and services, including outside the U.S.;\n- timing, effectiveness, and costs of expansion and upgrades of our systems and infrastructure;\n- the success of our geographic, service, and product line expansions;\n- the extent to which we finance, and the terms of any such financing for, our current operations and future growth;\n- the outcomes of legal proceedings and claims, which may include significant monetary damages or injunctive relief and could have a material adverse impact on our operating results;\n- variations in the mix of products and services we sell;\n- variations in our level of merchandise and vendor returns;\n- the extent to which we offer fast and free delivery, continue to reduce prices worldwide, and provide additional benefits to our customers;\n- factors affecting our reputation or brand image (including any actual or perceived inability to achieve our goals or commitments, whether related to sustainability, customers, employees, or other topics), and public perceptions regarding our positions on social or ethical issues and our development and use of artificial intelligence, machine learning, and automation technologies, products, and services;\n- the extent to which we invest in technology and infrastructure, fulfillment, and other expense categories;\n- availability of and increases in the prices of transportation (including fuel), resources such as land, water, and energy, commodities like paper and packing supplies and hardware products, and technology infrastructure products, including as a result of inflationary pressures;\n- constrained labor markets, which increase our payroll costs;\n- the extent to which operators of the networks between our customers and our stores successfully charge fees to grant our customers unimpaired and unconstrained access to our online services;\n- our ability to collect amounts owed to us when they become due;\n- the extent to which new and existing technologies, or industry trends, restrict online advertising or affect our ability to customize advertising or otherwise tailor our product and service offerings;\n- the extent to which use of our services is affected by spyware, viruses, phishing and other spam emails, denial of service attacks, data theft, computer intrusions, outages, and similar events;\n- the extent to which we fail to maintain our unique culture of innovation, customer obsession, and long-term thinking, which has been critical to our growth and success;\n- disruptions from natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues (including terrorist attacks, armed hostilities, and political conflicts, including those involving China), labor or trade disputes (including restrictive governmental actions impacting us, our customers, and our third-party sellers and suppliers in China or other foreign countries), tariff policy changes, and similar events; and\n- potential negative impacts of climate change, including: increased operating costs due to more frequent extreme weather events or climate-related changes, such as rising temperatures and water scarcity; increased investment requirements associated with the transition to a low-carbon economy; decreased demand for our products and services as a result of changes in customer behavior; increased compliance costs due to more extensive and global regulations and third-party requirements; and reputational damage resulting from perceptions of our environmental impact.\n\n\n# We Face Risks Related to Successfully Optimizing and Operating Our Fulfillment Network and Data Centers \n\nFailures to adequately predict customer demand and consumer spending patterns or otherwise optimize and operate our fulfillment network and data centers successfully from time to time result in excess or insufficient fulfillment or data center capacity, service interruptions, increased costs, and impairment charges, any of which could materially harm our business. As we continue to add fulfillment and data center capability or add new businesses with different requirements, our fulfillment and data center networks become increasingly complex and operating them becomes more challenging. There can be no assurance that we will be able to operate our networks effectively.\n\nIn addition, failure to optimize inventory management or staffing in our fulfillment network increases our net shipping cost by increasing the distance products are shipped and reducing the number of units per shipment or delivery. We and our cosourcers may be unable to adequately staff our fulfillment network and customer service centers. For example, productivity across our fulfillment network is affected by regional labor market constraints, which increase payroll costs and make it difficult to hire, train, and deploy a sufficient number of people to operate our fulfillment network as efficiently as we would like.\n\nUnder some of our commercial agreements, we maintain the inventory of other companies, thereby increasing the complexity of tracking inventory and operating our fulfillment network. Our failure to adequately predict seller demand for storage or to properly handle such inventory or the inability of the other businesses on whose behalf we perform inventory fulfillment services to accurately forecast product demand may result in us being unable to secure sufficient storage space or to optimize our fulfillment network or cause other unexpected costs and other harm to our business and reputation.\n\nWe rely on a limited number of shipping companies to deliver inventory to us and completed orders to our customers. An inability to negotiate acceptable terms with these companies or performance problems, staffing limitations, or other difficulties experienced by these companies or by our own transportation systems, including as a result of labor market constraints and related costs, could negatively impact our operating results and customer experience. In addition, our ability to receive inbound inventory efficiently and ship completed orders to customers also may be negatively affected by natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues, labor or trade disputes, and similar events.\n\n# We Could Be Harmed by Data Loss or Other Security Incidents \n\nBecause we collect, process, store, and transmit large amounts of data, including confidential, classified, sensitive, proprietary, and business and personal information, failure to prevent, detect, or mitigate data loss, theft, misuse, unauthorized access, or other security incidents or vulnerabilities affecting our or our vendors' or customers' technology, products, and systems, could: expose us or our customers to a risk of loss, disclosure, or misuse of such information; adversely affect our operating results; result in litigation, liability, or regulatory action (including under laws related to privacy, data use, data protection, data security, network security, and consumer protection); deter customers or sellers from using our stores, products, and services; and otherwise harm our business and reputation. We use third-party technology and systems for a variety of reasons, including, without limitation, encryption and authentication technology, employee email, content delivery to customers, back-office support, and other functions. Some of our systems have experienced past security incidents, and, although they did not have a material adverse effect on our operating results, there can be no assurance that future incidents will not have material adverse effects on our operations or financial results. Although we have developed systems and processes that are designed to protect customer data and prevent, detect, or mitigate such incidents, including systems and processes designed to reduce the impact of a security incident at a third-party vendor or customer, such measures cannot provide absolute security and may fail to operate as intended or be circumvented.\n\n## We Face Risks Related to System Interruption and Lack of Redundancy\n\nWe experience occasional system interruptions and delays that make our websites and services unavailable or slow to respond and prevent us from efficiently accepting or fulfilling orders or providing services to customers and third parties, which may reduce our net sales and the attractiveness of our products and services. Steps we take to add software and hardware, upgrade our systems and network infrastructure, and improve the stability and efficiency of our systems may not be sufficient to avoid system interruptions or delays that could adversely affect our operating results.\n\nOur computer and communications systems and operations in the past have been, or in the future could be, damaged or interrupted due to events such as natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues (including terrorist attacks and armed hostilities), computer viruses, physical or electronic break-ins, operational failures (including from energy shortages), and similar events or disruptions. Any of these events could cause system interruption, delays, and loss of critical data, and could prevent us from accepting and fulfilling customer orders and providing services, which could make our product and service offerings less attractive and subject us to liability. Our systems are not fully redundant and our disaster recovery planning may not be sufficient. In addition, our insurance may not provide sufficient coverage to compensate for related losses. Any of these events could damage our reputation and be expensive to remedy.\n\n## The Loss of Key Senior Management Personnel or the Failure to Hire and Retain Highly Skilled and Other Personnel Could Negatively Affect Our Business\n\nWe depend on our senior management and other key personnel, including our President and CEO. We do not have \"key person\" life insurance policies. We also rely on other highly skilled personnel. Competition for qualified personnel in the industries in which we operate, as well as senior management, has historically been intense. For example, we experience\n\nsignificant competition in the technology industry, particularly for software engineers, computer scientists, and other technical staff. In addition, changes we make to our current and future work environments may not meet the needs or expectations of our employees or may be perceived as less favorable compared to other companies' policies, which could negatively impact our ability to hire and retain qualified personnel. The loss of any of our executive officers or other key employees, the failure to successfully transition key roles, or the inability to hire, train, retain, and manage qualified personnel, could harm our business.\n\nWe also rely on a significant number of personnel to operate our stores, fulfillment network, and data centers and carry out our other operations. Failure to successfully hire, train, manage, and retain sufficient personnel to meet our needs can strain our operations, increase payroll and other costs, and harm our business and reputation. In addition, changes in laws and regulations applicable to employees, independent contractors, and temporary personnel could increase our payroll costs, decrease our operational flexibility, and negatively impact how we are able to staff our operations and supplement our workforce.\n\nWe are also subject to labor union efforts to organize groups of our employees from time to time. These organizational efforts, if successful, decrease our operational flexibility, which could adversely affect our operating efficiency. In addition, our response to any organizational efforts could be perceived negatively and harm our business and reputation.\n\n# Our Supplier Relationships Subject Us to a Number of Risks \n\nWe have significant suppliers, including content and technology licensors, and in some cases, limited or single-sources of supply, that are important to our sourcing, services, manufacturing, and any related ongoing servicing of merchandise and content. We do not have long-term arrangements with most of our suppliers to guarantee availability of merchandise, content, components, or services, particular payment terms, or the extension of credit limits. Decisions by our current suppliers to limit or stop selling or licensing merchandise, content, components, or services to us on acceptable terms, or delay delivery, including as a result of one or more supplier bankruptcies due to poor economic conditions, as a result of natural or humancaused disasters (including public health crises) or geopolitical events, or for other reasons, may result in our being unable to procure alternatives from other suppliers in a timely and efficient manner and on acceptable terms, or at all. For example, we rely on a limited group of suppliers for semiconductor products, including products related to artificial intelligence infrastructure such as graphics processing units. Constraints on the availability of these products could adversely affect our ability to develop and operate artificial intelligence technologies, products, or services. In addition, violations by our suppliers or other vendors of applicable laws, regulations, contractual terms, intellectual property rights of others, or our Supply Chain Standards, as well as products or practices regarded as unethical, unsafe, or hazardous, could expose us to claims, damage our reputation, limit our growth, and negatively affect our operating results.\n\n## Our Commercial Agreements, Strategic Alliances, and Other Business Relationships Expose Us to Risks\n\nWe provide physical, e-commerce, and omnichannel retail, cloud services, and other services to businesses through commercial agreements, strategic alliances, and business relationships. Under these agreements, we provide web services, technology, fulfillment, computing, digital storage, and other services, as well as enable sellers to offer products or services through our stores. These arrangements are complex and require substantial infrastructure capacity, personnel, and other resource commitments, which may limit the amount of business we can service. We may not be able to implement, maintain, and develop the components of these commercial relationships, which may include web services, fulfillment, customer service, inventory management, tax collection, payment processing, hardware, content, and third-party software, and engaging third parties to perform services. The amount of compensation we receive under certain of our commercial agreements is partially dependent on the volume of the other company's sales. Therefore, when the other company's offerings are not successful, the compensation we receive may be lower than expected or the agreement may be terminated. Moreover, we may not be able to enter into additional or alternative commercial relationships and strategic alliances on favorable terms. We also may be subject to claims from businesses to which we provide these services if we are unsuccessful in implementing, maintaining, or developing these services.\n\nAs our agreements terminate, we may be unable to renew or replace these agreements on comparable terms, or at all. We may in the future enter into amendments on less favorable terms or encounter parties that have difficulty meeting their contractual obligations to us, which could adversely affect our operating results.\n\nOur present and future commercial agreements, strategic alliances, and business relationships create additional risks such as:\n\n- disruption of our ongoing business, including loss of management focus on existing businesses;\n- impairment of other relationships;\n- variability in revenue and income from entering into, amending, or terminating such agreements or relationships; and\n- difficulty integrating under the commercial agreements.\n\n# Our Business Suffers When We Are Unsuccessful in Making, Integrating, and Maintaining Acquisitions and Investments \n\nWe have acquired and invested in a number of companies, and we may in the future acquire or invest in or enter into joint ventures with additional companies. These transactions involve risks such as:\n\n- disruption of our ongoing business, including loss of management focus on existing businesses;\n- problems retaining key personnel;\n- additional operating losses and expenses of the businesses we acquired or in which we invested;\n- the potential impairment of tangible and intangible assets and goodwill, including as a result of acquisitions;\n- the potential impairment of customer and other relationships of the company we acquired or in which we invested or our own customers as a result of any integration of operations;\n- the difficulty of completing such transactions, including obtaining regulatory approvals or satisfying other closing conditions, and achieving anticipated benefits within expected timeframes, or at all;\n- the difficulty of incorporating acquired operations, technology, and rights into our offerings, and unanticipated expenses related to such integration;\n- the difficulty of integrating a new company's accounting, financial and sustainability reporting, management, information and data security, human resource, and other administrative systems to permit effective management, and the lack of control if such integration is delayed or not successfully implemented;\n- losses we may incur as a result of declines in the value of an investment or as a result of incorporating an investee's financial performance into our financial results;\n- for investments in which an investee's financial performance is incorporated into our financial results, either in full or in part, or investments for which we are required to file financial statements or provide financial information, the dependence on the investee's accounting, financial and sustainability reporting, and similar systems, controls, and processes;\n- the difficulty of implementing at companies we acquire the controls, procedures, and policies appropriate for a larger public company;\n- the risks associated with businesses we acquire or invest in, which may differ from or be more significant than the risks our other businesses face;\n- potential unknown liabilities associated with a company we acquire or in which we invest; and\n- for foreign transactions, additional risks related to the integration of operations across different cultures and languages, and the economic, political, and regulatory risks associated with specific countries.\nAs a result of future acquisitions or mergers, we might need to issue additional equity securities, spend our cash, or incur debt, contingent liabilities, or amortization expenses related to intangible assets, any of which could reduce our profitability and harm our business or only be available on unfavorable terms, if at all. In addition, valuations supporting our acquisitions and strategic investments could change rapidly. We could determine that such valuations have experienced impairments or other-than-temporary declines in fair value which could adversely impact our financial results.\n\n\n## We Face Significant Inventory Risk\n\nIn addition to risks described elsewhere in this Item 1A relating to fulfillment network and inventory optimization by us and third parties, we are exposed to significant inventory risks that may adversely affect our operating results as a result of seasonality, new product launches, rapid changes in product cycles and pricing, defective merchandise, changes in customer demand and consumer spending patterns, changes in consumer tastes with respect to our products, spoilage, and other factors. We endeavor to accurately predict these trends and avoid overstocking or understocking products we manufacture and/or sell. Demand for products, however, can change significantly between the time inventory or components are ordered and the date of sale. In addition, when we begin selling or manufacturing a new product or offering a new service, it may be difficult to establish vendor relationships, determine appropriate product or component selection, and accurately forecast demand. The acquisition of certain types of inventory or components requires significant lead-time and prepayment and they may not be returnable. We carry a broad selection and significant inventory levels of certain products, such as consumer electronics, and at times we are unable to sell products in sufficient quantities or to meet demand during the relevant selling seasons. Any one of the inventory risk factors set forth above may adversely affect our operating results.\n\n# We Are Subject to Payments-Related Risks \n\nWe accept payments using a variety of methods, including credit card, debit card, credit accounts (including promotional financing), gift cards, direct debit from a customer's bank account, consumer invoicing, checks, and payment upon delivery. For existing and future payment options we offer to our customers, we currently are subject to, and may become subject to additional, regulations and compliance requirements (including obligations to implement enhanced authentication processes that could result in significant costs and reduce the ease of use of our payments products), as well as fraud. For certain payment methods, including credit and debit cards, we pay interchange and other fees, which may increase over time and raise our operating costs and lower profitability. We rely on third parties to provide certain Amazon-branded payment methods and payment processing services, including the processing of credit cards, debit cards, electronic checks, and promotional financing. In each case, it could disrupt our business if these companies become unwilling or unable to provide these services to us. We also offer co-branded credit card programs, which could adversely affect our operating results if renewed on less favorable terms or terminated. We are also subject to payment card association operating rules, including data security rules, certification requirements, and rules governing electronic funds transfers, which could change or be reinterpreted to make it difficult or impossible for us to comply. Failure to comply with these rules or requirements, as well as any breach, compromise, or failure to otherwise detect or prevent fraudulent activity involving our data security systems, could result in our being liable for card issuing banks' costs, subject to fines and higher transaction fees, and loss of our ability to accept credit and debit card payments from our customers, process electronic funds transfers, or facilitate other types of online payments, and our business and operating results could be adversely affected.\n\nIn addition, we provide regulated services in certain jurisdictions because we enable customers to keep account balances with us and transfer money to third parties, and because we provide services to third parties to facilitate payments on their behalf. Jurisdictions subject us to requirements for licensing, regulatory inspection, bonding and capital maintenance, the use, handling, and segregation of transferred funds, consumer disclosures, maintaining or processing data, and authentication. We are also subject to or voluntarily comply with a number of other laws and regulations relating to payments, money laundering, international money transfers, privacy, data use, data protection, data security, data localization, network security, consumer protection, and electronic fund transfers. If we were found to be in violation of applicable laws or regulations, we could be subject to additional requirements and civil and criminal penalties, or forced to cease providing certain services.\n\n## We Have a Rapidly Evolving Business Model and Our Stock Price Is Highly Volatile\n\nWe have a rapidly evolving business model. The trading price of our common stock fluctuates significantly in response to, among other risks, the risks described elsewhere in this Item 1A, as well as:\n\n- changes in interest rates;\n- conditions or trends in the internet and the industry segments we operate in;\n- quarterly variations in operating results;\n- fluctuations in the stock market in general and market prices for internet-related companies in particular;\n- changes in financial estimates by us or decisions to increase or decrease future spending or investment levels;\n- changes in financial estimates and recommendations by securities analysts;\n- changes in our capital structure, including issuance of additional debt or equity to the public;\n- changes in the valuation methodology of, or performance by, other e-commerce or technology companies; and\n- transactions in our common stock by major investors and certain analyst reports, news, social media activity, and speculation.\nVolatility in our stock price could adversely affect our business and financing opportunities and force us to increase our cash compensation to employees or grant larger stock awards than we have historically, which could hurt our operating results or reduce the percentage ownership of our existing stockholders, or both.\n\n\n## Legal and Regulatory Risks\n\n## Government Regulation Is Evolving and Unfavorable Changes Could Harm Our Business\n\nWe are subject to general business regulations and laws, as well as regulations and laws specifically governing the internet, physical, e-commerce, and omnichannel retail, digital content, web services, electronic devices, advertising, artificial intelligence technologies and services, satellite communications services, healthcare, and other products and services that we offer or sell. These regulations and laws cover taxation, privacy, data use, data protection, data security, data localization, network security, consumer protection, pricing, content, copyrights, distribution, transportation, communications, electronic device certification, electronic waste, energy consumption, environmental and climate-related regulation, electronic contracts\n\nand other communications, competition, employment, trade and protectionist measures, web services, the provision of online payment services, registration, licensing, and information reporting requirements, unencumbered internet access to our services or access to our facilities, the design and operation of websites, health, safety, and sanitation standards, the characteristics, legality, and quality of products and services, product labeling, the commercial operation of unmanned aircraft systems, healthcare, and other matters. It is not clear how existing laws governing issues such as property ownership, libel, privacy, data use, data protection, data security, data localization, network security, and consumer protection apply to aspects of our operations such as the internet, e-commerce, digital content, web services, electronic devices, advertising, artificial intelligence technologies and services, satellite communications services, and healthcare. A large number of jurisdictions regulate our operations, and the extent, nature, and scope of such regulations is evolving and expanding as the scope of our businesses expand. We are regularly subject to formal and informal reviews, investigations, and other proceedings by governments and regulatory authorities under existing laws, regulations, or interpretations or pursuing new and novel approaches to regulate our operations. For example, we face a number of open investigations based on claims that aspects of our operations infringe competition or consumer protection rules, including aspects of Amazon's operation of its stores, including its fulfillment network and Prime, and certain aspects of AWS's offering of cloud services. We strongly dispute these claims and intend to defend ourselves vigorously in these investigations. Similarly, we face investigations under a growing patchwork of laws and regulations governing the collection, use, and disclosure of data, the interpretation of which continues to evolve, leading to uncertainty about how regulators will view our privacy practices. In addition, regulators and lawmakers are increasingly focused on controlling additional aspects of the operations of technology companies and companies they have characterized to be online \"gatekeepers\" through the application of existing regulations and laws and the adoption of new regulations and laws, which increases our compliance costs and limits the operation of our business. Unfavorable regulations, laws, decisions, or interpretations by government or regulatory authorities applying those laws and regulations, or inquiries, investigations, or enforcement actions threatened or initiated by them, could cause us to incur substantial costs, expose us to unanticipated civil and criminal liability or penalties (including substantial monetary fines), diminish the demand for, or availability of, our products and services, increase our cost of doing business, require us to change our business practices in a manner materially adverse to our business, damage our reputation, impede our growth, or otherwise have a material effect on our operations. The media, political, and regulatory scrutiny we face, which may continue to increase, amplifies these risks.\n\n# Claims, Litigation, Government Investigations, and Other Proceedings May Adversely Affect Our Business and Results of Operations \n\nAs an innovative company offering a wide range of consumer and business products and services around the world, we are regularly subject to actual and threatened claims, litigation, reviews, investigations, and other proceedings, including proceedings by governments and regulatory authorities, involving a wide range of issues, including patent and other intellectual property matters, taxes, labor and employment (including the characterization of delivery drivers), competition and antitrust, privacy, data use, data protection, data security, data localization, network security, consumer protection, commercial disputes, goods and services offered by us and by third parties (including artificial intelligence technologies and services), healthcare, and other matters. The number and scale of these proceedings have increased over time as our businesses have expanded in scope and geographic reach, as our products, services, and operations have become more complex and available to, and used by, more people, and as governments and regulatory authorities seek to regulate us on a pre-emptive basis. For example, we are litigating a number of matters alleging price fixing, monopolization, and consumer protection claims, including those brought by state attorneys general and the Federal Trade Commission. Any of these types of proceedings can have an adverse effect on us because of legal costs, disruption of our operations, diversion of management resources, negative publicity, and other factors. The outcomes of these matters are inherently unpredictable and subject to significant uncertainties. Determining legal reserves or possible losses from such matters involves judgment and may not reflect the full range of uncertainties and unpredictable outcomes. Until the final resolution of such matters, we may be exposed to losses in excess of the amount recorded, and such amounts could be material. Should any of our estimates and assumptions change or prove to have been incorrect, it could have a material effect on our business, consolidated financial position, results of operations, or cash flows. In addition, it is possible that a resolution of one or more such proceedings, including as a result of a settlement, could involve licenses, sanctions, consent decrees, or orders requiring us to make substantial future payments, preventing us from offering certain products or services, requiring us to change our business practices in a manner materially adverse to our business, requiring development of non-infringing or otherwise altered products or technologies, damaging our reputation, or otherwise having a material effect on our operations.\n\n## We Are Subject to Product Liability Claims When People or Property Are Harmed by the Products We Sell or Manufacture\n\nSome of the products we sell or manufacture expose us to product liability or food safety claims relating to personal injury or illness, death, or environmental or property damage, and can require product recalls or other actions. Third parties who sell products using our services and stores also expose us to product liability claims. Additionally, under our A-to-z Guarantee,\n\nwe may reimburse customers for certain product liability claims up to certain limits in these situations, and as our third-party seller sales grow, the cost of this program will increase and could negatively affect our operating results. Although we maintain liability insurance, we cannot be certain that our coverage will be adequate for liabilities actually incurred or that insurance will continue to be available to us on economically reasonable terms, or at all. Although we impose contractual terms on sellers that are intended to prohibit sales of certain type of products, we may not be able to detect, enforce, or collect sufficient damages for breaches of such agreements. In addition, some of our agreements with our vendors and sellers do not indemnify us from product liability.\n\n# We Face Additional Tax Liabilities and Collection Obligations \n\nWe are subject to a variety of taxes and tax collection obligations in the U.S. (federal and state) and numerous foreign jurisdictions. We may recognize additional tax expense and be subject to additional tax liabilities, including other liabilities for tax collection obligations due to changes in laws, regulations, administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions. Such changes could come about as a result of economic, political, and other conditions. An increasing number of jurisdictions are considering or have adopted laws or administrative practices that impose new tax measures, including revenue-based taxes, targeting online commerce and the remote selling of goods and services. These include new obligations to withhold or collect sales, consumption, value added, or other taxes on online marketplaces and remote sellers, or other requirements that may result in liability for third party obligations. For example, non-U.S. jurisdictions have proposed or enacted taxes on online advertising and marketplace service revenues. Proliferation of these or similar unilateral tax measures may continue unless broader international tax reform is implemented. In addition, the European Union and other countries (including those in which we operate) have enacted or have committed to enact global minimum taxes, which may increase our tax expense.\n\nOur results of operations and cash flows could be adversely affected by additional taxes imposed on us prospectively or retroactively or additional taxes or penalties resulting from the failure to comply with any collection obligations or failure to provide information about our customers, suppliers, and other third parties for tax reporting purposes to various government agencies. In some cases we also may not have sufficient notice to enable us to build systems and adopt processes to properly comply with new reporting or collection obligations by the effective date.\n\nOur tax expense and liabilities are also affected by other factors, such as changes in our business operations, acquisitions, investments, entry into new businesses and geographies, intercompany transactions, the relative amount of our foreign earnings, losses incurred in jurisdictions for which we are not able to realize related tax benefits, the applicability of special or extraterritorial tax regimes, changes in foreign exchange rates, changes in our stock price, changes to our forecasts of income and loss and the mix of jurisdictions to which they relate, and changes in our tax assets and liabilities and their valuation. In the ordinary course of our business, there are many transactions and calculations for which the ultimate tax determination is uncertain. Significant judgment is required in evaluating and estimating our tax expense, assets, and liabilities.\n\nWe are also subject to tax controversies in various jurisdictions that can result in tax assessments against us. Developments in an audit, investigation, or other tax controversy can have a material effect on our operating results or cash flows in the period or periods for which that development occurs, as well as for prior and subsequent periods. Due to the inherent complexity and uncertainty of these matters, interpretations of certain tax laws by authorities, and judicial, administrative, and regulatory processes in certain jurisdictions, the final outcome of any such controversy may be materially different from our expectations. For example, the Indian tax authority has asserted that tax applies to cloud services fees paid to Amazon in the U.S. We are contesting this position; however, if this matter is adversely resolved, we may be required to pay additional amounts with respect to current and prior periods and our taxes in the future could increase. We regularly assess the likelihood of an adverse outcome resulting from these proceedings to determine the adequacy of our tax accruals. Although we believe our tax estimates are reasonable, the final outcome of audits, investigations, and any other tax controversies could be materially different from our historical tax accruals.\n\n## We Are Subject to Risks Related to Government Contracts and Related Procurement Regulations\n\nOur contracts with U.S., as well as state, local, and foreign, government entities are subject to various procurement regulations and other requirements relating to their formation, administration, and performance. We are subject to audits and investigations relating to our government contracts, and any violations could result in various civil and criminal penalties and administrative sanctions, including termination of contract, refunding or suspending of payments, forfeiture of profits, payment of fines, and suspension or debarment from future government business. In addition, some of these contracts are subject to periodic funding approval and/or provide for termination by the government at any time, without cause.\n\n## Item 1B. Unresolved Staff Comments\n\nNone.\n\n# Item 1C. Cybersecurity \n\nWe have processes in place for assessing, identifying, and managing material risks from potential unauthorized occurrences on or through our electronic information systems that could adversely affect the confidentiality, integrity, or availability of our information systems or the information residing on those systems. These include a wide variety of mechanisms, controls, technologies, methods, systems, and other processes that are designed to prevent, detect, or mitigate data loss, theft, misuse, unauthorized access, or other security incidents or vulnerabilities affecting the data. The data include confidential, proprietary, and business and personal information that we collect, process, store, and transmit as part of our business, including on behalf of third parties. We also use systems and processes designed to reduce the impact of a security incident at a third-party vendor or customer. Additionally, we use processes to oversee and identify material risks from cybersecurity threats associated with our use of third-party technology and systems, including: technology and systems we use for encryption and authentication; employee email; content delivery to customers; back-office support; and other functions.\n\nAs part of our risk management process, we conduct application security assessments, vulnerability management, penetration testing, security audits, and ongoing risk assessments. We also maintain a variety of incident response plans that are utilized when incidents are detected. We require employees with access to information systems, including all corporate employees, to undertake data protection and cybersecurity training and compliance programs annually.\n\nWe have a unified and centrally-coordinated team, led by our chief security officer, that is responsible for implementing and maintaining centralized cybersecurity and data protection practices at Amazon in close coordination with senior leadership and other teams across Amazon. Reporting to our chief security officer are a number of experienced chief information security officers responsible for various parts of our business, including AWS, each of whom is supported by a team of trained cybersecurity professionals. In addition to our extensive in-house cybersecurity capabilities, at times we also engage assessors, consultants, auditors, or other third parties to assist with assessing, identifying, and managing cybersecurity risks.\n\nOur cybersecurity risks and associated mitigations are evaluated by senior leadership, including as part of our enterprise risk assessments that are reviewed by the Audit Committee and our Board of Directors. Such risks and mitigations are also subject to oversight by the Security Committee of our Board of Directors. Additional information about cybersecurity risks we face is discussed in Item 1A of Part I, \"Risk Factors,\" under the heading \"We Could Be Harmed by Data Loss or Other Security Incidents,\" which should be read in conjunction with the information above.\n\nThe Security Committee, which is comprised of independent directors, oversees our policies and procedures for protecting our cybersecurity infrastructure and for compliance with applicable data protection and security regulations, and related risks. The Security Committee receives reports regarding such risks from management, including our chief security officer, and reports to the Board at least annually. The Security Committee also oversees the Board's response to any significant cybersecurity incidents.\n\nOur chief security officer, who has extensive cybersecurity knowledge and skills gained from over 15 years of work experience on the security team at Amazon and an extensive career in the technology and cybersecurity industries as a senior executive in the federal government, heads the team responsible for implementing and maintaining cybersecurity and data protection practices at Amazon and reports directly to the Chief Executive Officer.\n\n# Item 2. Properties\n\nAs of December 31, 2024, we operated the following facilities (in thousands):\n\n|  Description of Use | Leased Square\nFootage (1) | Owned Square\nFootage | Location  |\n| --- | --- | --- | --- |\n|  Office space | 29,551 | 9,104 | North America  |\n|  Office space | 23,771 | 1,802 | International  |\n|  Physical stores (2) | 23,975 | 707 | North America  |\n|  Physical stores (2) | 222 | - | International  |\n|  Fulfillment, data centers, and other | 448,168 | 36,869 | North America  |\n|  Fulfillment, data centers, and other | 176,287 | 18,958 | International  |\n|  Total | 701,974 | 67,440 |   |\n\n(1) For leased properties, represents the total leased space excluding sub-leased space. (2) This includes 618 North America and 27 International stores as of December 31, 2024.\n\n|  Segment | Leased Square\nFootage (1) | Owned Square\nFootage (1)  |\n| --- | --- | --- |\n|  North America | 457,104 | 20,741  |\n|  International | 166,673 | 11,741  |\n|  AWS | 24,875 | 24,052  |\n|  Total | 648,652 | 56,534  |\n\n(1) Segment amounts exclude corporate facilities. Shared facilities are allocated among the segments based on usage and primarily relate to facilities that hold our technology infrastructure. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 — Segment Information.\" We own and lease our corporate headquarters in Washington's Puget Sound region and Arlington, Virginia.\n\n## Item 3. Legal Proceedings\n\nSee Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 7 — Commitments and Contingencies Legal Proceedings.\"\n\n## Item 4. Mine Safety Disclosures\n\nNot applicable.\n\n# PART II \n\nItem 5. Market for the Registrant's Common Stock, Related Shareholder Matters, and Issuer Purchases of Equity Securities\n\n## Market Information\n\nOur common stock is traded on the Nasdaq Global Select Market under the symbol \"AMZN.\"\n\n## Holders\n\nAs of January 29, 2025, there were 12,135 shareholders of record of our common stock, although there is a much larger number of beneficial owners.\n\n## Recent Sales of Unregistered Securities\n\nNone.\n\n## Issuer Purchases of Equity Securities\n\nNone.\n\n## Item 6. Reserved\n\n# Item 7. Management's Discussion and Analysis of Financial Condition and Results of Operations \n\n## Forward-Looking Statements\n\nThis Annual Report on Form 10-K includes forward-looking statements within the meaning of the Private Securities Litigation Reform Act of 1995. All statements other than statements of historical fact, including statements regarding guidance, industry prospects, or future results of operations or financial position, made in this Annual Report on Form 10-K are forwardlooking. We use words such as anticipates, believes, expects, future, intends, and similar expressions to identify forwardlooking statements. Forward-looking statements reflect management's current expectations and are inherently uncertain. Actual results and outcomes could differ materially for a variety of reasons, including, among others, fluctuations in foreign exchange rates, changes in global economic conditions and customer demand and spending, inflation, interest rates, regional labor market constraints, world events, the rate of growth of the internet, online commerce, cloud services, and new and emerging technologies, the amount that Amazon.com invests in new business opportunities and the timing of those investments, the mix of products and services sold to customers, the mix of net sales derived from products as compared with services, the extent to which we owe income or other taxes, competition, management of growth, potential fluctuations in operating results, international growth and expansion, the outcomes of claims, litigation, government investigations, and other proceedings, fulfillment, sortation, delivery, and data center optimization, risks of inventory management, variability in demand, the degree to which we enter into, maintain, and develop commercial agreements, proposed and completed acquisitions and strategic transactions, payments risks, and risks of fulfillment throughput and productivity. In addition, global economic and geopolitical conditions and additional or unforeseen circumstances, developments, or events may give rise to or amplify many of these risks. These risks and uncertainties, as well as other risks and uncertainties that could cause our actual results or outcomes to differ significantly from management's expectations, are described in greater detail in Item 1A of Part I, \"Risk Factors.\"\n\n## Overview\n\nOur primary source of revenue is the sale of a wide range of products and services to customers. The products offered through our stores include merchandise and content we have purchased for resale and products offered by third-party sellers, and we also manufacture and sell electronic devices and produce media content. Generally, we recognize gross revenue from items we sell from our inventory as product sales and recognize our net share of revenue of items sold by third-party sellers as service sales. We seek to increase unit sales across our stores, through increased product selection, across numerous product categories. We also offer other services such as compute, storage, and database offerings, fulfillment, advertising, publishing, and digital content subscriptions.\n\nOur financial focus is on long-term, sustainable growth in free cash flows. Free cash flows are driven primarily by increasing operating income and efficiently managing accounts receivable, inventory, accounts payable, and cash capital expenditures, including our decision to purchase or lease property and equipment. Increases in operating income primarily result from increases in sales of products and services and efficiently managing our operating costs, partially offset by investments we make in longer-term strategic initiatives, including capital expenditures focused on improving the customer experience. To increase sales of products and services, we focus on improving all aspects of the customer experience, including lowering prices, improving availability, offering faster delivery and performance times, increasing selection, producing original content, increasing product categories and service offerings, expanding product information, improving ease of use, improving reliability, and earning customer trust. See \"Results of Operations - Non-GAAP Financial Measures\" below for additional information on our non-GAAP free cash flows financial measures.\n\nWe seek to reduce our variable costs per unit and work to leverage our fixed costs. Our variable costs include product and content costs, payment processing and related transaction costs, picking, packaging, and preparing orders for shipment, transportation, customer service support, costs necessary to run AWS, and a portion of our marketing costs. Our fixed costs include the costs necessary to build and run our technology infrastructure; to build, enhance, and add features to our online stores, web services, electronic devices, and digital offerings; and to build and optimize our fulfillment network. Variable costs generally change directly with sales volume, while fixed costs generally are dependent on the timing of capacity needs, geographic expansion, category expansion, and other factors. To decrease our variable costs on a per unit basis and enable us to lower prices for customers, we seek to increase our direct sourcing, increase discounts from suppliers, and reduce defects in our processes. To minimize unnecessary growth in fixed costs, we seek to improve process efficiencies and maintain a lean culture.\n\nWe seek to turn inventory quickly and collect from consumers before our payments to vendors and sellers become due. Because consumers primarily use credit cards in our stores, our receivables from consumers settle quickly. We expect variability in inventory turnover over time since it is affected by numerous factors, including our product mix, the mix of sales by us and by third-party sellers, our continuing focus on in-stock inventory availability and selection of product offerings, supply chain disruptions and resulting vendor lead times, our investment in new geographies and product lines, and the extent to which we choose to utilize third-party fulfillment providers. We also expect some variability in accounts payable days over time since they are affected by several factors, including the mix of product sales, the mix of sales by third-party sellers, the mix\n\nof suppliers, seasonality, and changes in payment and other terms over time, including the effect of balancing pricing and timing of payment terms with suppliers.\n\nWe expect spending in technology and infrastructure will increase over time as we add computer scientists, designers, software and hardware engineers, and merchandising employees. Our technology and infrastructure investment and capital spending projects often support a variety of product and service offerings due to geographic expansion and the crossfunctionality of our systems and operations. We seek to invest efficiently in several areas of technology and infrastructure, including AWS, and expansion of new and existing product categories and service offerings, as well as in infrastructure to enhance the customer experience and improve our process efficiencies. We believe that advances in technology, specifically the speed and reduced cost of processing power, data storage and analytics, improved wireless connectivity, and the practical applications of artificial intelligence and machine learning, will continue to improve users' experience on the internet and increase its ubiquity in people's lives. To best take advantage of these continued advances in technology, we are investing in AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services to developers and enterprises of all sizes. We are also investing in initiatives to build and deploy innovative and efficient software and electronic devices as well as other initiatives including the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services.\n\nWe seek to efficiently manage shareholder dilution while maintaining the flexibility to issue shares for strategic purposes, such as financings, acquisitions, and aligning employee compensation with shareholders' interests. We utilize restricted stock units as our primary vehicle for equity compensation because we believe this compensation model aligns the long-term interests of our shareholders and employees. In measuring shareholder dilution, we include all vested and unvested stock awards outstanding, without regard to estimated forfeitures. Total shares outstanding plus outstanding stock awards were 10.8 billion and 10.9 billion as of December 31, 2023 and 2024.\n\nOur financial reporting currency is the U.S. Dollar and changes in foreign exchange rates significantly affect our reported results and consolidated trends. For example, if the U.S. Dollar weakens year-over-year relative to currencies in our international locations, our consolidated net sales and operating expenses will be higher than if currencies had remained constant. Likewise, if the U.S. Dollar strengthens year-over-year relative to currencies in our international locations, our consolidated net sales and operating expenses will be lower than if currencies had remained constant. We believe that our increasing diversification beyond the U.S. economy through our growing international businesses benefits our shareholders over the long-term. We also believe it is useful to evaluate our operating results and growth rates before and after the effect of currency changes.\n\nIn addition, the remeasurement of our intercompany balances can result in significant gains and losses associated with the effect of movements in foreign exchange rates. Currency volatilities may continue, which may significantly impact (either positively or negatively) our reported results and consolidated trends and comparisons.\n\nFor additional information about each line item addressed above, refer to Item 8 of Part II, \"Financial Statements and Supplementary Data - Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures.\"\n\nOur Annual Report on Form 10-K for the year ended December 31, 2023 includes a discussion and analysis of our financial condition and results of operations for the year ended December 31, 2022 in Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations.\"\n\n# Critical Accounting Estimates \n\nThe preparation of financial statements in conformity with generally accepted accounting principles of the United States (\"GAAP\") requires estimates and assumptions that affect the reported amounts of assets and liabilities, revenues and expenses, and related disclosures of contingent liabilities in the consolidated financial statements and accompanying notes. Critical accounting estimates are those estimates made in accordance with GAAP that involve a significant level of estimation uncertainty and have had or are reasonably likely to have a material impact on the financial condition or results of operations of the Company. Based on this definition, we have identified the critical accounting estimates addressed below. We also have other key accounting policies, which involve the use of estimates, judgments, and assumptions that are significant to understanding our results. For additional information, see Item 8 of Part II, \"Financial Statements and Supplementary Data Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures.\" Although we believe that our estimates, assumptions, and judgments are reasonable, they are based upon information presently available. Actual results may differ significantly from these estimates under different assumptions, judgments, or conditions.\n\n## Inventories\n\nInventories, consisting of products available for sale, are primarily accounted for using the first-in first-out method, and are valued at the lower of cost and net realizable value. This valuation requires us to make judgments, based on currently available information, about the likely method of disposition, such as through sales to individual customers, returns to product\n\nvendors, or liquidations, and expected recoverable values of each disposition category. These assumptions about future disposition of inventory are inherently uncertain and changes in our estimates and assumptions may cause us to realize material write-downs in the future. As a measure of sensitivity, for every $1 \\%$ of additional inventory valuation allowance as of December 31, 2024, we would have recorded an additional cost of sales of approximately $\\$ 365$ million.\n\nIn addition, we enter into supplier commitments for certain electronic device components and certain products. These commitments are based on forecasted customer demand. If we reduce these commitments, we may incur additional costs.\n\n# Income Taxes \n\nWe are subject to income taxes in the U.S. (federal and state) and numerous foreign jurisdictions. Tax laws, regulations, administrative practices, principles, and interpretations in various jurisdictions may be subject to significant change, with or without notice, due to economic, political, and other conditions, and significant judgment is required in evaluating and estimating our provision and accruals for these taxes. There are many transactions that occur during the ordinary course of business for which the ultimate tax determination is uncertain. In addition, our actual and forecasted earnings are subject to change due to economic, political, and other conditions and significant judgment is required in determining our ability to use our deferred tax assets.\n\nOur effective tax rates could be affected by numerous factors, such as changes in our business operations, acquisitions, investments, entry into new businesses and geographies, intercompany transactions, the relative amount of our foreign earnings, including earnings being lower than anticipated in jurisdictions where we have lower statutory rates and higher than anticipated in jurisdictions where we have higher statutory rates, losses incurred in jurisdictions for which we are not able to realize related tax benefits, the applicability of special tax regimes, changes in foreign exchange rates, changes in our stock price, changes to our forecasts of income and loss and the mix of jurisdictions to which they relate, changes in our deferred tax assets and liabilities and their valuation, changes in the laws, regulations, administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions. In addition, a number of countries have enacted or are actively pursuing changes to their tax laws applicable to corporate multinationals.\n\nWe are also currently subject to tax controversies in various jurisdictions, and these jurisdictions may assess additional income tax liabilities against us. Developments in an audit, investigation, or other tax controversy could have a material effect on our operating results or cash flows in the period or periods for which that development occurs, as well as for prior and subsequent periods. We regularly assess the likelihood of an adverse outcome resulting from these proceedings to determine the adequacy of our tax accruals. Although we believe our tax estimates are reasonable, the final outcome of audits, investigations, and any other tax controversies could be materially different from our historical income tax provisions and accruals.\n\n## Liquidity and Capital Resources\n\nCash flow information is as follows (in millions):\n\nCash provided by (used in):\nOperating activities\nInvesting activities\nFinancing activities\n\n| Year Ended December 31, |  |\n| :--: | :--: |\n| 2023 | 2024 |\n| \\$ 84,946 | \\$ 115,877 |\n| $(49,833)$ | $(94,342)$ |\n| $(15,879)$ | $(11,812)$ |\n\nOur principal sources of liquidity are cash flows generated from operations and our cash, cash equivalents, and marketable securities balances, which, at fair value, were $\\$ 86.8$ billion and $\\$ 101.2$ billion as of December 31, 2023 and 2024. Amounts held in foreign currencies were $\\$ 23.5$ billion and $\\$ 25.5$ billion as of December 31, 2023 and 2024. Our foreign currency balances include British Pounds, Canadian Dollars, Euros, Indian Rupees, and Japanese Yen.\n\nCash provided by (used in) operating activities was $\\$ 84.9$ billion and $\\$ 115.9$ billion in 2023 and 2024. Our operating cash flows result primarily from cash received from our consumer, seller, developer, enterprise, and content creator customers, and advertisers, offset by cash payments we make for products and services, employee compensation, payment processing and related transaction costs, operating leases, and interest payments. Cash received from our customers and other activities generally corresponds to our net sales. The increase in operating cash flow in 2024, compared to the prior year, was due to an increase in net income (loss), excluding non-cash expenses, and changes in working capital. Working capital at any specific point in time is subject to many variables, including variability in demand, inventory management and category expansion, the timing of cash receipts and payments, customer and vendor payment terms, and fluctuations in foreign exchange rates.\n\nCash provided by (used in) investing activities corresponds with cash capital expenditures, including leasehold improvements, incentives received from property and equipment vendors, proceeds from asset sales, cash outlays for\n\nacquisitions, investments in other companies and intellectual property rights, and purchases, sales, and maturities of marketable securities. Cash provided by (used in) investing activities was $\\$(49.8)$ billion and $\\$(94.3)$ billion in 2023 and 2024, with the variability caused primarily by purchases, sales, and maturities of marketable securities and cash capital expenditures. Cash capital expenditures were $\\$ 48.1$ billion, and $\\$ 77.7$ billion in 2023 and 2024, which primarily reflect investments in technology infrastructure (the majority of which is to support AWS business growth) and in additional capacity to support our fulfillment network. We expect cash capital expenditures to increase in 2025, primarily driven by investments in technology infrastructure. We made cash payments, net of acquired cash, related to acquisition and other investment activity of $\\$ 5.8$ billion and $\\$ 7.1$ billion in 2023 and 2024. We funded the acquisition of 1Life Healthcare, Inc. (One Medical) in 2023 with cash on hand. In Q3 2023, we invested $\\$ 1.25$ billion in a convertible note from Anthropic, PBC. In Q1 2024, we invested $\\$ 2.75$ billion in a second convertible note. In Q4 2024, we entered into an agreement and invested $\\$ 1.3$ billion in a third convertible note, and will invest an additional $\\$ 2.7$ billion by Q4 2025.\n\nCash provided by (used in) financing activities was $\\$(15.9)$ billion and $\\$(11.8)$ billion in 2023 and 2024. Cash inflows from financing activities resulted from proceeds from short-term debt, and other and long-term-debt of $\\$ 18.1$ billion and $\\$ 5.1$ billion in 2023 and 2024. Cash outflows from financing activities resulted from payments of short-term debt, and other, longterm debt, finance leases, and financing obligations of $\\$ 34.0$ billion and $\\$ 17.0$ billion in 2023 and 2024. Property and equipment acquired under finance leases was $\\$ 642$ million and $\\$ 854$ million in 2023 and 2024.\n\nWe had no borrowings outstanding under the two unsecured revolving credit facilities or the commercial paper programs as of December 31, 2024. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 - Debt\" for additional information.\n\nAs of December 31, 2024, cash, cash equivalents, and marketable securities held by foreign subsidiaries were $\\$ 6.3$ billion. We intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nOur U.S. taxable income is reduced by accelerated depreciation deductions and increased by the impact of capitalized research and development expenses. U.S. tax rules provide for enhanced accelerated depreciation deductions by allowing us to expense a portion of qualified property, primarily equipment. These enhanced deductions are scheduled to phase out annually from 2023 through 2026. Our federal tax provision included accelerated depreciation deductions for 2022, 2023, and 2024. Additionally, effective January 1, 2022, research and development expenses are required to be capitalized and amortized for U.S. tax purposes, which delays the deductibility of these expenses. Cash paid for U.S. (federal and state) and foreign income taxes (net of refunds) totaled $\\$ 11.2$ billion and $\\$ 12.3$ billion for 2023 and 2024.\n\nAs of December 31, 2023 and 2024, restricted cash, cash equivalents, and marketable securities were $\\$ 503$ million and $\\$ 3.5$ billion. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 - Debt\" and \"Financial Statements and Supplementary Data - Note 7 - Commitments and Contingencies\" for additional discussion of our principal contractual commitments, as well as our pledged assets. Additionally, we have purchase obligations and open purchase orders, including for inventory and capital expenditures, that support normal operations and are primarily due in the next twelve months. These purchase obligations and open purchase orders are generally cancellable in full or in part through the contractual provisions.\n\nWe believe that cash flows generated from operations and our cash, cash equivalents, and marketable securities balances, as well as our borrowing arrangements, will be sufficient to meet our anticipated operating cash needs for at least the next twelve months. However, any projections of future cash needs and cash flows are subject to substantial uncertainty. See Item 1A of Part I, \"Risk Factors.\" We continually evaluate opportunities to sell additional equity or debt securities, obtain credit facilities, obtain finance and operating lease arrangements, enter into financing obligations, repurchase common stock, pay dividends, or repurchase, refinance, or otherwise restructure our debt for strategic reasons or to further strengthen our financial position.\n\nThe sale of additional equity or convertible debt securities would be dilutive to our shareholders. In addition, we will, from time to time, consider the acquisition of, or investment in, complementary businesses, products, services, capital infrastructure, and technologies, which might affect our liquidity requirements or cause us to secure additional financing, or issue additional equity or debt securities. There can be no assurance that additional credit lines or financing instruments will be available in amounts or on terms acceptable to us, if at all. In addition, economic conditions and actions by policymaking bodies are contributing to changing interest rates and significant capital market volatility, which, along with any increases in our borrowing levels, could increase our future borrowing costs.\n\n# Results of Operations \n\nWe have organized our operations into three segments: North America, International, and AWS. These segments reflect the way the Company evaluates its business performance and manages its operations. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 - Segment Information.\"\n\n## Overview\n\nMacroeconomic factors, including changes in inflation and interest rates, global economic and geopolitical developments, and the development and adoption of technologies and services, including artificial intelligence, have direct and indirect impacts on our results of operations that are difficult to isolate and quantify. These could affect customer demand for our products and services, our ability to predict growth needs, expenses, and the benefits we gain from new technologies. We expect some or all of them to continue to impact our operations into Q1 2025.\n\n## Net Sales\n\nNet sales include product and service sales. Product sales represent revenue from the sale of products and related shipping fees and digital media content where we record revenue gross. Service sales primarily represent third-party seller fees, which includes commissions and any related fulfillment and shipping fees, AWS sales, advertising services, Amazon Prime membership fees, and certain digital media content subscriptions. Net sales information is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2023 | 2024 |\n| Net Sales: |  |  |\n| North America | \\$ 352,828 | \\$ 387,497 |\n| International | 131,200 | 142,906 |\n| AWS | 90,757 | 107,556 |\n| Consolidated | \\$ 574,785 | \\$ 637,959 |\n| Year-over-year Percentage Growth: |  |  |\n| North America | $12 \\%$ | $10 \\%$ |\n| International | 11 | 9 |\n| AWS | 13 | 19 |\n| Consolidated | 12 | 11 |\n| Year-over-year Percentage Growth, excluding the effect of foreign exchange rates: |  |  |\n| North America | $12 \\%$ | $10 \\%$ |\n| International | 11 | 10 |\n| AWS | 13 | 19 |\n| Consolidated | 12 | 11 |\n| Net Sales Mix: |  |  |\n| North America | $61 \\%$ | $61 \\%$ |\n| International | 23 | 22 |\n| AWS | 16 | 17 |\n| Consolidated | $100 \\%$ | $100 \\%$ |\n\nSales increased $11 \\%$ in 2024, compared to the prior year. Changes in foreign exchange rates reduced net sales by $\\$ 2.3$ billion in 2024. For a discussion of the effect of foreign exchange rates on sales growth, see \"Effect of Foreign Exchange Rates\" below.\n\nNorth America sales increased 10\\% in 2024, compared to the prior year. The sales growth primarily reflects increased unit sales, including sales by third-party sellers, advertising sales, and subscription services. Increased unit sales were driven largely by our continued focus on price, selection, and convenience for our customers, including from our fast shipping offers. Changes in foreign exchange rates reduced North America net sales by $\\$ 462$ million in 2024.\n\nInternational sales increased 9\\% in 2024, compared to the prior year. The sales growth primarily reflects increased unit sales, including sales by third-party sellers, advertising sales, and subscription services. Increased unit sales were driven largely by our continued focus on price, selection, and convenience for our customers, including from our fast shipping offers. Changes in foreign exchange rates reduced International net sales by $\\$ 1.8$ billion in 2024.\n\nAWS sales increased 19\\% in 2024, compared to the prior year. The sales growth primarily reflects increased customer usage, partially offset by pricing changes primarily driven by long-term customer contracts.\n\n# Operating Expenses \n\nInformation about operating expenses is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2023 | 2024 |\n| Operating Expenses: |  |  |\n| Cost of sales | \\$ 304,739 | \\$ 326,288 |\n| Fulfillment | 90,619 | 98,505 |\n| Technology and infrastructure | 85,622 | 88,544 |\n| Sales and marketing | 44,370 | 43,907 |\n| General and administrative | 11,816 | 11,359 |\n| Other operating expense (income), net | 767 | 763 |\n| Total operating expenses | \\$ 537,933 | \\$ 569,366 |\n| Year-over-year Percentage Growth (Decline): |  |  |\n| Cost of sales | $6 \\%$ | $7 \\%$ |\n| Fulfillment | 7 | 9 |\n| Technology and infrastructure | 17 | 3 |\n| Sales and marketing | 5 | (1) |\n| General and administrative | (1) | (4) |\n| Other operating expense (income), net | (39) | (1) |\n| Percent of Net Sales: |  |  |\n| Cost of sales | $53.0 \\%$ | $51.1 \\%$ |\n| Fulfillment | 15.8 | 15.4 |\n| Technology and infrastructure | 14.9 | 13.9 |\n| Sales and marketing | 7.7 | 6.9 |\n| General and administrative | 2.1 | 1.8 |\n| Other operating expense (income), net | 0.1 | 0.1 |\n\n## Cost of Sales\n\nCost of sales primarily consists of the purchase price of consumer products, inbound and outbound shipping costs, including costs related to sortation and delivery centers and where we are the transportation service provider, and digital media content costs where we record revenue gross, including video and music.\n\nThe increase in cost of sales in 2024, compared to the prior year, is primarily due to increased product and shipping costs resulting from increased sales, partially offset by fulfillment network efficiencies, including lower transportation costs. Changes in foreign exchange rates reduced cost of sales by $\\$ 1.7$ billion in 2024.\n\nShipping costs were $\\$ 89.5$ billion and $\\$ 95.8$ billion in 2023 and 2024. Shipping costs to receive products from our suppliers are included in our inventory and recognized as cost of sales upon sale of products to our customers. We expect our cost of shipping to continue to increase to the extent our customers accept and use our shipping offers at an increasing rate, we use more expensive shipping methods, and we offer additional services. We seek to mitigate costs of shipping over time in part through achieving higher sales volumes, optimizing our fulfillment network, negotiating better terms with our suppliers, and achieving better operating efficiencies. We believe that offering low prices to our customers is fundamental to our future success, and one way we offer lower prices is through shipping offers.\n\nCosts to operate our AWS segment are primarily classified as \"Technology and infrastructure\" as we leverage a shared infrastructure that supports both our internal technology requirements and external sales to AWS customers.\n\n## Fulfillment\n\nFulfillment costs primarily consist of those costs incurred in operating and staffing our North America and International fulfillment centers, physical stores, and customer service centers and payment processing costs. While AWS payment\n\nprocessing and related transaction costs are included in \"Fulfillment,\" AWS costs are primarily classified as \"Technology and infrastructure.\" Fulfillment costs as a percentage of net sales may vary due to several factors, such as payment processing and related transaction costs, our level of productivity and accuracy, changes in volume, size, and weight of units received and fulfilled, the extent to which third-party sellers utilize Fulfillment by Amazon services, timing of fulfillment network and physical store expansion, the extent we utilize fulfillment services provided by third parties, mix of products and services sold, and our ability to affect customer service contacts per unit by implementing improvements in our operations and enhancements to our customer self-service features. Additionally, sales by our sellers have higher payment processing and related transaction costs as a percentage of net sales compared to our retail sales because payment processing costs are based on the gross purchase price of underlying transactions.\n\nThe increase in fulfillment costs in 2024, compared to the prior year, is primarily due to increased sales and investments in our fulfillment network, partially offset by fulfillment network efficiencies. Changes in foreign exchange rates reduced fulfillment costs by $\\$ 223$ million in 2024.\n\nWe seek to expand our fulfillment network to accommodate a greater selection and in-stock inventory levels and to meet anticipated shipment volumes from sales of our own products as well as sales by third parties for which we provide the fulfillment services. We regularly evaluate our facility requirements.\n\n# Technology and Infrastructure \n\nTechnology and infrastructure costs include payroll and related expenses for employees involved in the research and development of new and existing products and services, development, design, and maintenance of our stores, curation and display of products and services made available in our online stores, and infrastructure costs. Infrastructure costs include servers, networking equipment, and data center related depreciation and amortization, rent, utilities, and other expenses necessary to support AWS and other Amazon businesses. Collectively, these costs reflect the investments we make in order to offer a wide variety of products and services to our customers, including expenditures related to initiatives to build and deploy innovative and efficient software and electronic devices and the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services.\n\nWe seek to invest efficiently in numerous areas of technology and infrastructure so we may continue to enhance the customer experience and improve our process efficiency through rapid technology developments, while operating at an ever increasing scale. Our technology and infrastructure investment and capital spending projects often support a variety of product and service offerings due to geographic expansion and the cross-functionality of our systems and operations. We expect spending in technology and infrastructure to increase over time as we continue to add employees and infrastructure. These costs are allocated to segments based on usage. The increase in technology and infrastructure costs in 2024, compared to the prior year, is primarily due to an increase in spending on infrastructure, partially offset by decreased payroll and related costs associated with technical teams responsible for expanding our existing products and services and initiatives to introduce new products and service offerings and a reduction in depreciation and amortization expense from our change in the estimated useful life of our servers. Changes in foreign exchange rates reduced technology and infrastructure costs by $\\$ 244$ million in 2024. We currently expense the majority of the costs associated with the development of our satellite network for global broadband service (including production, launch, and payroll costs, and launch services deposits upon launch). We will capitalize certain of these costs once the service achieves commercial viability, including sales to customers.\n\n## Sales and Marketing\n\nSales and marketing costs include advertising and payroll and related expenses for personnel engaged in marketing and selling activities, including sales commissions related to AWS. We direct customers to our stores primarily through a number of marketing channels, such as our sponsored search, third-party customer referrals, social and online advertising, television advertising, and other initiatives. Our marketing costs are largely variable, based on growth in sales and changes in rates. To the extent there is increased or decreased competition for these traffic sources, or to the extent our mix of these channels shifts, we would expect to see a corresponding change in our marketing costs.\n\nThe decrease in sales and marketing costs in 2024, compared to the prior year, is primarily due to decreased payroll and related expenses for personnel engaged in marketing and selling activities, partially offset by increased advertising expenses. Changes in foreign exchange rates reduced sales and marketing costs by $\\$ 263$ million in 2024.\n\nWhile costs associated with Amazon Prime membership benefits and other shipping offers are not included in sales and marketing expense, we view these offers as effective worldwide marketing tools, and intend to continue offering them indefinitely.\n\n# General and Administrative \n\nThe decrease in general and administrative costs in 2024, compared to the prior year, is primarily due to a decrease in payroll and related expenses.\n\n## Other Operating Expense (Income), Net\n\nOther operating expense (income), net was $\\$ 767$ million and $\\$ 763$ million during 2023 and 2024, and was primarily related to asset impairments and the amortization of intangible assets.\n\n## Operating Income (Loss)\n\nOperating income (loss) by segment is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2023 | 2024 |\n| Operating Income (Loss) |  |  |\n| North America | \\$ 14,877 | \\$ 24,967 |\n| International | $(2,656)$ | 3,792 |\n| AWS | 24,631 | 39,834 |\n| Consolidated | \\$ 36,852 | \\$ 68,593 |\n\nOperating income was $\\$ 36.9$ billion and $\\$ 68.6$ billion for 2023 and 2024. We believe that operating income is a more meaningful measure than gross profit and gross margin due to the diversity of our product categories and services. For more information on the operating expenses that impact segment operating income, see \"Operating Expenses\" and the descriptions of operating expense line item changes on pages 25 to 27, and \"Note 10 - Segment Information\" on page 65.\n\nThe increase in North America operating income in 2024, compared to the prior year, is primarily due to increased unit sales and increased advertising sales, partially offset by increased fulfillment and shipping costs.\n\nThe International operating income in 2024, as compared to the operating loss in the prior year, is primarily due to increased unit sales and increased advertising sales, partially offset by increased shipping and fulfillment costs. Changes in foreign exchange rates did not significantly impact operating income in 2024.\n\nThe increase in AWS operating income in 2024, compared to the prior year, is primarily due to increased sales, decreased payroll and related expenses, and a reduction in depreciation and amortization expense from our change in the estimated useful lives of our servers, partially offset by spending on technology infrastructure that was primarily driven by additional investments to support AWS business growth. Changes in foreign exchange rates positively impacted operating income by $\\$ 240$ million in 2024.\n\n## Interest Income and Expense\n\nOur interest income was $\\$ 2.9$ billion and $\\$ 4.7$ billion during 2023 and 2024, primarily due to a higher average balance of invested funds at prevailing rates. We generally invest our excess cash in investment grade short- to intermediate-term marketable debt securities and AAA-rated money market funds. Our interest income corresponds with the average balance of invested funds based on the prevailing rates, which vary depending on the geographies and currencies in which they are invested.\n\nInterest expense was $\\$ 3.2$ billion and $\\$ 2.4$ billion in 2023 and 2024 and was primarily related to debt and finance leases. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 4 — Leases and Note 6 - Debt\" for additional information.\n\nOur long-term lease liabilities were $\\$ 77.3$ billion and $\\$ 78.3$ billion as of December 31, 2023 and 2024. Our long-term debt was $\\$ 58.3$ billion and $\\$ 52.6$ billion as of December 31, 2023 and 2024. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 4 — Leases and Note 6 - Debt\" for additional information.\n\n## Other Income (Expense), Net\n\nOther income (expense), net was $\\$ 938$ million and $\\$(2.3)$ billion during 2023 and 2024. The primary components of other income (expense), net are related to equity securities valuations and adjustments, equity warrant valuations, and foreign currency. Included in other income (expense), net in 2023 and 2024 is a marketable equity securities valuation gain (loss) of $\\$ 797$ million and $\\$(1.6)$ billion from our equity investment in Rivian.\n\n# Income Taxes \n\nOur effective tax rate is subject to significant variation due to several factors, including variability in our pre-tax and taxable income and loss and the mix of jurisdictions to which they relate, intercompany transactions, the applicability of special tax regimes, changes in how we do business, acquisitions, investments, developments in tax controversies, changes in our stock price, changes in our deferred tax assets and liabilities and their valuation, foreign currency gains (losses), changes in statutes, regulations, case law, and administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions, and relative changes of expenses or losses for which tax benefits are not recognized. Our effective tax rate can be more or less volatile based on the amount of pretax income or loss. For example, the impact of discrete items and non-deductible expenses on our effective tax rate is greater when our pre-tax income is lower. In addition, we record valuation allowances against deferred tax assets when there is uncertainty about our ability to generate future income in relevant jurisdictions.\n\nWe recorded a provision (benefit) for income taxes of $\\$ 7.1$ billion and $\\$ 9.3$ billion in 2023 and 2024. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 9 - Income Taxes\" for additional information.\n\n## Non-GAAP Financial Measures\n\nRegulation G, Conditions for Use of Non-GAAP Financial Measures, and other SEC regulations define and prescribe the conditions for use of certain non-GAAP financial information. Our measures of free cash flows and the effect of foreign exchange rates on our consolidated statements of operations meet the definition of non-GAAP financial measures.\n\nWe provide multiple measures of free cash flows because we believe these measures provide additional perspective on the impact of acquiring property and equipment with cash and through finance leases and financing obligations.\n\n## Free Cash Flow\n\nFree cash flow is cash flow from operations reduced by \"Purchases of property and equipment, net of proceeds from sales and incentives.\" The following is a reconciliation of free cash flow to the most comparable GAAP cash flow measure, \"Net cash provided by (used in) operating activities,\" for 2023 and 2024 (in millions):\n\n| Year Ended December 31, |  |\n| :--: | :--: |\n| 2023 | 2024 |\n| \\$ 84,946 | \\$ 115,877 |\n| $(48,133)$ | $(77,658)$ |\n| \\$ 36,813 | \\$ 38,219 |\n| \\$ $(49,833)$ | \\$ $(94,342)$ |\n| \\$ $(15,879)$ | \\$ $(11,812)$ |\n\n## Free Cash Flow Less Principal Repayments of Finance Leases and Financing Obligations\n\nFree cash flow less principal repayments of finance leases and financing obligations is free cash flow reduced by \"Principal repayments of finance leases\" and \"Principal repayments of financing obligations.\" Principal repayments of finance leases and financing obligations approximates the actual payments of cash for our finance leases and financing obligations. The following is a reconciliation of free cash flow less principal repayments of finance leases and financing obligations to the most comparable GAAP cash flow measure, \"Net cash provided by (used in) operating activities,\" for 2023 and 2024 (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2023 | 2024 |\n| Net cash provided by (used in) operating activities | \\$ 84,946 | \\$ 115,877 |\n| Purchases of property and equipment, net of proceeds from sales and incentives | $(48,133)$ | $(77,658)$ |\n| Free cash flow | 36,813 | 38,219 |\n| Principal repayments of finance leases | $(4,384)$ | $(2,043)$ |\n| Principal repayments of financing obligations | (271) | (669) |\n| Free cash flow less principal repayments of finance leases and financing obligations | \\$ 32,158 | \\$ 35,507 |\n| Net cash provided by (used in) investing activities | \\$ $(49,833)$ | \\$ $(94,342)$ |\n| Net cash provided by (used in) financing activities | \\$ $(15,879)$ | \\$ $(11,812)$ |\n\n|  Free Cash Flow Less Equipment Finance Leases and Principal Repayments of All Other Finance Leases and FinancingObligations |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- |\n|  Free cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations is free cash flow reduced by equipment acquired under finance leases, which is included in “Property and equipment acquired under finance leases, net ofremeasurements and modifications,” principal repayments of all other finance lease liabilities, which is included in “Principal repayments of finance leases,” and “Principal repayments of financing obligations.” All other finance lease liabilities and financing obligationsconsists of property. In this measure, equipment acquired under finance leases is reflected as if these assets had been purchased with cash, which is not the case as these assets have been leased. The following is a reconciliation of free cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations to themost comparable GAAP cash flow measure, “Net cash provided by (used in) operating activities,” for 2023 and 2024 (in millions): |  |  | Year Ended December 31, |  |   |\n|   |  | 2023 |  | 2024 |   |\n|  Net cash provided by (used in) operating activities |  | $84,946 |  | $115,877 |   |\n|  Purchases of property and equipment, net of proceeds from sales and incentives |  | (48,133) |  | (77,658) |   |\n|  Free cash flow |  | 36,813 |  | 38,219 |   |\n|  Equipment acquired under finance leases (1) |  | (310) |  | (572) |   |\n|  Principal repayments of all other finance leases (2) |  | (683) |  | (767) |   |\n|  Principal repayments of financing obligations |  | (271) |  | (669) |   |\n|  Free cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations |  | $35,549 |  | $36,211 |   |\n|  Net cash provided by (used in) investing activities |  | $(49,833) |  | $(94,342) |   |\n|  Net cash provided by (used in) financing activities |  | $(15,879) |  | $(11,812) |   |\n|  (1) | For the year ended December 31, 2023 and 2024, this amount relates to equipment included in “Property and equipment acquired under finance leases, net ofremeasurements and modifications” of $642 million and $854million. |  |  |  |   |\n|  (2) | For the year ended December 31, 2023 and 2024, this amount relates to property included in “Principal repayments of finance leases” of $4,384 million and $2,043million. |  |  |  |   |\n|   | All of these free cash flows measures have limitations as they omit certain components of the overall cash flow statement and do not represent the residual cash flow available fordiscretionary expenditures. For example, these measures of free cash flows do not incorporate the portion of payments representing principal reductions of debt or cash payments for business acquisitions. Additionally, our mix of property and equipment acquisitions with cash or other financing options may change over time. Therefore, we believe it isimportant to view free cash flows measures only as a complement to our entire consolidated statements of cash flows. |  |  |  |   |\n|  *Effect of Foreign Exchange Rates* |   |  |  |  |   |\n|   | Information regarding the effect of foreign exchange rates, versus the U.S. Dollar, on our net sales, operating expenses, and operating income is provided to showreported period operating results had the foreign exchange rates remained the same as those in effect in the comparable prior year period. The effect on our net sales, operating expenses, and operating income from changes in our foreign exchange ratesversus the U.S. Dollar is as follows (in millions): |  |  |  |   |\n|   | Year Ended December 31, 2023 |  |  | Year Ended December 31, 2024 |  |   |\n|   | As Reported | Exchange Rate Effect (1) | At Prior Year Rates (2) | As Reported | Exchange Rate Effect (1) | At Prior Year Rates (2)  |\n|  Net sales | $574,785 | $71 | $574,856 | $637,959 | $2,335 | $640,294  |\n|  Operating expenses | 537,933 | 531 | 538,464 | 569,366 | 2,466 | 571,832  |\n|  Operating income | 36,852 | (460) | 36,392 | 68,593 | (131) | 68,462  |\n|  (1) | Represents the change in reported amounts resulting from changes in foreign exchange rates from those in effect in the comparable prior year period foroperating results. |  |  |  |  |   |\n|  (2) | Represents the outcome that would have resulted had foreign exchange rates in the reported period been the same as those in effect in the comparable prior year period foroperating results. |  |  |  |  |   |\n\n# Guidance \n\nWe provided guidance on February 6, 2025, in our earnings release furnished on Form 8-K as set forth below. These forward-looking statements reflect Amazon.com's expectations as of February 6, 2025, and are subject to substantial uncertainty. Our results are inherently unpredictable and may be materially affected by many factors, such as fluctuations in foreign exchange rates, changes in global economic and geopolitical conditions and customer demand and spending (including the impact of recessionary fears), inflation, interest rates, regional labor market constraints, world events, the rate of growth of the internet, online commerce, cloud services, and new and emerging technologies, as well as those outlined in Item 1A of Part I, \"Risk Factors.\"\n\nFirst Quarter 2025 Guidance\n\n- Net sales are expected to be between $\\$ 151.0$ billion and $\\$ 155.5$ billion, or to grow between $5 \\%$ and $9 \\%$ compared with first quarter 2024. This guidance anticipates an unusually large, unfavorable impact of approximately $\\$ 2.1$ billion, or 150 basis points, from foreign exchange rates. Also, as a reminder, in first quarter 2024 the impact from Leap Year added approximately $\\$ 1.5$ billion in net sales.\n- Operating income is expected to be between $\\$ 14.0$ billion and $\\$ 18.0$ billion, compared with $\\$ 15.3$ billion in first quarter 2024.\n- This guidance assumes, among other things, that no additional business acquisitions, restructurings, or legal settlements are concluded.\n\n# Item 7A. Quantitative and Qualitative Disclosures About Market Risk \n\nWe are exposed to market risk for the effect of interest rate changes, foreign currency fluctuations, and changes in the market values of our investments. Information relating to quantitative and qualitative disclosures about market risk is set forth below and in Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations Liquidity and Capital Resources.\"\n\n## Interest Rate Risk\n\nOur exposure to market risk for changes in interest rates relates primarily to our investment portfolio and our debt. Our long-term debt is carried at amortized cost and fluctuations in interest rates do not impact our consolidated financial statements. However, the fair value of our long-term debt, which pays interest at a fixed rate, will generally fluctuate with movements of interest rates, increasing in periods of declining rates of interest and declining in periods of increasing rates of interest.\n\nWe generally invest our excess cash in investment grade short- to intermediate-term marketable debt securities and AAArated money market funds. Marketable debt securities with fixed interest rates may have their fair market value adversely affected due to a rise in interest rates, and we may suffer losses in principal if forced to sell securities that have declined in market value due to changes in interest rates. The following table provides information about our cash equivalents and marketable debt securities, including principal cash flows by expected maturity and the related weighted-average interest rates as of December 31, 2024 (in millions, except percentages):\n\n|  |  |  |  |  |  |  |  | Estimated Fair Value as of December 31, 2024 |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|  | 2025 | 2026 | 2027 | 2028 | 2029 | Thereafter | Total |  |\n| Money market funds | \\$ 28,282 | \\$ — | \\$ — | \\$ — | \\$ — | \\$ — | \\$28,282 | \\$ 28,282 |\n| Weighted average interest rate | $4.42 \\%$ | — \\% | — \\% | — \\% | — \\% | — \\% | $4.42 \\%$ |  |\n| Corporate debt securities | 47,908 | 1,779 | 1,086 | 311 | 55 | — | 51,139 | 50,912 |\n| Weighted average interest rate | $4.65 \\%$ | $3.48 \\%$ | $4.49 \\%$ | $4.65 \\%$ | $4.83 \\%$ | — \\% | $4.60 \\%$ |  |\n| U.S. government and agency securities | 1,986 | 928 | 215 | 65 | 50 | 213 | 3,457 | 3,401 |\n| Weighted average interest rate | $3.95 \\%$ | $2.92 \\%$ | $3.83 \\%$ | $2.72 \\%$ | $2.57 \\%$ | $2.04 \\%$ | $3.51 \\%$ |  |\n| Asset-backed securities | 450 | 262 | 195 | 226 | 188 | 220 | 1,541 | 1,523 |\n| Weighted average interest rate | $3.19 \\%$ | $4.74 \\%$ | $4.59 \\%$ | $4.84 \\%$ | $3.29 \\%$ | $3.40 \\%$ | $3.92 \\%$ |  |\n| Foreign government and agency securities | 151 | 2 | 27 | — | — | — | 180 | 177 |\n| Weighted average interest rate | $4.50 \\%$ | $4.60 \\%$ | $4.31 \\%$ | — \\% | — \\% | — \\% | $4.48 \\%$ |  |\n| Other debt securities | 44 | 8 | 8 | 8 | — | — | 68 | 67 |\n| Weighted average interest rate | $0.99 \\%$ | $4.49 \\%$ | $4.11 \\%$ | $4.29 \\%$ | — \\% | — \\% | $2.13 \\%$ |  |\n|  | \\$ 78,821 | \\$ 2,979 | \\$ 1,531 | \\$ 610 | \\$ 293 | \\$ 433 | \\$84,667 |  |\n| Cash equivalents and marketable debt securities |  |  |  |  |  |  |  | \\$ 84,362 |\n\nAs of December 31, 2024, we had long-term debt with a face value of $\\$ 58.0$ billion, including the current portion, primarily consisting of fixed rate unsecured senior notes. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 - Debt\" for additional information.\n\n# Foreign Exchange Risk \n\nDuring 2024, net sales from our International segment accounted for $22 \\%$ of our consolidated revenues. Net sales and related expenses generated from our internationally-focused stores, including within Canada and Mexico (which are included in our North America segment), are primarily denominated in the functional currencies of the corresponding stores and primarily include Euros, British Pounds, and Japanese Yen. The results of operations of, and certain of our intercompany balances associated with, our internationally-focused stores and AWS are exposed to foreign exchange rate fluctuations. Upon consolidation, as foreign exchange rates vary, net sales and other operating results may differ materially from expectations, and we may record significant gains or losses on the remeasurement of intercompany balances. For example, as a result of fluctuations in foreign exchange rates throughout the year compared to rates in effect the prior year, International segment net sales decreased by $\\$ 1.8$ billion in comparison with the prior year.\n\nWe have foreign exchange risk related to foreign-denominated cash, cash equivalents, and marketable securities (\"foreign funds\"). Based on the balance of foreign funds as of December 31, 2024, of $\\$ 25.5$ billion, an assumed $5 \\%, 10 \\%$, and $20 \\%$ adverse change to foreign exchange would result in declines of $\\$ 1.3$ billion, $\\$ 2.6$ billion, and $\\$ 5.1$ billion.\n\nWe also have foreign exchange risk related to our intercompany balances denominated in various currencies. Based on the intercompany balances as of December 31, 2024, an assumed $5 \\%, 10 \\%$, and $20 \\%$ adverse change to foreign exchange rates would result in losses of $\\$ 305$ million, $\\$ 605$ million, and $\\$ 1.2$ billion, recorded to \"Other income (expense), net.\"\n\nSee Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations Results of Operations - Effect of Foreign Exchange Rates\" for additional information on the effect on reported results of changes in foreign exchange rates.\n\n## Equity Investment Risk\n\nAs of December 31, 2024, our recorded value in equity, equity warrant, and convertible debt investments in public and private companies was $\\$ 22.1$ billion. Our equity and equity warrant investments in publicly traded companies, which include our equity investment in Rivian, represent $\\$ 4.6$ billion of our investments as of December 31, 2024, and are recorded at fair value, which is subject to market price volatility. We record our equity warrant investments in private companies at fair value and adjust our equity investments in private companies for observable price changes or impairments. We record our available-for-sale convertible debt investments in private companies at fair value, which primarily relate to Anthropic, PBC. Valuations of private companies are inherently more complex due to the lack of readily available market data. The current global economic conditions provide additional uncertainty. As such, we believe that market sensitivities are not practicable. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures\" for additional information.\n\n|   | Page  |\n| --- | --- |\n|  Report of Ernst & Young LLP, Independent Registered Public Accounting Firm (PCAOB ID: 42) | 34  |\n|  Consolidated Statements of Cash Flows | 36  |\n|  Consolidated Statements of Operations | 37  |\n|  Consolidated Statements of Comprehensive Income (Loss) | 38  |\n|  Consolidated Balance Sheets | 39  |\n|  Consolidated Statements of Stockholders’ Equity | 40  |\n|  Notes to Consolidated Financial Statements | 41  |\n\n# Report of Independent Registered Public Accounting Firm \n\nThe Board of Directors and Shareholders\nAmazon.com, Inc.\n\n## Opinion on the Financial Statements\n\nWe have audited the accompanying consolidated balance sheets of Amazon.com, Inc. (the Company) as of December 31, 2024 and 2023, the related consolidated statements of operations, comprehensive income (loss), stockholders' equity, and cash flows for each of the three years in the period ended December 31, 2024, and the related notes (collectively referred to as the \"consolidated financial statements\"). In our opinion, the consolidated financial statements present fairly, in all material respects, the financial position of the Company at December 31, 2024 and 2023, and the results of its operations and its cash flows for each of the three years in the period ended December 31, 2024, in conformity with U.S. generally accepted accounting principles.\n\nWe also have audited, in accordance with the standards of the Public Company Accounting Oversight Board (United States) (PCAOB), the Company's internal control over financial reporting as of December 31, 2024, based on criteria established in Internal Control-Integrated Framework issued by the Committee of Sponsoring Organizations of the Treadway Commission (2013 framework) and our report dated February 6, 2025 expressed an unqualified opinion thereon.\n\n## Basis for Opinion\n\nThese consolidated financial statements are the responsibility of the Company's management. Our responsibility is to express an opinion on the Company's consolidated financial statements based on our audits. We are a public accounting firm registered with the PCAOB and are required to be independent with respect to the Company in accordance with the U.S. federal securities laws and the applicable rules and regulations of the Securities and Exchange Commission and the PCAOB.\n\nWe conducted our audits in accordance with the standards of the PCAOB. Those standards require that we plan and perform the audit to obtain reasonable assurance about whether the consolidated financial statements are free of material misstatement, whether due to error or fraud. Our audits included performing procedures to assess the risks of material misstatement of the consolidated financial statements, whether due to error or fraud, and performing procedures that respond to those risks. Such procedures included examining, on a test basis, evidence regarding the amounts and disclosures in the consolidated financial statements. Our audits also included evaluating the accounting principles used and significant estimates made by management, as well as evaluating the overall presentation of the consolidated financial statements. We believe that our audits provide a reasonable basis for our opinion.\n\n## Critical Audit Matter\n\nThe critical audit matter communicated below is a matter arising from the current period audit of the consolidated financial statements that was communicated or required to be communicated to the audit committee and that: (1) relates to accounts or disclosures that are material to the consolidated financial statements and (2) involved our especially challenging, subjective or complex judgments. The communication of the critical audit matter does not alter in any way our opinion on the consolidated financial statements, taken as a whole, and we are not, by communicating the critical audit matter below, providing a separate opinion on the critical audit matter or on the accounts or disclosures to which it relates.\n\n|   | *Uncertain Tax Positions*  |\n| --- | --- |\n|  *Description of the Matter* | As discussed in Notes 1 and 9 of the consolidated financial statements, the Company is subject to income taxes in the U.S. and numerous foreign jurisdictions and during the ordinary course of business, there are many tax positions for which the ultimate tax determination is uncertain. As a result, significant judgment is required in evaluating the Company’s tax positions and determining its provision for income taxes. The Company uses significant judgment in (1) determining whether a tax position’s technical merits are more likely than not to be sustained and (2) measuring the amount of tax benefit that qualifies for recognition. As of December 31, 2024, the Company reported accrued liabilities of $6.5 billion for various tax contingencies.Auditing the recognition and measurement of the Company’s tax contingencies was challenging because the evaluation of whether a tax position is more likely than not to be sustained and the measurement of the benefit of various tax positions can be complex and involves significant auditor judgment. Management’s evaluation of tax positions is based on interpretations of tax laws and legal rulings, and may be impacted by regulatory changes and judicial and examination activity.  |\n|  *How We Addressed the Matter in Our Audit* | We tested controls over the Company’s process to assess the technical merits of its tax contingencies, including controls over: the assessment as to whether a tax position is more likely than not to be sustained; the measurement of the benefit of its tax positions, both initially and on an ongoing basis; and the development of the related disclosures.We involved our international tax, transfer pricing, and research and development tax professionals in assessing the technical merits of certain of the Company’s tax positions. Depending on the nature of the specific tax position and, as applicable, developments with the relevant tax authorities relating thereto, our procedures included obtaining and examining the Company’s analysis including the Company’s correspondence with such tax authorities and evaluating the underlying facts upon which the tax positions are based. We used our knowledge of and experience with international, transfer pricing, and other income tax laws of the relevant taxing jurisdictions to evaluate the Company’s accounting for its tax contingencies. We evaluated developments in the applicable regulatory environments to assess potential effects on the Company’s positions, including recent decisions in relevant court cases. We analyzed the appropriateness of the Company’s assumptions and the accuracy of the Company’s calculations and data used to determine the amount of tax benefits to recognize. We evaluated the Company’s income tax disclosures in relation to these matters.  |\n\n|  AMAZON.COM, INC. | |   |   |   |\n| --- | --- | --- | --- | --- |\n|  CONSOLIDATED STATEMENTS OF CASH FLOWS | |   |   |   |\n|  (in millions) | |   |   |   |\n|   | Year Ended December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  CASH, CASH EQUIVALENTS, AND RESTRICTED CASH, BEGINNING OF PERIOD | $36,477 | $54,253 | $73,890  |\n|  OPERATING ACTIVITIES: |  |  |   |\n|  Net income (loss) | (2,722) | 30,425 | 59,248  |\n|  Adjustments to reconcile net income (loss) to net cash from operating activities: |  |  |   |\n|  Depreciation and amortization of property and equipment and capitalized content costs, operating lease assets, and other | 41,921 | 48,663 | 52,795  |\n|  Stock-based compensation | 19,621 | 24,023 | 22,011  |\n|  Non-operating expense (income), net | 16,966 | (748) | 2,012  |\n|  Deferred income taxes | (8,148) | (5,876) | (4,648)  |\n|  Changes in operating assets and liabilities: |  |  |   |\n|  Inventories | (2,592) | 1,449 | (1,884)  |\n|  Accounts receivable, net and other | (8,622) | (8,348) | (3,249)  |\n|  Other assets | (13,275) | (12,265) | (14,483)  |\n|  Accounts payable | 2,945 | 5,473 | 2,972  |\n|  Accrued expenses and other | (1,558) | (2,428) | (2,904)  |\n|  Unearned revenue | 2,216 | 4,578 | 4,007  |\n|  Net cash provided by (used in) operating activities | 46,752 | 84,946 | 115,877  |\n|  INVESTING ACTIVITIES: |  |  |   |\n|  Purchases of property and equipment | (63,645) | (52,729) | (82,999)  |\n|  Proceeds from property and equipment sales and incentives | 5,324 | 4,596 | 5,341  |\n|  Acquisitions, net of cash acquired, non-marketable investments, and other | (8,316) | (5,839) | (7,082)  |\n|  Sales and maturities of marketable securities | 31,601 | 5,627 | 16,403  |\n|  Purchases of marketable securities | (2,565) | (1,488) | (26,005)  |\n|  Net cash provided by (used in) investing activities | (37,601) | (49,833) | (94,342)  |\n|  FINANCING ACTIVITIES: |  |  |   |\n|  Common stock repurchased | (6,000) | — | —  |\n|  Proceeds from short-term debt, and other | 41,553 | 18,129 | 5,142  |\n|  Repayments of short-term debt, and other | (37,554) | (25,677) | (5,060)  |\n|  Proceeds from long-term debt | 21,166 | — | —  |\n|  Repayments of long-term debt | (1,258) | (3,676) | (9,182)  |\n|  Principal repayments of finance leases | (7,941) | (4,384) | (2,043)  |\n|  Principal repayments of financing obligations | (248) | (271) | (669)  |\n|  Net cash provided by (used in) financing activities | 9,718 | (15,879) | (11,812)  |\n|  Foreign currency effect on cash, cash equivalents, and restricted cash | (1,093) | 403 | (1,301)  |\n|  Net increase (decrease) in cash, cash equivalents, and restricted cash | 17,776 | 19,637 | 8,422  |\n|  CASH, CASH EQUIVALENTS, AND RESTRICTED CASH, END OF PERIOD | $54,253 | $73,890 | $82,312  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |\n\n|   | Year Ended December 31,  |   |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  Net product sales | $242,901 | $255,887 | $272,311  |\n|  Net service sales | 271,082 | 318,898 | 365,648  |\n|  Total net sales | 513,983 | 574,785 | 637,959  |\n|  Operating expenses: |  |  |   |\n|  Cost of sales | 288,831 | 304,739 | 326,288  |\n|  Fulfillment | 84,299 | 90,619 | 98,505  |\n|  Technology and infrastructure | 73,213 | 85,622 | 88,544  |\n|  Sales and marketing | 42,238 | 44,370 | 43,907  |\n|  General and administrative | 11,891 | 11,816 | 11,359  |\n|  Other operating expense (income), net | 1,263 | 767 | 763  |\n|  Total operating expenses | 501,735 | 537,933 | 569,366  |\n|  Operating income | 12,248 | 36,852 | 68,593  |\n|  Interest income | 989 | 2,949 | 4,677  |\n|  Interest expense | (2,367) | (3,182) | (2,406)  |\n|  Other income (expense), net | (16,806) | 938 | (2,250)  |\n|  Total non-operating income (expense) | (18,184) | 705 | 21  |\n|  Income (loss) before income taxes | (5,936) | 37,557 | 68,614  |\n|  Benefit (provision) for income taxes | 3,217 | (7,120) | (9,265)  |\n|  Equity-method investment activity, net of tax | (3) | (12) | (101)  |\n|  Net income (loss) | $(2,722) | $30,425 | $59,248  |\n|  Basic earnings per share | $(0.27) | $2.95 | $5.66  |\n|  Diluted earnings per share | $(0.27) | $2.90 | $5.53  |\n|  Weighted-average shares used in computation of earnings per share: |  |  |   |\n|  Basic | 10,189 | 10,304 | 10,473  |\n|  Diluted | 10,189 | 10,492 | 10,721  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |\n\n|   | Year Ended December 31, |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024 |   |\n|  Net income (loss) | $(2,722) | $30,425 | $59,248 |   |\n|  Other comprehensive income (loss): |  |  |  |   |\n|  Foreign currency translation adjustments, net of tax of $100, $(55), and $226 | (2,586) | 1,027 | (3,333) |   |\n|  Available-for-sale debt securities: |  |  |  |   |\n|  Change in net unrealized gains (losses), net of tax of $159, $(110), and $(2,086) | (823) | 366 | 6,339 |   |\n|  Less: reclassification adjustment for losses (gains) included in “Other income (expense), net,” net of tax of $0, $(15), and $(2) | 298 | 50 | 5 |   |\n|  Net change | (525) | 416 | 6,344 |   |\n|  Other, net of tax of $0, $(1), and $1 | — | 4 | (5) |   |\n|  Total other comprehensive income (loss) | (3,111) | 1,447 | 3,006 |   |\n|  Comprehensive income (loss) | $(5,833) | $31,872 | $62,254 |   |\n|  See accompanying notes to consolidated financial statements. |  |  |  |   |\n\n|   | December 31,  |   |\n| --- | --- | --- |\n|   | 2023 | 2024  |\n|  ASSETS |  |   |\n|  Current assets: |  |   |\n|  Cash and cash equivalents | $73,387 | $78,779  |\n|  Marketable securities | 13,393 | 22,423  |\n|  Inventories | 33,318 | 34,214  |\n|  Accounts receivable, net and other | 52,253 | 55,451  |\n|  Total current assets | 172,351 | 190,867  |\n|  Property and equipment, net | 204,177 | 252,665  |\n|  Operating leases | 72,513 | 76,141  |\n|  Goodwill | 22,789 | 23,074  |\n|  Other assets | 56,024 | 82,147  |\n|  Total assets | $527,854 | $624,894  |\n|  LIABILITIES AND STOCKHOLDERS’ EQUITY |  |   |\n|  Current liabilities: |  |   |\n|  Accounts payable | $84,981 | $94,363  |\n|  Accrued expenses and other | 64,709 | 66,965  |\n|  Unearned revenue | 15,227 | 18,103  |\n|  Total current liabilities | 164,917 | 179,431  |\n|  Long-term lease liabilities | 77,297 | 78,277  |\n|  Long-term debt | 58,314 | 52,623  |\n|  Other long-term liabilities | 25,451 | 28,593  |\n|  Commitments and contingencies (Note 7) |  |   |\n|  Stockholders’ equity: |  |   |\n|  Preferred stock ($0.01 par value; 500 shares authorized; no shares issued or outstanding) | — | —  |\n|  Common stock ($0.01 par value; 100,000 shares authorized; 10,898 and 11,108 shares issued; 10,383 and 10,593 shares outstanding) | 109 | 111  |\n|  Treasury stock, at cost | (7,837) | (7,837)  |\n|  Additional paid-in capital | 99,025 | 120,864  |\n|  Accumulated other comprehensive income (loss) | (3,040) | (34)  |\n|  Retained earnings | 113,618 | 172,866  |\n|  Total stockholders’ equity | 201,875 | 285,970  |\n|  Total liabilities and stockholders’ equity | $527,854 | $624,894  |\n|  See accompanying notes to consolidated financial statements. | |   |   |\n\n|   | AMAZON.COM, INC. CONSOLIDATED STATEMENTS OF STOCKHOLDERS’ EQUITY (in millions) |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n|   | Common Stock |  |  |  |  |  |   |\n|   | Shares | Amount | Treasury Stock | Additional Paid-In Capital | Accumulated Other Comprehensive Income (Loss) | Retained Earnings | Total Stockholders’ Equity  |\n|  Balance as of January 1, 2022 | 10,175 | $106 | $(1,837) | $55,437 | $(1,376) | $85,915 | $138,245  |\n|  Net loss | — | — | — | — | — | (2,722) | (2,722)  |\n|  Other comprehensive income (loss) | — | — | — | — | (3,111) | — | (3,111)  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 113 | 2 | — | 19,629 | — | — | 19,631  |\n|  Common stock repurchased | (46) | — | (6,000) | — | — | — | (6,000)  |\n|  Balance as of December 31, 2022 | 10,242 | 108 | (7,837) | 75,066 | (4,487) | 83,193 | 146,043  |\n|  Net income | — | — | — | — | — | 30,425 | 30,425  |\n|  Other comprehensive income (loss) | — | — | — | — | 1,447 | — | 1,447  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 141 | 1 | — | 23,959 | — | — | 23,960  |\n|  Balance as of December 31, 2023 | 10,383 | 109 | (7,837) | 99,025 | (3,040) | 113,618 | 201,875  |\n|  Net income | — | — | — | — | — | 59,248 | 59,248  |\n|  Other comprehensive income (loss) | — | — | — | — | 3,006 | — | 3,006  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 210 | 2 | — | 21,839 | — | — | 21,841  |\n|  Balance as of December 31, 2024 | 10,593 | $111 | $(7,837) | $120,864 | $(34) | $172,866 | $285,970  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |   |   |   |   |\n\n# AMAZON.COM, INC. <br> NOTES TO CONSOLIDATED FINANCIAL STATEMENTS \n\n## Note 1 - DESCRIPTION OF BUSINESS, ACCOUNTING POLICIES, AND SUPPLEMENTAL DISCLOSURES\n\n## Description of Business\n\nWe seek to be Earth's most customer-centric company. In each of our segments, we serve our primary customer sets, consisting of consumers, sellers, developers, enterprises, content creators, advertisers, and employees. We serve consumers through our online and physical stores and focus on selection, price, and convenience. We offer programs that enable sellers to grow their businesses, sell their products in our stores, and fulfill orders using our services, and programs that allow authors, independent publishers, musicians, filmmakers, Twitch streamers, skill and app developers, and others to publish and sell content. We serve developers and enterprises of all sizes through AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services. We also manufacture and sell electronic devices. In addition, we provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising.\n\nWe have organized our operations into three segments: North America, International, and AWS. See \"Note 10 Segment Information.\"\n\n## Common Stock Split\n\nOn May 27, 2022, we effected a 20 -for- 1 stock split of our common stock and proportionately increased the number of authorized shares of common stock. All share, restricted stock unit (\"RSU\"), and per share or per RSU information throughout this Annual Report on Form 10-K has been retroactively adjusted to reflect the stock split. The shares of common stock retain a par value of $\\$ 0.01$ per share. Accordingly, an amount equal to the par value of the increased shares resulting from the stock split was reclassified from \"Additional paid-in capital\" to \"Common stock.\"\n\n## Principles of Consolidation\n\nThe consolidated financial statements include the accounts of Amazon.com, Inc. and its consolidated entities (collectively, the \"Company\"), consisting of its wholly-owned subsidiaries and those entities in which we have a variable interest and of which we are the primary beneficiary, including certain entities in India and certain entities that support our healthcare services. Intercompany balances and transactions between consolidated entities are eliminated.\n\n## Use of Estimates\n\nThe preparation of financial statements in conformity with GAAP requires estimates and assumptions that affect the reported amounts of assets and liabilities, revenues and expenses, and related disclosures of contingent liabilities in the consolidated financial statements and accompanying notes. Estimates are used for, but not limited to, income taxes, useful lives of equipment, commitments and contingencies, valuation of acquired intangibles and goodwill, stock-based compensation forfeiture rates, vendor funding, inventory valuation, collectability of receivables, impairment of property and equipment and operating leases, valuation and impairment of investments, self-insurance liabilities, and viewing patterns of capitalized video content. Actual results could differ materially from these estimates. We review the useful lives of equipment on an ongoing basis.\n\nIn Q4 2024, we completed a useful life study for certain types of heavy equipment and are increasing the useful life from ten years to thirteen years for such equipment effective January 1, 2025. Based on heavy equipment included in \"Property and equipment, net\" as of December 31, 2024, we estimate an increase in 2025 operating income of approximately $\\$ 0.9$ billion, which will be recorded primarily in \"Fulfillment\" and impact our North America and International segments.\n\nWe completed our most recent servers and networking equipment useful life study in Q4 2024, and are changing the useful lives of a subset of our servers and networking equipment, effective January 1, 2025, from six years to five years. For those assets included in \"Property and equipment, net\" as of December 31, 2024, whose useful life will change from six years to five years, we anticipate a decrease in 2025 operating income of approximately $\\$ 0.7$ billion. We expect to continue to acquire more of these server and networking assets in 2025. In 2024, we also determined, primarily in the fourth quarter, to retire early certain of our servers and networking equipment. We recorded approximately $\\$ 920$ million of accelerated depreciation and related charges for the quarter ended December 31, 2024 related to these decisions. The accelerated depreciation will continue into 2025 and decrease operating income by approximately $\\$ 0.6$ billion in 2025 . These two changes above are due to an increased pace of technology development, particularly in the area of artificial intelligence and machine learning.\n\nWe had previously increased the useful life of our servers from five years to six years effective January 1, 2024. The effect of this change for the year ended December 31, 2024, based on servers that were included in \"Property and equipment,\n\nnet\" as of December 31, 2023 and those acquired during the year ended December 31, 2024, was a reduction in depreciation and amortization expense of $\\$ 3.2$ billion and a benefit to net income of $\\$ 2.5$ billion, or $\\$ 0.23$ per basic share and $\\$ 0.23$ per diluted share.\n\nThese server and networking equipment useful life changes primarily impact our AWS segment.\nFor the year ended December 31, 2022, we recorded approximately $\\$ 1.1$ billion, of which $\\$ 720$ million was recorded in the fourth quarter, of impairments of property and equipment and operating leases primarily related to physical stores. These charges were recorded in \"Other operating expense (income), net\" and primarily impacted our North America segment. For the year ended December 31, 2022, we also recorded expenses of approximately $\\$ 480$ million, primarily in \"Fulfillment,\" primarily relating to terminating contracts for certain leases not yet commenced as well as other purchase commitments, which primarily impacted our North America segment.\n\nFor the year ended December 31, 2022, we recorded approximately $\\$ 720$ million, of which $\\$ 640$ million was recorded in the fourth quarter, of estimated severance costs primarily related to planned role eliminations. These charges were recorded primarily in \"Technology and infrastructure,\" \"Fulfillment,\" and \"General and administrative\" and primarily impacted our North America segment.\n\nCharges for impairment, expenses for terminating contracts and other commitments, and severance costs were not material to our consolidated results of operations for the years ended December 31, 2023 and 2024.\n\n# Supplemental Cash Flow Information \n\nThe following table shows supplemental cash flow information (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2022 | 2023 | 2024 |\n| SUPPLEMENTAL CASH FLOW INFORMATION: |  |  |  |\n| Cash paid for interest on debt, net of capitalized interest | \\$ 1,561 | \\$ 2,608 | \\$ 1,858 |\n| Cash paid for operating leases | \\$ 8,633 | \\$ 10,453 | \\$ 12,341 |\n| Cash paid for interest on finance leases | \\$ 374 | \\$ 308 | \\$ 287 |\n| Cash paid for interest on financing obligations | \\$ 207 | \\$ 196 | \\$ 219 |\n| Cash paid for income taxes, net of refunds | \\$ 6,035 | \\$ 11,179 | \\$ 12,308 |\n| Assets acquired under operating leases | \\$ 18,800 | \\$ 14,052 | \\$ 15,424 |\n| Property and equipment acquired under finance leases, net of remeasurements and modifications | \\$ 675 | \\$ 642 | \\$ 854 |\n| Property and equipment recognized during the construction period of build-to-suit lease arrangements | \\$ 3,187 | \\$ 357 | \\$ 97 |\n| Property and equipment derecognized after the construction period of build-to-suit lease arrangements, with the associated leases recognized as operating | \\$ 5,158 | \\$ 1,374 | \\$ — |\n\n## Earnings Per Share\n\nBasic earnings per share is calculated using our weighted-average outstanding common shares. Diluted earnings per share is calculated using our weighted-average outstanding common shares including the dilutive effect of stock awards as determined under the treasury stock method. In periods when we have a net loss, stock awards are excluded from our calculation of earnings per share as their inclusion would have an antidilutive effect.\n\nThe following table shows the calculation of diluted shares (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2022 | 2023 | 2024 |\n| Shares used in computation of basic earnings per share | 10,189 | 10,304 | 10,473 |\n| Total dilutive effect of outstanding stock awards | — | 188 | 248 |\n| Shares used in computation of diluted earnings per share | 10,189 | 10,492 | 10,721 |\n\n# Revenue \n\nRevenue is measured based on the amount of consideration that we expect to receive, reduced by estimates for return allowances, promotional discounts, and rebates. Revenue also excludes any amounts collected on behalf of third parties, including sales and indirect taxes. In arrangements where we have multiple performance obligations, the transaction price is allocated to each performance obligation using the relative stand-alone selling price. We generally determine stand-alone selling prices based on the prices charged to customers or using expected cost plus a margin.\n\nA description of our principal revenue generating activities is as follows:\nRetail sales - We offer consumer products through our online and physical stores. Revenue is recognized when control of the goods is transferred to the customer, which generally occurs upon our delivery to a third-party carrier or, in the case of an Amazon delivery, to the customer.\n\nThird-party seller services - We offer programs that enable sellers to sell their products in our stores, and fulfill orders using our services. We are not the seller of record in these transactions. The commissions and any related fulfillment and shipping fees we earn from these arrangements are recognized when the services are rendered, which generally occurs upon delivery of the related products to a third-party carrier or, in the case of an Amazon delivery, to the customer.\n\nAdvertising services - We provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising. Revenue is recognized as ads are delivered based on the number of clicks or impressions.\n\nSubscription services - Our subscription sales include fees associated with Amazon Prime memberships and access to content including digital video, audiobooks, digital music, e-books, and other non-AWS subscription services. Prime memberships provide our customers with access to an evolving suite of benefits that represent a single stand-ready obligation. Subscriptions are paid for at the time of or in advance of delivering the services. Revenue from such arrangements is recognized over the subscription period.\n$A W S$ - Our AWS arrangements include global sales of compute, storage, database, and other services. Revenue is allocated to services using stand-alone selling prices and is primarily recognized when the customer uses these services, based on the quantity of services rendered, such as compute or storage capacity delivered on-demand. Certain services, including compute and database, are also offered as a fixed quantity over a specified term, for which revenue is recognized ratably. Sales commissions we pay in connection with contracts that exceed one year are capitalized and amortized over the contract term.\n\nOther - Other revenue includes sales related to various other offerings, such as healthcare services, certain licensing and distribution of video content, and shipping services, and our co-branded credit card agreements. Revenue is recognized when content is licensed or distributed and as or when services are performed.\n\n## Return Allowances\n\nReturn allowances, which reduce revenue and cost of sales, are estimated using historical experience. Liabilities for return allowances are included in \"Accrued expenses and other\" and were $\\$ 1.3$ billion, $\\$ 1.4$ billion, and $\\$ 1.4$ billion as of December 31, 2022, 2023, and 2024. Additions to the allowance were $\\$ 5.5$ billion, $\\$ 5.2$ billion, and $\\$ 5.5$ billion and deductions from the allowance were $\\$ 5.2$ billion, $\\$ 5.1$ billion, and $\\$ 5.5$ billion in 2022, 2023, and 2024. Included in \"Inventories\" on our consolidated balance sheets are assets totaling $\\$ 948$ million, $\\$ 992$ million, and $\\$ 998$ million as of December 31, 2022, 2023, and 2024, for the rights to recover products from customers associated with our liabilities for return allowances.\n\n## Cost of Sales\n\nCost of sales primarily consists of the purchase price of consumer products, inbound and outbound shipping costs, including costs related to sortation and delivery centers and where we are the transportation service provider, and digital media content costs where we record revenue gross, including video and music. Shipping costs to receive products from our suppliers are included in our inventory, and recognized as cost of sales upon sale of products to our customers. Payment processing and related transaction costs, including those associated with seller transactions, are classified in \"Fulfillment\" on our consolidated statements of operations.\n\n## Vendor Agreements\n\nWe have agreements with our vendors to receive consideration primarily for cooperative marketing efforts, promotions, incentives, and volume rebates. We generally consider these amounts received from vendors to be a reduction of the prices we pay for their goods, including property and equipment, or services, and are recorded as a reduction of the cost of inventory, cost of services, or cost of property and equipment. Volume rebates typically depend on reaching minimum purchase thresholds. We evaluate the likelihood of reaching purchase thresholds using past experience and current year forecasts. When volume rebates can be reasonably estimated, we record a portion of the rebate as we make progress towards the purchase threshold.\n\n# Fulfillment \n\nFulfillment costs primarily consist of those costs incurred in operating and staffing our North America and International segments' fulfillment centers, physical stores, and customer service centers, including facilities and equipment expenses, such as depreciation and amortization, and rent; costs attributable to buying, receiving, inspecting, and warehousing inventories; picking, packaging, and preparing customer orders for shipment; payment processing and related transaction costs, including costs associated with our guarantee for certain seller transactions; responding to inquiries from customers; and supply chain management for our manufactured electronic devices. Fulfillment costs also include amounts paid to third parties that assist us in fulfillment and customer service operations.\n\n## Technology and Infrastructure\n\nTechnology and infrastructure costs include payroll and related expenses for employees involved in the research and development of new and existing products and services, development, design, and maintenance of our stores, curation and display of products and services made available in our online stores, and infrastructure costs. Infrastructure costs include servers, networking equipment, and data center related depreciation and amortization, rent, utilities, and other expenses necessary to support AWS and other Amazon businesses. Collectively, these costs reflect the investments we make in order to offer a wide variety of products and services to our customers, including expenditures related to initiatives to build and deploy innovative and efficient software and electronic devices and the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services. Technology and infrastructure costs are generally expensed as incurred.\n\n## Sales and Marketing\n\nSales and marketing costs include advertising and payroll and related expenses for personnel engaged in marketing and selling activities, including sales commissions related to AWS. We pay commissions to third parties when their customer referrals result in sales. We also participate in cooperative advertising arrangements with certain of our vendors, and other third parties.\n\nAdvertising and other promotional costs to market our products and services are expensed as incurred and were $\\$ 20.6$ billion, $\\$ 20.3$ billion, and $\\$ 21.4$ billion in 2022, 2023, and 2024.\n\n## General and Administrative\n\nGeneral and administrative expenses primarily consist of costs for corporate functions, including payroll and related expenses; facilities and equipment expenses, such as depreciation and amortization expense and rent; and professional fees.\n\n## Stock-Based Compensation\n\nCompensation cost for all equity-classified stock awards expected to vest is measured at fair value on the date of grant and recognized over the service period. The fair value of restricted stock units is determined based on the number of shares granted and the quoted price of our common stock. Such value is recognized as expense over the service period, net of estimated forfeitures, using the accelerated method. Under this method, approximately $50 \\%$ of the grant date fair value is recognized as expense in the first year of grant for the majority of our stock-based compensation awards. The accelerated method also adds a higher level of sensitivity and complexity in estimating forfeitures. If an award is forfeited early in its life, the adjustment to compensation expense is much greater under an accelerated method than under a straight-line method. The estimated number of stock awards that will ultimately vest requires judgment, and to the extent actual results or updated estimates differ from our current estimates, such amounts will be recorded as a cumulative adjustment in the period estimates are revised. We consider many factors when estimating expected forfeitures, including historical forfeiture experience. Additionally, we have stock-based compensation awards that are expected to settle in cash. These liability-classified awards are remeasured to fair value at the end of each reporting period until settlement or expiration.\n\n## Other Operating Expense (Income), Net\n\nOther operating expense (income), net, consists primarily of the amortization of intangible assets and asset impairments.\n\n# Other Income (Expense), Net \n\nOther income (expense), net, is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2022 | 2023 | 2024 |\n| Marketable equity securities valuation gains (losses) | \\$ $(13,870)$ | \\$ 984 | \\$ $(1,278)$ |\n| Equity warrant valuation gains (losses) | $(2,132)$ | 26 | (192) |\n| Upward adjustments relating to equity investments in private companies | 76 | 40 | 49 |\n| Foreign currency gains (losses) | (340) | 65 | (408) |\n| Other, net | (540) | (177) | (421) |\n| Total other income (expense), net | \\$ $(16,806)$ | \\$ 938 | \\$ $(2,250)$ |\n\nIncluded in other income (expense), net in 2022, 2023, and 2024 is a marketable equity securities valuation gain (loss) of $\\$(12.7)$ billion, $\\$ 797$ million, and $\\$(1.6)$ billion from our equity investment in Rivian Automotive, Inc. (\"Rivian\"). Our investment in Rivian's preferred stock was accounted for at cost, with adjustments for observable changes in prices or impairments, prior to Rivian's initial public offering in November 2021, which resulted in the conversion of our preferred stock to Class A common stock. As of December 31, 2024, we held 158 million shares of Rivian's Class A common stock, representing an approximate $14 \\%$ ownership interest, and an approximate $13 \\%$ voting interest. We determined that we have the ability to exercise significant influence over Rivian through our equity investment, our commercial arrangement for the purchase of electric vehicles and jointly-owned intellectual property, and one of our employees serving on Rivian's board of directors. We elected the fair value option to account for our equity investment in Rivian, which is included in \"Marketable securities\" on our consolidated balance sheets, and had a fair value of $\\$ 3.7$ billion and $\\$ 2.1$ billion as of December 31, 2023 and December 31, 2024. The investment was subject to regulatory sales restrictions resulting in a discount for lack of marketability of approximately $\\$ 800$ million as of December 31, 2021, which expired in Q1 2022.\n\n## Income Taxes\n\nIncome tax expense includes U.S. (federal and state) and foreign income taxes. Certain foreign subsidiary earnings and losses are subject to current U.S. taxation and the subsequent repatriation of those earnings is not subject to tax in the U.S. We intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nDeferred income tax balances reflect the effects of temporary differences between the carrying amounts of assets and liabilities and their tax bases, as well as net operating loss and tax credit carryforwards, and are stated at enacted tax rates expected to be in effect when taxes are actually paid or recovered.\n\nDeferred tax assets represent amounts available to reduce income taxes payable in future periods. Deferred tax assets are evaluated for future realization and reduced by a valuation allowance to the extent we believe they will not be realized. We consider many factors when assessing the likelihood of future realization of our deferred tax assets, including recent cumulative loss experience and expectations of future earnings, capital gains and investment in such jurisdiction, the carry-forward periods available to us for tax reporting purposes, and other relevant factors.\n\nWe utilize a two-step approach to recognizing and measuring uncertain income tax positions (income tax contingencies). The first step is to evaluate the tax position for recognition by determining if the weight of available evidence indicates it is more likely than not the position will be sustained on audit, including resolution of related appeals or litigation processes. The second step is to measure the tax benefit as the largest amount which is more than $50 \\%$ likely of being realized upon ultimate settlement. We consider many factors when evaluating our tax positions and estimating our tax benefits, which may require periodic adjustments and which may not accurately forecast actual outcomes. We include interest and penalties related to our income tax contingencies in income tax expense.\n\n## Fair Value of Financial Instruments\n\nFair value is defined as the price that would be received to sell an asset or paid to transfer a liability in an orderly transaction between market participants at the measurement date. To increase the comparability of fair value measures, the following hierarchy prioritizes the inputs to valuation methodologies used to measure fair value:\n\nLevel 1 - Valuations based on quoted prices for identical assets and liabilities in active markets.\n\nLevel 2 - Valuations based on observable inputs other than quoted prices included in Level 1, such as quoted prices for similar assets and liabilities in active markets, quoted prices for identical or similar assets and liabilities in markets that are not active, or other inputs that are observable or can be corroborated by observable market data.\n\nLevel 3 - Valuations based on unobservable inputs reflecting our own assumptions, consistent with reasonably available assumptions made by other market participants. These valuations require significant judgment.\n\nWe measure the fair value of money market funds and certain marketable equity securities based on quoted prices in active markets for identical assets or liabilities. Other marketable securities were valued either based on recent trades of securities in inactive markets or based on quoted market prices of similar instruments and other significant inputs derived from or corroborated by observable market data.\n\n# Cash and Cash Equivalents \n\nWe classify all highly liquid instruments with an original maturity of three months or less as cash equivalents.\n\n## Inventories\n\nInventories, consisting of products available for sale, are primarily accounted for using the first-in, first-out method, and are valued at the lower of cost and net realizable value. This valuation requires us to make judgments, based on currently available information, about the likely method of disposition, such as through sales to individual customers, returns to product vendors, or liquidations, and expected recoverable values of each disposition category. The inventory valuation allowance, representing a write-down of inventory, was $\\$ 3.0$ billion as of December 31, 2023 and 2024.\n\nWe provide Fulfillment by Amazon services in connection with certain of our sellers' programs. Third-party sellers maintain ownership of their inventory, regardless of whether fulfillment is provided by us or the third-party sellers, and therefore these products are not included in our inventories.\n\nWe also purchase electronic device components from a variety of suppliers and use several contract manufacturers to provide manufacturing services for our products. During the normal course of business, in order to manage manufacturing lead times and help ensure adequate supply, we enter into agreements with contract manufacturers and suppliers for certain electronic device components. We have certain non-cancellable purchase commitments arising from these agreements. These commitments are based on forecasted customer demand. If we reduce these commitments, we may incur additional costs.\n\n## Accounts Receivable, Net and Other\n\nIncluded in \"Accounts receivable, net and other\" on our consolidated balance sheets are receivables primarily related to customers, vendors, and prepaid expenses and other current assets. As of December 31, 2023 and 2024, customer receivables, net, were $\\$ 34.1$ billion and $\\$ 34.3$ billion, vendor receivables, net, were $\\$ 8.5$ billion and $\\$ 11.6$ billion, and other receivables, net, were $\\$ 4.3$ billion and $\\$ 3.4$ billion. Prepaid expenses and other current assets, which include amounts related to non-income taxes and satellite network launch services deposits, were $\\$ 5.4$ billion and $\\$ 6.3$ billion as of December 31, 2023 and December 31, 2024. We currently expense satellite network launch services deposits upon launch to \"Technology and infrastructure.\"\n\nWe estimate losses on receivables based on expected losses, including our historical experience of actual losses. Receivables are considered impaired and written-off when it is probable that all contractual payments due will not be collected in accordance with the terms of the agreement. The allowance for doubtful accounts was $\\$ 1.4$ billion, $\\$ 1.7$ billion, and $\\$ 2.0$ billion as of December 31, 2022, 2023, and 2024. Additions to the allowance were $\\$ 1.6$ billion, $\\$ 1.9$ billion, and $\\$ 1.9$ billion, and deductions to the allowance were $\\$ 1.3$ billion, $\\$ 1.6$ billion, and $\\$ 1.6$ billion in 2022, 2023, and 2024.\n\n## Software Development Costs\n\nWe incur software development costs related to products to be sold, leased, or marketed to external users, internal-use software, and our websites. Software development costs capitalized were not significant for the years presented. All other costs, including those related to design or maintenance, are expensed as incurred.\n\n## Property and Equipment, Net\n\nProperty and equipment are stated at cost less accumulated depreciation and amortization. Incentives that we receive from property and equipment vendors are recorded as a reduction to our costs. Property includes buildings and land that we own, along with property we have acquired under build-to-suit lease arrangements when we have control over the building during the construction period and finance lease arrangements. Equipment includes assets such as servers and networking equipment, heavy equipment, and other fulfillment equipment. Depreciation and amortization is recorded on a straight-line basis over the estimated useful lives of the assets (generally the lesser of 40 years or the remaining life of the underlying building, five years\n\nprior to January 1, 2024 and six years subsequent to January 1, 2024 for our servers, six years for our networking equipment, ten years for heavy equipment, and three to ten years for other fulfillment equipment). Depreciation and amortization expense is classified within the corresponding operating expense categories on our consolidated statements of operations.\n\n# Leases \n\nWe categorize leases with contractual terms longer than twelve months as either operating or finance. Finance leases are generally those leases that allow us to substantially utilize or pay for the entire asset over its estimated life. Assets acquired under finance leases are recorded in \"Property and equipment, net.\" All other leases are categorized as operating leases. Our leases generally have terms that range from one to ten years for equipment and one to twenty years for property.\n\nCertain lease contracts include obligations to pay for other services, such as operations and maintenance. For leases of property, we account for these other services as a component of the lease. For substantially all other leases, the services are accounted for separately and we allocate payments to the lease and other services components based on estimated stand-alone prices.\n\nLease liabilities are recognized at the present value of the fixed lease payments, reduced by landlord incentives using a discount rate based on similarly secured borrowings available to us. Lease assets are recognized based on the initial present value of the fixed lease payments, reduced by landlord incentives, plus any direct costs from executing the leases or lease prepayments reclassified from \"Other assets\" upon lease commencement. Leasehold improvements are capitalized at cost and amortized over the lesser of their expected useful life or the lease term.\n\nWhen we have the option to extend the lease term, terminate the lease before the contractual expiration date, or purchase the leased asset, and it is reasonably certain that we will exercise the option, we consider the option in determining the classification and measurement of the lease. Our leases may include variable payments based on measures that include changes in price indices, market interest rates, or the level of sales at a physical store, which are expensed as incurred.\n\nCosts associated with operating lease assets are recognized on a straight-line basis within operating expenses over the term of the lease. Finance lease assets are amortized within operating expenses on a straight-line basis over the shorter of the estimated useful lives of the assets or, in the instance where title does not transfer at the end of the lease term, the lease term. The interest component of a finance lease is included in interest expense and recognized using the effective interest method over the lease term.\n\nWe establish assets and liabilities for the present value of estimated future costs to retire long-lived assets at the termination or expiration of a lease. Such assets are amortized over the lease period into operating expense, and the recorded liabilities are accreted to the future value of the estimated retirement costs.\n\n## Financing Obligations\n\nWe record assets and liabilities for estimated construction costs under build-to-suit lease arrangements when we have control over the building during the construction period. If we continue to control the building after the construction period, the arrangement is classified as a financing obligation instead of a lease. The building is depreciated over the shorter of its useful life or the term of the obligation.\n\nIf we do not control the building after the construction period ends, the assets and liabilities for construction costs are derecognized, and we classify the lease as operating.\n\n## Goodwill and Indefinite-Lived Intangible Assets\n\nWe evaluate goodwill and indefinite-lived intangible assets for impairment annually or more frequently when an event occurs or circumstances change that indicate the carrying value may not be recoverable. We may elect to utilize a qualitative assessment to evaluate whether it is more likely than not that the fair value of a reporting unit or indefinite-lived intangible asset is less than its carrying value and if so, we perform a quantitative test. We compare the carrying value of each reporting unit and indefinite-lived intangible asset to its estimated fair value and if the fair value is determined to be less than the carrying value, we recognize an impairment loss for the difference. We estimate the fair value of the reporting units using discounted cash flows. Forecasts of future cash flows are based on our best estimate of future net sales and operating expenses, based primarily on expected category expansion, pricing, market segment share, and general economic conditions.\n\nWe completed the required annual impairment test of goodwill for all reporting units and indefinite-lived intangible assets as of April 1, 2024, resulting in no impairments. The fair value of our reporting units substantially exceeded their carrying value. There were no events that caused us to update our annual impairment test. See \"Note 5 - Acquisitions, Goodwill, and Acquired Intangible Assets.\"\n\n# Other Assets \n\nIncluded in \"Other assets\" on our consolidated balance sheets are amounts primarily related to video and music content, net of accumulated amortization; long-term deferred tax assets; acquired intangible assets, net of accumulated amortization; convertible notes and certain equity investments; satellite network launch services deposits; and affordable housing loans. We recognize certain transactions with governments when there is reasonable assurance that incentives included in the agreements, such as cash or certain tax credits, will be received and we are able to comply with any related conditions. These incentives are recorded as reductions to the cost of related assets or expenses.\n\n## Digital Video and Music Content\n\nWe obtain video content, inclusive of episodic television and movies, and music content for customers through licensing agreements that have a wide range of licensing provisions including both fixed and variable payment schedules. When the license fee for a specific video or music title is determinable or reasonably estimable and the content is available to us, we recognize an asset and a corresponding liability for the amounts owed. We reduce the liability as payments are made and we amortize the asset to \"Cost of sales\" on an accelerated basis, based on estimated usage or viewing patterns, or on a straight-line basis. If the licensing fee is not determinable or reasonably estimable, no asset or liability is recorded and licensing costs are expensed as incurred. We also develop original video content for which the production costs are capitalized and amortized to \"Cost of sales\" predominantly on an accelerated basis that follows the estimated viewing patterns associated with the content. The weighted average remaining life of our capitalized video content is 3.1 years. We review usage and viewing patterns impacting the amortization of capitalized video content on an ongoing basis and reflect any changes prospectively.\n\nOur produced and licensed video content is primarily monetized together as a unit, referred to as a film group, in each major geography where we offer Amazon Prime memberships. These film groups are evaluated for impairment whenever an event occurs or circumstances change indicating the fair value is less than the carrying value. The total capitalized costs of video, which is primarily released content, and music as of December 31, 2023 and 2024 were $\\$ 17.4$ billion and $\\$ 19.6$ billion. Total video and music expense was $\\$ 18.9$ billion and $\\$ 20.4$ billion for the year ended December 31, 2023 and 2024. Total video and music expense includes licensing and production costs associated with content offered within Amazon Prime memberships, and costs associated with digital subscriptions and sold or rented content.\n\n## Cash Equivalents and Marketable Securities\n\nWe generally invest our excess cash in investment grade short- to intermediate-term marketable debt securities and AAArated money market funds. Such investments are included in \"Cash and cash equivalents\" or \"Marketable securities\" on the accompanying consolidated balance sheets.\n\nMarketable debt securities are classified as available-for-sale and reported at fair value with unrealized gains and losses included in \"Accumulated other comprehensive income (loss).\" Each reporting period, we evaluate whether declines in fair value below carrying value are due to expected credit losses, as well as our ability and intent to hold the investment until a forecasted recovery occurs. Expected credit losses are recorded as an allowance through \"Other income (expense), net\" on our consolidated statements of operations.\n\nEquity investments that have readily determinable fair values, including investments for which we have elected the fair value option, are included in \"Marketable securities\" on our consolidated balance sheets and measured at fair value with changes recognized in \"Other income (expense), net\" on our consolidated statements of operations.\n\n## Non-Marketable Investments\n\nNotes that are convertible to equity classified as available-for-sale are reported at fair value with unrealized gains and losses included in \"Accumulated other comprehensive income (loss).\" Credit losses, if any, are recorded as an allowance through \"Other income (expense), net\" on our consolidated statements of operations. Upon conversion, the amount of the notes reported at fair value are reclassified generally from available-for-sale to equity investments accounted for at cost, with any associated unrealized gain or loss reclassified from \"Accumulated other comprehensive income (loss)\" to \"Other income (expense), net\" on our consolidated statements of operations.\n\nIn Q3 2023, we invested in a $\\$ 1.25$ billion note from Anthropic, PBC, which is convertible to equity. In Q1 2024, we invested $\\$ 2.75$ billion in a second convertible note. In Q4 2024, we entered into an agreement and invested $\\$ 1.3$ billion in a third convertible note, and will invest an additional $\\$ 2.7$ billion by Q4 2025. The notes are classified as available-for-sale and are classified as Level 3 assets, and as of December 31, 2024 had an estimated fair value of approximately $\\$ 13.8$ billion. In making these estimates, we utilized valuation methods based on information available, including the rights and obligations of the convertible notes, other outstanding classes of securities, observable transactions such as new securities offerings, estimates of expected time to and type of liquidity events and anticipated securities offerings, and discounts for lack of marketability. Subsequent to December 31, 2024, a portion of the notes were converted to nonvoting preferred stock. As a result of this conversion, a significant portion of the unrealized gain associated with the notes as of December 31, 2024 was reclassified and\n\na gain will be recorded in \"Other income (expense), net\" in our Q1 2025 consolidated statement of operations. We also have a commercial arrangement primarily for the provision of AWS cloud services, which includes the use of AWS chips.\n\nEquity investments in private companies for which we do not have the ability to exercise significant influence are accounted for at cost, with adjustments for observable changes in prices or impairments recognized in \"Other income (expense), net\" on our consolidated statements of operations. Each reporting period, we perform a qualitative assessment to evaluate whether the investment is impaired. Our assessment includes a review of recent operating results and trends, recent sales/ acquisitions of the investee securities, and other publicly available data. If the investment is impaired, we write it down to its estimated fair value. As of December 31, 2023 and 2024, these investments had a carrying value of $\\$ 754$ million and $\\$ 989$ million.\n\nEquity investments where we can exercise significant influence, but not control, over an investee are accounted for using the equity method of accounting, or at fair value if we elect the fair value option. Our share of the earnings or losses as reported by equity-method investees, amortization of basis differences, related gains or losses, and impairments, if any, are recognized in \"Equity-method investment activity, net of tax\" on our consolidated statements of operations. Each reporting period, we evaluate whether declines in fair value below carrying value are other-than-temporary and if so, we write down the investment to its estimated fair value. As of December 31, 2023 and 2024, these investments had a carrying value of $\\$ 614$ million and $\\$ 1.2$ billion.\n\nAs of December 31, 2023 and 2024, equity warrants measured at fair value were $\\$ 2.2$ billion and $\\$ 2.7$ billion, with changes recognized in \"Other income (expense), net\" on our consolidated statements of operations. These warrants are classified as Level 2 and 3 assets.\n\nThese non-marketable investments are included within \"Other assets\" on our consolidated balance sheets.\nCertain of our investments represent a variable interest in an entity. We do not consolidate the entities in which we hold these investments because we are not the primary beneficiary.\n\n# Long-Lived Assets \n\nLong-lived assets, other than goodwill and indefinite-lived intangible assets, are reviewed for impairment whenever events or changes in circumstances indicate that the carrying amount of the assets might not be recoverable. Conditions that would necessitate an impairment assessment include a significant decline in the observable market value of an asset, a significant change in the extent or manner in which an asset is used, or any other significant adverse change that would indicate that the carrying amount of an asset or group of assets may not be recoverable.\n\nFor long-lived assets used in operations, including lease assets, impairment losses are only recorded if the asset's carrying amount is not recoverable through its undiscounted, probability-weighted future cash flows. We measure the impairment loss based on the difference between the carrying amount and estimated fair value. Long-lived assets are considered held for sale when certain criteria are met, including when management has committed to a plan to sell the asset, the asset is available for sale in its immediate condition, and the sale is probable within one year of the reporting date. Assets held for sale are reported at the lower of cost or fair value less costs to sell. Assets held for sale were not significant as of December 31, 2023 and 2024.\n\n## Accrued Expenses and Other\n\nIncluded in \"Accrued expenses and other\" on our consolidated balance sheets are liabilities primarily related to taxrelated liabilities, leases and asset retirement obligations, self-insurance liabilities, payroll and related expenses, current debt, unredeemed gift cards, customer liabilities, marketing liabilities, acquired digital media content, and other operating expenses.\n\nAs of December 31, 2023 and 2024, our liabilities for payroll related expenses were $\\$ 7.7$ billion and $\\$ 7.5$ billion and our liabilities for unredeemed gift cards were $\\$ 5.3$ billion and $\\$ 5.4$ billion. We reduce the liability for a gift card when redeemed by a customer. The portion of gift cards that we do not expect to be redeemed is recognized based on customer usage patterns.\n\n## Self-Insurance Liabilities\n\nAlthough we maintain certain high-deductible, third-party insurance coverage for catastrophic losses, we effectively selfinsure for exposure primarily related to workers' compensation, employee healthcare benefits, general and product liability, and automobile liability, including liability resulting from third-party transportation service providers. We estimate self-insurance liabilities by considering historical claims experience, frequency and costs of claims, projected claims development, inflation, and other actuarial assumptions. Changes in the number or costs of claims, healthcare costs, judgment and settlement amounts, associated legal expenses, and other factors could cause actual results to differ materially from these estimates. In the fourth quarter of 2022, we increased our reserves for general, product, and automobile liabilities by $\\$ 1.3$ billion primarily driven by changes in our estimates about the costs of asserted and unasserted claims, which was primarily recorded in \"Cost of sales\" on our consolidated statements of operations and impacted our North America segment. Increases to our reserves driven by\n\nchanges in estimates were not material to our consolidated results of operations for the years ended December 31, 2023 and 2024. As of December 31, 2023 and 2024, our total self-insurance liabilities were $\\$ 6.3$ billion and $\\$ 8.5$ billion and are included in \"Accrued expenses and other\" on our consolidated balance sheets.\n\n# Unearned Revenue \n\nUnearned revenue is recorded when payments are received or due in advance of performing our service obligations and is recognized over the service period. Unearned revenue primarily relates to prepayments of AWS services and Amazon Prime memberships. Our total unearned revenue as of December 31, 2023 was $\\$ 20.9$ billion, of which $\\$ 14.2$ billion was recognized as revenue during the year ended December 31, 2024 and our total unearned revenue as of December 31, 2024 was $\\$ 24.6$ billion. Included in \"Other long-term liabilities\" on our consolidated balance sheets was $\\$ 5.7$ billion and $\\$ 6.5$ billion of unearned revenue as of December 31, 2023 and 2024.\n\nAdditionally, we have performance obligations, primarily related to AWS, associated with commitments in customer contracts for future services that have not yet been recognized in our financial statements. For contracts with original terms that exceed one year, those commitments not yet recognized were approximately $\\$ 177$ billion as of December 31, 2024. The weighted average remaining life of our long-term contracts is 4.1 years. However, the amount and timing of revenue recognition is largely driven by customer usage, which can extend beyond the original contractual term.\n\n## Other Long-Term Liabilities\n\nIncluded in \"Other long-term liabilities\" on our consolidated balance sheets are liabilities primarily related to financing obligations, unearned revenue, asset retirement obligations, tax contingencies, deferred tax liabilities, and digital video and music content.\n\n## Foreign Currency\n\nWe have internationally-focused stores for which the net sales generated, as well as most of the related expenses directly incurred from those operations, are denominated in local functional currencies. The functional currency of our subsidiaries that either operate or support these stores is generally the same as the local currency. Assets and liabilities of these subsidiaries are translated into U.S. Dollars at period-end foreign exchange rates, and revenues and expenses are translated at average rates prevailing throughout the period. Translation adjustments are included in \"Accumulated other comprehensive income (loss),\" a separate component of stockholders' equity. Transaction gains and losses including intercompany transactions denominated in a currency other than the functional currency of the entity involved are included in \"Other income (expense), net\" on our consolidated statements of operations. In connection with the settlement and remeasurement of intercompany balances, we recorded gains (losses) of $\\$ 386$ million, $\\$(329)$ million, and $\\$ 413$ million in 2022, 2023, and 2024.\n\n## Accounting Pronouncements Not Yet Adopted\n\nIn December 2023, the Financial Accounting Standards Board (\"FASB\") issued an Accounting Standards Update (\"ASU\") amending existing income tax disclosure guidance, primarily requiring more detailed disclosure for income taxes paid and the effective tax rate reconciliation. The ASU is effective for annual reporting periods beginning after December 15, 2024, with early adoption permitted and can be applied on either a prospective or retroactive basis. We expect to adopt the ASU on a retroactive basis.\n\nIn November 2024, the FASB issued an ASU amending existing income statement disclosure guidance, primarily requiring more detailed disclosure for expenses. The ASU is effective for annual reporting periods beginning after December 15, 2026, and interim periods within fiscal years beginning after December 15, 2027, with early adoption permitted. The amendments can be applied on either a prospective or retroactive basis. We are currently evaluating the ASU to determine its impact on our disclosures.\n\n# Note 2 - FINANCIAL INSTRUMENTS \n\n## Cash, Cash Equivalents, Restricted Cash, and Marketable Securities\n\nAs of December 31, 2023 and 2024, our cash, cash equivalents, restricted cash, and marketable securities primarily consisted of cash, AAA-rated money market funds, U.S. and foreign government and agency securities, other investment grade securities, and marketable equity securities. Cash equivalents and marketable securities are recorded at fair value. The following table summarizes, by major security type, our cash, cash equivalents, restricted cash, and marketable securities that are measured at fair value on a recurring basis and are categorized using the fair value hierarchy (in millions):\n\n|  | December 31, 2023 |  |  |  |\n| :--: | :--: | :--: | :--: | :--: |\n|  | Cost or Amortized Cost | Gross Unrealized Gains | Gross Unrealized Losses | Total Estimated Fair Value |\n| Cash | \\$ 11,706 | \\$ — | \\$ — | \\$ 11,706 |\n| Level 1 securities: |  |  |  |  |\n| Money market funds | 39,160 | — | — | 39,160 |\n| Equity securities (1) |  |  |  | 4,658 |\n| Level 2 securities: |  |  |  |  |\n| Foreign government and agency securities | 505 | — | — | 505 |\n| U.S. government and agency securities | 1,789 | 1 | (91) | 1,699 |\n| Corporate debt securities | 27,996 | — | (191) | 27,805 |\n| Asset-backed securities | 1,707 | — | (61) | 1,646 |\n| Other debt securities | 108 | — | (4) | 104 |\n|  | \\$ 82,971 | \\$ 1 | \\$ (347) | \\$ 87,283 |\n| Less: Restricted cash, cash equivalents, and marketable securities (2) |  |  |  | (503) |\n| Total cash, cash equivalents, and marketable securities |  |  |  | \\$ 86,780 |\n\n|   | December 31, 2024  |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | Cost orAmortizedCost | GrossUnrealizedGains | GrossUnrealizedLosses | TotalEstimatedFair Value  |\n|  Cash | $17,055 | $— | $— | $17,055  |\n|  Level 1 securities: |  |  |  |   |\n|  Money market funds | 28,282 | — | — | 28,282  |\n|  Equity securities (1) |  |  |  | 3,318  |\n|  Level 2 securities: |  |  |  |   |\n|  Foreign government and agency securities | 177 | — | — | 177  |\n|  U.S. government and agency securities | 3,452 | 1 | (52) | 3,401  |\n|  Corporate debt securities | 50,959 | 3 | (50) | 50,912  |\n|  Asset-backed securities | 1,539 | 2 | (18) | 1,523  |\n|  Other debt securities | 68 | — | (1) | 67  |\n|   | $101,532 | $6 | $(121) | $104,735  |\n|  Less: Restricted cash, cash equivalents, and marketable securities (2) |  |  |  | (3,533)  |\n|  Total cash, cash equivalents, and marketable securities |  |  |  | $101,202  |\n|  (1) The related unrealized gain (loss) recorded in “Other income (expense), net” was $(13.6) billion, $1.0 billion, and $(1.3) billion for the years ended December 31, 2022, 2023, and 2024.(2) We are required to pledge or otherwise restrict a portion of our cash, cash equivalents, and marketable debt securities primarily as collateral for real estate, amounts due to third-party sellers in certain jurisdictions, debt, standby and trade letters of credit, and licenses of digital media content. We classify cash, cash equivalents, and marketable debt securities with use restrictions of less than twelve months as “Accounts receivable, net and other” and of twelve months or longer as non-current “Other assets” on our consolidated balance sheets. See “Note 7 — Commitments and Contingencies.” | |   |   |   |   |\n|  The following table summarizes gross gains and gross losses realized on sales of marketable debt securities (in millions): | |   |   |   |   |\n|   | Year Ended December 31, |   |   |   |\n|   | 2022 | 2023 | 2024 |   |\n|  Realized gains | $43 | $2 | $3 |   |\n|  Realized losses | 341 | 67 | 10 |   |\n|  The following table summarizes the remaining contractual maturities of our cash equivalents and marketable debt securities as of December 31, 2024 (in millions): | |   |   |   |   |\n|   |  | Amortized Cost | Estimated Fair Value |   |\n|  Due within one year |  | $78,065 | $78,046 |   |\n|  Due after one year through five years |  | 5,023 | 4,969 |   |\n|  Due after five years through ten years |  | 560 | 553 |   |\n|  Due after ten years |  | 829 | 794 |   |\n|  Total |  | $84,477 | $84,362 |   |\n|  Actual maturities may differ from the contractual maturities because borrowers may have certain prepayment conditions. | |   |   |   |   |\n\n# Consolidated Statements of Cash Flows Reconciliation\n\nThe following table provides a reconciliation of the amount of cash, cash equivalents, and restricted cash reported within the consolidated balance sheets to the total of the same such amounts shown in the consolidated statements of cash flows (in millions):\n\n|   | December 31, 2023 | December 31, 2024  |\n| --- | --- | --- |\n|  Cash and cash equivalents | \\$ 73,387 | \\$ 78,779  |\n|  Restricted cash included in accounts receivable, net and other | 497 | 247  |\n|  Restricted cash included in other assets | 6 | 3,286  |\n|  Total cash, cash equivalents, and restricted cash shown in the consolidated statements of cash flows | \\$ 73,890 | \\$ 82,312  |\n\n## Note 3 - PROPERTY AND EQUIPMENT\n\nProperty and equipment, at cost, consisted of the following (in millions):\n\n|   | December 31, |   |\n| --- | --- | --- |\n|   | 2023 | 2024  |\n|  Gross property and equipment (1): |  |   |\n|  Land and buildings | \\$ 105,293 | \\$ 123,039  |\n|  Equipment | 185,039 | 218,893  |\n|  Other assets | 5,116 | 5,487  |\n|  Construction in progress | 28,840 | 46,636  |\n|  Gross property and equipment | 324,288 | 394,055  |\n|  Total accumulated depreciation and amortization (1) | 120,111 | 141,390  |\n|  Total property and equipment, net | \\$ 204,177 | \\$ 252,665  |\n\n(1) Includes the original cost and accumulated depreciation of fully-depreciated assets.\n\nDepreciation and amortization expense on property and equipment was $\\$ 24.9$ billion, $\\$ 30.2$ billion, and $\\$ 32.1$ billion which includes amortization of property and equipment acquired under finance leases of $\\$ 6.1$ billion, $\\$ 5.9$ billion, and $\\$ 3.9$ billion for 2022, 2023, and 2024.\n\n# Note 4 - LEASES\n\nWe have entered into non-cancellable operating and finance leases for fulfillment network, data center, office, and physical store facilities as well as server and networking equipment, aircraft, and vehicles. Gross assets acquired under finance leases, including those where title transfers at the end of the lease, are recorded in \"Property and equipment, net\" and were $\\$ 62.5$ billion and $\\$ 56.5$ billion as of December 31, 2023 and 2024. Accumulated amortization associated with finance leases was $\\$ 44.7$ billion and $\\$ 41.8$ billion as of December 31, 2023 and 2024.\n\nLease cost recognized in our consolidated statements of operations is summarized as follows (in millions):\n\n|   | Year Ended December 31, |  |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  Operating lease cost | \\$ | 10,550 | \\$  |\n|  Finance lease cost: |  |  |   |\n|  Amortization of lease assets |  | 5,899 | 3,866  |\n|  Interest on lease liabilities |  | 304 | 285  |\n|  Finance lease cost |  | 6,203 | 4,151  |\n|  Variable lease cost |  | 2,165 | 2,465  |\n|  Total lease cost | \\$ | 18,918 | \\$  |\n\nOther information about lease amounts recognized in our consolidated financial statements is as follows:\n\n|   | December 31, 2023 | December 31, 2024  |\n| --- | --- | --- |\n|  Weighted-average remaining lease term - operating leases | 11.3 years | 10.6 years  |\n|  Weighted-average remaining lease term - finance leases | 11.9 years | 11.9 years  |\n|  Weighted-average discount rate - operating leases | $3.3 \\%$ | $3.5 \\%$  |\n|  Weighted-average discount rate - finance leases | $2.7 \\%$ | $3.0 \\%$  |\n\nOur lease liabilities were as follows (in millions):\n\n|   | December 31, 2023 |  |   |\n| --- | --- | --- | --- |\n|   | Operating Leases | Finance Leases | Total  |\n|  Gross lease liabilities | \\$ 90,777 | \\$ 14,106 | \\$ 104,883  |\n|  Less: imputed interest | $(15,138)$ | $(1,997)$ | $(17,135)$  |\n|  Present value of lease liabilities | 75,639 | 12,109 | 87,748  |\n|  Less: current portion of lease liabilities | $(8,419)$ | $(2,032)$ | $(10,451)$  |\n|  Total long-term lease liabilities | \\$ 67,220 | \\$ 10,077 | \\$ 77,297  |\n|   | December 31, 2024 |  |   |\n|   | Operating Leases | Finance Leases | Total  |\n|  Gross lease liabilities | \\$ 95,294 | \\$ 12,520 | \\$ 107,814  |\n|  Less: imputed interest | $(15,698)$ | $(1,918)$ | $(17,616)$  |\n|  Present value of lease liabilities | 79,596 | 10,602 | 90,198  |\n|  Less: current portion of lease liabilities | $(10,546)$ | $(1,375)$ | $(11,921)$  |\n|  Total long-term lease liabilities | \\$ 69,050 | \\$ 9,227 | \\$ 78,277  |\n\n# Note 5 - ACQUISITIONS, GOODWILL, AND ACQUIRED INTANGIBLE ASSETS \n\n## 2022 Acquisition Activity\n\nOn March 17, 2022, we acquired MGM Holdings Inc., for cash consideration of approximately $\\$ 6.1$ billion, net of cash acquired, to provide more digital media content options for customers. We also assumed $\\$ 2.5$ billion of debt, which we repaid immediately after closing. The acquired assets primarily consist of $\\$ 3.4$ billion of video content and $\\$ 4.9$ billion of goodwill.\n\nDuring 2022, we also completed acquisition activity for aggregate cash consideration of $\\$ 141$ million, net of cash acquired.\n\n## 2023 Acquisition Activity\n\nOn February 22, 2023, we acquired 1Life Healthcare, Inc. (One Medical), for cash consideration of approximately $\\$ 3.5$ billion, net of cash acquired, to provide healthcare options for customers. The acquired assets primarily consist of $\\$ 1.3$ billion of intangible assets and $\\$ 2.5$ billion of goodwill, which is allocated to our North America segment.\n\nDuring 2023, we also completed acquisition activity for immaterial aggregate cash consideration, net of cash acquired.\n\n## 2024 Acquisition Activity\n\nDuring 2024, we completed acquisition activity for aggregate cash consideration of $\\$ 780$ million, net of cash acquired.\nThe primary reasons for these transactions were to acquire technologies and know-how to enable Amazon to serve customers more effectively or to expand our customer base.\n\nPro forma results of operations have not been presented because the effects of the 2024 transactions, individually and in the aggregate, were not material to our consolidated results of operations. Transaction-related costs were expensed as incurred and were not significant.\n\n## Goodwill\n\nThe goodwill resulting from the acquisition activity is primarily related to expected improvements in technology performance and functionality, as well as sales growth from future product and service offerings and new customers, together with certain intangible assets that do not qualify for separate recognition. The goodwill resulting from the acquisition activity is generally not deductible for tax purposes. The following summarizes our goodwill activity in 2023 and 2024 by segment (in millions):\n\n|  | North <br> America | International | AWS | Consolidated |\n| :-- | --: | --: | --: | --: |\n| Goodwill - January 1, 2023 | $\\$ 16,621$ | $\\$ 2,411$ | $\\$ 1,256$ | $\\$ 20,288$ |\n| Acquisition activity | 2,494 | - | - | 2,494 |\n| Other adjustments (1) | 11 | 1 | $(5)$ | 7 |\n| Goodwill - December 31, 2023 | 19,126 | 2,412 | 1,251 | 22,789 |\n| Acquisition activity | 191 | 77 | 52 | 320 |\n| Other adjustments (1) | $(28)$ | $(4)$ | $(3)$ | $(35)$ |\n| Goodwill - December 31, 2024 | $\\$ 19,289$ | $\\$ 2,485$ | $\\$ 1,300$ | $\\$ 23,074$ |\n\n(1) Primarily includes changes in foreign exchange rates.\n\n# Intangible Assets\n\nAcquired identifiable intangible assets are valued primarily by using discounted cash flows. These assets are included within \"Other assets\" on our consolidated balance sheets and consist of the following (in millions):\n\n|   | December 31, |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n|   | 2023 |  |  | 2024 |  |  |   |\n|   | Acquired Intangibles, Gross (1) | Accumulated Amortization (1) | Acquired Intangibles, Net | Acquired Intangibles, Gross (1) | Accumulated Amortization (1) | Acquired Intangibles, Net | Weighted Average Life Remaining  |\n|  Finite-lived intangible assets (2): |  |  |  |  |  |  |   |\n|  Marketing-related | \\$ 2,643 | \\$ (738) | \\$ 1,905 | \\$ 2,629 | \\$ (860) | \\$ 1,769 | 16.8  |\n|  Contract-based | 4,800 | $(1,129)$ | 3,671 | 5,767 | $(1,541)$ | 4,226 | 10.9  |\n|  Technology- and content-based | 743 | (340) | 403 | 1,246 | (284) | 962 | 3.2  |\n|  Customer-related | 749 | (188) | 561 | 764 | (282) | 482 | 5.7  |\n|  Total finite-lived intangible assets | \\$ 8,935 | \\$ (2,395) | \\$ 6,540 | \\$ 10,406 | \\$ (2,967) | \\$ 7,439 | 11.0  |\n|  IPR\\&D and other (3) | \\$ 1,147 |  | \\$ 1,147 | \\$ 1,163 |  | \\$ 1,163 |   |\n|  Total acquired intangibles | \\$ 10,082 | \\$ (2,395) | \\$ 7,687 | \\$ 11,569 | \\$ (2,967) | \\$ 8,602 |   |\n\n(1) Excludes the original cost and accumulated amortization of fully-amortized intangibles. (2) Finite-lived intangible assets, excluding acquired video content, have estimated useful lives of between one and twenty-five years, and are being amortized to operating expenses on a straight-line basis. (3) Intangible assets acquired in a business combination that are in-process and used in research and development activities are considered indefinite-lived until the completion or abandonment of the research and development efforts. Once the research and development efforts are completed, we determine the useful life and begin amortizing the assets. Amortization expense for acquired finite-lived intangibles was $\\$ 604$ million, $\\$ 706$ million, and $\\$ 838$ million in 2022, 2023, and 2024. Expected future amortization expense of acquired finite-lived intangible assets as of December 31, 2024 is as follows (in millions):\n\n|  Year Ended December 31, |   |\n| --- | --- |\n|  2025 | \\$ 994  |\n|  2026 | 918  |\n|  2027 | 796  |\n|  2028 | 632  |\n|  2029 | 615  |\n|  Thereafter | 3,484  |\n|   | \\$ 7,439  |\n\n# Note 6 - DEBT \n\nAs of December 31, 2024, we had $\\$ 58.0$ billion of unsecured senior notes outstanding (the \"Notes\"). Our total long-term debt obligations are as follows (in millions):\n\n|  | Maturities (1) | Stated Interest Rates | Effective Interest Rates | December 31, 2023 | December 31, 2024 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 2014 Notes issuance of $\\$ 6.0$ billion | 2034 - 2044 | $4.80 \\%-4.95 \\%$ | $4.93 \\%-5.12 \\%$ | 4,000 | 2,750 |\n| 2017 Notes issuance of $\\$ 17.0$ billion | 2025 - 2057 | $3.15 \\%-5.20 \\%$ | $3.02 \\%-4.33 \\%$ | 15,000 | 13,000 |\n| 2020 Notes issuance of $\\$ 10.0$ billion | 2025 - 2060 | $0.80 \\%-2.70 \\%$ | $0.88 \\%-2.77 \\%$ | 9,000 | 9,000 |\n| 2021 Notes issuance of $\\$ 18.5$ billion | 2026 - 2061 | $1.00 \\%-3.25 \\%$ | $1.14 \\%-3.31 \\%$ | 17,500 | 15,000 |\n| April 2022 Notes issuance of $\\$ 12.8$ billion | 2025 - 2062 | $3.00 \\%-4.10 \\%$ | $3.13 \\%-4.15 \\%$ | 12,750 | 11,250 |\n| December 2022 Notes issuance of $\\$ 8.3$ billion | 2025 - 2032 | $4.55 \\%-4.70 \\%$ | $4.61 \\%-4.74 \\%$ | 8,250 | 7,000 |\n| Credit Facility |  |  |  | 682 | — |\n| Total face value of long-term debt |  |  |  | 67,182 | 58,000 |\n| Unamortized discount and issuance costs, net |  |  |  | (374) | (360) |\n| Less: current portion of long-term debt |  |  |  | $(8,494)$ | $(5,017)$ |\n| Long-term debt |  |  |  | \\$ 58,314 | \\$ 52,623 |\n\n(1) The weighted-average remaining lives of the 2014, 2017, 2020, 2021, April 2022, and December 2022 Notes were 15.4, $15.2,16.5,14.2,12.8$, and 4.6 years as of December 31, 2024. The combined weighted-average remaining life of the Notes was 13.4 years as of December 31, 2024.\nInterest on the Notes is payable semi-annually in arrears. We may redeem the Notes at any time in whole, or from time to time, in part at specified redemption prices. We are not subject to any financial covenants under the Notes. The estimated fair value of the Notes was approximately $\\$ 60.6$ billion and $\\$ 50.2$ billion as of December 31, 2023 and 2024, which is based on quoted prices for our debt as of those dates.\n\nAs of September 30, 2024, we had repaid outstanding borrowings and terminated the secured revolving credit facility with a lender that was secured by certain seller receivables (the \"Credit Facility\"). The Credit Facility bore interest based on the daily Secured Overnight Financing Rate plus $1.25 \\%$, and had a commitment fee of up to $0.45 \\%$ on the undrawn portion. There were $\\$ 682$ million of borrowings outstanding under the Credit Facility as of December 31, 2023, which had an interest rate of $6.6 \\%$. As of December 31, 2023, we had pledged $\\$ 806$ million of our cash and seller receivables as collateral for debt related to our Credit Facility. The estimated fair value of the Credit Facility, which was based on Level 2 inputs, approximated its carrying value as of December 31, 2023.\n\nAs of December 31, 2024, future principal payments for our total long-term debt were as follows (in millions):\nYear Ended December 31,\n2025\n2026\n2027\n2028\n2029\nThereafter\n\\$ 5,000\n2,750\n8,750\n2,250\n3,000\n36,250\n\\$ 58,000\n\nIn January 2023, we entered into an $\\$ 8.0$ billion unsecured 364-day term loan with a syndicate of lenders (the \"Term Loan\"), maturing in January 2024 and bearing interest at the Secured Overnight Financing Rate specified in the Term Loan plus $0.75 \\%$. The Term Loan was classified as short-term debt and included within \"Accrued expenses and other\" on our consolidated balance sheets. As of December 31, 2023, the entire amount of the Term Loan had been repaid.\n\nWe have U.S. Dollar and Euro commercial paper programs (the \"Commercial Paper Programs\") under which we may from time to time issue unsecured commercial paper up to a total of $\\$ 20.0$ billion (including up to $€ 3.0$ billion) at the date of issue, with individual maturities that may vary but will not exceed 397 days from the date of issue. There were no borrowings\n\noutstanding under the Commercial Paper Programs as of December 31, 2023 and 2024. We use the net proceeds from the issuance of commercial paper for general corporate purposes.\n\nWe have a $\\$ 15.0$ billion unsecured revolving credit facility with a syndicate of lenders (the \"Credit Agreement\"), with a term that extends to November 2028 and may be extended for one or more additional one-year terms subject to approval by the lenders. The interest rate applicable to outstanding balances under the Credit Agreement is the applicable benchmark rate specified in the Credit Agreement plus $0.45 \\%$, with a commitment fee of $0.03 \\%$ on the undrawn portion of the credit facility. There were no borrowings outstanding under the Credit Agreement as of December 31, 2023 and 2024.\n\nIn October 2024, we entered into a $\\$ 5.0$ billion unsecured 364-day revolving credit facility with a syndicate of lenders (the \"Short-Term Credit Agreement\"), which replaced the prior 364-day revolving credit agreement entered into in November 2023. The Short-Term Credit Agreement matures in October 2025 and may be extended for one additional period of 364 days subject to approval by the lenders. The interest rate applicable to outstanding balances under the Short-Term Credit Agreement is the Secured Overnight Financing Rate specified in the Short-Term Credit Agreement plus $0.45 \\%$, with a commitment fee of $0.03 \\%$ on the undrawn portion. There were no borrowings outstanding under the Short-Term Credit Agreement or the prior 364-day revolving credit agreement as of December 31, 2023 and 2024.\n\nWe also utilize other short-term credit facilities for working capital purposes. There were $\\$ 147$ million and $\\$ 151$ million of borrowings outstanding under these facilities as of December 31, 2023 and 2024, which were included in \"Accrued expenses and other\" on our consolidated balance sheets. In addition, we had $\\$ 8.3$ billion of unused letters of credit as of December 31, 2024.\n\n# Note 7 - COMMITMENTS AND CONTINGENCIES \n\n## Commitments\n\nThe following summarizes our principal contractual commitments, excluding open orders for purchases that support normal operations and are generally cancellable, as of December 31, 2024 (in millions):\n\n|  | Year Ended December 31, |  |  |  |  |  |  |\n| :-- | --: | --: | --: | --: | --: | --: | --: |\n|  | $\\mathbf{2 0 2 5}$ | $\\mathbf{2 0 2 6}$ | $\\mathbf{2 0 2 7}$ | $\\mathbf{2 0 2 8}$ | $\\mathbf{2 0 2 9}$ | Thereafter | Total |\n| Long-term debt principal and interest | $\\$ 6,858$ | $\\$ 4,458$ | $\\$ 10,404$ | $\\$ 3,644$ | $\\$ 4,344$ | $\\$ 55,831$ | $\\$ 85,539$ |\n| Operating lease liabilities | 12,002 | 11,023 | 10,087 | 9,205 | 8,534 | 44,443 | 95,294 |\n| Finance lease liabilities, including interest | 1,491 | 1,495 | 1,317 | 1,114 | 1,022 | 6,081 | 12,520 |\n| Financing obligations, including interest (1) | 511 | 515 | 523 | 531 | 540 | 6,397 | 9,017 |\n| Leases not yet commenced | 2,695 | 3,691 | 5,011 | 4,253 | 4,286 | 41,691 | 61,627 |\n| Unconditional purchase obligations (2) | 8,536 | 7,941 | 5,413 | 4,321 | 3,868 | 20,296 | 50,375 |\n| Other commitments (3) | 2,739 | 1,470 | 1,016 | 923 | 1,025 | 11,456 | 18,629 |\n| Total commitments | $\\$ 34,832$ | $\\$ 30,593$ | $\\$ 33,771$ | $\\$ 23,991$ | $\\$ 23,619$ | $\\$ 186,195$ | $\\$ 333,001$ |\n\n(1) Includes non-cancellable financing obligations for fulfillment network and data center facilities. Excluding interest, current financing obligations of $\\$ 271$ million and $\\$ 312$ million are recorded within \"Accrued expenses and other\" and $\\$ 6.6$ billion and $\\$ 7.1$ billion are recorded within \"Other long-term liabilities\" as of December 31, 2023 and 2024. The weighted-average remaining term of the financing obligations was 17.0 years and 16.1 years and the weighted-average imputed interest rate was $3.1 \\%$ as of December 31, 2023 and 2024.\n(2) Includes unconditional purchase obligations related to long-term agreements to acquire and license digital media content, procure energy, and license software that are not reflected on the consolidated balance sheets. For those agreements with variable terms, we do not estimate the total obligation beyond any minimum quantities and/or pricing as of the reporting date. Purchase obligations associated with renewal provisions solely at the option of the content provider are included to the extent such commitments are fixed or a minimum amount is specified. Energy agreements based on actual generation without a fixed or minimum volume commitment are not included. Our energy agreements generally provide the right to receive energy certificates for no additional consideration.\n(3) Includes asset retirement obligations, the estimated timing and amounts of payments for rent and tenant improvements associated with build-to-suit lease arrangements that are under construction, and liabilities associated with digital media content agreements with initial terms greater than one year. Excludes approximately $\\$ 6.5$ billion of income tax contingencies for which we cannot make a reasonably reliable estimate of the amount and period of payment, if any.\n\n# Suppliers \n\nDuring 2024, no vendor accounted for $10 \\%$ or more of our purchases. We generally do not have long-term contracts or arrangements with our vendors to guarantee the availability of merchandise, particular payment terms, or the extension of credit limits.\n\n## Other Contingencies\n\nWe are disputing claims and denials of refunds or credits, and monitoring or evaluating potential claims, related to various non-income taxes (such as sales, value added, consumption, service, and similar taxes), including in jurisdictions in which we already collect and remit these taxes. These non-income tax controversies typically include (i) the taxability of products and services, including cross-border intercompany transactions, (ii) collection and withholding on transactions with third parties, including as a result of evolving requirements imposed on marketplaces with respect to third-party sellers, and (iii) the adequacy of compliance with reporting obligations, including evolving documentation requirements. Due to the inherent complexity and uncertainty of these matters and the judicial and regulatory processes in certain jurisdictions, the final outcome of any such controversies may be materially different from our expectations.\n\n## Legal Proceedings\n\nThe Company is involved from time to time in claims, proceedings, and litigation, including the following:\nIn May 2018, Rensselaer Polytechnic Institute and CF Dynamic Advances LLC filed a complaint against Amazon.com, Inc. in the United States District Court for the Northern District of New York. The complaint alleged, among other things, that \"Alexa Voice Software and Alexa enabled devices\" infringe U.S. Patent No. 7,177,798, entitled \"Natural Language Interface Using Constrained Intermediate Dictionary of Results.\" The complaint sought an injunction, an unspecified amount of damages, enhanced damages, an ongoing royalty, interest, attorneys' fees, and costs. In March 2023, the plaintiffs alleged in their damages report that in the event of a finding of liability Amazon could be subject to $\\$ 140$ million to $\\$ 267$ million in damages. In March 2024, the district court granted summary judgment ruling that the patent is invalid and dismissed the case. In April 2024, the plaintiffs filed a notice of appeal. We dispute the allegations of wrongdoing and will continue to defend ourselves vigorously in this matter.\n\nIn December 2018, Kove IO, Inc. filed a complaint against Amazon Web Services, Inc. in the United States District Court for the Northern District of Illinois. The complaint alleged, among other things, that Amazon S3 and DynamoDB infringe U.S. Patent Nos. 7,814,170 and 7,103,640, each entitled \"Network Distributed Tracking Wire Transfer Protocol\"; and 7,233,978, entitled \"Method and Apparatus for Managing Location Information in a Network Separate from the Data to Which the Location Information Pertains.\" The complaint sought an unspecified amount of damages, enhanced damages, attorneys' fees, costs, interest, and injunctive relief. In April 2024, a jury found that Amazon infringed the asserted patents and awarded Kove $\\$ 525$ million in damages. In August 2024, the court awarded Kove $\\$ 148$ million in pre-judgment interest. In September 2024, we filed a notice of appeal. We disagree with the jury's findings and will continue to defend ourselves vigorously in this matter.\n\nBeginning in June 2019 with Wilcosky v. Amazon.com, Inc., now pending in the United States District Court for the Northern District of Illinois (\"N.D. Ill.\"), private litigants have filed a number of cases in U.S. federal and state courts, including Hogan v. Amazon.com, Inc. (N.D. Ill.), alleging, among other things, that Amazon's collection, storage, use, retention, and protection of biometric identifiers violated the Illinois Biometric Information Privacy Act. The complaints allege purported classes of Illinois residents who had biometric identifiers collected through Amazon products or services, including Amazon Photos, Alexa, AWS cloud services, Ring, Amazon Connect, Amazon's Flex driver app, and Amazon's virtual try-on technology. The complaints seek certification as class actions, unspecified amounts of damages, injunctive relief, attorneys' fees, costs, and interest. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nBeginning in March 2020 with Frame-Wilson v. Amazon.com, Inc. filed in the United States District Court for the Western District of Washington (\"W.D. Wash.\"), private litigants have filed a number of cases in the U.S. and Canada alleging, among other things, price fixing arrangements between Amazon.com, Inc. and vendors and third-party sellers in Amazon's stores, monopolization and attempted monopolization, and consumer protection and unjust enrichment claims. Attorneys General for the District of Columbia and California brought similar suits in May 2021 and September 2022 in the Superior Court of the District of Columbia and the California Superior Court for the County of San Francisco, respectively. Some of the private cases include allegations of several distinct purported classes, including consumers who purchased a product through Amazon's stores and consumers who purchased a product offered by Amazon through another e-commerce retailer. The complaints seek billions of dollars of alleged damages, treble damages, punitive damages, injunctive relief, civil penalties, attorneys' fees, and costs. The Federal Trade Commission and a number of state Attorneys General filed a similar lawsuit in September 2023 in the W.D. Wash. alleging violations of federal antitrust and state antitrust and consumer protection laws. That complaint alleges, among other things, that Amazon has a monopoly in markets for online superstores and marketplace\n\nservices, and unlawfully maintains those monopolies through anticompetitive practices relating to our pricing policies, advertising practices, the structure of Prime, and promotion of our own products on our website. The complaint seeks injunctive and structural relief, an unspecified amount of damages, and costs. In May 2024, the Attorney General of Arizona filed a complaint in the Superior Court of Arizona in Maricopa County alleging that Amazon's practices related to pricing and the Featured Offers in its stores violate state antitrust and consumer protection laws. That complaint also seeks injunctive relief, an unspecified amount of damages, civil penalties, and costs. Amazon's motions to dismiss were granted in part and denied in part in Frame-Wilson in March 2022 and March 2023, De Coster v. Amazon.com, Inc. (W.D. Wash.) in January 2023, and the California Attorney General's lawsuit in March 2023. All three courts dismissed claims alleging that Amazon's pricing policies are inherently illegal and denied dismissal of claims alleging that Amazon's pricing policies are an unlawful restraint of trade. In August 2024, the DC Court of Appeals overturned a prior decision by the DC Superior Court dismissing the DC Attorney General's lawsuit and that case is now proceeding. In September 2024, the United States District Court for the W.D. Wash. granted in part Amazon's motion to dismiss the suit brought by the FTC and certain state Attorneys General with respect to five state law claims and denied the motion with respect to the remaining claims. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nIn October 2020, Broadband iTV, Inc. filed a complaint against Amazon.com, Inc., Amazon.com Services LLC, and Amazon Web Services, Inc. in the United States District Court for the Western District of Texas. The complaint alleges, among other things, that certain Amazon Prime Video features and services infringe U.S. Patent Nos. 9,648,388, 10,546,750, and 10,536,751, each entitled \"Video-On-Demand Content Delivery System for Providing Video-On-Demand Services to TV Services Subscribers\"; 10,028,026, entitled \"System for Addressing On-Demand TV Program Content on TV Services Platform of a Digital TV Services Provider\"; and 9,973,825, entitled \"Dynamic Adjustment of Electronic Program Guide Displays Based on Viewer Preferences for Minimizing Navigation in VOD Program Selection.\" The complaint seeks an unspecified amount of damages. In April 2022, Broadband iTV alleged in its damages report that in the event of a finding of liability Amazon could be subject to $\\$ 166$ million to $\\$ 986$ million in damages. In September 2022, the district court granted summary judgment, holding that the patents are invalid. In October 2022, Broadband iTV filed a notice of appeal. In September 2024, the United States Court of Appeals for the Federal Circuit affirmed the district court's judgment. This decision is subject to appeal. We dispute the allegations of wrongdoing and will continue to defend ourselves vigorously in this matter.\n\nIn July 2021, the Luxembourg National Commission for Data Protection (the \"CNPD\") issued a decision against Amazon Europe Core S.à r.l. claiming that Amazon's processing of personal data did not comply with the EU General Data Protection Regulation. The decision imposes a fine of $€ 746$ million and corresponding practice revisions. We believe the CNPD's decision to be without merit and intend to defend ourselves vigorously in this matter.\n\nIn December 2021, the Italian Competition Authority (the \"ICA\") issued a decision against Amazon Services Europe S.à r.l., Amazon Europe Core S.à r.l., Amazon EU S.à r.l., Amazon Italia Services S.r.l., and Amazon Italia Logistica S.r.l. claiming that certain of our marketplace and logistics practices in Italy infringe EU competition rules. The decision imposes remedial actions and a fine of $€ 1.13$ billion, which we have paid and will seek to recover pending conclusion of all appeals. We believe the ICA's decision to be without merit and intend to defend ourselves vigorously in this matter.\n\nBeginning in October 2023, Nokia Technologies Oy and related entities filed complaints alleging infringement of patents related to video-related technologies against Amazon.com, Inc. and related entities in multiple courts in the United States, India, the United Kingdom, Germany, and Brazil, the Unified Patent Court of the European Union, and the United States International Trade Commission. The complaints allege, among other things, that certain Amazon Prime Video services and features of Amazon devices carrying the Prime Video app infringe Nokia's patents; some of the complaints additionally allege infringement by Freevee, Twitch, and Amazon voice assistants. The complaints seek, among other things, injunctive relief and, in some cases, unspecified money damages, enhanced damages, attorneys' fees, costs, interest, and declaratory relief. These matters are at various procedural stages, with preliminary and final injunctions issued in certain instances. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nIn addition, we are regularly subject to claims, litigation, and other proceedings, including potential regulatory proceedings, involving patent and other intellectual property matters, taxes, labor and employment, competition and antitrust, privacy and data protection, consumer protection, commercial disputes, goods and services offered by us and by third parties, and other matters.\n\nThe outcomes of our legal proceedings and other contingencies are inherently unpredictable, subject to significant uncertainties, and could be material to our operating results and cash flows for a particular period. We evaluate, on a regular basis, developments in our legal proceedings and other contingencies that could affect the amount of liability, including amounts in excess of any previous accruals and reasonably possible losses disclosed, and make adjustments and changes to our accruals and disclosures as appropriate. For the matters we disclose that do not include an estimate of the amount of loss or range of losses, such an estimate is not possible or is immaterial, and we may be unable to estimate the possible loss or range of losses that could potentially result from the application of non-monetary remedies. Until the final resolution of such matters, if any of our estimates and assumptions change or prove to have been incorrect, we may experience losses in excess of the\n\namounts recorded, which could have a material effect on our business, consolidated financial position, results of operations, or cash flows.\n\nSee also \"Note 9 - Income Taxes.\"\n\n# Note 8 - STOCKHOLDERS' EQUITY \n\n## Preferred Stock\n\nWe have authorized 500 million shares of $\\$ 0.01$ par value preferred stock. No preferred stock was outstanding for any year presented.\n\n## Common Stock\n\nCommon shares outstanding plus shares underlying outstanding stock awards totaled 10.6 billion, 10.8 billion, and 10.9 billion, as of December 31, 2022, 2023, and 2024. These totals include all vested and unvested stock awards outstanding, including those awards we estimate will be forfeited.\n\n## Stock Repurchase Activity\n\nIn March 2022, the Board of Directors authorized a program to repurchase up to $\\$ 10.0$ billion of our common stock, with no fixed expiration. We repurchased 46.2 million shares of our common stock for $\\$ 6.0$ billion in 2022. There were no repurchases of common stock in 2023 or 2024. As of December 31, 2024, we have $\\$ 6.1$ billion remaining under the repurchase program.\n\n## Stock Award Plans\n\nEmployees vest in restricted stock unit awards over the corresponding service term, generally between two and five years. The majority of restricted stock unit awards are granted at the date of hire or in Q2 as part of the annual compensation review and primarily vest semi-annually in Q2 and Q4 of the relevant compensation year.\n\n## Stock Award Activity\n\nStock-based compensation expense is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2022 | 2023 | 2024 |\n| Cost of sales | \\$ 757 | \\$ 836 | \\$ 838 |\n| Fulfillment | 2,745 | 3,090 | 2,973 |\n| Technology and infrastructure | 10,621 | 13,434 | 12,150 |\n| Sales and marketing | 3,875 | 4,623 | 4,084 |\n| General and administrative | 1,623 | 2,040 | 1,966 |\n| Total stock-based compensation expense (1) | \\$ 19,621 | \\$ 24,023 | \\$ 22,011 |\n\n(1) The related tax benefits were $\\$ 4.3$ billion, $\\$ 5.4$ billion, and $\\$ 5.0$ billion for 2022, 2023, and 2024.\n\nThe following table summarizes our restricted stock unit activity (in millions):\n\n|   |  | Weighted Average Grant-Date  |\n| --- | --- | --- |\n|   | Number of Units | Fair Value  |\n|  Outstanding as of January 1, 2022 | 279.9 | \\$ 134  |\n|  Units granted | 262.8 | 142  |\n|  Units vested | (113.3) | 114  |\n|  Units forfeited | (45.0) | 143  |\n|  Outstanding as of December 31, 2022 | 384.4 | 144  |\n|  Units granted | 218.1 | 106  |\n|  Units vested | (139.9) | 143  |\n|  Units forfeited | (56.8) | 135  |\n|  Outstanding as of December 31, 2023 | 405.8 | 125  |\n|  Units granted | 126.9 | 183  |\n|  Units vested | (209.7) | 132  |\n|  Units forfeited | (39.9) | 133  |\n|  Outstanding as of December 31, 2024 | 283.1 | 145  |\n\nScheduled vesting for outstanding restricted stock units as of December 31, 2024, is as follows (in millions):\n\n|   | Year Ended |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n|   | $\\mathbf{2 0 2 5}$ | $\\mathbf{2 0 2 6}$ | $\\mathbf{2 0 2 7}$ | $\\mathbf{2 0 2 8}$ | $\\mathbf{2 0 2 9}$ | Thereafter | Total  |\n|  Scheduled vesting — restricted stock units | 146.0 | 88.5 | 34.3 | 11.5 | 1.4 | 1.4 | 283.1  |\n\nAs of December 31, 2024, there was $\\$ 16.2$ billion of net unrecognized compensation cost related to unvested stock-based compensation arrangements. This compensation is recognized on an accelerated basis with more than half of the compensation expected to be expensed in the next twelve months, and has a remaining weighted-average recognition period of 1.0 year. The estimated forfeiture rate as of December 31, 2022, 2023, and 2024 was $26.5 \\%, 26.1 \\%$, and $25.6 \\%$.\n\nDuring 2022, 2023, and 2024, the fair value of restricted stock units that vested was $\\$ 12.8$ billion, $\\$ 17.6$ billion, and $\\$ 39.6$ billion.\n\n# Common Stock Available for Future Issuance\n\nAs of December 31, 2024, common stock available for future issuance to employees is 1.5 billion shares.\n\n## Note 9 - INCOME TAXES\n\nIn 2022, 2023, and 2024, we recorded a net tax provision (benefit) of $\\$(3.2)$ billion, $\\$ 7.1$ billion, and $\\$ 9.3$ billion. Our U.S. taxable income is reduced by accelerated depreciation deductions and increased by the impact of capitalized research and development expenses. Cash paid for income taxes, net of refunds, was $\\$ 6.0$ billion, $\\$ 11.2$ billion, and $\\$ 12.3$ billion for 2022, 2023, and 2024.\n\nCertain foreign subsidiary earnings and losses are subject to current U.S. taxation and the subsequent repatriation of those earnings is not subject to tax in the U.S. The U.S. tax rules also provide for enhanced accelerated depreciation deductions by allowing us to expense a portion of qualified property, primarily equipment. These enhanced deductions are scheduled to phase out annually from 2023 through 2026. Our federal tax provision included accelerated depreciation deductions for 2022, 2023, and 2024. Effective January 1, 2022, research and development expenses are required to be capitalized and amortized for U.S. tax purposes.\n\n|   | Year Ended December 31, |  |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  U.S. Federal: |  |  |   |\n|  Current | $2,175 | $8,652 | $9,039  |\n|  Deferred | (6,686) | (5,505) | (4,101)  |\n|  Total | (4,511) | 3,147 | 4,938  |\n|  U.S. State: |  |  |   |\n|  Current | 1,074 | 2,158 | 2,109  |\n|  Deferred | (1,302) | (498) | (453)  |\n|  Total | (228) | 1,660 | 1,656  |\n|  International: |  |  |   |\n|  Current | 1,682 | 2,186 | 2,765  |\n|  Deferred | (160) | 127 | (94)  |\n|  Total | 1,522 | 2,313 | 2,671  |\n|  Provision (benefit) for income taxes, net | $(3,217) | $7,120 | $9,265  |\n|  U.S. and international components of income (loss) before income taxes are as follows (in millions): | |   |   |   |\n|   | Year Ended December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  U.S. | $(8,225) | $32,328 | $61,947  |\n|  International | 2,289 | 5,229 | 6,667  |\n|  Income (loss) before income taxes | $(5,936) | $37,557 | $68,614  |\n|  The items accounting for differences between income taxes computed at the federal statutory rate and the provision (benefit) recorded for income taxes are as follows (in millions): | |   |   |   |\n|   | Year Ended December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  Income taxes computed at the federal statutory rate | $(1,246) | $7,887 | $14,409  |\n|  Effect of: |  |  |   |\n|  Tax impact of foreign earnings and losses | (370) | 594 | 199  |\n|  State taxes, net of federal benefits | (173) | 1,307 | 1,306  |\n|  Tax credits | (1,006) | (2,362) | (2,805)  |\n|  Stock-based compensation (1) | 612 | 1,047 | (1,688)  |\n|  Foreign income deduction (2) | (1,258) | (1,429) | (2,379)  |\n|  Other, net | 224 | 76 | 223  |\n|  Total | $(3,217) | $7,120 | $9,265  |\n|  (1) Includes non-deductible stock-based compensation and excess tax benefits or shortfalls from stock-based compensation. Our tax provision includes $33 million and $519 million of tax shortfalls from stock-based compensation for 2022 and 2023, and $2.8 billion of excess tax benefits from stock-based compensation for 2024.(2) U.S. companies are eligible for a deduction that lowers the effective tax rate on certain foreign income. This regime is referred to as the Foreign-Derived Intangible Income deduction and is dependent on the amount of our U.S. taxable income. | |   |   |   |\n|  We recorded a provision for income taxes in 2023 as compared to an income tax benefit in 2022 primarily due to an increase in pretax income, a decrease in the tax impact of foreign earnings and losses driven by a decline in the favorable effects of corporate restructuring transactions, and an increase in tax shortfalls from stock-based compensation. This was partially offset by an increase in federal research and development credits, which included approximately $600 million of tax benefit recorded in 2023 related to a change in the estimated qualifying expenditures associated with our 2022 U.S. federal R&D credit. | |   |   |   |\n|  Our provision for income taxes in 2024 was higher than in 2023 primarily due to an increase in pretax income, partially offset by an increase in excess tax benefits from stock-based compensation and an increase in our foreign income deduction. | |   |   |   |\n\nWe intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nDeferred income tax assets and liabilities are as follows (in millions):\n\n|   | December 31, |   |\n| --- | --- | --- |\n|   | 2023 | 2024  |\n|  Deferred tax assets (1): |  |   |\n|  Loss carryforwards U.S. - Federal/States | \\$ | 610  |\n|  Loss carryforwards - Foreign |  | 2,796  |\n|  Accrued liabilities, reserves, and other expenses |  | 3,751  |\n|  Stock-based compensation |  | 5,279  |\n|  Depreciation and amortization |  | 1,114  |\n|  Operating lease liabilities |  | 19,922  |\n|  Capitalized research and development |  | 14,800  |\n|  Other items |  | 745  |\n|  Tax credits |  | 1,582  |\n|  Total gross deferred tax assets |  | 50,599  |\n|  Less valuation allowances (2) |  | $(4,811)$  |\n|  Deferred tax assets, net of valuation allowances |  | 45,788  |\n|  Deferred tax liabilities: |  |   |\n|  Depreciation and amortization |  | $(12,454)$  |\n|  Operating lease assets |  | $(18,648)$  |\n|  Other items |  | $(1,489)$  |\n|  Net deferred tax assets (liabilities), net of valuation allowances |  | \\$ 13,197  |\n\n(1) Deferred tax assets are presented after tax effects and net of tax contingencies. (2) Relates primarily to deferred tax assets that would only be realizable upon the generation of net income in certain foreign taxing jurisdictions or future capital gains, as well as tax credits.\n\nOur valuation allowances primarily relate to foreign deferred tax assets, including substantially all of our foreign net operating loss carryforwards as of December 31, 2024. Our foreign net operating loss carryforwards for income tax purposes as of December 31, 2024 were approximately $\\$ 9.9$ billion before tax effects and certain of these amounts are subject to annual limitations under applicable tax law. If not utilized, a portion of these losses will begin to expire in 2025.\n\n# Income Tax Contingencies\n\nWe are subject to income taxes in the U.S. (federal and state) and numerous foreign jurisdictions. Significant judgment is required in evaluating our tax positions and determining our provision for income taxes. During the ordinary course of business, there are many transactions and calculations for which the ultimate tax determination is uncertain. We establish reserves for taxrelated uncertainties based on estimates of whether, and the extent to which, additional taxes will be due. These reserves are established when we believe that certain positions might be challenged despite our belief that our tax return positions are fully supportable. We adjust these reserves in light of changing facts and circumstances, such as the outcome of tax audits. The provision for income taxes includes the impact of reserve provisions and changes to reserves that are considered appropriate.\n\n|   | December 31, |   |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  Gross tax contingencies – January 1 | $3,242 | $4,002 | $5,228  |\n|  Gross increases to tax positions in prior periods | 274 | 440 | 154  |\n|  Gross decreases to tax positions in prior periods | (172) | (38) | (129)  |\n|  Gross increases to current period tax positions | 706 | 1,009 | 1,392  |\n|  Settlements with tax authorities | (20) | (106) | (9)  |\n|  Lapse of statute of limitations | (28) | (79) | (151)  |\n|  Gross tax contingencies – December 31 (1) | $4,002 | $5,228 | $6,485  |\n|  (1) As of December 31, 2024, we had approximately $6.5 billion of income tax contingencies of which $4.4 billion, if fully recognized, would decrease our effective tax rate. |  |  |   |\n|  As of December 31, 2023 and 2024, we had accrued interest and penalties, net of federal income tax benefit, related to tax contingencies of $194 million and $316 million. Interest and penalties, net of federal income tax benefit, recognized for the years ended December 31, 2022, 2023, and 2024 were $(7) million, $91 million, and $121 million. |  |  |   |\n|  We are under examination, or may be subject to examination, by the Internal Revenue Service for the calendar year 2016 and thereafter. These examinations may lead to ordinary course adjustments or proposed adjustments to our taxes or our net operating losses with respect to years under examination as well as subsequent periods. |  |  |   |\n|  We are also subject to taxation in various states and foreign jurisdictions including China, France, Germany, India, Japan, Luxembourg, and the United Kingdom. We are under, or may be subject to, audit or examination and additional assessments by the relevant authorities in respect of these particular jurisdictions primarily for 2011 and thereafter. We are currently disputing tax assessments in multiple jurisdictions, including with respect to the allocation and characterization of income. |  |  |   |\n|  In September 2022, the Luxembourg tax authority (“LTA”) denied the tax basis of certain intangible assets that we distributed from Luxembourg to the U.S. in 2021. When we are assessed by the LTA, we will need to remit taxes related to this matter. We believe the LTA’s position is without merit, we intend to defend ourselves vigorously in this matter, and we expect to recoup taxes paid. |  |  |   |\n|  The Indian tax authority (“ITA”) has asserted that tax applies to cloud services fees paid to Amazon in the U.S. We will need to remit taxes related to this matter until it is resolved, which payments could be significant in the aggregate. We believe the ITA’s position is without merit, we are defending our position vigorously, and we expect to recoup taxes paid. If this matter is adversely resolved, we could recognize significant additional tax expense, including for taxes previously paid. |  |  |   |\n|  Changes in tax laws, regulations, administrative practices, principles, and interpretations may impact our tax contingencies. Due to various factors, including the inherent complexities and uncertainties of the judicial, administrative, and regulatory processes in certain jurisdictions, the timing of the resolution of income tax controversies is highly uncertain, and the amounts ultimately paid, if any, upon resolution of the issues raised by the taxing authorities may differ from the amounts accrued. It is reasonably possible that within the next twelve months we will receive additional assessments by various tax authorities or possibly reach resolution of income tax controversies in one or more jurisdictions. These assessments or settlements could result in changes to our contingencies related to positions on prior years’ tax filings. The actual amount of any change could vary significantly depending on the ultimate timing and nature of any settlements. We cannot currently provide an estimate of the range of possible outcomes. |  |  |   |\n|  Note 10 — SEGMENT INFORMATION |  |  |   |\n|  We have organized our operations into three segments: North America, International, and AWS. We allocate to segment results the operating expenses “Fulfillment,” “Technology and infrastructure,” “Sales and marketing,” and “General and administrative” based on usage, which is generally reflected in the segment in which the costs are incurred. The majority of technology costs recorded in “Technology and infrastructure” are incurred in the U.S. and are included in our North America and AWS segments. The majority of infrastructure costs recorded in “Technology and infrastructure” are allocated to the AWS segment based on usage. There are no internal revenue transactions between our reportable segments. Our chief operating decision maker (“CODM”) is our President and Chief Executive Officer. Our CODM regularly reviews consolidated net sales, consolidated operating expenses, and consolidated operating income (loss) by segment. Amounts included in consolidated operating expenses include “Cost of sales,” “Fulfillment,” “Technology and infrastructure,” “Sales and marketing,” “General and administrative,” and “Other operating expense (income), net.” Our CODM manages our business primarily by reviewing consolidated results by segment on a quarterly basis, and using those results along with forecasts and other non-financial information in our annual budgeting process. |  |  |   |\n\n# North America \n\nThe North America segment primarily consists of amounts earned from retail sales of consumer products (including from sellers) and advertising and subscription services through North America-focused online and physical stores. This segment includes export sales from these online stores.\n\n## International\n\nThe International segment primarily consists of amounts earned from retail sales of consumer products (including from sellers) and advertising and subscription services through internationally-focused online stores. This segment includes export sales from these internationally-focused online stores (including export sales from these online stores to customers in the U.S., Mexico, and Canada), but excludes export sales from our North America-focused online stores.\n\n## AWS\n\nThe AWS segment consists of amounts earned from global sales of compute, storage, database, and other services for start-ups, enterprises, government agencies, and academic institutions.\n\nInformation on reportable segments and reconciliation to consolidated net income (loss) is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2022 | 2023 | 2024 |\n| North America |  |  |  |\n| Net sales | \\$ 315,880 | \\$ 352,828 | \\$ 387,497 |\n| Operating expenses | 318,727 | 337,951 | 362,530 |\n| Operating income (loss) | \\$ $(2,847)$ | \\$ 14,877 | \\$ 24,967 |\n| International |  |  |  |\n| Net sales | \\$ 118,007 | \\$ 131,200 | \\$ 142,906 |\n| Operating expenses | 125,753 | 133,856 | 139,114 |\n| Operating income (loss) | \\$ $(7,746)$ | \\$ $(2,656)$ | \\$ 3,792 |\n| AWS |  |  |  |\n| Net sales | \\$ 80,096 | \\$ 90,757 | \\$ 107,556 |\n| Operating expenses | 57,255 | 66,126 | 67,722 |\n| Operating income | \\$ 22,841 | \\$ 24,631 | \\$ 39,834 |\n| Consolidated |  |  |  |\n| Net sales | \\$ 513,983 | \\$ 574,785 | \\$ 637,959 |\n| Operating expenses | 501,735 | 537,933 | 569,366 |\n| Operating income | 12,248 | 36,852 | 68,593 |\n| Total non-operating income (expense) | $(18,184)$ | 705 | 21 |\n| Benefit (provision) for income taxes | 3,217 | $(7,120)$ | $(9,265)$ |\n| Equity-method investment activity, net of tax | (3) | (12) | (101) |\n| Net income (loss) | \\$ $(2,722)$ | \\$ 30,425 | \\$ 59,248 |\n\n|  Net sales by groups of similar products and services, which also have similar economic characteristics, is as follows (in millions): | Year Ended December 31, |  |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  Net Sales: |  |  |   |\n|  Online stores (1) | $220,004 | $231,872 | $247,029  |\n|  Physical stores (2) | 18,963 | 20,030 | 21,215  |\n|  Third-party seller services (3) | 117,716 | 140,053 | 156,146  |\n|  Advertising services (4) | 37,739 | 46,906 | 56,214  |\n|  Subscription services (5) | 35,218 | 40,209 | 44,374  |\n|  AWS | 80,096 | 90,757 | 107,556  |\n|  Other (6) | 4,247 | 4,958 | 5,425  |\n|  Consolidated | $513,983 | $574,785 | $637,959  |\n|  (1) Includes product sales and digital media content where we record revenue gross. We leverage our retail infrastructure to offer a wide selection of consumable and durable goods that includes media products available in both a physical and digital format, such as books, videos, games, music, and software. These product sales include digital products sold on a transactional basis. Digital media content subscriptions that provide unlimited viewing or usage rights are included in “Subscription services.” |  |  |   |\n|  (2) Includes product sales where our customers physically select items in a store. Sales to customers who order goods online for delivery or pickup at our physical stores are included in “Online stores.” |  |  |   |\n|  (3) Includes commissions and any related fulfillment and shipping fees, and other third-party seller services. |  |  |   |\n|  (4) Includes sales of advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising. |  |  |   |\n|  (5) Includes annual and monthly fees associated with Amazon Prime memberships, as well as digital video, audiobook, digital music, e-book, and other non-AWS subscription services. |  |  |   |\n|  (6) Includes sales related to various other offerings, such as healthcare services, certain licensing and distribution of video content, and shipping services, and our co-branded credit card agreements. |  |  |   |\n|  Net sales are attributed to countries primarily based on country-focused online and physical stores or, for AWS purposes, the selling entity. Net sales attributed to countries that represent a significant portion of consolidated net sales are as follows (in millions): |  |  |   |\n|   | Year Ended December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  United States | $356,113 | $395,637 | $438,015  |\n|  Germany | 33,598 | 37,588 | 40,856  |\n|  United Kingdom | 30,074 | 33,591 | 37,855  |\n|  Japan | 24,396 | 26,002 | 27,401  |\n|  Rest of world | 69,802 | 81,967 | 93,832  |\n|  Consolidated | $513,983 | $574,785 | $637,959  |\n\n|  Total segment assets exclude corporate assets, such as cash and cash equivalents, marketable securities, other long-term investments, corporate facilities, goodwill and other acquired intangible assets, and tax assets. Technology infrastructure assets are allocated among the segments based on usage, with the majority allocated to the AWS segment. Total segment assets reconciled to consolidated amounts are as follows (in millions): |  |  |   |\n| --- | --- | --- | --- |\n|   | December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  North America (1) | $185,268 | $196,029 | $210,120  |\n|  International (1) | 64,666 | 69,718 | 69,487  |\n|  AWS (2) | 88,491 | 108,533 | 155,953  |\n|  Corporate | 124,250 | 153,574 | 189,334  |\n|  Consolidated | $462,675 | $527,854 | $624,894  |\n|  (1) | North America and International segment assets primarily consist of property and equipment, operating leases, inventory, accounts receivable, and digital video and music content.  |   |   |\n|  (2) | AWS segment assets primarily consist of property and equipment, accounts receivable, and operating leases.  |   |   |\n|   | Property and equipment, net by segment is as follows (in millions): |  |   |\n|   |  | December 31, |   |\n|   | 2022 | 2023 | 2024  |\n|  North America | $90,076 | $93,632 | $103,041  |\n|  International | 23,347 | 24,357 | 25,618  |\n|  AWS | 60,324 | 72,701 | 110,683  |\n|  Corporate | 12,968 | 13,487 | 13,323  |\n|  Consolidated | $186,715 | $204,177 | $252,665  |\n|  Total net additions to property and equipment include technology infrastructure assets, which are allocated among the segments based on usage, with the majority allocated to the AWS segment. Total net additions to property and equipment include the effect of non-cash activity such as property and equipment acquired but not yet paid for. Total net additions to property and equipment are as follows (in millions): |  |  |   |\n|   | Year Ended December 31, |  |   |\n|   | 2022 | 2023 | 2024  |\n|  North America (1) | $23,682 | $17,529 | $24,348  |\n|  International (1) | 6,711 | 4,144 | 6,643  |\n|  AWS (2) | 27,755 | 24,843 | 53,267  |\n|  Corporate | 2,688 | 1,828 | 1,494  |\n|  Consolidated | $60,836 | $48,344 | $85,752  |\n|  (1) | Includes property and equipment added under finance leases of $422 million, $525 million, and $616 million in 2022, 2023, and 2024, and under build-to-suit lease arrangements of $3.2 billion, $356 million, and $89 million in 2022, 2023, and 2024. |  |   |\n|  (2) | Includes property and equipment added under finance leases of $253 million, $117 million, and $238 million in 2022, 2023, and 2024, and under build-to-suit lease arrangements of $20 million, $1 million, and $8 million in 2022, 2023, and 2024. |  |   |\n|   | U.S. property and equipment, net and operating leases were $180.0 billion, $196.0 billion, and $241.6 billion, as of December 31, 2022, 2023, and 2024, and non-U.S. property and equipment, net and operating leases were $72.9 billion, $80.7 billion, and $87.2 billion as of December 31, 2022, 2023, and 2024. Except for the U.S., property and equipment, net and operating leases in any single country were less than 10% of consolidated property and equipment, net and operating leases. |  |   |\n\nDepreciation and amortization expense on property and equipment, including corporate property and equipment, are allocated to all segments based on usage. Total depreciation and amortization expense, by segment, is as follows (in millions):\n\n|   | Year Ended December 31, |  |   |\n| --- | --- | --- | --- |\n|   | 2022 | 2023 | 2024  |\n|  North America | \\$ | 11,565 | \\$ 13,678  |\n|  International |  | 3,483 | 4,016  |\n|  AWS |  | 9,876 | 12,531  |\n|  Consolidated | \\$ | 24,924 | \\$ 30,225  |\n\n# Item 9. Changes in and Disagreements with Accountants On Accounting and Financial Disclosure \n\nNone.\n\n## Item 9A. Controls and Procedures\n\n## Evaluation of Disclosure Controls and Procedures\n\nWe carried out an evaluation required by the Securities Exchange Act of 1934 (the \"1934 Act\"), under the supervision and with the participation of our principal executive officer and principal financial officer, of the effectiveness of the design and operation of our disclosure controls and procedures, as defined in Rule 13a-15(e) of the 1934 Act, as of December 31, 2024. Based on this evaluation, our principal executive officer and principal financial officer concluded that, as of December 31, 2024, our disclosure controls and procedures were effective to provide reasonable assurance that information required to be disclosed by us in the reports that we file or submit under the 1934 Act is recorded, processed, summarized, and reported within the time periods specified in the SEC's rules and forms and to provide reasonable assurance that such information is accumulated and communicated to our management, including our principal executive officer and principal financial officer, as appropriate to allow timely decisions regarding required disclosure.\n\n## Management's Report on Internal Control over Financial Reporting\n\nManagement is responsible for establishing and maintaining adequate internal control over financial reporting, as defined in Rule 13a-15(f) of the 1934 Act. Management has assessed the effectiveness of our internal control over financial reporting as of December 31, 2024 based on criteria established in Internal Control - Integrated Framework (2013) issued by the Committee of Sponsoring Organizations of the Treadway Commission. As a result of this assessment, management concluded that, as of December 31, 2024, our internal control over financial reporting was effective in providing reasonable assurance regarding the reliability of financial reporting and the preparation of financial statements for external purposes in accordance with generally accepted accounting principles. Ernst \\& Young has independently assessed the effectiveness of our internal control over financial reporting and its report is included below.\n\n## Changes in Internal Control Over Financial Reporting\n\nThere were no changes in our internal control over financial reporting during the quarter ended December 31, 2024 that materially affected, or are reasonably likely to materially affect, our internal control over financial reporting.\n\n## Limitations on Controls\n\nOur disclosure controls and procedures and internal control over financial reporting are designed to provide reasonable assurance of achieving their objectives as specified above. Management does not expect, however, that our disclosure controls and procedures or our internal control over financial reporting will prevent or detect all error and fraud. Any control system, no matter how well designed and operated, is based upon certain assumptions and can provide only reasonable, not absolute, assurance that its objectives will be met. Further, no evaluation of controls can provide absolute assurance that misstatements due to error or fraud will not occur or that all control issues and instances of fraud, if any, within the Company have been detected.\n\n# Report of Independent Registered Public Accounting Firm \n\nThe Board of Directors and Shareholders\nAmazon.com, Inc.\n\n## Opinion on Internal Control Over Financial Reporting\n\nWe have audited Amazon.com, Inc.'s internal control over financial reporting as of December 31, 2024, based on criteria established in Internal Control-Integrated Framework issued by the Committee of Sponsoring Organizations of the Treadway Commission (2013 framework) (the COSO criteria). In our opinion, Amazon.com, Inc. (the Company) maintained, in all material respects, effective internal control over financial reporting as of December 31, 2024, based on the COSO criteria.\n\nWe also have audited, in accordance with the standards of the Public Company Accounting Oversight Board (United States) (PCAOB), the consolidated balance sheets of the Company as of December 31, 2024 and 2023, the related consolidated statements of operations, comprehensive income (loss), stockholders' equity, and cash flows for each of the three years in the period ended December 31, 2024, and the related notes and our report dated February 6, 2025 expressed an unqualified opinion thereon.\n\n## Basis for Opinion\n\nThe Company's management is responsible for maintaining effective internal control over financial reporting, and for its assessment of the effectiveness of internal control over financial reporting included in the accompanying Management's Report on Internal Control over Financial Reporting. Our responsibility is to express an opinion on the Company's internal control over financial reporting based on our audit. We are a public accounting firm registered with the PCAOB and are required to be independent with respect to the Company in accordance with the U.S. federal securities laws and the applicable rules and regulations of the Securities and Exchange Commission and the PCAOB.\n\nWe conducted our audit in accordance with the standards of the PCAOB. Those standards require that we plan and perform the audit to obtain reasonable assurance about whether effective internal control over financial reporting was maintained in all material respects.\n\nOur audit included obtaining an understanding of internal control over financial reporting, assessing the risk that a material weakness exists, testing and evaluating the design and operating effectiveness of internal control based on the assessed risk, and performing such other procedures as we considered necessary in the circumstances. We believe that our audit provides a reasonable basis for our opinion.\n\n## Definition and Limitations of Internal Control Over Financial Reporting\n\nA company's internal control over financial reporting is a process designed to provide reasonable assurance regarding the reliability of financial reporting and the preparation of financial statements for external purposes in accordance with generally accepted accounting principles. A company's internal control over financial reporting includes those policies and procedures that (1) pertain to the maintenance of records that, in reasonable detail, accurately and fairly reflect the transactions and dispositions of the assets of the company; (2) provide reasonable assurance that transactions are recorded as necessary to permit preparation of financial statements in accordance with generally accepted accounting principles, and that receipts and expenditures of the company are being made only in accordance with authorizations of management and directors of the company; and (3) provide reasonable assurance regarding prevention or timely detection of unauthorized acquisition, use, or disposition of the company's assets that could have a material effect on the financial statements.\n\nBecause of its inherent limitations, internal control over financial reporting may not prevent or detect misstatements. Also, projections of any evaluation of effectiveness to future periods are subject to the risk that controls may become inadequate because of changes in conditions, or that the degree of compliance with the policies or procedures may deteriorate.\n\n# Item 9B. Other Information \n\nOn November 7, 2024, Douglas Herrington, CEO Worldwide Amazon Stores, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 158,970 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2025, subject to certain conditions.\n\nOn November 7, 2024, Shelley Reynolds, Vice President, Worldwide Controller, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 16,938 shares of Amazon.com, Inc. common stock over a period ending on November 29, 2025, subject to certain conditions.\n\nOn November 11, 2024, Brian Olsavsky, Senior Vice President and Chief Financial Officer, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 32,370 shares of Amazon.com, Inc. common stock over a period ending on May 30,2025 , subject to certain conditions.\n\nOn November 12, 2024, David Zapolsky, Senior Vice President, Global Public Policy and General Counsel, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 87,070 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2025, subject to certain conditions.\n\nOn November 18, 2024, Andrew Jassy, President and Chief Executive Officer, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 80,400 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2025, subject to certain conditions.\n\n## Item 9C. Disclosure Regarding Foreign Jurisdictions that Prevent Inspections\n\nNot applicable.\n\n## PART III\n\n## Item 10. Directors, Executive Officers, and Corporate Governance\n\nInformation regarding our Executive Officers required by Item 10 of Part III is set forth in Item 1 of Part I \"Business Information About Our Executive Officers.\" Information required by Item 10 of Part III regarding our Directors and any material changes to the process by which security holders may recommend nominees to the Board of Directors is included in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders, and is incorporated herein by reference. Information relating to our Code of Business Conduct and Ethics, insider trading policies and procedures, and, to the extent applicable, compliance with Section 16(a) of the 1934 Act is set forth in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders and is incorporated herein by reference. To the extent permissible under Nasdaq rules, we intend to disclose amendments to our Code of Business Conduct and Ethics, as well as waivers of the provisions thereof, on our investor relations website under the heading \"Corporate Governance\" at amazon.com/ir.\n\n## Item 11. Executive Compensation\n\nInformation required by Item 11 of Part III is included in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n## Item 12. Security Ownership of Certain Beneficial Owners and Management and Related Shareholder Matters\n\nInformation required by Item 12 of Part III is included in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n## Item 13. Certain Relationships and Related Transactions, and Director Independence\n\nInformation required by Item 13 of Part III is included in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n# Item 14. Principal Accountant Fees and Services \n\nInformation required by Item 14 of Part III is included in our Proxy Statement relating to our 2025 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n# PART IV \n\n## Item 15. Exhibits, Financial Statement Schedules\n\n(a) List of Documents Filed as a Part of This Report:\n(1) Index to Consolidated Financial Statements:\n\nReport of Ernst \\& Young LLP, Independent Registered Public Accounting Firm\nConsolidated Statements of Cash Flows for each of the three years ended December 31, 2024\nConsolidated Statements of Operations for each of the three years ended December 31, 2024\nConsolidated Statements of Comprehensive Income (Loss) for each of the three years ended December 31, 2024\n\nConsolidated Balance Sheets as of December 31, 2023 and 2024\nConsolidated Statements of Stockholders’ Equity for each of the three years ended December 31, 2024\nNotes to Consolidated Financial Statements\nReport of Ernst \\& Young LLP, Independent Registered Public Accounting Firm\n(2) Index to Financial Statement Schedules:\n\nAll schedules have been omitted because the required information is included in the consolidated financial statements or the notes thereto, or because it is not required.\n(3) Index to Exhibits\n\nSee exhibits listed under Part (b) below.\n(b) Exhibits:\n\nExhibit Number\n\n3.1 Amended and Restated Certificate of Incorporation of Amazon.com, Inc. (incorporated by reference to the Company's Current Report on Form 8-K, filed May 27, 2022).\n3.2 Amended and Restated Bylaws of Amazon.com, Inc. (incorporated by reference to the Company's Current Report on Form 8-K, filed May 3, 2024).\n4.1 Indenture, dated as of November 29, 2012, between Amazon.com, Inc. and Wells Fargo Bank, National Association, as trustee (incorporated by reference to the Company's Current Report on Form 8-K, filed November 29, 2012).\n4.2 Supplemental Indenture, dated as of April 13, 2022, among Amazon.com, Inc., Wells Fargo Bank, National Association, as prior trustee, and Computershare Trust Company, National Association, as successor trustee, containing Form of $2.730 \\%$ Note due 2024, Form of $3.000 \\%$ Note due 2025, Form of $3.300 \\%$ Note due 2027, Form of $3.450 \\%$ Note due 2029, Form of $3.600 \\%$ Note due 2032, Form of $3.950 \\%$ Note due 2052, and Form of $4.100 \\%$ Note due 2062 (incorporated by reference to the Company's Current Report on Form 8-K, filed April 13, 2022).\n4.3 Officers' Certificate of Amazon.com, Inc., dated as of December 5, 2014, containing Form of 2.600\\% Note due 2019, Form of $3.300 \\%$ Note due 2021, Form of $3.800 \\%$ Note due 2024, Form of $4.800 \\%$ Note due 2034, and Form of $4.950 \\%$ Note due 2044 (incorporated by reference to the Company's Current Report on Form 8-K, filed December 5, 2014).\n4.4 Officers' Certificate of Amazon.com, Inc., dated as of August 22, 2017, containing Form of 1.900\\% Note due 2020, Form of $2.400 \\%$ Note due 2023, Form of $2.800 \\%$ Note due 2024, Form of $3.150 \\%$ Note due 2027, Form of $3.875 \\%$ Note due 2037, Form of $4.050 \\%$ Note due 2047, and Form of $4.250 \\%$ Note due 2057 (incorporated by reference to the Company's Current Report on Form 8-K, filed August 22, 2017).\n4.5 Officers' Certificate of Amazon.com, Inc., dated as of December 20, 2017, containing Form of 5.200\\% Note due 2025 (incorporated by reference to the Company's Current Report on Form 8-K, filed December 20, 2017).\n\n|  4.6 | Officers’ Certificate of Amazon.com, Inc., dated as of June 3, 2020, containing Form of 0.400% Note due 2023, Form of 0.800% Note due 2025, Form of 1.200% Note due 2027, Form of 1.500% Note due 2030, Form of 2.500% Note due 2050, and Form of 2.700% Note due 2060 (incorporated by reference to the Company’s Current Report on Form 8-K, filed June 3, 2020).  |\n| --- | --- |\n|  4.7 | Officers’ Certificate of Amazon.com, Inc., dated as of May 12, 2021, containing Form of 0.250% Note due 2023, Form of 0.450% Note due 2024, Form of 1.000% Note due 2026, Form of 1.650% Note due 2028, Form of 2.100% Note due 2031, Form of 2.875% Note due 2041, Form of 3.100% Note due 2051, and Form of 3.250% Note due 2061 (incorporated by reference to the Company’s Current Report on Form 8-K, filed May 12, 2021).  |\n|  4.8 | Officers’ Certificate of Amazon.com, Inc., dated as of December 1, 2022, containing Form of 4.700% Note due 2024, Form of 4.600% Note due 2025, Form of 4.550% Note due 2027, Form of 4.650% Note due 2029, and Form of 4.700% Note due 2032 (incorporated by reference to the Company’s Current Report on Form 8-K, filed December 1, 2022).  |\n|  4.9 | Description of Securities (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2019).  |\n|  10.1† | 1997 Stock Incentive Plan (amended and restated) (incorporated by reference to the Company’s Quarterly Report on Form 10-Q for the Quarter ended June 30, 2022).  |\n|  10.2† | 1999 Nonofficer Employee Stock Option Plan (amended and restated) (incorporated by reference to the Company’s Quarterly Report on Form 10-Q for the Quarter ended June 30, 2022).  |\n|  10.3† | Form of Indemnification Agreement between Amazon.com, Inc. and each of its Directors (incorporated by reference to Exhibit 10.1 to the Company’s Registration Statement on Form S-1 (Registration No. 333-23795) filed March 24, 1997, as amended on April 21, 1997).  |\n|  10.4† | Form of Restricted Stock Unit Agreement for Officers and Employees (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2002).  |\n|  10.5† | Form of Restricted Stock Unit Agreement for Directors (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2002).  |\n|  10.6† | Form of Restricted Stock Agreement (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2001).  |\n|  10.7† | Form of Global Restricted Stock Unit Award Agreement for Executive Officers (incorporated by reference to the Company's Annual Report on Form 10-K for the Year ended December 31, 2023).  |\n|  10.8 | Five-Year Revolving Credit Agreement, dated as of November 1, 2023, among Amazon.com, Inc., Citibank N.A., as administrative agent, and the lenders party thereto (incorporated by reference to the Company’s Current Report on Form 8-K, filed November 1, 2023).  |\n|  10.9 | 364-Day Revolving Credit Agreement, dated as of October 30, 2024, among Amazon.com, Inc., Citibank N.A., as administrative agent, and the lenders party thereto (incorporated by reference to the Company’s Quarterly Report on Form 10-Q for the Quarter ended September 30, 2024).  |\n|  19.1 | Amazon.com, Inc. Insider Trading Policy.  |\n|  21.1 | List of Significant Subsidiaries.  |\n|  23.1 | Consent of Independent Registered Public Accounting Firm.  |\n|  31.1 | Certification of Andrew R. Jassy, President and Chief Executive Officer of Amazon.com, Inc., pursuant to Rule 13a-14(a) under the Securities Exchange Act of 1934.  |\n|  31.2 | Certification of Brian T. Olsavsky, Senior Vice President and Chief Financial Officer of Amazon.com, Inc., pursuant to Rule 13a-14(a) under the Securities Exchange Act of 1934.  |\n|  32.1 | Certification of Andrew R. Jassy, President and Chief Executive Officer of Amazon.com, Inc., pursuant to 18 U.S.C. Section 1350.  |\n\n|  32.2 | Certification of Brian T. Olsavsky, Senior Vice President and Chief Financial Officer of Amazon.com, Inc., pursuant to 18 U.S.C. Section 1350.  |\n| --- | --- |\n|   | Amazon.com, Inc. Clawback Policy (incorporated by reference to the Company's Annual Report on Form 10-K for the Year ended December 31, 2023).  |\n|  101 | The following financial statements from the Company’s Annual Report on Form 10-K for the year ended December 31, 2024, formatted in Inline XBRL: (i) Consolidated Statements of Cash Flows, (ii) Consolidated Statements of Operations, (iii) Consolidated Statements of Comprehensive Income (Loss), (iv) Consolidated Balance Sheets, (v) Consolidated Statements of Stockholders’ Equity, and (vi) Notes to Consolidated Financial Statements, tagged as blocks of text and including detailed tags.As permitted by Item 601(b)(4)(iii)(A) of Regulation S-K, the Company has not filed with this Annual Report on Form 10-K certain instruments defining the rights of holders of long-term debt of the Company and its subsidiaries because the total amount of securities authorized thereunder does not exceed 10 percent of the total assets of the Company and its subsidiaries on a consolidated basis. The Company agrees to furnish a copy of such agreements to the Commission upon request.  |\n|  104 | The cover page from the Company’s Annual Report on Form 10-K for the year ended December 31, 2024, formatted in Inline XBRL (included as Exhibit 101).  |\n\n# SIGNATURES \n\nPursuant to the requirements of Section 13 or 15(d) of the Securities Exchange Act of 1934, the registrant has duly caused this Report to be signed on its behalf by the undersigned, thereunto duly authorized, as of February 6, 2025.\n\nAMAZON.COM, INC.\n\nBy: $\\qquad$ /s/ Andrew R. Jassy\n\n## Andrew R. Jassy <br> President and Chief Executive Officer\n\nPursuant to the requirements of the Securities Exchange Act of 1934, this Report has been signed below by the following persons on behalf of the registrant and in the capacities indicated as of February 6, 2025.\n\n| Signature | Title |\n| :--: | :--: |\n| /s/ Andrew R. Jassy |  |\n| Andrew R. Jassy | President and Chief Executive Officer (Principal Executive Officer) and Director |\n| /s/ Brian T. Olsavsky |  |\n| Brian T. Olsavsky | Senior Vice President and Chief Financial Officer (Principal Financial Officer) |\n| /s/ Shelley L. Reynolds |  |\n| Shelley L. Reynolds | Vice President, Worldwide Controller (Principal Accounting Officer) |\n| /s/ Jeffrey P. Bezos | Executive Chair |\n| Jeffrey P. Bezos |  |\n| /s/ Keith B. Alexander | Director |\n| Keith B. Alexander | Director |\n| /s/ Edith W. Cooper |  |\n| Edith W. Cooper | Director |\n| /s/ Jamie S. Gorelick |  |\n| Jamie S. Gorelick | Director |\n| /s/ Daniel P. Huttenlocher |  |\n| Daniel P. Huttenlocher | Director |\n| /s/ Andrew Y. Ng | Director |\n| Andrew Y. Ng | Director |\n| /s/ Indra K. Nooyi |  |\n| Indra K. Nooyi | Director |\n| /s/ Jonathan J. Rubinstein |  |\n| Jonathan J. Rubinstein | Director |\n| /s/ Brad D. Smith |  |\n| Brad D. Smith | Director |\n| /s/ Patricia Q. Stonesifer |  |\n| Patricia Q. Stonesifer | Director |\n| /s/ Wendell P. Weeks |  |\n| Wendell P. Weeks | Director |\n\n# Stock Price Performance Graph \n\nThe graph set forth below compares cumulative total return on the common stock with the cumulative total return of the NYSE Technology Index, the S\\&P 500 Index, and the S\\&P 500 Consumer Discretionary Distribution \\& Retail Index, resulting from an initial investment of $\\$ 100$ in each and, except in the case of the NYSE Technology Index, assuming the reinvestment of any dividends, based on closing prices. Measurement points are the last trading day of each of Amazon's fiscal years ended December 31, 2019, 2020, 2021, 2022, 2023, and 2024.\n![img-2.jpeg](img-2.jpeg)\n\nNote: Stock price performance shown in the Stock Price Performance Graph for the common stock is historical and not necessarily indicative of future price performance.\n\n![img-3.jpeg](img-3.jpeg)\n\nMIX\nPaper from responsible sources\nFSC\nFSC® C103573","airweave_system_metadata":{"source_name":"google_drive","entity_type":"GoogleDriveFileEntity","sync_id":"fc35b7d2-5f26-409b-988d-288d322bffc6","sync_job_id":"55ed7cd1-0f08-4d86-9027-0594e96ac986","hash":"bbf9bfc73c5344156df6592653b932b92ace11ff1a7540c8aa76ef6a2949cb59","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://www.googleapis.com/drive/v3/files/1wg2fKDoYTrONKXrut1E69yZmQRHEAWhJ?alt=media","size":1314791,"file_type":"pdf","mime_type":"application/pdf","local_path":"/tmp/airweave/processing/55ed7cd1-0f08-4d86-9027-0594e96ac986/4dee1b13-c812-4907-80c3-b7908d230267-Amazon-2024-Annual-Report.pdf","file_id":"1wg2fKDoYTrONKXrut1E69yZmQRHEAWhJ","title":"Amazon-2024-Annual-Report.pdf","created_time":"2025-12-02T00:08:49.951000Z","modified_time":"2025-11-05T11:46:48Z","description":null,"starred":false,"trashed":false,"explicitly_trashed":false,"parents":["1JGFkudZ0KIuEA73ENKAQWn9ALxrA9H-H"],"owners":[],"shared":false,"web_view_link":"https://drive.google.com/file/d/1wg2fKDoYTrONKXrut1E69yZmQRHEAWhJ/view?usp=drivesdk","icon_link":"https://drive-thirdparty.googleusercontent.com/16/type/application/pdf","md5_checksum":"ccd6f288c5932db44e758678ba810bbb","shared_with_me_time":null,"modified_by_me_time":null,"viewed_by_me_time":null,"web_url":"https://drive.google.com/file/d/1wg2fKDoYTrONKXrut1E69yZmQRHEAWhJ/view?usp=drivesdk"}
{"entity_id":"1ptT2zH7b7fHP79g9QiTIjzkg8rTQE-2y","breadcrumbs":[{"entity_id":"my_drive","name":"My Drive","entity_type":"GoogleDriveDriveEntity"}],"name":"Amazon-com-Inc-2023-Annual-Report.pdf","created_at":"2025-12-02T00:08:51.996000Z","updated_at":"2025-11-05T11:46:52Z","textual_representation":"# Metadata\n\n**Source**: google_drive\n**Type**: GoogleDriveFileEntity\n**Name**: Amazon-com-Inc-2023-Annual-Report.pdf\n**Path**: DriveDrive: My Drive\n\n**Title**: Amazon-com-Inc-2023-Annual-Report.pdf\n\n# Content\n\n$$\n\\begin{array}{llll}\n2 & 0 & 2 & 3\n\\end{array}\n$$\n\n# amazon \n\nANNUAL REPORT\n\n# amazon \n\nDear Shareholders:\nLast year at this time, I shared my enthusiasm and optimism for Amazon's future. Today, I have even more. The reasons are many, but start with the progress we've made in our financial results and customer experiences, and extend to our continued innovation and the remarkable opportunities in front of us.\n\nIn 2023, Amazon's total revenue grew $12 \\%$ year-over-year (\"YoY\") from $\\$ 514$ B to $\\$ 575$ B. By segment, North America revenue increased $12 \\%$ YoY from $\\$ 316$ B to $\\$ 353$ B, International revenue grew $11 \\%$ YoY from $\\$ 118$ B to $\\$ 131$ B, and AWS revenue increased $13 \\%$ YoY from $\\$ 80$ B to $\\$ 91$ B.\n\nFurther, Amazon's operating income and Free Cash Flow (\"FCF\") dramatically improved. Operating income in 2023 improved $201 \\%$ YoY from $\\$ 12.2$ B (an operating margin of $2.4 \\%$ ) to $\\$ 36.9 \\mathrm{~B}$ (an operating margin of $6.4 \\%$ ). Trailing Twelve Month FCF adjusted for equipment finance leases improved from - $\\$ 12.8 \\mathrm{~B}$ in 2022 to $\\$ 35.5 \\mathrm{~B}$ (up $\\$ 48.3 \\mathrm{~B}$ ).\n\nWhile we've made meaningful progress on our financial measures, what we're most pleased about is the continued customer experience improvements across our businesses.\n\nIn our Stores business, customers have enthusiastically responded to our relentless focus on selection, price, and convenience. We continue to have the broadest retail selection, with hundreds of millions of products available, tens of millions added last year alone, and several premium brands starting to list on Amazon (e.g. Coach, Victoria's Secret, Pit Viper, Martha Stewart, Clinique, Lancôme, and Urban Decay).\n\nBeing sharp on price is always important, but particularly in an uncertain economy, where customers are careful about how much they're spending. As a result, in Q4 2023, we kicked off the holiday season with Prime Big Deal Days, an exclusive event for Prime members to provide an early start on holiday shopping. This was followed by our extended Black Friday and Cyber Monday holiday shopping event, open to all customers, that became our largest revenue event ever. For all of 2023, customers saved nearly $\\$ 24 \\mathrm{~B}$ across millions of deals and coupons, almost $70 \\%$ more than the prior year.\n\nWe also continue to improve delivery speeds, breaking multiple company records. In 2023, Amazon delivered at the fastest speeds ever to Prime members, with more than 7 billion items arriving same or next day, including more than 4 billion in the U.S. and more than 2 billion in Europe. In the U.S., this result is the combination of two things. One is the benefit of regionalization, where we re-architected the network to store items closer to customers. The other is the expansion of same-day facilities, where in 2023, we increased the number of items delivered same day or overnight by nearly $70 \\%$ YoY. As we get items to customers this fast, customers choose Amazon to fulfill their shopping needs more frequently, and we can see the results in various areas including how fast our everyday essentials business is growing (over 20\\% YoY in Q4 2023).\n\nOur regionalization efforts have also trimmed transportation distances, helping lower our cost to serve. In 2023, for the first time since 2018, we reduced our cost to serve on a per unit basis globally. In the U.S. alone, cost to serve was down by more than $\\$ 0.45$ per unit YoY. Decreasing cost to serve allows us both to invest in speed improvements and afford adding more selection at lower Average Selling Prices (\"ASPs\"). More selection at lower prices puts us in consideration for more purchases.\n\nAs we look toward 2024 (and beyond), we're not done lowering our cost to serve. We've challenged every closely held belief in our fulfillment network, and reevaluated every part of it, and found several areas where we believe we can lower costs even further while also delivering faster for customers. Our inbound fulfillment architecture and resulting inventory placement are areas of focus in 2024, and we have optimism there's more upside for us.\n\nInternationally, we like the trajectory of our established countries, and see meaningful progress in our emerging geographies (e.g. India, Brazil, Australia, Mexico, Middle East, Africa, etc.) as they continue to\n\nexpand selection and features, and move toward profitability (in Q4 2023, Mexico became our latest international Stores locale to turn profitable). We have high conviction that these new geographies will continue to grow and be profitable in the long run.\n\nAlongside our Stores business, Amazon's Advertising progress remains strong, growing $24 \\%$ YoY from $\\$ 38 \\mathrm{~B}$ in 2022 to $\\$ 47 \\mathrm{~B}$ in 2023, primarily driven by our sponsored ads. We've added Sponsored TV to this offering, a self-service solution for brands to create campaigns that can appear on up to 30+ streaming TV services, including Amazon Freevee and Twitch, and have no minimum spend. Recently, we've expanded our streaming TV advertising by introducing ads into Prime Video shows and movies, where brands can reach over 200 million monthly viewers in our most popular entertainment offerings, across hit movies and shows, award-winning Amazon MGM Originals, and live sports like Thursday Night Football. Streaming TV advertising is growing quickly and off to a strong start.\n\nShifting to AWS, we started 2023 seeing substantial cost optimization, with most companies trying to save money in an uncertain economy. Much of this optimization was catalyzed by AWS helping customers use the cloud more efficiently and leverage more powerful, price-performant AWS capabilities like Graviton chips (our generalized CPU chips that provide $\\sim 40 \\%$ better price-performance than other leading x86 processors), S3 Intelligent Tiering (a storage class that uses AI to detect objects accessed less frequently and store them in less expensive storage layers), and Savings Plans (which give customers lower prices in exchange for longer commitments). This work diminished short-term revenue, but was best for customers, much appreciated, and should bode well for customers and AWS longer-term. By the end of 2023, we saw cost optimization attenuating, new deals accelerating, customers renewing at larger commitments over longer time periods, and migrations growing again.\n\nThe past year was also a significant delivery year for AWS. We announced our next generation of generalized CPU chips (Graviton4), which provides up to $30 \\%$ better compute performance and $75 \\%$ more memory bandwidth than its already-leading predecessor (Graviton3). We also announced AWS Trainium2 chips, which will deliver up to four times faster machine learning training for generative AI applications and three times more memory capacity than Trainium1. We continued expanding our AWS infrastructure footprint, now offering 105 Availability Zones within 33 geographic Regions globally, with six new Regions coming (Malaysia, Mexico, New Zealand, the Kingdom of Saudi Arabia, Thailand, and a second German region in Berlin). In Generative AI (\"GenAI\"), we added dozens of features to Amazon SageMaker to make it easier for developers to build new Foundation Models (\"FMs\"). We invented and delivered a new service (Amazon Bedrock) that lets companies leverage existing FMs to build GenAI applications. And, we launched the most capable coding assistant around in Amazon Q. Customers are excited about these capabilities, and we're seeing significant traction in our GenAI offerings. (More on how we're approaching GenAI and why we believe we'll be successful later in the letter.)\n\nWe're also making progress on many of our newer business investments that have the potential to be important to customers and Amazon long-term. Touching on two of them:\n\nWe have increasing conviction that Prime Video can be a large and profitable business on its own. This confidence is buoyed by the continued development of compelling, exclusive content (e.g. Thursday Night Football, Lord of the Rings, Reacher, The Boys, Citadel, Road House, etc.), Prime Video customers' engagement with this content, growth in our marketplace programs (through our third-party Channels program, as well as the broad selection of shows and movies customers rent or buy), and the addition of advertising in Prime Video.\n\nIn October, we hit a major milestone in our journey to commercialize Project Kuiper when we launched two end-to-end prototype satellites into space, and successfully validated all key systems and sub-systemstare in an initial launch like this. Kuiper is our low Earth orbit satellite initiative that aims to provide broadband connectivity to the 400-500 million households who don't have it today (as well as governments and enterprises seeking better connectivity and performance in more remote areas), and is a very large revenue opportunity for Amazon. We're on track to launch our first production satellites in 2024. We've still got a long way to go, but are encouraged by our progress.\n\nOverall, 2023 was a strong year, and I'm grateful to our collective teams who delivered on behalf of customers. These results represent a lot of invention, collaboration, discipline, execution, and reimagination\n\nacross Amazon. Yet, I think every one of us at Amazon believes that we have a long way to go, in every one of our businesses, before we exhaust how we can make customers' lives better and easier, and there is considerable upside in each of the businesses in which we're investing.\n$===$\nIn my annual letter over the last three years, I've tried to give shareholders more insight into how we're thinking about the company, the businesses we're pursuing, our future opportunities, and what makes us tick. We operate in a diverse number of market segments, but what ties Amazon together is our joint mission to make customers' lives better and easier every day. This is true across every customer segment we serve (consumers, sellers, brands, developers, enterprises, and creators). At our best, we're not just customer obsessed, but also inventive, thinking several years out, learning like crazy, scrappy, delivering quickly, and operating like the world's biggest start-up.\n\nWe spend enormous energy thinking about how to empower builders, inside and outside of our company. We characterize builders as people who like to invent. They like to dissect a customer experience, assess what's wrong with it, and reinvent it. Builders tend not to be satisfied until the customer experience is perfect. This doesn't hinder them from delivering improvements along the way, but it drives them to keep tinkering and iterating continually. While unafraid to invent from scratch, they have no hesitation about using high-quality, scalable, cost-effective components from others. What matters to builders is having the right tools to keep rapidly improving customer experiences.\n\nThe best way we know how to do this is by building primitive services. Think of them as discrete, foundational building blocks that builders can weave together in whatever combination they desire. Here's how we described primitives in our 2003 AWS Vision document:\n\"Primitives are the raw parts or the most foundational-level building blocks for software developers. They're indivisible (if they can be functionally split into two they must) and they do one thing really well. They're meant to be used together rather than as solutions in and of themselves. And, we'll build them for maximum developer flexibility. We won't put a bunch of constraints on primitives to guard against developers hurting themselves. Rather, we'll optimize for developer freedom and innovation.\"\n\nOf course, this concept of primitives can be applied to more than software development, but they're especially relevant in technology. And, over the last 20 years, primitives have been at the heart of how we've innovated quickly.\n\nOne of the many advantages to thinking in primitives is speed. Let me give you two counter examples that illustrate this point. First, we built a successful owned-inventory retail business in the early years at Amazon where we bought all our products from publishers, manufacturers, and distributors, stored them in our warehouses, and shipped them ourselves. Over time, we realized we could add broader selection and lower prices by allowing third-party sellers to list their offerings next to our own on our highly trafficked search and product detail pages. We'd built several core retail services (e.g. payments, search, ordering, browse, item management) that made trying different marketplace concepts simpler than if we didn't have those components. A good set of primitives? Not really.\n\nIt turns out that these core components were too jumbled together and not partitioned right. We learned this the hard way when we partnered with companies like Target in our Merchant.com business in the early 2000s. The concept was that target.com would use Amazon's ecommerce components as the backbone of its website, and then customize however they wished. To enable this arrangement, we had to deliver those components as separable capabilities through application programming interfaces (\"APIs\"). This decoupling was far more difficult than anticipated because we'd built so many dependencies between these services as Amazon grew so quickly the first few years.\n\nThis coupling was further highlighted by a heavyweight mechanism we used to operate called \"NPI.\" Any new initiative requiring work from multiple internal teams had to be reviewed by this NPI cabal where each team would communicate how many people-weeks their work would take. This bottleneck constrained what we accomplished, frustrated the heck out of us, and inspired us to eradicate it by refactoring these\n\necommerce components into true primitive services with well-documented, stable APIs that enabled our builders to use each other's services without any coordination tax.\n\nIn the middle of the Target and NPI challenges, we were contemplating building a new set of infrastructure technology services that would allow both Amazon to move more quickly and external developers to build anything they imagined. This set of services became known as AWS, and the above experiences convinced us that we should build a set of primitive services that could be composed together how anybody saw fit. At that time, most technology offerings were very feature-rich, and tried to solve multiple jobs simultaneously. As a result, they often didn't do any one job that well.\n\nOur AWS primitive services were designed from the start to be different. They offered important, highly flexible, but focused functionality. For instance, our first major primitive was Amazon Simple Storage Service (\"S3\") in March 2006 that aimed to provide highly secure object storage, at very high durability and availability, at Internet scale, and very low cost. In other words, be stellar at object storage. When we launched S3, developers were excited, and a bit mystified. It was a very useful primitive service, but they wondered, why just object storage? When we launched Amazon Elastic Compute Cloud (\"EC2\") in August 2006 and Amazon SimpleDB in 2007, people realized we were building a set of primitive infrastructure services that would allow them to build anything they could imagine, much faster, more cost-effectively, and without having to manage or lay out capital upfront for the datacenter or hardware. As AWS unveiled these building blocks over time (we now have over 240 at builders' disposal-meaningfully more than any other provider), whole companies sprang up quickly on top of AWS (e.g. Airbnb, Dropbox, Instagram, Pinterest, Stripe, etc.), industries reinvented themselves on AWS (e.g. streaming with Netflix, Disney+, Hulu, Max, Fox, Paramount), and even critical government agencies switched to AWS (e.g. CIA, along with several other U.S. Intelligence agencies). But, one of the lesser-recognized beneficiaries was Amazon's own consumer businesses, which innovated at dramatic speed across retail, advertising, devices (e.g. Alexa and FireTV), Prime Video and Music, Amazon Go, Drones, and many other endeavors by leveraging the speed with which AWS let them build. Primitives, done well, rapidly accelerate builders' ability to innovate.\n\nSo, how do you build the right set of primitives?\nPursuing primitives is not a guarantee of success. There are many you could build, and even more ways to combine them. But, a good compass is to pick real customer problems you're trying to solve.\n\nOur logistics primitives are an instructive example. In Amazon's early years, we built core capabilities around warehousing items, and then picking, packing, and shipping them quickly and reliably to customers. As we added third-party sellers to our marketplace, they frequently requested being able to use these same logistics capabilities. Because we'd built this initial set of logistics primitives, we were able to introduce Fulfillment by Amazon (\"FBA\") in 2006, allowing sellers to use Amazon's Fulfillment Network to store items, and then have us pick, pack, and ship them to customers, with the bonus of these products being available for fast, Prime delivery. This service has saved sellers substantial time and money (typically about $70 \\%$ less expensive than doing themselves), and remains one of our most popular services. As more merchants began to operate their own direct-to-consumer (\"DTC\") websites, many yearned to still use our fulfillment capabilities, while also accessing our payments and identity primitives to drive higher order conversion on their own websites (as Prime members have already shared this payment and identity information with Amazon). A couple years ago, we launched Buy with Prime to address this customer need. Prime members can check out quickly on DTC websites like they do on Amazon, and receive fast Prime shipping speeds on Buy with Prime items-increasing order conversion for merchants by $\\sim 25 \\%$ vs. their default experience.\n\nAs our Stores business has grown substantially, and our supply chain become more complex, we've had to develop a slew of capabilities in order to offer customers unmatched selection, at low prices, and with very fast delivery times. We've become adept at getting products from other countries to the U.S., clearing customs, and then shipping to storage facilities. Because we don't have enough space in our shipping fulfillment centers to store all the inventory needed to maintain our desired in-stock levels, we've built a set of lower-cost, upstream warehouses solely optimized for storage (without sophisticated end-user, pick, pack, and ship functions). Having these two pools of inventory has prompted us to build algorithms predicting when we'll run out of inventory in our shipping fulfillment centers and automatically replenishing from these upstream\n\nwarehouses. And, in the last few years, our scale and available alternatives have forced us to build our own last mile delivery capability (roughly the size of UPS) to affordably serve the number of consumers and sellers wanting to use Amazon.\n\nWe've solved these customer needs by building additional fulfillment primitives that both serve Amazon consumers better and address external sellers' increasingly complex ecommerce activities. For instance, for sellers needing help importing products, we offer a Global Mile service that leverages our expertise here. To ship inventory from the border (or anywhere domestically) to our storage facilities, we enable sellers to use either our first-party Amazon Freight service or third-party freight partners via our Partnered Carrier Program. To store more inventory at lower cost to ensure higher in-stock rates and shorter delivery times, we've opened our upstream Amazon Warehousing and Distribution facilities to sellers (along with automated replenishment to our shipping fulfillment centers when needed). For those wanting to manage their own shipping, we've started allowing customers to use our last mile delivery network to deliver packages to their end-customers in a service called Amazon Shipping. And, for sellers who wish to use our fulfillment network as a central place to store inventory and ship items to customers regardless of where they ordered, we have a Multi-Channel Fulfillment service. These are all primitives that we've exposed to sellers.\n\nBuilding in primitives meaningfully expands your degrees of freedom. You can keep your primitives to yourself and build compelling features and capabilities on top of them to allow your customers and business to reap the benefits of rapid innovation. You can offer primitives to external customers as paid services (as we have with AWS and our more recent logistics offerings). Or, you can compose these primitives into external, paid applications as we have with FBA, Buy with Prime, or Supply Chain by Amazon (a recently released logistics service that integrates several of our logistics primitives). But, you've got options. You're only constrained by the primitives you've built and your imagination.\n\nTake the new, same-day fulfillment facilities in our Stores business. They're located in the largest metro areas around the U.S. (we currently have 58), house our top-moving 100,000 SKUs (but also cover millions of other SKUs that can be injected from nearby fulfillment centers into these same-day facilities), and streamline the time required to go from picking a customer's order to being ready to ship to as little as 11 minutes. These facilities also constitute our lowest cost to serve in the network. The experience has been so positive for customers that we're planning to double the number of these facilities.\n\nBut, how else might we use this capability if we think of it as a core building block? We have a very large and growing grocery business in organic grocery (with Whole Foods Market) and non-perishable goods (e.g. consumables, canned goods, health and beauty products, etc.). We've been working hard on building a mass, physical store offering (Amazon Fresh) that offers a great perishable experience; however, what if we used our same-day facilities to enable customers to easily add milk, eggs, or other perishable items to any Amazon order and get same day? It might change how people think of splitting up their weekly grocery shopping, and make perishable shopping as convenient as non-perishable shopping already is.\n\nOr, take a service that some people have questioned, but that's making substantial progress and we think of as a very valuable future primitive capability - our delivery drones (called Prime Air). Drones will eventually allow us to deliver packages to customers in less than an hour. It won't start off being available for all sizes of packages and in all locations, but we believe it'll be pervasive over time. Think about how the experience of ordering perishable items changes with sub-one-hour delivery?\n\nThe same is true for Amazon Pharmacy. Need throat lozenges, Advil, an antibiotic, or some other medication? Same-day facilities already deliver many of these items within hours, and that will only get shorter as we launch Prime Air more expansively. Highly flexible building blocks can be composed across businesses and in new combinations that change what's possible for customers.\n\nBeing intentional about building primitives requires patience. Releasing the first couple primitive services can sometimes feel random to customers (or the public at large) before we've unveiled how these building blocks come together. I've mentioned AWS and S3 as an example, but our Health offering is another. In the last 10 years, we've tried several Health experiments across various teams - but they were not driven by our primitives approach. This changed in 2022 when we applied our primitives thinking to the enormous global healthcare problem and opportunity. We've now created several important building blocks to help\n\ntransform the customer health experience: Acute Care (via Amazon Clinic), Primary Care (via One Medical), and a Pharmacy service to buy whatever medication a patient may need. Because of our growing success, Amazon customers are now asking us to help them with all kinds of wellness and nutrition opportunities-which can be partially unlocked with some of our existing grocery building blocks, including Whole Foods Market or Amazon Fresh.\n\nAs a builder, it's hard to wait for these building blocks to be built versus just combining a bunch of components together to solve a specific problem. The latter can be faster, but almost always slows you down in the future. We've seen this temptation in our robotics efforts in our fulfillment network. There are dozens of processes we seek to automate to improve safety, productivity, and cost. Some of the biggest opportunities require invention in domains such as storage automation, manipulation, sortation, mobility of large cages across long distances, and automatic identification of items. Many teams would skip right to the complex solution, baking in \"just enough\" of these disciplines to make a concerted solution work, but which doesn't solve much more, can't easily be evolved as new requirements emerge, and that can't be reused for other initiatives needing many of the same components. However, when you think in primitives, like our Robotics team does, you prioritize the building blocks, picking important initiatives that can benefit from each of these primitives, but which build the tool chest to compose more freely (and quickly) for future and complex needs. Our Robotics team has built primitives in each of the above domains that will be lynchpins in our next set of automation, which includes multi-floor storage, trailer loading and unloading, large pallet mobility, and more flexible sortation across our outbound processes (including in vehicles). The team is also building a set of foundation AI models to better identify products in complex environments, optimize the movement of our growing robotic fleet, and better manage the bottlenecks in our facilities.\n\nSometimes, people ask us \"what's your next pillar? You have Marketplace, Prime, and AWS, what's next?\" This, of course, is a thought-provoking question. However, a question people never ask, and might be even more interesting is what's the next set of primitives you're building that enables breakthrough customer experiences? If you asked me today, I'd lead with Generative AI (\"GenAI\").\n\nMuch of the early public attention has focused on GenAI applications, with the remarkable 2022 launch of ChatGPT. But, to our \"primitive\" way of thinking, there are three distinct layers in the GenAI stack, each of which is gigantic, and each of which we're deeply investing.\n\nThe bottom layer is for developers and companies wanting to build foundation models (\"FMs\"). The primary primitives are the compute required to train models and generate inferences (or predictions), and the software that makes it easier to build these models. Starting with compute, the key is the chip inside it. To date, virtually all the leading FMs have been trained on Nvidia chips, and we continue to offer the broadest collection of Nvidia instances of any provider. That said, supply has been scarce and cost remains an issue as customers scale their models and applications. Customers have asked us to push the envelope on price-performance for AI chips, just as we have with Graviton for generalized CPU chips. As a result, we've built custom AI training chips (named Trainium) and inference chips (named Inferentia). In 2023, we announced second versions of our Trainium and Inferentia chips, which are both meaningfully more price-performant than their first versions and other alternatives. This past fall, leading FM-maker, Anthropic, announced it would use Trainium and Inferentia to build, train, and deploy its future FMs. We already have several customers using our AI chips, including Anthropic, Airbnb, Hugging Face, Qualtrics, Ricoh, and Snap.\n\nCustomers building their own FM must tackle several challenges in getting a model into production. Getting data organized and fine-tuned, building scalable and efficient training infrastructure, and then deploying models at scale in a low latency, cost-efficient manner is hard. It's why we've built Amazon SageMaker, a managed, end-to-end service that's been a game changer for developers in preparing their data for AI, managing experiments, training models faster (e.g. Perplexity AI trains models $40 \\%$ faster in SageMaker), lowering inference latency (e.g. Workday has reduced inference latency by $80 \\%$ with SageMaker), and improving developer productivity (e.g. NatWest reduced its time-to-value for AI from 12-18 months to under seven months using SageMaker).\n\nThe middle layer is for customers seeking to leverage an existing FM, customize it with their own data, and leverage a leading cloud provider's security and features to build a GenAI application-all as a managed\n\nservice. Amazon Bedrock invented this layer and provides customers with the easiest way to build and scale GenAI applications with the broadest selection of first- and third-party FMs, as well as leading ease-of-use capabilities that allow GenAI builders to get higher quality model outputs more quickly. Bedrock is off to a very strong start with tens of thousands of active customers after just a few months. The team continues to iterate rapidly on Bedrock, recently delivering Guardrails (to safeguard what questions applications will answer), Knowledge Bases (to expand models' knowledge base with Retrieval Augmented Generation-or RAG-and real-time queries), Agents (to complete multi-step tasks), and Fine-Tuning (to keep teaching and refining models), all of which improve customers' application quality. We also just added new models from Anthropic (their newly-released Claude 3 is the best performing large language model in the world), Meta (with Llama 2), Mistral, Stability AI, Cohere, and our own Amazon Titan family of FMs. What customers have learned at this early stage of GenAI is that there's meaningful iteration required to build a production GenAI application with the requisite enterprise quality at the cost and latency needed. Customers don't want only one model. They want access to various models and model sizes for different types of applications. Customers want a service that makes this experimenting and iterating simple, and this is what Bedrock does, which is why customers are so excited about it. Customers using Bedrock already include ADP, Amdocs, Bridgewater Associates, Broadridge, Clariant, Dana-Farber Cancer Institute, Delta Air Lines, Druva, Genesys, Genomics England, GoDaddy, Intuit, KT, Lonely Planet, LexisNexis, Netsmart, Perplexity AI, Pfizer, PGA TOUR, Ricoh, Rocket Companies, and Siemens.\n\nThe top layer of this stack is the application layer. We're building a substantial number of GenAI applications across every Amazon consumer business. These range from Rufus (our new, AI-powered shopping assistant), to an even more intelligent and capable Alexa, to advertising capabilities (making it simple with natural language prompts to generate, customize, and edit high-quality images, advertising copy, and videos), to customer and seller service productivity apps, to dozens of others. We're also building several apps in AWS, including arguably the most compelling early GenAI use case-a coding companion. We recently launched Amazon Q, an expert on AWS that writes, debugs, tests, and implements code, while also doing transformations (like moving from an old version of Java to a new one), and querying customers' various data repositories (e.g. Intranets, wikis, Salesforce, Amazon S3, ServiceNow, Slack, Atlassian, etc.) to answer questions, summarize data, carry on coherent conversation, and take action. Q is the most capable work assistant available today and evolving fast.\n\nWhile we're building a substantial number of GenAI applications ourselves, the vast majority will ultimately be built by other companies. However, what we're building in AWS is not just a compelling app or foundation model. These AWS services, at all three layers of the stack, comprise a set of primitives that democratize this next seminal phase of AI, and will empower internal and external builders to transform virtually every customer experience that we know (and invent altogether new ones as well). We're optimistic that much of this world-changing AI will be built on top of AWS.\n(By the way, don't underestimate the importance of security in GenAI. Customers' AI models contain some of their most sensitive data. AWS and its partners offer the strongest security capabilities and track record in the world; and as a result, more and more customers want to run their GenAI on AWS.)\n$===$\nRecently, I was asked a provocative question-how does Amazon remain resilient? While simple in its wording, it's profound because it gets to the heart of our success to date as well as for the future. The answer lies in our discipline around deeply held principles: $1 /$ hiring builders who are motivated to continually improve and expand what's possible; $2 /$ solving real customer challenges, rather than what we think may be interesting technology; $3 /$ building in primitives so that we can innovate and experiment at the highest rate; $4 /$ not wasting time trying to fight gravity (spoiler alert: you always lose)-when we discover technology that enables better customer experiences, we embrace it; 5/ accepting and learning from failed experimentsactually becoming more energized to try again, with new knowledge to employ.\n\nToday, we continue to operate in times of unprecedented change that come with unusual opportunities for growth across the areas in which we operate. For instance, while we have a nearly $\\$ 500 \\mathrm{~B}$ consumer business, about $80 \\%$ of the worldwide retail market segment still resides in physical stores. Similarly, with a cloud computing business at nearly a $\\$ 100 \\mathrm{~B}$ revenue run rate, more than $85 \\%$ of the global IT spend is still\n\non-premises. These businesses will keep shifting online and into the cloud. In Media and Advertising, content will continue to migrate from linear formats to streaming. Globally, hundreds of millions of people who don't have adequate broadband access will gain that connectivity in the next few years. Last but certainly not least, Generative AI may be the largest technology transformation since the cloud (which itself, is still in the early stages), and perhaps since the Internet. Unlike the mass modernization of onpremises infrastructure to the cloud, where there's work required to migrate, this GenAI revolution will be built from the start on top of the cloud. The amount of societal and business benefit from the solutions that will be possible will astound us all.\n\nThere has never been a time in Amazon's history where we've felt there is so much opportunity to make our customers' lives better and easier. We're incredibly excited about what's possible, focused on inventing the future, and look forward to working together to make it so.\n\nSincerely,\n![img-0.jpeg](img-0.jpeg)\n\nAndy Jassy\nPresident and Chief Executive Officer\nAmazon.com, Inc.\nP.S. As we have always done, our original 1997 Shareholder Letter follows. What's written there is as true today as it was in 1997.\n\n# amazon.com \n\n## 1997 LETTER TO SHAREHOLDERS <br> (Reprinted from the 1997 Annual Report)\n\nTo our shareholders:\nAmazon.com passed many milestones in 1997: by year-end, we had served more than 1.5 million customers, yielding $838 \\%$ revenue growth to $\\$ 147.8$ million, and extended our market leadership despite aggressive competitive entry.\n\nBut this is Day 1 for the Internet and, if we execute well, for Amazon.com. Today, online commerce saves customers money and precious time. Tomorrow, through personalization, online commerce will accelerate the very process of discovery. Amazon.com uses the Internet to create real value for its customers and, by doing so, hopes to create an enduring franchise, even in established and large markets.\n\nWe have a window of opportunity as larger players marshal the resources to pursue the online opportunity and as customers, new to purchasing online, are receptive to forming new relationships. The competitive landscape has continued to evolve at a fast pace. Many large players have moved online with credible offerings and have devoted substantial energy and resources to building awareness, traffic, and sales. Our goal is to move quickly to solidify and extend our current position while we begin to pursue the online commerce opportunities in other areas. We see substantial opportunity in the large markets we are targeting. This strategy is not without risk: it requires serious investment and crisp execution against established franchise leaders.\n\n## It's All About the Long Term\n\nWe believe that a fundamental measure of our success will be the shareholder value we create over the long term. This value will be a direct result of our ability to extend and solidify our current market leadership position. The stronger our market leadership, the more powerful our economic model. Market leadership can translate directly to higher revenue, higher profitability, greater capital velocity, and correspondingly stronger returns on invested capital.\n\nOur decisions have consistently reflected this focus. We first measure ourselves in terms of the metrics most indicative of our market leadership: customer and revenue growth, the degree to which our customers continue to purchase from us on a repeat basis, and the strength of our brand. We have invested and will continue to invest aggressively to expand and leverage our customer base, brand, and infrastructure as we move to establish an enduring franchise.\n\nBecause of our emphasis on the long term, we may make decisions and weigh tradeoffs differently than some companies. Accordingly, we want to share with you our fundamental management and decision-making approach so that you, our shareholders, may confirm that it is consistent with your investment philosophy:\n\n- We will continue to focus relentlessly on our customers.\n- We will continue to make investment decisions in light of long-term market leadership considerations rather than short-term profitability considerations or short-term Wall Street reactions.\n- We will continue to measure our programs and the effectiveness of our investments analytically, to jettison those that do not provide acceptable returns, and to step up our investment in those that work best. We will continue to learn from both our successes and our failures.\n\n- We will make bold rather than timid investment decisions where we see a sufficient probability of gaining market leadership advantages. Some of these investments will pay off, others will not, and we will have learned another valuable lesson in either case.\n- When forced to choose between optimizing the appearance of our GAAP accounting and maximizing the present value of future cash flows, we'll take the cash flows.\n- We will share our strategic thought processes with you when we make bold choices (to the extent competitive pressures allow), so that you may evaluate for yourselves whether we are making rational long-term leadership investments.\n- We will work hard to spend wisely and maintain our lean culture. We understand the importance of continually reinforcing a cost-conscious culture, particularly in a business incurring net losses.\n- We will balance our focus on growth with emphasis on long-term profitability and capital management. At this stage, we choose to prioritize growth because we believe that scale is central to achieving the potential of our business model.\n- We will continue to focus on hiring and retaining versatile and talented employees, and continue to weight their compensation to stock options rather than cash. We know our success will be largely affected by our ability to attract and retain a motivated employee base, each of whom must think like, and therefore must actually be, an owner.\n\nWe aren't so bold as to claim that the above is the \"right\" investment philosophy, but it's ours, and we would be remiss if we weren't clear in the approach we have taken and will continue to take.\n\nWith this foundation, we would like to turn to a review of our business focus, our progress in 1997, and our outlook for the future.\n\n# Obsess Over Customers \n\nFrom the beginning, our focus has been on offering our customers compelling value. We realized that the Web was, and still is, the World Wide Wait. Therefore, we set out to offer customers something they simply could not get any other way, and began serving them with books. We brought them much more selection than was possible in a physical store (our store would now occupy 6 football fields), and presented it in a useful, easyto-search, and easy-to-browse format in a store open 365 days a year, 24 hours a day. We maintained a dogged focus on improving the shopping experience, and in 1997 substantially enhanced our store. We now offer customers gift certificates, 1-Click ${ }^{\\mathrm{SM}}$ shopping, and vastly more reviews, content, browsing options, and recommendation features. We dramatically lowered prices, further increasing customer value. Word of mouth remains the most powerful customer acquisition tool we have, and we are grateful for the trust our customers have placed in us. Repeat purchases and word of mouth have combined to make Amazon.com the market leader in online bookselling.\n\nBy many measures, Amazon.com came a long way in 1997:\n\n- Sales grew from $\\$ 15.7$ million in 1996 to $\\$ 147.8$ million - an $838 \\%$ increase.\n- Cumulative customer accounts grew from 180,000 to $1,510,000$ - a $738 \\%$ increase.\n- The percentage of orders from repeat customers grew from over $46 \\%$ in the fourth quarter of 1996 to over $58 \\%$ in the same period in 1997.\n- In terms of audience reach, per Media Metrix, our Web site went from a rank of 90th to within the top 20 .\n- We established long-term relationships with many important strategic partners, including America Online, Yahoo!, Excite, Netscape, GeoCities, AltaVista, @Home, and Prodigy.\n\n# Infrastructure \n\nDuring 1997, we worked hard to expand our business infrastructure to support these greatly increased traffic, sales, and service levels:\n\n- Amazon.com's employee base grew from 158 to 614 , and we significantly strengthened our management team.\n- Distribution center capacity grew from 50,000 to 285,000 square feet, including a $70 \\%$ expansion of our Seattle facilities and the launch of our second distribution center in Delaware in November.\n- Inventories rose to over 200,000 titles at year-end, enabling us to improve availability for our customers.\n- Our cash and investment balances at year-end were $\\$ 125$ million, thanks to our initial public offering in May 1997 and our $\\$ 75$ million loan, affording us substantial strategic flexibility.\n\n\n## Our Employees\n\nThe past year's success is the product of a talented, smart, hard-working group, and I take great pride in being a part of this team. Setting the bar high in our approach to hiring has been, and will continue to be, the single most important element of Amazon.com's success.\n\nIt's not easy to work here (when I interview people I tell them, \"You can work long, hard, or smart, but at Amazon.com you can't choose two out of three\"), but we are working to build something important, something that matters to our customers, something that we can all tell our grandchildren about. Such things aren't meant to be easy. We are incredibly fortunate to have this group of dedicated employees whose sacrifices and passion build Amazon.com.\n\n## Goals for 1998\n\nWe are still in the early stages of learning how to bring new value to our customers through Internet commerce and merchandising. Our goal remains to continue to solidify and extend our brand and customer base. This requires sustained investment in systems and infrastructure to support outstanding customer convenience, selection, and service while we grow. We are planning to add music to our product offering, and over time we believe that other products may be prudent investments. We also believe there are significant opportunities to better serve our customers overseas, such as reducing delivery times and better tailoring the customer experience. To be certain, a big part of the challenge for us will lie not in finding new ways to expand our business, but in prioritizing our investments.\n\nWe now know vastly more about online commerce than when Amazon.com was founded, but we still have so much to learn. Though we are optimistic, we must remain vigilant and maintain a sense of urgency. The challenges and hurdles we will face to make our long-term vision for Amazon.com a reality are several: aggressive, capable, well-funded competition; considerable growth challenges and execution risk; the risks of product and geographic expansion; and the need for large continuing investments to meet an expanding market opportunity. However, as we've long said, online bookselling, and online commerce in general, should prove to be a very large market, and it's likely that a number of companies will see significant benefit. We feel good about what we've done, and even more excited about what we want to do.\n\n1997 was indeed an incredible year. We at Amazon.com are grateful to our customers for their business and trust, to each other for our hard work, and to our shareholders for their support and encouragement.\n![img-1.jpeg](img-1.jpeg)\n\nJeffrey P. Bezos\nFounder and Chief Executive Officer\nAmazon.com, Inc.\n\n# UNITED STATES SECURITIES AND EXCHANGE COMMISSION Washington, D.C. 20549\n\nFORM 10-K (Mark One) ☐ ANNUAL REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934 For the fiscal year ended December 31, 2023 or ☐ TRANSITION REPORT PURSUANT TO SECTION 13 OR 15(d) OF THE SECURITIES EXCHANGE ACT OF 1934 For the transition period from to . Commission File No. 000-22513\n\nAMAZON.COM, INC. (Exact name of registrant as specified in its charter)\n\nDelaware (State or other jurisdiction of incorporation or organization) 91-1646860 (I.R.S. Employer Identification No.)\n\n410 Terry Avenue North Seattle, Washington 98109-5210 (206) 266-1000 (Address and telephone number, including area code, of registrant's principal executive offices)\n\nSecurities registered pursuant to Section 12(b) of the Act: Title of Each Class Common Stock, par value $.01 per share Trading Symbol(s) AMZN Name of Each Exchange on Which Registered Nasdaq Global Select Market Securities registered pursuant to Section 12(g) of the Act: None\n\nIndicate by check mark if the registrant is a well-known seasoned issuer, as defined in Rule 405 of the Securities Act. Yes ☑ No ☐ Indicate by check mark if the registrant is not required to file reports pursuant to Section 13 or Section 15(d) of the Exchange Act. Yes ☐ No ☑ Indicate by check mark whether the registrant (1) has filed all reports required to be filed by Section 13 or 15(d) of the Securities Exchange Act of 1934 during the preceding 12 months (or for such shorter period that the registrant was required to file such reports), and (2) has been subject to such filing requirements for the past 90 days. Yes ☑ No ☐\n\nIndicate by check mark whether the registrant has submitted electronically every Interactive Data File required to be submitted pursuant to Rule 405 of Regulation S-T during the preceding 12 months (or for such shorter period that the registrant was required to submit such files). Yes ☑ No ☐\n\nIndicate by check mark whether the registrant is a large accelerated filer, an accelerated filer, a non-accelerated filer, a smaller reporting company, or an emerging growth company. See the definitions of \"large accelerated filer,\" \"accelerated filer,\" \"smaller reporting company,\" and \"emerging growth company\" in Rule 12b-2 of the Exchange Act.\n\n|  Large accelerated filer | ☑ | Accelerated filer | ☐  |\n| --- | --- | --- | --- |\n|  Non-accelerated filer | ☐ | Smaller reporting company | ☐  |\n|   |  | Emerging growth company | ☐  |\n\nIf an emerging growth company, indicate by check mark if the registrant has elected not to use the extended transition period for complying with any new or revised financial accounting standards provided pursuant to Section 13(a) of the Exchange Act. ☐\n\nIndicate by check mark whether the registrant has filed a report on and attestation to its management's assessment of the effectiveness of its internal control over financial reporting under Section 404(b) of the Sarbanes-Oxley Act (15 U.S.C. 7262(b)) by the registered public accounting firm that prepared or issued its audit report. ☑\n\nIf securities are registered pursuant to Section 12(b) of the Exchange Act, indicate by check mark whether the financial statements of the registrant included in the filing reflect the correction of an error to previously issued financial statements. ☐\n\nIndicate by check mark whether any of those error corrections are restatements that required a recovery analysis of incentive-based compensation received by any of the registrant's executive officers during the relevant recovery period pursuant to §240.10D-1(b). ☐\n\nIndicate by check mark whether the registrant is a shell company (as defined in Rule 12b-2 of the Exchange Act). Yes ☐ No ☑\n\nAggregate market value of voting stock held by non-affiliates of the registrant as of June 30, 2023 $ 1,183,684,965,587 Number of shares of common stock outstanding as of January 24, 2024 10,387,381,291\n\nDOCUMENTS INCORPORATED BY REFERENCE\n\nThe information required by Part III of this Report, to the extent not set forth herein, is incorporated herein by reference from the registrant's definitive proxy statement relating to the Annual Meeting of Shareholders to be held in 2024, which definitive proxy statement shall be filed with the Securities and Exchange Commission within 120 days after the end of the fiscal year to which this Report relates.\n\n|   |  | AMAZON.COM, INC.  |\n| --- | --- | --- |\n|   | FORM 10-K |   |\n|   | For the Fiscal Year Ended December 31, 2023 |   |\n|   | INDEX |   |\n|   |  | Page  |\n|   | PART I |   |\n|  Item 1. | Business | 3  |\n|  Item 1A. | Risk Factors | 6  |\n|  Item 1B. | Unresolved Staff Comments | 16  |\n|  Item 1C. | Cybersecurity | 16  |\n|  Item 2. | Properties | 18  |\n|  Item 3. | Legal Proceedings | 18  |\n|  Item 4. | Mine Safety Disclosures | 18  |\n|   | PART II |   |\n|  Item 5. | Market for the Registrant’s Common Stock, Related Shareholder Matters, and Issuer Purchases of Equity Securities | 19  |\n|  Item 6. | Reserved | 19  |\n|  Item 7. | Management’s Discussion and Analysis of Financial Condition and Results of Operations | 20  |\n|  Item 7A. | Quantitative and Qualitative Disclosures About Market Risk | 32  |\n|  Item 8. | Financial Statements and Supplementary Data | 34  |\n|  Item 9. | Changes in and Disagreements with Accountants on Accounting and Financial Disclosure | 71  |\n|  Item 9A. | Controls and Procedures | 71  |\n|  Item 9B. | Other Information | 73  |\n|  Item 9C. | Disclosure Regarding Foreign Jurisdictions that Prevent Inspections | 73  |\n|   | PART III |   |\n|  Item 10. | Directors, Executive Officers, and Corporate Governance | 73  |\n|  Item 11. | Executive Compensation | 73  |\n|  Item 12. | Security Ownership of Certain Beneficial Owners and Management and Related Shareholder Matters | 73  |\n|  Item 13. | Certain Relationships and Related Transactions, and Director Independence | 74  |\n|  Item 14. | Principal Accountant Fees and Services | 74  |\n|   | PART IV |   |\n|  Item 15. | Exhibits, Financial Statement Schedules | 75  |\n|  Item 16. | Form 10-K Summary | 77  |\n|  Signatures |   | 78  |\n\n# AMAZON.COM, INC. \n\n## PART I\n\n## Item 1. Business\n\nThis Annual Report on Form 10-K and the documents incorporated herein by reference contain forward-looking statements based on expectations, estimates, and projections as of the date of this filing. Actual results and outcomes may differ materially from those expressed in forward-looking statements. See Item 1A of Part I - \"Risk Factors.\" As used herein, \"Amazon.com,\" \"we,\" \"our,\" and similar terms include Amazon.com, Inc. and its subsidiaries, unless the context indicates otherwise.\n\n## General\n\nWe seek to be Earth's most customer-centric company. We are guided by four principles: customer obsession rather than competitor focus, passion for invention, commitment to operational excellence, and long-term thinking. In each of our segments, we serve our primary customer sets, consisting of consumers, sellers, developers, enterprises, content creators, advertisers, and employees.\n\nWe have organized our operations into three segments: North America, International, and Amazon Web Services (\"AWS\"). These segments reflect the way the Company evaluates its business performance and manages its operations. Information on our net sales is contained in Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 Segment Information.\"\n\n## Consumers\n\nWe serve consumers through our online and physical stores and focus on selection, price, and convenience. We design our stores to enable hundreds of millions of unique products to be sold by us and by third parties across dozens of product categories. Customers access our offerings through our websites, mobile apps, Alexa, devices, streaming, and physically visiting our stores. We also manufacture and sell electronic devices, including Kindle, Fire tablet, Fire TV, Echo, Ring, Blink, and eero, and we develop and produce media content. We seek to offer our customers low prices, fast and free delivery, easy-to-use functionality, and timely customer service. In addition, we offer subscription services such as Amazon Prime, a membership program that includes fast, free shipping on tens of millions of items, access to award-winning movies and series, and other benefits.\n\nWe fulfill customer orders in a number of ways, including through: North America and International fulfillment networks that we operate; co-sourced and outsourced arrangements in certain countries; digital delivery; and through our physical stores. We operate customer service centers globally, which are supplemented by co-sourced arrangements. See Item 2 of Part I, \"Properties.\"\n\n## Sellers\n\nWe offer programs that enable sellers to grow their businesses, sell their products in our stores, and fulfill orders using our services. We are not the seller of record in these transactions. We earn fixed fees, a percentage of sales, per-unit activity fees, interest, or some combination thereof, for our seller programs.\n\n## Developers and Enterprises\n\nWe serve developers and enterprises of all sizes, including start-ups, government agencies, and academic institutions, through AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services.\n\n## Content Creators\n\nWe offer programs that allow authors, independent publishers, musicians, filmmakers, Twitch streamers, skill and app developers, and others to publish and sell content.\n\n## Advertisers\n\nWe provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising.\n\n# Competition \n\nOur businesses encompass a large variety of product types, service offerings, and delivery channels. The worldwide marketplace in which we compete is evolving rapidly and intensely competitive, and we face a broad array of competitors from many different industry sectors around the world. Our current and potential competitors include: (1) physical, e-commerce, and omnichannel retailers, publishers, vendors, distributors, manufacturers, and producers of the products we offer and sell to consumers and businesses; (2) publishers, producers, and distributors of physical, digital, and interactive media of all types and all distribution channels; (3) web search engines, comparison shopping websites, social networks, web portals, and other online and app-based means of discovering, using, or acquiring goods and services, either directly or in collaboration with other retailers; (4) companies that provide e-commerce services, including website development and hosting, omnichannel sales, inventory and supply chain management, advertising, fulfillment, customer service, and payment processing; (5) companies that provide fulfillment and logistics services for themselves or for third parties, whether online or offline; (6) companies that provide information technology services or products, including on-premises or cloud-based infrastructure and other services; (7) companies that design, manufacture, market, or sell consumer electronics, telecommunication, and electronic devices; (8) companies that sell grocery products online and in physical stores; and (9) companies that provide advertising services, whether in digital or other formats. We believe that the principal competitive factors in our retail businesses include selection, price, and convenience, including fast and reliable fulfillment. Additional competitive factors for our seller and enterprise services include the quality, speed, and reliability of our services and tools, as well as customers' ability and willingness to change business practices. Some of our current and potential competitors have greater resources, longer histories, more customers, greater brand recognition, and greater control over inputs critical to our various businesses. They may secure better terms from suppliers, adopt more aggressive pricing, pursue restrictive distribution agreements that restrict our access to supply, direct consumers to their own offerings instead of ours, lock-in potential customers with restrictive terms, and devote more resources to technology, infrastructure, fulfillment, and marketing. The internet facilitates competitive entry and comparison shopping, which enhances the ability of new, smaller, or lesser-known businesses to compete against us. Each of our businesses is also subject to rapid change and the development of new business models and the entry of new and well-funded competitors. Other companies also may enter into business combinations or alliances that strengthen their competitive positions.\n\n## Intellectual Property\n\nWe regard our trademarks, service marks, copyrights, patents, domain names, trade dress, trade secrets, proprietary technologies, and similar intellectual property as critical to our success, and we rely on trademark, copyright, and patent law, trade-secret protection, and confidentiality and/or license agreements with our employees, customers, partners, and others to protect our proprietary rights. We have registered, or applied for the registration of, a number of U.S. and international domain names, trademarks, service marks, and copyrights. Additionally, we have filed U.S. and international patent applications covering certain of our proprietary technology.\n\n## Seasonality\n\nOur business is affected by seasonality, which historically has resulted in higher sales volume during our fourth quarter, which ends December 31.\n\n## Human Capital\n\nOur employees are critical to our mission of being Earth's most customer-centric company. As of December 31, 2023, we employed approximately $1,525,000$ full-time and part-time employees. Additionally, we use independent contractors and temporary personnel to supplement our workforce. Competition for qualified personnel is intense, particularly for software engineers, computer scientists, and other technical staff, and constrained labor markets have increased competition for personnel across other parts of our business.\n\nAs we strive to be Earth's best employer, we focus on investment and innovation, inclusion and diversity, safety, and engagement to hire and develop the best talent. We rely on numerous and evolving initiatives to implement these objectives and invent mechanisms for talent development, including competitive pay and benefits, flexible work arrangements, and skills training and educational programs such as Amazon Career Choice (education funding for eligible employees) and the Amazon Technical Academy (software development engineer training). Over 175,000 Amazon employees around the world have participated in Career Choice. We also continue to inspect and refine the mechanisms we use to hire, develop, evaluate, and retain our employees to promote equity for all candidates and employees. In addition, safety is integral to everything we do at Amazon and we continue to invest in safety improvements such as capital improvements, new safety technology, vehicle safety controls, and engineering ergonomic solutions. Our safety team is dedicated to using the science of safety to solve complex problems and establish new industry best practices. We also provide mentorship and support resources to our employees, and have deployed numerous programs that advance employee engagement, communication, and feedback.\n\n# Available Information \n\nOur investor relations website is amazon.com/ir and we encourage investors to use it as a way of easily finding information about us. We promptly make available on this website, free of charge, the reports that we file or furnish with the Securities and Exchange Commission (\"SEC\"), corporate governance information (including our Code of Business Conduct and Ethics), and select press releases.\n\n## Executive Officers and Directors\n\nThe following tables set forth certain information regarding our Executive Officers and Directors as of January 24, 2024:\n\n## Information About Our Executive Officers\n\n| Name | Age | Position |\n| :-- | :--: | :-- |\n| Jeffrey P. Bezos | 60 | Executive Chair |\n| Andrew R. Jassy | 56 | President and Chief Executive Officer |\n| Douglas J. Herrington | 57 | CEO Worldwide Amazon Stores |\n| Brian T. Olsavsky | 60 | Senior Vice President and Chief Financial Officer |\n| Shelley L. Reynolds | 59 | Vice President, Worldwide Controller, and Principal Accounting Officer |\n| Adam N. Selipsky | 57 | CEO Amazon Web Services |\n| David A. Zapolsky | 60 | Senior Vice President, Global Public Policy and General Counsel |\n\nJeffrey P. Bezos. Mr. Bezos founded Amazon.com in 1994 and has served as Executive Chair since July 2021. He has served as Chair of the Board since 1994 and served as Chief Executive Officer from May 1996 until July 2021, and as President from 1994 until June 1999 and again from October 2000 to July 2021.\n\nAndrew R. Jassy. Mr. Jassy has served as President and Chief Executive Officer since July 2021, CEO Amazon Web Services from April 2016 until July 2021, and Senior Vice President, Amazon Web Services, from April 2006 until April 2016.\n\nDouglas J. Herrington. Mr. Herrington has served as CEO Worldwide Amazon Stores since July 2022, Senior Vice President, North America Consumer from January 2015 to July 2022, Senior Vice President, Consumables from May 2014 to December 2014, and Vice President, Consumables from May 2005 to April 2014.\n\nBrian T. Olsavsky. Mr. Olsavsky has served as Senior Vice President and Chief Financial Officer since June 2015, Vice President, Finance for the Global Consumer Business from December 2011 to June 2015, and numerous financial leadership roles across Amazon with global responsibility since April 2002.\n\nShelley L. Reynolds. Ms. Reynolds has served as Vice President, Worldwide Controller, and Principal Accounting Officer since April 2007.\n\nAdam N. Selipsky. Mr. Selipsky has served as CEO Amazon Web Services since July 2021, Senior Vice President, Amazon Web Services from May 2021 until July 2021, President and CEO of Tableau Software from September 2016 until May 2021, and Vice President, Marketing, Sales and Support of Amazon Web Services from May 2005 to September 2016.\n\nDavid A. Zapolsky. Mr. Zapolsky has served as Senior Vice President, Global Public Policy and General Counsel since May 2023 and has served as our Secretary since September 2012. He served as Senior Vice President and General Counsel from May 2014 to May 2023, Vice President and General Counsel from September 2012 to May 2014, and as Vice President and Associate General Counsel for Litigation and Regulatory matters from April 2002 until September 2012.\n\n|  Board of Directors |  |   |\n| --- | --- | --- |\n|  Name | Age | Position  |\n|  Jeffrey P. Bezos | 60 | Executive Chair  |\n|  Andrew R. Jassy | 56 | President and Chief Executive Officer  |\n|  Keith B. Alexander | 72 | Chair of IronNet, Inc.  |\n|  Edith W. Cooper | 62 | Former Executive Vice President, Goldman Sachs Group, Inc.  |\n|  Jamie S. Gorelick | 73 | Partner, Wilmer Cutler Pickering Hale and Dorr LLP  |\n|  Daniel P. Huttenlocher | 65 | Dean, MIT Schwarzman College of Computing  |\n|  Judith A. McGrath | 71 | Former Chair and CEO, MTV Networks  |\n|  Indra K. Nooyi | 68 | Former Chair and CEO, PepsiCo, Inc.  |\n|  Jonathan J. Rubinstein | 67 | Former co-CEO, Bridgewater Associates, LP  |\n|  Brad D. Smith | 59 | President, Marshall University  |\n|  Patricia Q. Stonesifer | 67 | Former President and Chief Executive Officer, Martha’s Table  |\n|  Wendell P. Weeks | 64 | Chairman and CEO, Corning Incorporated  |\n\n# Item 1A. Risk Factors\n\nPlease carefully consider the following discussion of significant factors, events, and uncertainties that make an investment in our securities risky. The events and consequences discussed in these risk factors could, in circumstances we may or may not be able to accurately predict, recognize, or control, have a material adverse effect on our business, growth, reputation, prospects, financial condition, operating results (including components of our financial results), cash flows, liquidity, and stock price. These risk factors do not identify all risks that we face; our operations could also be affected by factors, events, or uncertainties that are not presently known to us or that we currently do not consider to present significant risks to our operations. In addition to the factors discussed in Item 7 of Part II, \"Management’s Discussion and Analysis of Financial Condition and Results of Operations,\" and in the risk factors below, global economic and geopolitical conditions and additional or unforeseen circumstances, developments, or events may give rise to or amplify many of the risks discussed below. Many of the risks discussed below also impact our customers, including third-party sellers, which could indirectly have a material adverse effect on us.\n\n## Business and Industry Risks\n\n## We Face Intense Competition\n\nOur businesses are rapidly evolving and intensely competitive, and we have many competitors across geographies, including cross-border competition, and in different industries, including physical, e-commerce, and omnichannel retail, ecommerce services, web and infrastructure computing services, electronic devices, digital content, advertising, grocery, and transportation and logistics services. Some of our current and potential competitors have greater resources, longer histories, more customers, and/or greater brand recognition, particularly with our newly-launched products and services and in our newer geographic regions. They may secure better terms from vendors, adopt more aggressive pricing, and devote more resources to technology, infrastructure, fulfillment, and marketing.\n\nCompetition continues to intensify, including with the development of new business models and the entry of new and well-funded competitors, and as our competitors enter into business combinations or alliances and established companies in other market segments expand to become competitive with our business. In addition, new and enhanced technologies, including search, web and infrastructure computing services, practical applications of artificial intelligence and machine learning, digital content, and electronic devices continue to increase our competition. The internet facilitates competitive entry and comparison shopping, which enhances the ability of new, smaller, or lesser known businesses to compete against us. As a result of competition, our product and service offerings may not be successful, we may fail to gain or may lose business, and we may be required to increase our spending or lower prices, any of which could materially reduce our sales and profits.\n\n## Our Expansion into New Products, Services, Technologies, and Geographic Regions Subjects Us to Additional Risks\n\nWe may have limited or no experience in our newer market segments, and our customers may not adopt our product or service offerings. These offerings, which can present new and difficult technology challenges, may subject us to claims if customers of these offerings experience, or are otherwise impacted by, service disruptions, delays, setbacks, or failures or quality issues. In addition, profitability or other intended benefits, if any, in our newer activities may not meet our expectations, and we may not be successful enough in these newer activities to recoup our investments in them, which investments are often significant. Failure to realize the benefits of amounts we invest in new technologies, products, or services could result in the\n\nvalue of those investments being written down or written off. In addition, our sustainability initiatives may be unsuccessful for a variety of reasons, including if we are unable to realize the expected benefits of new technologies or if we do not successfully plan or execute new strategies, which could harm our business or damage our reputation.\n\n# Our International Operations Expose Us to a Number of Risks \n\nOur international activities are significant to our revenues and profits, and we plan to further expand internationally. In certain international market segments, we have relatively little operating experience and may not benefit from any first-tomarket advantages or otherwise succeed. It is costly to establish, develop, and maintain international operations and stores, and promote our brand internationally. Our international operations may not become profitable on a sustained basis.\n\nIn addition to risks described elsewhere in this section, our international sales and operations are subject to a number of risks, including:\n\n- local economic and political conditions;\n- government regulation (such as regulation of our product and service offerings and of competition); restrictive governmental actions (such as trade protection measures, including export duties and quotas and custom duties and tariffs, and restrictions around the import and export of certain products, technologies, and components); nationalization; and restrictions on foreign ownership;\n- restrictions on sales or distribution of certain products or services and uncertainty regarding liability for products, services, and content, including uncertainty as a result of less internet-friendly legal systems, local laws, lack of legal precedent, and varying rules, regulations, and practices regarding the physical and digital distribution of media products and enforcement of intellectual property rights;\n- business licensing or certification requirements, such as for imports, exports, web services, and electronic devices;\n- limitations on the repatriation and investment of funds and foreign currency exchange restrictions;\n- limited fulfillment and technology infrastructure;\n- shorter payable and longer receivable cycles and the resultant negative impact on cash flow;\n- laws and regulations regarding privacy, data use, data protection, data security, data localization, network security, consumer protection, payments, advertising, and restrictions on pricing or discounts;\n- lower levels of use of the internet;\n- lower levels of consumer spending and fewer opportunities for growth compared to the U.S.;\n- lower levels of credit card usage and increased payment risk;\n- difficulty in staffing, developing, and managing foreign operations as a result of distance, language, and cultural differences;\n- different employee/employer relationships and the existence of works councils and labor unions;\n- compliance with the U.S. Foreign Corrupt Practices Act and other applicable U.S. and foreign laws prohibiting corrupt payments to government officials and other third parties;\n- laws and policies of the U.S. and other jurisdictions affecting trade, foreign investment, loans, and taxes; and\n- geopolitical events, including war and terrorism.\n\nAs international physical, e-commerce, and omnichannel retail, cloud services, and other services grow, competition will intensify, including through adoption of evolving business models. Local companies may have a substantial competitive advantage because of their greater understanding of, and focus on, the local customer, as well as their more established local brand names. The inability to hire, train, retain, and manage sufficient required personnel may limit our international growth.\n\nThe People's Republic of China (\"PRC\") and India regulate Amazon's and its affiliates' businesses and operations in country through regulations and license requirements that may restrict (i) foreign investment in and operation of the internet, IT infrastructure, data centers, retail, delivery, and other sectors, (ii) internet content, and (iii) the sale of media and other products and services. For example, in order to meet local ownership, regulatory licensing, and cybersecurity requirements, we provide certain technology services in China through contractual relationships with third parties that hold PRC licenses to provide services. In India, the government restricts the ownership or control of Indian companies by foreign entities involved in online multi-brand retail trading activities. For www.amazon.in, we provide certain marketing tools and logistics services to thirdparty sellers to enable them to sell online and deliver to customers, and we hold an indirect minority interest in an entity that is a third-party seller on the www.amazon.in marketplace. Although we believe these structures and activities comply with existing laws, they involve unique risks, and the PRC and India may from time to time consider and implement additional changes in\n\ntheir regulatory, licensing, or other requirements that could impact these structures and activities. There are substantial uncertainties regarding the interpretation of PRC and Indian laws and regulations, and it is possible that these governments will ultimately take a view contrary to ours. In addition, our Chinese and Indian businesses and operations may be unable to continue to operate if we or our affiliates are unable to access sufficient funding or, in China, enforce contractual relationships we or our affiliates have in place. Violation of any existing or future PRC, Indian, or other laws or regulations or changes in the interpretations of those laws and regulations could result in our businesses in those countries being subject to fines and other financial penalties, having licenses revoked, or being forced to restructure our operations or shut down entirely.\n\nIn addition, because China-based sellers account for significant portions of our third-party seller services and advertising revenues, and China-based suppliers provide significant portions of our components and finished goods, regulatory and trade restrictions, data protection and cybersecurity laws, economic factors, geopolitical events, security issues, or other factors negatively impacting China-based sellers and suppliers could adversely affect our operating results.\n\n# The Variability in Our Retail Business Places Increased Strain on Our Operations \n\nDemand for our products and services can fluctuate significantly for many reasons, including as a result of seasonality, promotions, product launches, or unforeseeable events, such as in response to global economic conditions such as recessionary fears or rising inflation, natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), or geopolitical events. For example, we expect a disproportionate amount of our retail sales to occur during our fourth quarter. Our failure to stock or restock popular products in sufficient amounts such that we fail to meet customer demand could significantly affect our revenue and our future growth. When we overstock products, we may be required to take significant inventory markdowns or write-offs and incur commitment costs, which could materially reduce profitability. We regularly experience increases in our net shipping cost due to complimentary upgrades, split-shipments, and additional long-zone shipments necessary to ensure timely delivery for the holiday season. If too many customers access our websites within a short period of time due to increased demand, we may experience system interruptions that make our websites unavailable or prevent us from efficiently fulfilling orders, which may reduce the volume of goods we offer or sell and the attractiveness of our products and services. In addition, we may be unable to adequately staff our fulfillment network and customer service centers during these peak periods and delivery and other fulfillment companies and customer service cosourcers may be unable to meet the seasonal demand. Risks described elsewhere in this Item 1A relating to fulfillment network optimization and inventory are magnified during periods of high demand.\n\nAs a result of holiday sales, as of December 31 of each year, our cash, cash equivalents, and marketable securities balances typically reach their highest level (other than as a result of cash flows provided by or used in investing and financing activities) because consumers primarily use credit cards in our stores and the related receivables settle quickly. Typically, there is also a corresponding increase in accounts payable as of December 31 due to inventory purchases and third-party seller sales. Our accounts payable balance generally declines during the first three months of the year as vendors and sellers are paid, resulting in a corresponding decline in our cash, cash equivalents, and marketable securities balances.\n\n## We Are Impacted by Fraudulent or Unlawful Activities of Sellers\n\nThe law relating to the liability of online service providers is currently unsettled. In addition, governmental agencies have in the past and could in the future require changes in the way this business is conducted. Under our seller programs, we maintain policies and processes designed to prevent sellers from collecting payments, fraudulently or otherwise, when buyers never receive the products they ordered or when the products received are materially different from the sellers' descriptions, and to prevent sellers in our stores or through other stores from selling unlawful, counterfeit, pirated, or stolen goods, selling goods in an unlawful or unethical manner, violating the proprietary rights of others, or otherwise violating our policies. When these policies and processes are circumvented or fail to operate sufficiently, it can harm our business or damage our reputation and we could face civil or criminal liability for unlawful activities by our sellers. Under our A-to-z Guarantee, we may reimburse customers for payments up to certain limits in these situations, and as our third-party seller sales grow, the cost of this program will increase and could negatively affect our operating results.\n\n## We Face Risks Related to Adequately Protecting Our Intellectual Property Rights and Being Accused of Infringing Intellectual Property Rights of Third Parties\n\nWe regard our trademarks, service marks, copyrights, patents, trade dress, trade secrets, proprietary technology, and similar intellectual property as critical to our success, and we rely on trademark, copyright, and patent law, trade secret protection, and confidentiality and/or license agreements with our employees, customers, and others to protect our proprietary rights. Effective intellectual property protection is not available in every country in which our products and services are made available. We also may not be able to acquire or maintain appropriate domain names in all countries in which we do business. Furthermore, regulations governing domain names may not protect our trademarks and similar proprietary rights. We may be\n\nunable to prevent third parties from acquiring domain names that are similar to, infringe upon, or diminish the value of our trademarks and other proprietary rights.\n\nWe are not always able to discover or determine the extent of any unauthorized use of our proprietary rights. Actions taken by third parties that license our proprietary rights may materially diminish the value of our proprietary rights or reputation. The protection of our intellectual property requires the expenditure of significant financial and managerial resources. Moreover, the steps we take to protect our intellectual property do not always adequately protect our rights or prevent third parties from infringing or misappropriating our proprietary rights. We also cannot be certain that others will not independently develop or otherwise acquire equivalent or superior technology or other intellectual property rights.\n\nWe have been subject to, and expect to continue to be subject to, claims and legal proceedings regarding alleged infringement by us of the intellectual property rights of third parties. Such claims, whether or not meritorious, have in the past, and may in the future, result in the expenditure of significant financial and managerial resources, injunctions against us, or significant payments for damages, including to satisfy indemnification obligations or to obtain licenses from third parties who allege that we have infringed their rights. Such licenses may not be available on terms acceptable to us or at all. These risks have been amplified by the increase in third parties whose sole or primary business is to assert such claims. In addition, our and our customers' use of artificial intelligence may result in increased claims of infringement or other claims, including those based on unauthorized use of third-party technology or content.\n\nOur digital content offerings depend in part on effective digital rights management technology to control access to digital content. Breach or malfunctioning of the digital rights management technology that we use could subject us to claims, and content providers may be unwilling to include their content in our service.\n\n# We Have Foreign Exchange Risk \n\nThe results of operations of, and certain of our intercompany balances associated with, our international stores and product and service offerings are exposed to foreign exchange rate fluctuations. Due to these fluctuations, operating results may differ materially from expectations, and we may record significant gains or losses on the remeasurement of intercompany balances. As we have expanded our international operations, our exposure to exchange rate fluctuations has increased. We also hold cash equivalents and/or marketable securities in foreign currencies such as British Pounds, Canadian Dollars, Euros, and Japanese Yen. When the U.S. Dollar strengthens compared to these currencies, cash equivalents, and marketable securities balances, when translated, may be materially less than expected and vice versa.\n\n## Operating Risks\n\n## Our Expansion Places a Significant Strain on our Management, Operational, Financial, and Other Resources\n\nWe are continuing to rapidly and significantly expand our global operations, including increasing our product and service offerings and scaling our infrastructure to support our retail and services businesses. The complexity of the current scale of our business can place significant strain on our management, personnel, operations, systems, technical performance, financial resources, and internal financial control and reporting functions, and our expansion increases these factors. Failure to manage growth effectively could damage our reputation, limit our growth, and negatively affect our operating results.\n\n## We Experience Significant Fluctuations in Our Operating Results and Growth Rate\n\nWe are not always able to accurately forecast our growth rate. We base our expense levels and investment plans on sales estimates. A significant portion of our expenses and investments is fixed, and we are not always able to adjust our spending quickly enough if our sales are less than expected.\n\nOur revenue growth may not be sustainable, and our percentage growth rates may decrease. Our revenue and operating profit growth depends on the continued growth of demand for the products and services offered by us or our sellers, and our business is affected by, among other things, general economic, business, and geopolitical conditions worldwide. A softening of demand, whether caused by changes in customer preferences or a weakening of the U.S. or global economies, may result in decreased revenue or growth.\n\nOur sales and operating results will also fluctuate for many other reasons, including due to factors described elsewhere in this section and the following:\n\n- our ability to retain and increase sales to existing customers, attract new customers, and satisfy our customers' demands;\n- our ability to retain and expand our network of sellers;\n- our ability to offer products on favorable terms, manage inventory, and fulfill orders;\n- the introduction of competitive stores, websites, products, services, price decreases, or improvements;\n\n- changes in usage or adoption rates of the internet, e-commerce, electronic devices, and web services, including outside the U.S.;\n- timing, effectiveness, and costs of expansion and upgrades of our systems and infrastructure;\n- the success of our geographic, service, and product line expansions;\n- the extent to which we finance, and the terms of any such financing for, our current operations and future growth;\n- the outcomes of legal proceedings and claims, which may include significant monetary damages or injunctive relief and could have a material adverse impact on our operating results;\n- variations in the mix of products and services we sell;\n- variations in our level of merchandise and vendor returns;\n- the extent to which we offer fast and free delivery, continue to reduce prices worldwide, and provide additional benefits to our customers;\n- factors affecting our reputation or brand image (including any actual or perceived inability to achieve our goals or commitments, whether related to sustainability, customers, employees, or other topics), and public perceptions regarding social or ethical issues related to our development and use of artificial intelligence and machine learning technologies, products, and services;\n- the extent to which we invest in technology and infrastructure, fulfillment, and other expense categories;\n- availability of and increases in the prices of transportation (including fuel), resources such as land, water, and energy, commodities like paper and packing supplies and hardware products, and technology infrastructure products, including as a result of inflationary pressures;\n- constrained labor markets, which increase our payroll costs;\n- the extent to which operators of the networks between our customers and our stores successfully charge fees to grant our customers unimpaired and unconstrained access to our online services;\n- our ability to collect amounts owed to us when they become due;\n- the extent to which new and existing technologies, or industry trends, restrict online advertising or affect our ability to customize advertising or otherwise tailor our product and service offerings;\n- the extent to which use of our services is affected by spyware, viruses, phishing and other spam emails, denial of service attacks, data theft, computer intrusions, outages, and similar events;\n- the extent to which we fail to maintain our unique culture of innovation, customer obsession, and long-term thinking, which has been critical to our growth and success;\n- disruptions from natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues (including terrorist attacks, armed hostilities, and political conflicts, including those involving China), labor or trade disputes (including restrictive governmental actions impacting us, our customers, and our third-party sellers and suppliers in China or other foreign countries), and similar events; and\n- potential negative impacts of climate change, including: increased operating costs due to more frequent extreme weather events or climate-related changes, such as rising temperatures and water scarcity; increased investment requirements associated with the transition to a low-carbon economy; decreased demand for our products and services as a result of changes in customer behavior; increased compliance costs due to more extensive and global regulations and third-party requirements; and reputational damage resulting from perceptions of our environmental impact.\n\n\n# We Face Risks Related to Successfully Optimizing and Operating Our Fulfillment Network and Data Centers \n\nFailures to adequately predict customer demand and consumer spending patterns or otherwise optimize and operate our fulfillment network and data centers successfully from time to time result in excess or insufficient fulfillment or data center capacity, service interruptions, increased costs, and impairment charges, any of which could materially harm our business. As we continue to add fulfillment and data center capability or add new businesses with different requirements, our fulfillment and data center networks become increasingly complex and operating them becomes more challenging. There can be no assurance that we will be able to operate our networks effectively.\n\nIn addition, failure to optimize inventory management or staffing in our fulfillment network increases our net shipping cost by increasing the distance products are shipped and reducing the number of units per shipment or delivery. We and our cosourcers may be unable to adequately staff our fulfillment network and customer service centers. For example, productivity across our fulfillment network is affected by regional labor market constraints, which increase payroll costs and make it difficult to hire, train, and deploy a sufficient number of people to operate our fulfillment network as efficiently as we would like.\n\nUnder some of our commercial agreements, we maintain the inventory of other companies, thereby increasing the complexity of tracking inventory and operating our fulfillment network. Our failure to adequately predict seller demand for storage or to properly handle such inventory or the inability of the other businesses on whose behalf we perform inventory fulfillment services to accurately forecast product demand may result in us being unable to secure sufficient storage space or to optimize our fulfillment network or cause other unexpected costs and other harm to our business and reputation.\n\nWe rely on a limited number of shipping companies to deliver inventory to us and completed orders to our customers. An inability to negotiate acceptable terms with these companies or performance problems, staffing limitations, or other difficulties experienced by these companies or by our own transportation systems, including as a result of labor market constraints and related costs, could negatively impact our operating results and customer experience. In addition, our ability to receive inbound inventory efficiently and ship completed orders to customers also may be negatively affected by natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues, labor or trade disputes, and similar events.\n\n# We Could Be Harmed by Data Loss or Other Security Breaches \n\nBecause we collect, process, store, and transmit large amounts of data, including confidential, classified, sensitive, proprietary, and business and personal information, failure to prevent or mitigate data loss, theft, misuse, unauthorized access, or other security breaches or vulnerabilities affecting our or our vendors' or customers' technology, products, and systems, could: expose us or our customers to a risk of loss, disclosure, or misuse of such information; adversely affect our operating results; result in litigation, liability, or regulatory action (including under laws related to privacy, data use, data protection, data security, network security, and consumer protection); deter customers or sellers from using our stores, products, and services; and otherwise harm our business and reputation. We use third-party technology and systems for a variety of reasons, including, without limitation, encryption and authentication technology, employee email, content delivery to customers, back-office support, and other functions. Some of our systems have experienced past security breaches, and, although they did not have a material adverse effect on our operating results, there can be no assurance that future incidents will not have material adverse effects on our operations or financial results. Although we have developed systems and processes that are designed to protect customer data and prevent such incidents, including systems and processes designed to reduce the impact of a security breach at a third-party vendor or customer, such measures cannot provide absolute security and may fail to operate as intended or be circumvented.\n\n## We Face Risks Related to System Interruption and Lack of Redundancy\n\nWe experience occasional system interruptions and delays that make our websites and services unavailable or slow to respond and prevent us from efficiently accepting or fulfilling orders or providing services to customers and third parties, which may reduce our net sales and the attractiveness of our products and services. Steps we take to add software and hardware, upgrade our systems and network infrastructure, and improve the stability and efficiency of our systems may not be sufficient to avoid system interruptions or delays that could adversely affect our operating results.\n\nOur computer and communications systems and operations in the past have been, or in the future could be, damaged or interrupted due to events such as natural or human-caused disasters (including public health crises) or extreme weather (including as a result of climate change), geopolitical events and security issues (including terrorist attacks and armed hostilities), computer viruses, physical or electronic break-ins, operational failures (including from energy shortages), and similar events or disruptions. Any of these events could cause system interruption, delays, and loss of critical data, and could prevent us from accepting and fulfilling customer orders and providing services, which could make our product and service offerings less attractive and subject us to liability. Our systems are not fully redundant and our disaster recovery planning may not be sufficient. In addition, our insurance may not provide sufficient coverage to compensate for related losses. Any of these events could damage our reputation and be expensive to remedy.\n\n## The Loss of Key Senior Management Personnel or the Failure to Hire and Retain Highly Skilled and Other Personnel Could Negatively Affect Our Business\n\nWe depend on our senior management and other key personnel, including our President and CEO. We do not have \"key person\" life insurance policies. We also rely on other highly skilled personnel. Competition for qualified personnel in the industries in which we operate, as well as senior management, has historically been intense. For example, we experience\n\nsignificant competition in the technology industry, particularly for software engineers, computer scientists, and other technical staff. In addition, changes we make to our current and future work environments may not meet the needs or expectations of our employees or may be perceived as less favorable compared to other companies' policies, which could negatively impact our ability to hire and retain qualified personnel. The loss of any of our executive officers or other key employees, the failure to successfully transition key roles, or the inability to hire, train, retain, and manage qualified personnel, could harm our business.\n\nWe also rely on a significant number of personnel to operate our stores, fulfillment network, and data centers and carry out our other operations. Failure to successfully hire, train, manage, and retain sufficient personnel to meet our needs can strain our operations, increase payroll and other costs, and harm our business and reputation. In addition, changes in laws and regulations applicable to employees, independent contractors, and temporary personnel could increase our payroll costs, decrease our operational flexibility, and negatively impact how we are able to staff our operations and supplement our workforce.\n\nWe are also subject to labor union efforts to organize groups of our employees from time to time. These organizational efforts, if successful, decrease our operational flexibility, which could adversely affect our operating efficiency. In addition, our response to any organizational efforts could be perceived negatively and harm our business and reputation.\n\n# Our Supplier Relationships Subject Us to a Number of Risks \n\nWe have significant suppliers, including content and technology licensors, and in some cases, limited or single-sources of supply, that are important to our sourcing, services, manufacturing, and any related ongoing servicing of merchandise and content. We do not have long-term arrangements with most of our suppliers to guarantee availability of merchandise, content, components, or services, particular payment terms, or the extension of credit limits. Decisions by our current suppliers to limit or stop selling or licensing merchandise, content, components, or services to us on acceptable terms, or delay delivery, including as a result of one or more supplier bankruptcies due to poor economic conditions, as a result of natural or humancaused disasters (including public health crises) or geopolitical events, or for other reasons, may result in our being unable to procure alternatives from other suppliers in a timely and efficient manner and on acceptable terms, or at all. For example, we rely on a limited group of suppliers for semiconductor products, including products related to artificial intelligence infrastructure such as graphics processing units. Constraints on the availability of these products could adversely affect our ability to develop and operate artificial intelligence technologies, products, or services. In addition, violations by our suppliers or other vendors of applicable laws, regulations, contractual terms, intellectual property rights of others, or our Supply Chain Standards, as well as products or practices regarded as unethical, unsafe, or hazardous, could expose us to claims, damage our reputation, limit our growth, and negatively affect our operating results.\n\n## Our Commercial Agreements, Strategic Alliances, and Other Business Relationships Expose Us to Risks\n\nWe provide physical, e-commerce, and omnichannel retail, cloud services, and other services to businesses through commercial agreements, strategic alliances, and business relationships. Under these agreements, we provide web services, technology, fulfillment, computing, digital storage, and other services, as well as enable sellers to offer products or services through our stores. These arrangements are complex and require substantial infrastructure capacity, personnel, and other resource commitments, which may limit the amount of business we can service. We may not be able to implement, maintain, and develop the components of these commercial relationships, which may include web services, fulfillment, customer service, inventory management, tax collection, payment processing, hardware, content, and third-party software, and engaging third parties to perform services. The amount of compensation we receive under certain of our commercial agreements is partially dependent on the volume of the other company's sales. Therefore, when the other company's offerings are not successful, the compensation we receive may be lower than expected or the agreement may be terminated. Moreover, we may not be able to enter into additional or alternative commercial relationships and strategic alliances on favorable terms. We also may be subject to claims from businesses to which we provide these services if we are unsuccessful in implementing, maintaining, or developing these services.\n\nAs our agreements terminate, we may be unable to renew or replace these agreements on comparable terms, or at all. We may in the future enter into amendments on less favorable terms or encounter parties that have difficulty meeting their contractual obligations to us, which could adversely affect our operating results.\n\nOur present and future commercial agreements, strategic alliances, and business relationships create additional risks such as:\n\n- disruption of our ongoing business, including loss of management focus on existing businesses;\n- impairment of other relationships;\n- variability in revenue and income from entering into, amending, or terminating such agreements or relationships; and\n- difficulty integrating under the commercial agreements.\n\n# Our Business Suffers When We Are Unsuccessful in Making, Integrating, and Maintaining Acquisitions and Investments \n\nWe have acquired and invested in a number of companies, and we may in the future acquire or invest in or enter into joint ventures with additional companies. These transactions involve risks such as:\n\n- disruption of our ongoing business, including loss of management focus on existing businesses;\n- problems retaining key personnel;\n- additional operating losses and expenses of the businesses we acquired or in which we invested;\n- the potential impairment of tangible and intangible assets and goodwill, including as a result of acquisitions;\n- the potential impairment of customer and other relationships of the company we acquired or in which we invested or our own customers as a result of any integration of operations;\n- the difficulty of completing such transactions, including obtaining regulatory approvals or satisfying other closing conditions, and achieving anticipated benefits within expected timeframes, or at all;\n- the difficulty of incorporating acquired operations, technology, and rights into our offerings, and unanticipated expenses related to such integration;\n- the difficulty of integrating a new company's accounting, financial reporting, management, information and data security, human resource, and other administrative systems to permit effective management, and the lack of control if such integration is delayed or not successfully implemented;\n- losses we may incur as a result of declines in the value of an investment or as a result of incorporating an investee's financial performance into our financial results;\n- for investments in which an investee's financial performance is incorporated into our financial results, either in full or in part, or investments for which we are required to file financial statements or provide financial information, the dependence on the investee's accounting, financial reporting, and similar systems, controls, and processes;\n- the difficulty of implementing at companies we acquire the controls, procedures, and policies appropriate for a larger public company;\n- the risks associated with businesses we acquire or invest in, which may differ from or be more significant than the risks our other businesses face;\n- potential unknown liabilities associated with a company we acquire or in which we invest; and\n- for foreign transactions, additional risks related to the integration of operations across different cultures and languages, and the economic, political, and regulatory risks associated with specific countries.\nAs a result of future acquisitions or mergers, we might need to issue additional equity securities, spend our cash, or incur debt, contingent liabilities, or amortization expenses related to intangible assets, any of which could reduce our profitability and harm our business or only be available on unfavorable terms, if at all. In addition, valuations supporting our acquisitions and strategic investments could change rapidly. We could determine that such valuations have experienced impairments or other-than-temporary declines in fair value which could adversely impact our financial results.\n\n\n## We Face Significant Inventory Risk\n\nIn addition to risks described elsewhere in this Item 1A relating to fulfillment network and inventory optimization by us and third parties, we are exposed to significant inventory risks that may adversely affect our operating results as a result of seasonality, new product launches, rapid changes in product cycles and pricing, defective merchandise, changes in customer demand and consumer spending patterns, changes in consumer tastes with respect to our products, spoilage, and other factors. We endeavor to accurately predict these trends and avoid overstocking or understocking products we manufacture and/or sell. Demand for products, however, can change significantly between the time inventory or components are ordered and the date of sale. In addition, when we begin selling or manufacturing a new product or offering a new service, it may be difficult to establish vendor relationships, determine appropriate product or component selection, and accurately forecast demand. The acquisition of certain types of inventory or components requires significant lead-time and prepayment and they may not be returnable. We carry a broad selection and significant inventory levels of certain products, such as consumer electronics, and at times we are unable to sell products in sufficient quantities or to meet demand during the relevant selling seasons. Any one of the inventory risk factors set forth above may adversely affect our operating results.\n\n## We Are Subject to Payments-Related Risks\n\nWe accept payments using a variety of methods, including credit card, debit card, credit accounts (including promotional financing), gift cards, direct debit from a customer's bank account, consumer invoicing, physical bank check, and payment\n\nupon delivery. For existing and future payment options we offer to our customers, we currently are subject to, and may become subject to additional, regulations and compliance requirements (including obligations to implement enhanced authentication processes that could result in significant costs and reduce the ease of use of our payments products), as well as fraud. For certain payment methods, including credit and debit cards, we pay interchange and other fees, which may increase over time and raise our operating costs and lower profitability. We rely on third parties to provide certain Amazon-branded payment methods and payment processing services, including the processing of credit cards, debit cards, electronic checks, and promotional financing. In each case, it could disrupt our business if these companies become unwilling or unable to provide these services to us. We also offer co-branded credit card programs, which could adversely affect our operating results if renewed on less favorable terms or terminated. We are also subject to payment card association operating rules, including data security rules, certification requirements, and rules governing electronic funds transfers, which could change or be reinterpreted to make it difficult or impossible for us to comply. Failure to comply with these rules or requirements, as well as any breach, compromise, or failure to otherwise detect or prevent fraudulent activity involving our data security systems, could result in our being liable for card issuing banks' costs, subject to fines and higher transaction fees, and loss of our ability to accept credit and debit card payments from our customers, process electronic funds transfers, or facilitate other types of online payments, and our business and operating results could be adversely affected.\n\nIn addition, we provide regulated services in certain jurisdictions because we enable customers to keep account balances with us and transfer money to third parties, and because we provide services to third parties to facilitate payments on their behalf. Jurisdictions subject us to requirements for licensing, regulatory inspection, bonding and capital maintenance, the use, handling, and segregation of transferred funds, consumer disclosures, maintaining or processing data, and authentication. We are also subject to or voluntarily comply with a number of other laws and regulations relating to payments, money laundering, international money transfers, privacy, data use, data protection, data security, data localization, network security, consumer protection, and electronic fund transfers. If we were found to be in violation of applicable laws or regulations, we could be subject to additional requirements and civil and criminal penalties, or forced to cease providing certain services.\n\n# We Have a Rapidly Evolving Business Model and Our Stock Price Is Highly Volatile \n\nWe have a rapidly evolving business model. The trading price of our common stock fluctuates significantly in response to, among other risks, the risks described elsewhere in this Item 1A, as well as:\n\n- changes in interest rates;\n- conditions or trends in the internet and the industry segments we operate in;\n- quarterly variations in operating results;\n- fluctuations in the stock market in general and market prices for internet-related companies in particular;\n- changes in financial estimates by us or decisions to increase or decrease future spending or investment levels;\n- changes in financial estimates and recommendations by securities analysts;\n- changes in our capital structure, including issuance of additional debt or equity to the public;\n- changes in the valuation methodology of, or performance by, other e-commerce or technology companies; and\n- transactions in our common stock by major investors and certain analyst reports, news, and speculation.\n\nVolatility in our stock price could adversely affect our business and financing opportunities and force us to increase our cash compensation to employees or grant larger stock awards than we have historically, which could hurt our operating results or reduce the percentage ownership of our existing stockholders, or both.\n\n## Legal and Regulatory Risks\n\n## Government Regulation Is Evolving and Unfavorable Changes Could Harm Our Business\n\nWe are subject to general business regulations and laws, as well as regulations and laws specifically governing the internet, physical, e-commerce, and omnichannel retail, digital content, web services, electronic devices, advertising, artificial intelligence technologies and services, and other products and services that we offer or sell. These regulations and laws cover taxation, privacy, data use, data protection, data security, data localization, network security, consumer protection, pricing, content, copyrights, distribution, transportation, mobile communications, electronic device certification, electronic waste, energy consumption, environmental and climate-related regulation, electronic contracts and other communications, competition, employment, trade and protectionist measures, web services, the provision of online payment services, registration, licensing, and information reporting requirements, unencumbered internet access to our services or access to our facilities, the design and operation of websites, health, safety, and sanitation standards, the characteristics, legality, and quality of products and services, product labeling, the commercial operation of unmanned aircraft systems, healthcare, and other matters. It is not clear how\n\nexisting laws governing issues such as property ownership, libel, privacy, data use, data protection, data security, data localization, network security, and consumer protection apply to aspects of our operations such as the internet, e-commerce, digital content, web services, electronic devices, advertising, and artificial intelligence technologies and services. A large number of jurisdictions regulate our operations, and the extent, nature, and scope of such regulations is evolving and expanding as the scope of our businesses expand. We are regularly subject to formal and informal reviews, investigations, and other proceedings by governments and regulatory authorities under existing laws, regulations, or interpretations or pursuing new and novel approaches to regulate our operations. For example, we face a number of open investigations based on claims that aspects of our operations infringe competition rules, including aspects of Amazon's operation of its stores including its fulfillment network, Amazon's acquisitions, and certain aspects of AWS's offering of cloud services. We strongly dispute these claims and intend to defend ourselves vigorously in these investigations. Similarly, we face investigations under a growing patchwork of laws and regulations governing the collection, use, and disclosure of data, the interpretation of which continues to evolve, leading to uncertainty about how regulators will view our privacy practices. In addition, regulators and lawmakers are increasingly focused on controlling additional aspects of the operations of technology companies and companies they have characterized to be online \"gatekeepers\" through the application of existing regulations and laws and the adoption of new regulations and laws, which increases our compliance costs and limits the operation of our business. Unfavorable regulations, laws, decisions, or interpretations by government or regulatory authorities applying those laws and regulations, or inquiries, investigations, or enforcement actions threatened or initiated by them, could cause us to incur substantial costs, expose us to unanticipated civil and criminal liability or penalties (including substantial monetary fines), diminish the demand for, or availability of, our products and services, increase our cost of doing business, require us to change our business practices in a manner materially adverse to our business, damage our reputation, impede our growth, or otherwise have a material effect on our operations. The media, political, and regulatory scrutiny we face, which may continue to increase, amplifies these risks.\n\n# Claims, Litigation, Government Investigations, and Other Proceedings May Adversely Affect Our Business and Results of Operations \n\nAs an innovative company offering a wide range of consumer and business products and services around the world, we are regularly subject to actual and threatened claims, litigation, reviews, investigations, and other proceedings, including proceedings by governments and regulatory authorities, involving a wide range of issues, including patent and other intellectual property matters, taxes, labor and employment (including the characterization of delivery drivers), competition and antitrust, privacy, data use, data protection, data security, data localization, network security, consumer protection, commercial disputes, goods and services offered by us and by third parties (including artificial intelligence technologies and services), and other matters. The number and scale of these proceedings have increased over time as our businesses have expanded in scope and geographic reach, as our products, services, and operations have become more complex and available to, and used by, more people, and as governments and regulatory authorities seek to regulate us on a pre-emptive basis. For example, we are litigating a number of matters alleging price fixing, monopolization, and consumer protection claims, including those brought by state attorneys general and the Federal Trade Commission. Any of these types of proceedings can have an adverse effect on us because of legal costs, disruption of our operations, diversion of management resources, negative publicity, and other factors. The outcomes of these matters are inherently unpredictable and subject to significant uncertainties. Determining legal reserves or possible losses from such matters involves judgment and may not reflect the full range of uncertainties and unpredictable outcomes. Until the final resolution of such matters, we may be exposed to losses in excess of the amount recorded, and such amounts could be material. Should any of our estimates and assumptions change or prove to have been incorrect, it could have a material effect on our business, consolidated financial position, results of operations, or cash flows. In addition, it is possible that a resolution of one or more such proceedings, including as a result of a settlement, could involve licenses, sanctions, consent decrees, or orders requiring us to make substantial future payments, preventing us from offering certain products or services, requiring us to change our business practices in a manner materially adverse to our business, requiring development of non-infringing or otherwise altered products or technologies, damaging our reputation, or otherwise having a material effect on our operations.\n\n## We Are Subject to Product Liability Claims When People or Property Are Harmed by the Products We Sell or Manufacture\n\nSome of the products we sell or manufacture expose us to product liability or food safety claims relating to personal injury or illness, death, or environmental or property damage, and can require product recalls or other actions. Third parties who sell products using our services and stores also expose us to product liability claims. Additionally, under our A-to-z Guarantee, we may reimburse customers for certain product liability claims up to certain limits in these situations, and as our third-party seller sales grow, the cost of this program will increase and could negatively affect our operating results. Although we maintain liability insurance, we cannot be certain that our coverage will be adequate for liabilities actually incurred or that insurance will continue to be available to us on economically reasonable terms, or at all. Although we impose contractual terms on sellers that are intended to prohibit sales of certain type of products, we may not be able to detect, enforce, or collect sufficient damages for\n\nbreaches of such agreements. In addition, some of our agreements with our vendors and sellers do not indemnify us from product liability.\n\n# We Face Additional Tax Liabilities and Collection Obligations \n\nWe are subject to a variety of taxes and tax collection obligations in the U.S. (federal and state) and numerous foreign jurisdictions. We may recognize additional tax expense and be subject to additional tax liabilities, including other liabilities for tax collection obligations due to changes in laws, regulations, administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions. Such changes could come about as a result of economic, political, and other conditions. An increasing number of jurisdictions are considering or have adopted laws or administrative practices that impose new tax measures, including revenue-based taxes, targeting online commerce and the remote selling of goods and services. These include new obligations to withhold or collect sales, consumption, value added, or other taxes on online marketplaces and remote sellers, or other requirements that may result in liability for third party obligations. For example, non-U.S. jurisdictions have proposed or enacted taxes on online advertising and marketplace service revenues. Proliferation of these or similar unilateral tax measures may continue unless broader international tax reform is implemented. In addition, the European Union and other countries (including those in which we operate) have enacted or have committed to enact global minimum taxes, which may increase our tax expense in future years.\n\nOur results of operations and cash flows could be adversely affected by additional taxes imposed on us prospectively or retroactively or additional taxes or penalties resulting from the failure to comply with any collection obligations or failure to provide information about our customers, suppliers, and other third parties for tax reporting purposes to various government agencies. In some cases we also may not have sufficient notice to enable us to build systems and adopt processes to properly comply with new reporting or collection obligations by the effective date.\n\nOur tax expense and liabilities are also affected by other factors, such as changes in our business operations, acquisitions, investments, entry into new businesses and geographies, intercompany transactions, the relative amount of our foreign earnings, losses incurred in jurisdictions for which we are not able to realize related tax benefits, the applicability of special or extraterritorial tax regimes, changes in foreign exchange rates, changes in our stock price, changes to our forecasts of income and loss and the mix of jurisdictions to which they relate, and changes in our tax assets and liabilities and their valuation. In the ordinary course of our business, there are many transactions and calculations for which the ultimate tax determination is uncertain. Significant judgment is required in evaluating and estimating our tax expense, assets, and liabilities.\n\nWe are also subject to tax controversies in various jurisdictions that can result in tax assessments against us. Developments in an audit, investigation, or other tax controversy can have a material effect on our operating results or cash flows in the period or periods for which that development occurs, as well as for prior and subsequent periods. Due to the inherent complexity and uncertainty of these matters, interpretations of certain tax laws by authorities, and judicial, administrative, and regulatory processes in certain jurisdictions, the final outcome of any such controversy may be materially different from our expectations. For example, the Indian tax authority has asserted that tax applies to cloud services fees paid to Amazon in the U.S. We are contesting this position; however, if this matter is adversely resolved, we may be required to pay additional amounts with respect to current and prior periods and our taxes in the future could increase. We regularly assess the likelihood of an adverse outcome resulting from these proceedings to determine the adequacy of our tax accruals. Although we believe our tax estimates are reasonable, the final outcome of audits, investigations, and any other tax controversies could be materially different from our historical tax accruals.\n\n## We Are Subject to Risks Related to Government Contracts and Related Procurement Regulations\n\nOur contracts with U.S., as well as state, local, and foreign, government entities are subject to various procurement regulations and other requirements relating to their formation, administration, and performance. We are subject to audits and investigations relating to our government contracts, and any violations could result in various civil and criminal penalties and administrative sanctions, including termination of contract, refunding or suspending of payments, forfeiture of profits, payment of fines, and suspension or debarment from future government business. In addition, some of these contracts are subject to periodic funding approval and/or provide for termination by the government at any time, without cause.\n\n## Item 1B. Unresolved Staff Comments\n\nNone.\n\n## Item 1C. Cybersecurity\n\nWe have processes in place for assessing, identifying, and managing material risks from potential unauthorized occurrences on or through our electronic information systems that could adversely affect the confidentiality, integrity, or availability of our information systems or the information residing on those systems. These include a wide variety of\n\nmechanisms, controls, technologies, methods, systems, and other processes that are designed to prevent, detect, or mitigate data loss, theft, misuse, unauthorized access, or other security incidents or vulnerabilities affecting the data. The data include confidential, proprietary, and business and personal information that we collect, process, store, and transmit as part of our business, including on behalf of third parties. We also use systems and processes designed to reduce the impact of a security incident at a third-party vendor or customer. Additionally, we use processes to oversee and identify material risks from cybersecurity threats associated with our use of third-party technology and systems, including: technology and systems we use for encryption and authentication; employee email; content delivery to customers; back-office support; and other functions.\n\nAs part of our risk management process, we conduct application security assessments, vulnerability management, penetration testing, security audits, and ongoing risk assessments. We also maintain a variety of incident response plans that are utilized when incidents are detected. We require employees with access to information systems, including all corporate employees, to undertake data protection and cybersecurity training and compliance programs annually.\n\nWe have a unified and centrally-coordinated team, led by our chief security officer, that is responsible for implementing and maintaining centralized cybersecurity and data protection practices at Amazon in close coordination with senior leadership and other teams across Amazon. Reporting to our chief security officer are a number of experienced chief information security officers responsible for various parts of our business, including AWS, each of whom is supported by a team of trained cybersecurity professionals. In addition to our extensive in-house cybersecurity capabilities, at times we also engage assessors, consultants, auditors, or other third parties to assist with assessing, identifying, and managing cybersecurity risks.\n\nOur cybersecurity risks and associated mitigations are evaluated by senior leadership, including as part of our enterprise risk assessments that are reviewed by the Audit Committee and our Board of Directors. Such risks and mitigations are also subject to oversight by the Security Committee of our Board of Directors. Additional information about cybersecurity risks we face is discussed in Item 1A of Part I, \"Risk Factors,\" under the heading \"We Could Be Harmed by Data Loss or Other Security Breaches,\" which should be read in conjunction with the information above.\n\nThe Security Committee, which is comprised of independent directors, oversees our policies and procedures for protecting our cybersecurity infrastructure and for compliance with applicable data protection and security regulations, and related risks. The Security Committee receives reports regarding such risks from management, including our chief security officer, and reports to the Board at least annually. The Security Committee also oversees the Board's response to any significant cybersecurity incidents.\n\nOur chief security officer, who has extensive cybersecurity knowledge and skills gained from over 15 years of work experience on the security team at Amazon and an extensive career in the technology and cybersecurity industries as a senior executive in the federal government, heads the team responsible for implementing and maintaining cybersecurity and data protection practices at Amazon and reports directly to the Chief Executive Officer.\n\n# Item 2. Properties\n\nAs of December 31, 2023, we operated the following facilities (in thousands):\n\n|  Description of Use | Leased Square\nFootage (1) | Owned Square\nFootage | Location  |\n| --- | --- | --- | --- |\n|  Office space | 29,655 | 9,222 | North America  |\n|  Office space | 24,528 | 1,802 | International  |\n|  Physical stores (2) | 22,871 | 707 | North America  |\n|  Physical stores (2) | 255 | - | International  |\n|  Fulfillment, data centers, and other | 413,017 | 25,630 | North America  |\n|  Fulfillment, data centers, and other | 173,765 | 14,802 | International  |\n|  Total | 664,091 | 52,163 |   |\n\n(1) For leased properties, represents the total leased space excluding sub-leased space. (2) This includes 600 North America and 28 International stores as of December 31, 2023.\n\n|  Segment | Leased Square\nFootage (1) | Owned Square\nFootage (1)  |\n| --- | --- | --- |\n|  North America | 424,145 | 15,438  |\n|  International | 165,329 | 7,931  |\n|  AWS | 20,434 | 17,770  |\n|  Total | 609,908 | 41,139  |\n\n(1) Segment amounts exclude corporate facilities. Shared facilities are allocated among the segments based on usage and primarily relate to facilities that hold our technology infrastructure. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 — Segment Information.\"\n\nWe own and lease our corporate headquarters in Washington's Puget Sound region and Arlington, Virginia.\n\n## Item 3. Legal Proceedings\n\nSee Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 7 — Commitments and Contingencies Legal Proceedings.\"\n\n## Item 4. Mine Safety Disclosures\n\nNot applicable.\n\n# PART II \n\nItem 5. Market for the Registrant's Common Stock, Related Shareholder Matters, and Issuer Purchases of Equity Securities\n\n## Market Information\n\nOur common stock is traded on the Nasdaq Global Select Market under the symbol \"AMZN.\"\n\n## Holders\n\nAs of January 24, 2024, there were 11,656 shareholders of record of our common stock, although there is a much larger number of beneficial owners.\n\n## Recent Sales of Unregistered Securities\n\nNone.\n\n## Issuer Purchases of Equity Securities\n\nNone.\n\n## Item 6. Reserved\n\n# Item 7. Management's Discussion and Analysis of Financial Condition and Results of Operations \n\n## Forward-Looking Statements\n\nThis Annual Report on Form 10-K includes forward-looking statements within the meaning of the Private Securities Litigation Reform Act of 1995. All statements other than statements of historical fact, including statements regarding guidance, industry prospects, or future results of operations or financial position, made in this Annual Report on Form 10-K are forwardlooking. We use words such as anticipates, believes, expects, future, intends, and similar expressions to identify forwardlooking statements. Forward-looking statements reflect management's current expectations and are inherently uncertain. Actual results and outcomes could differ materially for a variety of reasons, including, among others, fluctuations in foreign exchange rates, changes in global economic conditions and customer demand and spending, inflation, interest rates, regional labor market constraints, world events, the rate of growth of the internet, online commerce, cloud services, and new and emerging technologies, the amount that Amazon.com invests in new business opportunities and the timing of those investments, the mix of products and services sold to customers, the mix of net sales derived from products as compared with services, the extent to which we owe income or other taxes, competition, management of growth, potential fluctuations in operating results, international growth and expansion, the outcomes of claims, litigation, government investigations, and other proceedings, fulfillment, sortation, delivery, and data center optimization, risks of inventory management, variability in demand, the degree to which we enter into, maintain, and develop commercial agreements, proposed and completed acquisitions and strategic transactions, payments risks, and risks of fulfillment throughput and productivity. In addition, global economic and geopolitical conditions and additional or unforeseen circumstances, developments, or events may give rise to or amplify many of these risks. These risks and uncertainties, as well as other risks and uncertainties that could cause our actual results or outcomes to differ significantly from management's expectations, are described in greater detail in Item 1A of Part I, \"Risk Factors.\"\n\n## Overview\n\nOur primary source of revenue is the sale of a wide range of products and services to customers. The products offered through our stores include merchandise and content we have purchased for resale and products offered by third-party sellers, and we also manufacture and sell electronic devices and produce media content. Generally, we recognize gross revenue from items we sell from our inventory as product sales and recognize our net share of revenue of items sold by third-party sellers as service sales. We seek to increase unit sales across our stores, through increased product selection, across numerous product categories. We also offer other services such as compute, storage, and database offerings, fulfillment, advertising, publishing, and digital content subscriptions.\n\nOur financial focus is on long-term, sustainable growth in free cash flows. Free cash flows are driven primarily by increasing operating income and efficiently managing accounts receivable, inventory, accounts payable, and cash capital expenditures, including our decision to purchase or lease property and equipment. Increases in operating income primarily result from increases in sales of products and services and efficiently managing our operating costs, partially offset by investments we make in longer-term strategic initiatives, including capital expenditures focused on improving the customer experience. To increase sales of products and services, we focus on improving all aspects of the customer experience, including lowering prices, improving availability, offering faster delivery and performance times, increasing selection, producing original content, increasing product categories and service offerings, expanding product information, improving ease of use, improving reliability, and earning customer trust. See \"Results of Operations - Non-GAAP Financial Measures\" below for additional information on our non-GAAP free cash flows financial measures.\n\nWe seek to reduce our variable costs per unit and work to leverage our fixed costs. Our variable costs include product and content costs, payment processing and related transaction costs, picking, packaging, and preparing orders for shipment, transportation, customer service support, costs necessary to run AWS, and a portion of our marketing costs. Our fixed costs include the costs necessary to build and run our technology infrastructure; to build, enhance, and add features to our online stores, web services, electronic devices, and digital offerings; and to build and optimize our fulfillment network. Variable costs generally change directly with sales volume, while fixed costs generally are dependent on the timing of capacity needs, geographic expansion, category expansion, and other factors. To decrease our variable costs on a per unit basis and enable us to lower prices for customers, we seek to increase our direct sourcing, increase discounts from suppliers, and reduce defects in our processes. To minimize unnecessary growth in fixed costs, we seek to improve process efficiencies and maintain a lean culture.\n\nWe seek to turn inventory quickly and collect from consumers before our payments to vendors and sellers become due. Because consumers primarily use credit cards in our stores, our receivables from consumers settle quickly. We expect variability in inventory turnover over time since it is affected by numerous factors, including our product mix, the mix of sales by us and by third-party sellers, our continuing focus on in-stock inventory availability and selection of product offerings, supply chain disruptions and resulting vendor lead times, our investment in new geographies and product lines, and the extent to which we choose to utilize third-party fulfillment providers. We also expect some variability in accounts payable days over time since they are affected by several factors, including the mix of product sales, the mix of sales by third-party sellers, the mix\n\nof suppliers, seasonality, and changes in payment and other terms over time, including the effect of balancing pricing and timing of payment terms with suppliers.\n\nWe expect spending in technology and infrastructure will increase over time as we add computer scientists, designers, software and hardware engineers, and merchandising employees. Our technology and infrastructure investment and capital spending projects often support a variety of product and service offerings due to geographic expansion and the crossfunctionality of our systems and operations. We seek to invest efficiently in several areas of technology and infrastructure, including AWS, and expansion of new and existing product categories and service offerings, as well as in infrastructure to enhance the customer experience and improve our process efficiencies. We believe that advances in technology, specifically the speed and reduced cost of processing power, data storage and analytics, improved wireless connectivity, and the practical applications of artificial intelligence and machine learning, will continue to improve users' experience on the internet and increase its ubiquity in people's lives. To best take advantage of these continued advances in technology, we are investing in AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services to developers and enterprises of all sizes. We are also investing in initiatives to build and deploy innovative and efficient software and electronic devices as well as other initiatives including the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services.\n\nWe seek to efficiently manage shareholder dilution while maintaining the flexibility to issue shares for strategic purposes, such as financings, acquisitions, and aligning employee compensation with shareholders' interests. We utilize restricted stock units as our primary vehicle for equity compensation because we believe this compensation model aligns the long-term interests of our shareholders and employees. In measuring shareholder dilution, we include all vested and unvested stock awards outstanding, without regard to estimated forfeitures. Total shares outstanding plus outstanding stock awards were 10.6 billion and 10.8 billion as of December 31, 2022 and 2023.\n\nOur financial reporting currency is the U.S. Dollar and changes in foreign exchange rates significantly affect our reported results and consolidated trends. For example, if the U.S. Dollar weakens year-over-year relative to currencies in our international locations, our consolidated net sales and operating expenses will be higher than if currencies had remained constant. Likewise, if the U.S. Dollar strengthens year-over-year relative to currencies in our international locations, our consolidated net sales and operating expenses will be lower than if currencies had remained constant. We believe that our increasing diversification beyond the U.S. economy through our growing international businesses benefits our shareholders over the long-term. We also believe it is useful to evaluate our operating results and growth rates before and after the effect of currency changes.\n\nIn addition, the remeasurement of our intercompany balances can result in significant gains and losses associated with the effect of movements in foreign exchange rates. Currency volatilities may continue, which may significantly impact (either positively or negatively) our reported results and consolidated trends and comparisons.\n\nFor additional information about each line item addressed above, refer to Item 8 of Part II, \"Financial Statements and Supplementary Data - Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures.\"\n\nOur Annual Report on Form 10-K for the year ended December 31, 2022 includes a discussion and analysis of our financial condition and results of operations for the year ended December 31, 2021 in Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations.\"\n\n# Critical Accounting Estimates \n\nThe preparation of financial statements in conformity with generally accepted accounting principles of the United States (\"GAAP\") requires estimates and assumptions that affect the reported amounts of assets and liabilities, revenues and expenses, and related disclosures of contingent liabilities in the consolidated financial statements and accompanying notes. Critical accounting estimates are those estimates made in accordance with GAAP that involve a significant level of estimation uncertainty and have had or are reasonably likely to have a material impact on the financial condition or results of operations of the Company. Based on this definition, we have identified the critical accounting estimates addressed below. We also have other key accounting policies, which involve the use of estimates, judgments, and assumptions that are significant to understanding our results. For additional information, see Item 8 of Part II, \"Financial Statements and Supplementary Data Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures.\" Although we believe that our estimates, assumptions, and judgments are reasonable, they are based upon information presently available. Actual results may differ significantly from these estimates under different assumptions, judgments, or conditions.\n\n## Inventories\n\nInventories, consisting of products available for sale, are primarily accounted for using the first-in first-out method, and are valued at the lower of cost and net realizable value. This valuation requires us to make judgments, based on currently available information, about the likely method of disposition, such as through sales to individual customers, returns to product\n\nvendors, or liquidations, and expected recoverable values of each disposition category. These assumptions about future disposition of inventory are inherently uncertain and changes in our estimates and assumptions may cause us to realize material write-downs in the future. As a measure of sensitivity, for every $1 \\%$ of additional inventory valuation allowance as of December 31, 2023, we would have recorded an additional cost of sales of approximately $\\$ 355$ million.\n\nIn addition, we enter into supplier commitments for certain electronic device components and certain products. These commitments are based on forecasted customer demand. If we reduce these commitments, we may incur additional costs.\n\n# Income Taxes \n\nWe are subject to income taxes in the U.S. (federal and state) and numerous foreign jurisdictions. Tax laws, regulations, administrative practices, principles, and interpretations in various jurisdictions may be subject to significant change, with or without notice, due to economic, political, and other conditions, and significant judgment is required in evaluating and estimating our provision and accruals for these taxes. There are many transactions that occur during the ordinary course of business for which the ultimate tax determination is uncertain. In addition, our actual and forecasted earnings are subject to change due to economic, political, and other conditions and significant judgment is required in determining our ability to use our deferred tax assets.\n\nOur effective tax rates could be affected by numerous factors, such as changes in our business operations, acquisitions, investments, entry into new businesses and geographies, intercompany transactions, the relative amount of our foreign earnings, including earnings being lower than anticipated in jurisdictions where we have lower statutory rates and higher than anticipated in jurisdictions where we have higher statutory rates, losses incurred in jurisdictions for which we are not able to realize related tax benefits, the applicability of special tax regimes, changes in foreign exchange rates, changes in our stock price, changes to our forecasts of income and loss and the mix of jurisdictions to which they relate, changes in our deferred tax assets and liabilities and their valuation, changes in the laws, regulations, administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions. In addition, a number of countries have enacted or are actively pursuing changes to their tax laws applicable to corporate multinationals.\n\nWe are also currently subject to tax controversies in various jurisdictions, and these jurisdictions may assess additional income tax liabilities against us. Developments in an audit, investigation, or other tax controversy could have a material effect on our operating results or cash flows in the period or periods for which that development occurs, as well as for prior and subsequent periods. We regularly assess the likelihood of an adverse outcome resulting from these proceedings to determine the adequacy of our tax accruals. Although we believe our tax estimates are reasonable, the final outcome of audits, investigations, and any other tax controversies could be materially different from our historical income tax provisions and accruals.\n\n## Liquidity and Capital Resources\n\nCash flow information is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :-- | --: | --: |\n|  | 2022 | 2023 |\n| Cash provided by (used in): |  |  |\n| Operating activities | $\\$ 46,752$ | $\\$ 84,946$ |\n| Investing activities | $(37,601)$ | $(49,833)$ |\n| Financing activities | 9,718 | $(15,879)$ |\n\nOur principal sources of liquidity are cash flows generated from operations and our cash, cash equivalents, and marketable securities balances, which, at fair value, were $\\$ 70.0$ billion and $\\$ 86.8$ billion as of December 31, 2022 and 2023. Amounts held in foreign currencies were $\\$ 18.3$ billion and $\\$ 23.5$ billion as of December 31, 2022 and 2023. Our foreign currency balances include British Pounds, Canadian Dollars, Euros, Indian Rupees, and Japanese Yen.\n\nCash provided by (used in) operating activities was $\\$ 46.8$ billion and $\\$ 84.9$ billion in 2022 and 2023. Our operating cash flows result primarily from cash received from our consumer, seller, developer, enterprise, and content creator customers, and advertisers, offset by cash payments we make for products and services, employee compensation, payment processing and related transaction costs, operating leases, and interest payments. Cash received from our customers and other activities generally corresponds to our net sales. The increase in operating cash flow in 2023, compared to the prior year, was due to an increase in net income (loss), excluding non-cash expenses, and changes in working capital. Working capital at any specific point in time is subject to many variables, including variability in demand, inventory management and category expansion, the timing of cash receipts and payments, customer and vendor payment terms, and fluctuations in foreign exchange rates.\n\nCash provided by (used in) investing activities corresponds with cash capital expenditures, including leasehold improvements, incentives received from property and equipment vendors, proceeds from asset sales, cash outlays for\n\nacquisitions, investments in other companies and intellectual property rights, and purchases, sales, and maturities of marketable securities. Cash provided by (used in) investing activities was $\\$(37.6)$ billion and $\\$(49.8)$ billion in 2022 and 2023, with the variability caused primarily by purchases, sales, and maturities of marketable securities and cash capital expenditures. Cash capital expenditures were $\\$ 58.3$ billion, and $\\$ 48.1$ billion in 2022 and 2023, which primarily reflect investments in technology infrastructure (the majority of which is to support AWS business growth) and in additional capacity to support our fulfillment network, which investments we expect to increase in 2024. We made cash payments, net of acquired cash, related to acquisition and other investment activity of $\\$ 8.3$ billion and $\\$ 5.8$ billion in 2022 and 2023. We funded the acquisitions of MGM Holdings Inc. in 2022 and 1Life Healthcare, Inc. (One Medical) in 2023 with cash on hand. In 2023, we invested $\\$ 1.25$ billion in a note from Anthropic, PBC, which is convertible into equity. We have an agreement that expires in Q1 2024 to invest up to an additional $\\$ 2.75$ billion in a second convertible note.\n\nCash provided by (used in) financing activities was $\\$ 9.7$ billion and $\\$(15.9)$ billion in 2022 and 2023. Cash inflows from financing activities resulted from proceeds from short-term debt, and other and long-term-debt of $\\$ 62.7$ billion and $\\$ 18.1$ billion in 2022 and 2023. Cash outflows from financing activities resulted from repurchases of common stock in 2022, payments of short-term debt, and other, long-term debt, finance leases, and financing obligations of $\\$ 53.0$ billion and $\\$ 34.0$ billion in 2022 and 2023. Property and equipment acquired under finance leases was $\\$ 675$ million and $\\$ 642$ million in 2022 and 2023.\n\nWe had no borrowings outstanding under the two unsecured revolving credit facilities or the commercial paper programs, we had $\\$ 682$ million of borrowings outstanding under the secured revolving credit facility, and the entire amount of the term loan has been repaid as of December 31, 2023. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 — Debt\" for additional information.\n\nAs of December 31, 2023, cash, cash equivalents, and marketable securities held by foreign subsidiaries were $\\$ 4.7$ billion. We intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nOur U.S. taxable income is reduced by accelerated depreciation deductions and increased by the impact of capitalized research and development expenses. U.S. tax rules provide for enhanced accelerated depreciation deductions by allowing us to expense a portion of qualified property, primarily equipment. These enhanced deductions are scheduled to phase out annually from 2023 through 2026. Our federal tax provision included a partial accelerated depreciation deduction election for 2021, and a full election for 2022 and 2023. Additionally, effective January 1, 2022, research and development expenses are required to be capitalized and amortized for U.S. tax purposes, which delays the deductibility of these expenses. Cash paid for U.S. (federal and state) and foreign income taxes (net of refunds) totaled $\\$ 6.0$ billion and $\\$ 11.2$ billion for 2022 and 2023.\n\nAs of December 31, 2022 and 2023, restricted cash, cash equivalents, and marketable securities were $\\$ 365$ million and $\\$ 503$ million. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 - Debt\" and \"Financial Statements and Supplementary Data — Note 7 - Commitments and Contingencies\" for additional discussion of our principal contractual commitments, as well as our pledged assets. Additionally, we have purchase obligations and open purchase orders, including for inventory and capital expenditures, that support normal operations and are primarily due in the next twelve months. These purchase obligations and open purchase orders are generally cancellable in full or in part through the contractual provisions.\n\nWe believe that cash flows generated from operations and our cash, cash equivalents, and marketable securities balances, as well as our borrowing arrangements, will be sufficient to meet our anticipated operating cash needs for at least the next twelve months. However, any projections of future cash needs and cash flows are subject to substantial uncertainty. See Item 1A of Part I, \"Risk Factors.\" We continually evaluate opportunities to sell additional equity or debt securities, obtain credit facilities, obtain finance and operating lease arrangements, enter into financing obligations, repurchase common stock, pay dividends, or repurchase, refinance, or otherwise restructure our debt for strategic reasons or to further strengthen our financial position.\n\nThe sale of additional equity or convertible debt securities would be dilutive to our shareholders. In addition, we will, from time to time, consider the acquisition of, or investment in, complementary businesses, products, services, capital infrastructure, and technologies, which might affect our liquidity requirements or cause us to secure additional financing, or issue additional equity or debt securities. There can be no assurance that additional credit lines or financing instruments will be available in amounts or on terms acceptable to us, if at all. In addition, economic conditions and actions by policymaking bodies are contributing to changing interest rates and significant capital market volatility, which, along with any increases in our borrowing levels, could increase our future borrowing costs.\n\n# Results of Operations \n\nWe have organized our operations into three segments: North America, International, and AWS. These segments reflect the way the Company evaluates its business performance and manages its operations. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 10 - Segment Information.\"\n\n## Overview\n\nMacroeconomic factors, including inflation, increased interest rates, significant capital market and supply chain volatility, and global economic and geopolitical developments, have direct and indirect impacts on our results of operations that are difficult to isolate and quantify. In addition, changes in fuel, utility, and food costs, interest rates, and economic outlook may impact customer demand and our ability to forecast consumer spending patterns. We also expect the current macroeconomic environment and enterprise customer cost optimization efforts to impact our AWS revenue growth rates. We expect some or all of these factors to continue to impact our operations into Q1 2024.\n\n## Net Sales\n\nNet sales include product and service sales. Product sales represent revenue from the sale of products and related shipping fees and digital media content where we record revenue gross. Service sales primarily represent third-party seller fees, which includes commissions and any related fulfillment and shipping fees, AWS sales, advertising services, Amazon Prime membership fees, and certain digital media content subscriptions. Net sales information is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2022 | 2023 |\n| Net Sales: |  |  |\n| North America | \\$ 315,880 | \\$ 352,828 |\n| International | 118,007 | 131,200 |\n| AWS | 80,096 | 90,757 |\n| Consolidated | \\$ 513,983 | \\$ 574,785 |\n| Year-over-year Percentage Growth (Decline): |  |  |\n| North America | $13 \\%$ | $12 \\%$ |\n| International | (8) | 11 |\n| AWS | 29 | 13 |\n| Consolidated | 9 | 12 |\n| Year-over-year Percentage Growth, excluding the effect of foreign exchange rates: |  |  |\n| North America | $13 \\%$ | $12 \\%$ |\n| International | 4 | 11 |\n| AWS | 29 | 13 |\n| Consolidated | 13 | 12 |\n| Net Sales Mix: |  |  |\n| North America | $61 \\%$ | $61 \\%$ |\n| International | 23 | 23 |\n| AWS | 16 | 16 |\n| Consolidated | $100 \\%$ | $100 \\%$ |\n\nSales increased $12 \\%$ in 2023, compared to the prior year. Changes in foreign exchange rates reduced net sales by $\\$ 71$ million in 2023. For a discussion of the effect of foreign exchange rates on sales growth, see \"Effect of Foreign Exchange Rates\" below.\n\nNorth America sales increased 12\\% in 2023, compared to the prior year. The sales growth primarily reflects increased unit sales, primarily by third-party sellers, advertising sales, and subscription services. Increased unit sales were driven largely by our continued focus on price, selection, and convenience for our customers, including from our shipping offers.\n\nInternational sales increased $11 \\%$ in 2023, compared to the prior year. The sales growth primarily reflects increased unit sales, primarily by third-party sellers, advertising sales, and subscription services. Increased unit sales were driven largely by our continued focus on price, selection, and convenience for our customers, including from our shipping offers. Changes in foreign exchange rates increased International net sales by $\\$ 88$ million in 2023.\n\nAWS sales increased 13\\% in 2023, compared to the prior year. The sales growth primarily reflects increased customer usage, partially offset by pricing changes, primarily driven by long-term customer contracts.\n\n# Operating Income (Loss) \n\nOperating income (loss) by segment is as follows (in millions):\n\n|  | Year Ended December 31, |  |\n| :--: | :--: | :--: |\n|  | 2022 | 2023 |\n| Operating Income (Loss) |  |  |\n| North America | \\$ $(2,847)$ | \\$ 14,877 |\n| International | $(7,746)$ | $(2,656)$ |\n| AWS | 22,841 | 24,631 |\n| Consolidated | \\$ 12,248 | \\$ 36,852 |\n\nOperating income was $\\$ 12.2$ billion and $\\$ 36.9$ billion for 2022 and 2023. We believe that operating income is a more meaningful measure than gross profit and gross margin due to the diversity of our product categories and services.\n\nThe North America operating income in 2023, as compared to the operating loss in the prior year, is primarily due to increased unit sales and increased advertising sales, partially offset by increased shipping and fulfillment costs and increased technology and infrastructure costs.\n\nThe decrease in International operating loss in absolute dollars in 2023, compared to the prior year, is primarily due to increased unit sales and increased advertising sales, partially offset by increased fulfillment and shipping costs and increased technology and infrastructure costs. Changes in foreign exchange rates positively impacted operating loss by $\\$ 246$ million in 2023.\n\nThe increase in AWS operating income in absolute dollars in 2023, compared to the prior year, is primarily due to increased sales, partially offset by increased payroll and related expenses and spending on technology infrastructure, both of which were primarily driven by additional investments to support AWS business growth. Changes in foreign exchange rates positively impacted operating income by $\\$ 220$ million in 2023.\n\n|  Operating Expenses | Year Ended December 31,  |   |\n| --- | --- | --- |\n|  Information about operating expenses is as follows (in millions): | 2022 | 2023  |\n|  Operating Expenses: |  |   |\n|  Cost of sales | $288,831 | $304,739  |\n|  Fulfillment | 84,299 | 90,619  |\n|  Technology and infrastructure | 73,213 | 85,622  |\n|  Sales and marketing | 42,238 | 44,370  |\n|  General and administrative | 11,891 | 11,816  |\n|  Other operating expense (income), net | 1,263 | 767  |\n|  Total operating expenses | $501,735 | $537,933  |\n|  Year-over-year Percentage Growth (Decline): |  |   |\n|  Cost of sales | 6% | 6%  |\n|  Fulfillment | 12 | 7  |\n|  Technology and infrastructure | 31 | 17  |\n|  Sales and marketing | 30 | 5  |\n|  General and administrative | 35 | (1)  |\n|  Other operating expense (income), net | 1,936 | (39)  |\n|  Percent of Net Sales: |  |   |\n|  Cost of sales | 56.2% | 53.0%  |\n|  Fulfillment | 16.4 | 15.8  |\n|  Technology and infrastructure | 14.2 | 14.9  |\n|  Sales and marketing | 8.2 | 7.7  |\n|  General and administrative | 2.3 | 2.1  |\n|  Other operating expense (income), net | 0.2 | 0.1  |\n|  Cost of Sales |  |   |\n|  Cost of sales primarily consists of the purchase price of consumer products, inbound and outbound shipping costs, including costs related to sortation and delivery centers and where we are the transportation service provider, and digital media content costs where we record revenue gross, including video and music. | |   |   |\n|  The increase in cost of sales in absolute dollars in 2023, compared to the prior year, is primarily due to increased product and shipping costs resulting from increased sales, partially offset by fulfillment network efficiencies and lower transportation rates. Changes in foreign exchange rates reduced cost of sales by $254 million in 2023. | |   |   |\n|  Shipping costs were $83.5 billion and $89.5 billion in 2022 and 2023. Shipping costs to receive products from our suppliers are included in our inventory and recognized as cost of sales upon sale of products to our customers. We expect our cost of shipping to continue to increase to the extent our customers accept and use our shipping offers at an increasing rate, we use more expensive shipping methods, and we offer additional services. We seek to mitigate costs of shipping over time in part through achieving higher sales volumes, optimizing our fulfillment network, negotiating better terms with our suppliers, and achieving better operating efficiencies. We believe that offering low prices to our customers is fundamental to our future success, and one way we offer lower prices is through shipping offers. | |   |   |\n|  Costs to operate our AWS segment are primarily classified as “Technology and infrastructure” as we leverage a shared infrastructure that supports both our internal technology requirements and external sales to AWS customers. | |   |   |\n|  Fulfillment |  |   |\n|  Fulfillment costs primarily consist of those costs incurred in operating and staffing our North America and International fulfillment centers, physical stores, and customer service centers and payment processing costs. While AWS payment processing and related transaction costs are included in “Fulfillment,” AWS costs are primarily classified as “Technology and infrastructure.” Fulfillment costs as a percentage of net sales may vary due to several factors, such as payment processing and related transaction costs, our level of productivity and accuracy, changes in volume, size, and weight of units received and | |   |   |\n\nfulfilled, the extent to which third-party sellers utilize Fulfillment by Amazon services, timing of fulfillment network and physical store expansion, the extent we utilize fulfillment services provided by third parties, mix of products and services sold, and our ability to affect customer service contacts per unit by implementing improvements in our operations and enhancements to our customer self-service features. Additionally, sales by our sellers have higher payment processing and related transaction costs as a percentage of net sales compared to our retail sales because payment processing costs are based on the gross purchase price of underlying transactions.\n\nThe increase in fulfillment costs in absolute dollars in 2023, compared to the prior year, is primarily due to increased sales and investments in our fulfillment network, partially offset by fulfillment network efficiencies. Changes in foreign exchange rates increased fulfillment costs by $\\$ 52$ million in 2023.\n\nWe seek to expand our fulfillment network to accommodate a greater selection and in-stock inventory levels and to meet anticipated shipment volumes from sales of our own products as well as sales by third parties for which we provide the fulfillment services. We regularly evaluate our facility requirements.\n\n# Technology and Infrastructure \n\nTechnology and infrastructure costs include payroll and related expenses for employees involved in the research and development of new and existing products and services, development, design, and maintenance of our stores, curation and display of products and services made available in our online stores, and infrastructure costs. Infrastructure costs include servers, networking equipment, and data center related depreciation and amortization, rent, utilities, and other expenses necessary to support AWS and other Amazon businesses. Collectively, these costs reflect the investments we make in order to offer a wide variety of products and services to our customers, including expenditures related to initiatives to build and deploy innovative and efficient software and electronic devices and the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services.\n\nWe seek to invest efficiently in numerous areas of technology and infrastructure so we may continue to enhance the customer experience and improve our process efficiency through rapid technology developments, while operating at an ever increasing scale. Our technology and infrastructure investment and capital spending projects often support a variety of product and service offerings due to geographic expansion and the cross-functionality of our systems and operations. We expect spending in technology and infrastructure to increase over time as we continue to add employees and infrastructure. These costs are allocated to segments based on usage. The increase in technology and infrastructure costs in absolute dollars in 2023, compared to the prior year, is primarily due to an increase in spending on infrastructure and increased payroll and related costs associated with technical teams responsible for expanding our existing products and services and initiatives to introduce new products and service offerings.\n\n## Sales and Marketing\n\nSales and marketing costs include advertising and payroll and related expenses for personnel engaged in marketing and selling activities, including sales commissions related to AWS. We direct customers to our stores primarily through a number of marketing channels, such as our sponsored search, social and online advertising, third-party customer referrals, television advertising, and other initiatives. Our marketing costs are largely variable, based on growth in sales and changes in rates. To the extent there is increased or decreased competition for these traffic sources, or to the extent our mix of these channels shifts, we would expect to see a corresponding change in our marketing costs.\n\nThe increase in sales and marketing costs in absolute dollars in 2023, compared to the prior year, is primarily due to increased payroll and related expenses for personnel engaged in marketing and selling activities.\n\nWhile costs associated with Amazon Prime membership benefits and other shipping offers are not included in sales and marketing expense, we view these offers as effective worldwide marketing tools, and intend to continue offering them indefinitely.\n\n## General and Administrative\n\nGeneral and administrative costs were $\\$ 11.9$ billion and $\\$ 11.8$ billion during 2022 and 2023, and were primarily related to payroll and related expenses and professional fees.\n\n## Other Operating Expense (Income), Net\n\nOther operating expense (income), net was $\\$ 1.3$ billion and $\\$ 767$ million during 2022 and 2023, and was primarily related to asset impairments for physical store closures in 2022 and for fulfillment network facilities and physical store closures in 2023, and the amortization of intangible assets.\n\n# Interest Income and Expense \n\nOur interest income was $\\$ 989$ million and $\\$ 2.9$ billion during 2022 and 2023, primarily due to an increase in prevailing rates. We generally invest our excess cash in AAA-rated money market funds and investment grade short- to intermediate-term marketable debt securities. Our interest income corresponds with the average balance of invested funds based on the prevailing rates, which vary depending on the geographies and currencies in which they are invested.\n\nInterest expense was $\\$ 2.4$ billion and $\\$ 3.2$ billion in 2022 and 2023 and was primarily related to debt and finance leases. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 4 — Leases and Note 6 - Debt\" for additional information.\n\nOur long-term lease liabilities were $\\$ 73.0$ billion and $\\$ 77.3$ billion as of December 31, 2022 and 2023. Our long-term debt was $\\$ 67.1$ billion and $\\$ 58.3$ billion as of December 31, 2022 and 2023. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 4 — Leases and Note 6 — Debt\" for additional information.\n\n## Other Income (Expense), Net\n\nOther income (expense), net was $\\$(16.8)$ billion and $\\$ 938$ million during 2022 and 2023. The primary components of other income (expense), net are related to equity securities valuations and adjustments, equity warrant valuations, and foreign currency. Included in other income (expense), net in 2022 and 2023 is a marketable equity securities valuation gain (loss) of $\\$(12.7)$ billion and $\\$ 797$ million from our equity investment in Rivian.\n\n## Income Taxes\n\nOur effective tax rate is subject to significant variation due to several factors, including variability in our pre-tax and taxable income and loss and the mix of jurisdictions to which they relate, intercompany transactions, the applicability of special tax regimes, changes in how we do business, acquisitions, investments, developments in tax controversies, changes in our stock price, changes in our deferred tax assets and liabilities and their valuation, foreign currency gains (losses), changes in statutes, regulations, case law, and administrative practices, principles, and interpretations related to tax, including changes to the global tax framework, competition, and other laws and accounting rules in various jurisdictions, and relative changes of expenses or losses for which tax benefits are not recognized. Our effective tax rate can be more or less volatile based on the amount of pretax income or loss. For example, the impact of discrete items and non-deductible expenses on our effective tax rate is greater when our pre-tax income is lower. In addition, we record valuation allowances against deferred tax assets when there is uncertainty about our ability to generate future income in relevant jurisdictions.\n\nWe recorded a provision (benefit) for income taxes of $\\$(3.2)$ billion and $\\$ 7.1$ billion in 2022 and 2023. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 9 - Income Taxes\" for additional information.\n\n## Non-GAAP Financial Measures\n\nRegulation G, Conditions for Use of Non-GAAP Financial Measures, and other SEC regulations define and prescribe the conditions for use of certain non-GAAP financial information. Our measures of free cash flows and the effect of foreign exchange rates on our consolidated statements of operations meet the definition of non-GAAP financial measures.\n\nWe provide multiple measures of free cash flows because we believe these measures provide additional perspective on the impact of acquiring property and equipment with cash and through finance leases and financing obligations.\n\n## Free Cash Flow\n\nFree cash flow is cash flow from operations reduced by \"Purchases of property and equipment, net of proceeds from sales and incentives.\" The following is a reconciliation of free cash flow to the most comparable GAAP cash flow measure, \"Net cash provided by (used in) operating activities,\" for 2022 and 2023 (in millions):\n\n| Year Ended December 31, |  |\n| --: | --: |\n| 2022 | 2023 |\n| \\$ 46,752 | \\$ 84,946 |\n| $(58,321)$ | $(48,133)$ |\n| \\$ $(11,569)$ | \\$ 36,813 |\n| \\$ $(37,601)$ | \\$ $(49,833)$ |\n| \\$ 9,718 | \\$ $(15,879)$ |\n\n# Free Cash Flow Less Principal Repayments of Finance Leases and Financing Obligations\n\nFree cash flow less principal repayments of finance leases and financing obligations is free cash flow reduced by \"Principal repayments of finance leases\" and \"Principal repayments of financing obligations.\" Principal repayments of finance leases and financing obligations approximates the actual payments of cash for our finance leases and financing obligations. The following is a reconciliation of free cash flow less principal repayments of finance leases and financing obligations to the most comparable GAAP cash flow measure, \"Net cash provided by (used in) operating activities,\" for 2022 and 2023 (in millions):\n\n|   | Year Ended December 31, |   |\n| --- | --- | --- |\n|   | 2022 | 2023  |\n|  Net cash provided by (used in) operating activities | \\$ 46,752 | \\$ 84,946  |\n|  Purchases of property and equipment, net of proceeds from sales and incentives | $(58,321)$ | $(48,133)$  |\n|  Free cash flow | $(11,569)$ | 36,813  |\n|  Principal repayments of finance leases | $(7,941)$ | $(4,384)$  |\n|  Principal repayments of financing obligations | $(248)$ | $(271)$  |\n|  Free cash flow less principal repayments of finance leases and financing obligations | \\$ $(19,758)$ | \\$ 32,158  |\n|  Net cash provided by (used in) investing activities | \\$ $(37,601)$ | \\$ $(49,833)$  |\n|  Net cash provided by (used in) financing activities | \\$ 9,718 | \\$ $(15,879)$  |\n\nFree Cash Flow Less Equipment Finance Leases and Principal Repayments of All Other Finance Leases and Financing Obligations\n\nFree cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations is free cash flow reduced by equipment acquired under finance leases, which is included in \"Property and equipment acquired under finance leases, net of remeasurements and modifications,\" principal repayments of all other finance lease liabilities, which is included in \"Principal repayments of finance leases,\" and \"Principal repayments of financing obligations.\" All other finance lease liabilities and financing obligations consists of property. In this measure, equipment acquired under finance leases is reflected as if these assets had been purchased with cash, which is not the case as these assets have been leased. The following is a reconciliation of free cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations to the most comparable GAAP cash flow measure, \"Net cash provided by (used in) operating activities,\" for 2022 and 2023 (in millions):\n\n|   | Year Ended December 31, |   |\n| --- | --- | --- |\n|   | 2022 | 2023  |\n|  Net cash provided by (used in) operating activities | \\$ 46,752 | \\$ 84,946  |\n|  Purchases of property and equipment, net of proceeds from sales and incentives | $(58,321)$ | $(48,133)$  |\n|  Free cash flow | $(11,569)$ | 36,813  |\n|  Equipment acquired under finance leases (1) | $(299)$ | $(310)$  |\n|  Principal repayments of all other finance leases (2) | $(670)$ | $(683)$  |\n|  Principal repayments of financing obligations | $(248)$ | $(271)$  |\n|  Free cash flow less equipment finance leases and principal repayments of all other finance leases and financing obligations | \\$ $(12,786)$ | \\$ 35,549  |\n|  Net cash provided by (used in) investing activities | \\$ $(37,601)$ | \\$ $(49,833)$  |\n|  Net cash provided by (used in) financing activities | \\$ 9,718 | \\$ $(15,879)$  |\n\n(1) For the year ended December 31, 2022 and 2023, this amount relates to equipment included in \"Property and equipment acquired under finance leases, net of remeasurements and modifications\" of $\\$ 675$ million and $\\$ 642$ million. (2) For the year ended December 31, 2022 and 2023, this amount relates to property included in \"Principal repayments of finance leases\" of $\\$ 7,941$ million and $\\$ 4,384$ million.\n\nAll of these free cash flows measures have limitations as they omit certain components of the overall cash flow statement and do not represent the residual cash flow available for discretionary expenditures. For example, these measures of free cash flows do not incorporate the portion of payments representing principal reductions of debt or cash payments for business acquisitions. Additionally, our mix of property and equipment acquisitions with cash or other financing options may change over time. Therefore, we believe it is important to view free cash flows measures only as a complement to our entire consolidated statements of cash flows.\n\n# Effect of Foreign Exchange Rates \n\nInformation regarding the effect of foreign exchange rates, versus the U.S. Dollar, on our net sales, operating expenses, and operating income is provided to show reported period operating results had the foreign exchange rates remained the same as those in effect in the comparable prior year period. The effect on our net sales, operating expenses, and operating income from changes in our foreign exchange rates versus the U.S. Dollar is as follows (in millions):\n\n|  | Year Ended December 31, 2022 |  |  | Year Ended December 31, 2023 |  |  |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|  | As <br> Reported | Exchange <br> Rate <br> Effect (1) | At Prior <br> Year <br> Rates (2) | As <br> Reported | Exchange <br> Rate <br> Effect (1) | At Prior <br> Year <br> Rates (2) |\n| Net sales | \\$513,983 | \\$ 15,495 | \\$529,478 | \\$574,785 | \\$ 71 | \\$574,856 |\n| Operating expenses | 501,735 | 16,356 | 518,091 | 537,933 | 531 | 538,464 |\n| Operating income | 12,248 | (861) | 11,387 | 36,852 | (460) | 36,392 |\n\n(1) Represents the change in reported amounts resulting from changes in foreign exchange rates from those in effect in the comparable prior year period for operating results.\n(2) Represents the outcome that would have resulted had foreign exchange rates in the reported period been the same as those in effect in the comparable prior year period for operating results.\n\n# Guidance \n\nWe provided guidance on February 1, 2024, in our earnings release furnished on Form 8-K as set forth below. These forward-looking statements reflect Amazon.com's expectations as of February 1, 2024, and are subject to substantial uncertainty. Our results are inherently unpredictable and may be materially affected by many factors, such as fluctuations in foreign exchange rates, changes in global economic and geopolitical conditions and customer demand and spending (including the impact of recessionary fears), inflation, interest rates, regional labor market constraints, world events, the rate of growth of the internet, online commerce, cloud services, and new and emerging technologies, as well as those outlined in Item 1A of Part I, \"Risk Factors.\"\n\nFirst Quarter 2024 Guidance\n\n- Net sales are expected to be between $\\$ 138.0$ billion and $\\$ 143.5$ billion, or to grow between $8 \\%$ and $13 \\%$ compared with first quarter 2023. This guidance anticipates a favorable impact of approximately 40 basis points from foreign exchange rates.\n- Operating income is expected to be between $\\$ 8.0$ billion and $\\$ 12.0$ billion, compared with $\\$ 4.8$ billion in first quarter 2023. This guidance includes approximately $\\$ 0.9$ billion lower depreciation expense due to an increase in the estimated useful life of our servers beginning on January 1, 2024.\n- This guidance assumes, among other things, that no additional business acquisitions, restructurings, or legal settlements are concluded.\n\n# Item 7A. Quantitative and Qualitative Disclosures About Market Risk \n\nWe are exposed to market risk for the effect of interest rate changes, foreign currency fluctuations, and changes in the market values of our investments. Information relating to quantitative and qualitative disclosures about market risk is set forth below and in Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations Liquidity and Capital Resources.\"\n\n## Interest Rate Risk\n\nOur exposure to market risk for changes in interest rates relates primarily to our investment portfolio and our debt. Our long-term debt is carried at amortized cost and fluctuations in interest rates do not impact our consolidated financial statements. However, the fair value of our long-term debt, which pays interest at a fixed rate, will generally fluctuate with movements of interest rates, increasing in periods of declining rates of interest and declining in periods of increasing rates of interest.\n\nWe generally invest our excess cash in AAA-rated money market funds and investment grade short- to intermediate-term marketable debt securities. Marketable debt securities with fixed interest rates may have their fair market value adversely affected due to a rise in interest rates, and we may suffer losses in principal if forced to sell securities that have declined in market value due to changes in interest rates. The following table provides information about our cash equivalents and marketable debt securities, including principal cash flows by expected maturity and the related weighted-average interest rates as of December 31, 2023 (in millions, except percentages):\n\n|  |  |  |  |  |  |  |  | Estimated Fair Value as of December 31, 2023 |\n| :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: | :--: |\n|  | 2024 | 2025 | 2026 | 2027 | 2028 | Thereafter | Total |  |\n| Money market funds | \\$ 39,160 | \\$ — | \\$ — | \\$ — | \\$ — | \\$ — | \\$39,160 | \\$ 39,160 |\n| Weighted average interest rate | $5.32 \\%$ | — \\% | — \\% | — \\% | — \\% | — \\% | $5.32 \\%$ |  |\n| Corporate debt securities | 25,075 | 2,227 | 715 | 9 | — | — | 28,026 | 27,805 |\n| Weighted average interest rate | $5.13 \\%$ | $1.30 \\%$ | $1.51 \\%$ | $2.33 \\%$ | — \\% | — \\% | $4.74 \\%$ |  |\n| U.S. government and agency securities | 552 | 501 | 398 | 50 | 43 | 230 | 1,774 | 1,699 |\n| Weighted average interest rate | $3.24 \\%$ | $1.49 \\%$ | $1.12 \\%$ | $0.97 \\%$ | $0.67 \\%$ | $1.31 \\%$ | $1.89 \\%$ |  |\n| Asset-backed securities | 789 | 349 | 115 | 143 | 13 | 291 | 1,700 | 1,646 |\n| Weighted average interest rate | $1.34 \\%$ | $2.09 \\%$ | $1.20 \\%$ | $1.67 \\%$ | $1.66 \\%$ | $1.33 \\%$ | $1.51 \\%$ |  |\n| Foreign government and agency securities | 506 | — | — | — | — | — | 506 | 505 |\n| Weighted average interest rate | $5.28 \\%$ | — \\% | — \\% | — \\% | — \\% | — \\% | $5.28 \\%$ |  |\n| Other debt securities | 62 | 46 | — | — | — | — | 108 | 104 |\n| Weighted average interest rate | $0.55 \\%$ | $1.07 \\%$ | — \\% | — \\% | — \\% | — \\% | $0.78 \\%$ |  |\n|  | \\$ 66,144 | \\$3,123 | \\$ 1,228 | \\$ 202 | \\$ 56 | \\$ 521 | \\$71,274 |  |\n| Cash equivalents and marketable debt securities |  |  |  |  |  |  |  | \\$ 70,919 |\n\nAs of December 31, 2023, we had long-term debt with a face value of $\\$ 67.2$ billion, including the current portion, primarily consisting of fixed rate unsecured senior notes. See Item 8 of Part II, \"Financial Statements and Supplementary Data — Note 6 - Debt\" for additional information.\n\n# Foreign Exchange Risk \n\nDuring 2023, net sales from our International segment accounted for $23 \\%$ of our consolidated revenues. Net sales and related expenses generated from our internationally-focused stores, including within Canada and Mexico (which are included in our North America segment), are primarily denominated in the functional currencies of the corresponding stores and primarily include Euros, British Pounds, and Japanese Yen. The results of operations of, and certain of our intercompany balances associated with, our internationally-focused stores and AWS are exposed to foreign exchange rate fluctuations. Upon consolidation, as foreign exchange rates vary, net sales and other operating results may differ materially from expectations, and we may record significant gains or losses on the remeasurement of intercompany balances. For example, as a result of fluctuations in foreign exchange rates throughout the year compared to rates in effect the prior year, International segment net sales increased by $\\$ 88$ million in comparison with the prior year.\n\nWe have foreign exchange risk related to foreign-denominated cash, cash equivalents, and marketable securities (\"foreign funds\"). Based on the balance of foreign funds as of December 31, 2023, of $\\$ 23.5$ billion, an assumed $5 \\%, 10 \\%$, and $20 \\%$ adverse change to foreign exchange would result in declines of $\\$ 1.2$ billion, $\\$ 2.3$ billion, and $\\$ 4.7$ billion.\n\nWe also have foreign exchange risk related to our intercompany balances denominated in various currencies. Based on the intercompany balances as of December 31, 2023, an assumed $5 \\%, 10 \\%$, and $20 \\%$ adverse change to foreign exchange rates would result in losses of $\\$ 320$ million, $\\$ 640$ million, and $\\$ 1.3$ billion, recorded to \"Other income (expense), net.\"\n\nSee Item 7 of Part II, \"Management's Discussion and Analysis of Financial Condition and Results of Operations Results of Operations - Effect of Foreign Exchange Rates\" for additional information on the effect on reported results of changes in foreign exchange rates.\n\n## Equity Investment Risk\n\nAs of December 31, 2023, our recorded value in equity, equity warrant, and convertible debt investments in public and private companies was $\\$ 9.6$ billion. Our equity and equity warrant investments in publicly traded companies, which include our equity investment in Rivian, represent $\\$ 5.7$ billion of our investments as of December 31, 2023, and are recorded at fair value, which is subject to market price volatility. We record our equity warrant investments in private companies at fair value and adjust our equity investments in private companies for observable price changes or impairments. Valuations of private companies are inherently more complex due to the lack of readily available market data. The current global economic conditions provide additional uncertainty. As such, we believe that market sensitivities are not practicable. See Item 8 of Part II, \"Financial Statements and Supplementary Data - Note 1 - Description of Business, Accounting Policies, and Supplemental Disclosures\" for additional information.\n\n|   | Page  |\n| --- | --- |\n|  Report of Ernst & Young LLP, Independent Registered Public Accounting Firm (PCAOB ID: 42) | 35  |\n|  Consolidated Statements of Cash Flows | 37  |\n|  Consolidated Statements of Operations | 38  |\n|  Consolidated Statements of Comprehensive Income (Loss) | 39  |\n|  Consolidated Balance Sheets | 40  |\n|  Consolidated Statements of Stockholders’ Equity | 41  |\n|  Notes to Consolidated Financial Statements | 42  |\n\n# Report of Independent Registered Public Accounting Firm \n\nThe Board of Directors and Shareholders\nAmazon.com, Inc.\n\n## Opinion on the Financial Statements\n\nWe have audited the accompanying consolidated balance sheets of Amazon.com, Inc. (the Company) as of December 31, 2023 and 2022, the related consolidated statements of operations, comprehensive income (loss), stockholders' equity, and cash flows for each of the three years in the period ended December 31, 2023, and the related notes (collectively referred to as the \"consolidated financial statements\"). In our opinion, the consolidated financial statements present fairly, in all material respects, the financial position of the Company at December 31, 2023 and 2022, and the results of its operations and its cash flows for each of the three years in the period ended December 31, 2023, in conformity with U.S. generally accepted accounting principles.\n\nWe also have audited, in accordance with the standards of the Public Company Accounting Oversight Board (United States) (PCAOB), the Company's internal control over financial reporting as of December 31, 2023, based on criteria established in Internal Control-Integrated Framework issued by the Committee of Sponsoring Organizations of the Treadway Commission (2013 framework) and our report dated February 1, 2024 expressed an unqualified opinion thereon.\n\n## Basis for Opinion\n\nThese consolidated financial statements are the responsibility of the Company's management. Our responsibility is to express an opinion on the Company's consolidated financial statements based on our audits. We are a public accounting firm registered with the PCAOB and are required to be independent with respect to the Company in accordance with the U.S. federal securities laws and the applicable rules and regulations of the Securities and Exchange Commission and the PCAOB.\n\nWe conducted our audits in accordance with the standards of the PCAOB. Those standards require that we plan and perform the audit to obtain reasonable assurance about whether the consolidated financial statements are free of material misstatement, whether due to error or fraud. Our audits included performing procedures to assess the risks of material misstatement of the consolidated financial statements, whether due to error or fraud, and performing procedures that respond to those risks. Such procedures included examining, on a test basis, evidence regarding the amounts and disclosures in the consolidated financial statements. Our audits also included evaluating the accounting principles used and significant estimates made by management, as well as evaluating the overall presentation of the consolidated financial statements. We believe that our audits provide a reasonable basis for our opinion.\n\n## Critical Audit Matter\n\nThe critical audit matter communicated below is a matter arising from the current period audit of the consolidated financial statements that was communicated or required to be communicated to the audit committee and that: (1) relates to accounts or disclosures that are material to the consolidated financial statements and (2) involved our especially challenging, subjective or complex judgments. The communication of the critical audit matter does not alter in any way our opinion on the consolidated financial statements, taken as a whole, and we are not, by communicating the critical audit matter below, providing a separate opinion on the critical audit matter or on the accounts or disclosures to which it relates.\n\n|   | *Uncertain Tax Positions*  |\n| --- | --- |\n|  *Description of the Matter* | As discussed in Notes 1 and 9 of the consolidated financial statements, the Company is subject to income taxes in the U.S. and numerous foreign jurisdictions and during the ordinary course of business, there are many tax positions for which the ultimate tax determination is uncertain. As a result, significant judgment is required in evaluating the Company’s tax positions and determining its provision for income taxes. The Company uses significant judgment in (1) determining whether a tax position’s technical merits are more likely than not to be sustained and (2) measuring the amount of tax benefit that qualifies for recognition. As of December 31, 2023, the Company reported accrued liabilities of $5.2 billion for various tax contingencies.Auditing the recognition and measurement of the Company’s tax contingencies was challenging because the evaluation of whether a tax position is more likely than not to be sustained and the measurement of the benefit of various tax positions can be complex and involves significant auditor judgment. Management’s evaluation of tax positions is based on interpretations of tax laws and legal rulings, and may be impacted by regulatory changes and judicial and examination activity.  |\n|  *How We Addressed the Matter in Our Audit* | We tested controls over the Company’s process to assess the technical merits of its tax contingencies, including controls over: the assessment as to whether a tax position is more likely than not to be sustained; the measurement of the benefit of its tax positions, both initially and on an ongoing basis; and the development of the related disclosures.We involved our international tax, transfer pricing, and research and development tax professionals in assessing the technical merits of certain of the Company’s tax positions. Depending on the nature of the specific tax position and, as applicable, developments with the relevant tax authorities relating thereto, our procedures included obtaining and examining the Company’s analysis including the Company’s correspondence with such tax authorities and evaluating the underlying facts upon which the tax positions are based. We used our knowledge of and experience with international, transfer pricing, and other income tax laws of the relevant taxing jurisdictions to evaluate the Company’s accounting for its tax contingencies. We evaluated developments in the applicable regulatory environments to assess potential effects on the Company’s positions, including recent decisions in relevant court cases. We analyzed the appropriateness of the Company’s assumptions and the accuracy of the Company’s calculations and data used to determine the amount of tax benefits to recognize. We evaluated the Company’s income tax disclosures in relation to these matters.  |\n\n|  AMAZON.COM, INC. | |   |   |   |\n| --- | --- | --- | --- | --- |\n|  CONSOLIDATED STATEMENTS OF CASH FLOWS | |   |   |   |\n|  (in millions) | |   |   |   |\n|   | Year Ended December 31, |  |   |\n|   | 2021 | 2022 | 2023  |\n|  CASH, CASH EQUIVALENTS, AND RESTRICTED CASH, BEGINNING OF PERIOD | $42,377 | $36,477 | $54,253  |\n|  OPERATING ACTIVITIES: |  |  |   |\n|  Net income (loss) | 33,364 | (2,722) | 30,425  |\n|  Adjustments to reconcile net income (loss) to net cash from operating activities: |  |  |   |\n|  Depreciation and amortization of property and equipment and capitalized content costs, operating lease assets, and other | 34,433 | 41,921 | 48,663  |\n|  Stock-based compensation | 12,757 | 19,621 | 24,023  |\n|  Non-operating expense (income), net | (14,306) | 16,966 | (748)  |\n|  Deferred income taxes | (310) | (8,148) | (5,876)  |\n|  Changes in operating assets and liabilities: |  |  |   |\n|  Inventories | (9,487) | (2,592) | 1,449  |\n|  Accounts receivable, net and other | (9,145) | (8,622) | (8,348)  |\n|  Other assets | (9,018) | (13,275) | (12,265)  |\n|  Accounts payable | 3,602 | 2,945 | 5,473  |\n|  Accrued expenses and other | 2,123 | (1,558) | (2,428)  |\n|  Unearned revenue | 2,314 | 2,216 | 4,578  |\n|  Net cash provided by (used in) operating activities | 46,327 | 46,752 | 84,946  |\n|  INVESTING ACTIVITIES: |  |  |   |\n|  Purchases of property and equipment | (61,053) | (63,645) | (52,729)  |\n|  Proceeds from property and equipment sales and incentives | 5,657 | 5,324 | 4,596  |\n|  Acquisitions, net of cash acquired, non-marketable investments, and other | (1,985) | (8,316) | (5,839)  |\n|  Sales and maturities of marketable securities | 59,384 | 31,601 | 5,627  |\n|  Purchases of marketable securities | (60,157) | (2,565) | (1,488)  |\n|  Net cash provided by (used in) investing activities | (58,154) | (37,601) | (49,833)  |\n|  FINANCING ACTIVITIES: |  |  |   |\n|  Common stock repurchased | — | (6,000) | —  |\n|  Proceeds from short-term debt, and other | 7,956 | 41,553 | 18,129  |\n|  Repayments of short-term debt, and other | (7,753) | (37,554) | (25,677)  |\n|  Proceeds from long-term debt | 19,003 | 21,166 | —  |\n|  Repayments of long-term debt | (1,590) | (1,258) | (3,676)  |\n|  Principal repayments of finance leases | (11,163) | (7,941) | (4,384)  |\n|  Principal repayments of financing obligations | (162) | (248) | (271)  |\n|  Net cash provided by (used in) financing activities | 6,291 | 9,718 | (15,879)  |\n|  Foreign currency effect on cash, cash equivalents, and restricted cash | (364) | (1,093) | 403  |\n|  Net increase (decrease) in cash, cash equivalents, and restricted cash | (5,900) | 17,776 | 19,637  |\n|  CASH, CASH EQUIVALENTS, AND RESTRICTED CASH, END OF PERIOD | $36,477 | $54,253 | $73,890  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |\n\n|   | Year Ended December 31,  |   |   |\n| --- | --- | --- | --- |\n|   | 2021 | 2022 | 2023  |\n|  Net product sales | $241,787 | $242,901 | $255,887  |\n|  Net service sales | 228,035 | 271,082 | 318,898  |\n|  Total net sales | 469,822 | 513,983 | 574,785  |\n|  Operating expenses: |  |  |   |\n|  Cost of sales | 272,344 | 288,831 | 304,739  |\n|  Fulfillment | 75,111 | 84,299 | 90,619  |\n|  Technology and infrastructure | 56,052 | 73,213 | 85,622  |\n|  Sales and marketing | 32,551 | 42,238 | 44,370  |\n|  General and administrative | 8,823 | 11,891 | 11,816  |\n|  Other operating expense (income), net | 62 | 1,263 | 767  |\n|  Total operating expenses | 444,943 | 501,735 | 537,933  |\n|  Operating income | 24,879 | 12,248 | 36,852  |\n|  Interest income | 448 | 989 | 2,949  |\n|  Interest expense | (1,809) | (2,367) | (3,182)  |\n|  Other income (expense), net | 14,633 | (16,806) | 938  |\n|  Total non-operating income (expense) | 13,272 | (18,184) | 705  |\n|  Income (loss) before income taxes | 38,151 | (5,936) | 37,557  |\n|  Benefit (provision) for income taxes | (4,791) | 3,217 | (7,120)  |\n|  Equity-method investment activity, net of tax | 4 | (3) | (12)  |\n|  Net income (loss) | $33,364 | $(2,722) | $30,425  |\n|  Basic earnings per share | $3.30 | $(0.27) | $2.95  |\n|  Diluted earnings per share | $3.24 | $(0.27) | $2.90  |\n|  Weighted-average shares used in computation of earnings per share: |  |  |   |\n|  Basic | 10,117 | 10,189 | 10,304  |\n|  Diluted | 10,296 | 10,189 | 10,492  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |\n\n|   | Year Ended December 31, |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | 2021 | 2022 | 2023 |   |\n|  Net income (loss) | $33,364 | $(2,722) | $30,425 |   |\n|  Other comprehensive income (loss): |  |  |  |   |\n|  Foreign currency translation adjustments, net of tax of $47, $100, and $(55) | (819) | (2,586) | 1,027 |   |\n|  Available-for-sale debt securities: |  |  |  |   |\n|  Change in net unrealized gains (losses), net of tax of $72, $159, and $(110) | (343) | (823) | 366 |   |\n|  Less: reclassification adjustment for losses (gains) included in \"Other income (expense), net,\" net of tax of $13, $0, and $(15) | (34) | 298 | 50 |   |\n|  Net change | (377) | (525) | 416 |   |\n|  Other, net of tax of $0, $0, and $(1) | — | — | 4 |   |\n|  Total other comprehensive income (loss) | (1,196) | (3,111) | 1,447 |   |\n|  Comprehensive income (loss) | $32,168 | $(5,833) | $31,872 |   |\n|  See accompanying notes to consolidated financial statements. |  |  |  |   |\n\n|   | December 31,  |   |\n| --- | --- | --- |\n|   | 2022 | 2023  |\n|  ASSETS |  |   |\n|  Current assets: |  |   |\n|  Cash and cash equivalents | $53,888 | $73,387  |\n|  Marketable securities | 16,138 | 13,393  |\n|  Inventories | 34,405 | 33,318  |\n|  Accounts receivable, net and other | 42,360 | 52,253  |\n|  Total current assets | 146,791 | 172,351  |\n|  Property and equipment, net | 186,715 | 204,177  |\n|  Operating leases | 66,123 | 72,513  |\n|  Goodwill | 20,288 | 22,789  |\n|  Other assets | 42,758 | 56,024  |\n|  Total assets | $462,675 | $527,854  |\n|  LIABILITIES AND STOCKHOLDERS’ EQUITY |  |   |\n|  Current liabilities: |  |   |\n|  Accounts payable | $79,600 | $84,981  |\n|  Accrued expenses and other | 62,566 | 64,709  |\n|  Unearned revenue | 13,227 | 15,227  |\n|  Total current liabilities | 155,393 | 164,917  |\n|  Long-term lease liabilities | 72,968 | 77,297  |\n|  Long-term debt | 67,150 | 58,314  |\n|  Other long-term liabilities | 21,121 | 25,451  |\n|  Commitments and contingencies (Note 7) |  |   |\n|  Stockholders’ equity: |  |   |\n|  Preferred stock ($0.01 par value; 500 shares authorized; no shares issued or outstanding) | — | —  |\n|  Common stock ($0.01 par value; 100,000 shares authorized; 10,757 and 10,898 shares issued; 10,242 and 10,383 shares outstanding) | 108 | 109  |\n|  Treasury stock, at cost | (7,837) | (7,837)  |\n|  Additional paid-in capital | 75,066 | 99,025  |\n|  Accumulated other comprehensive income (loss) | (4,487) | (3,040)  |\n|  Retained earnings | 83,193 | 113,618  |\n|  Total stockholders’ equity | 146,043 | 201,875  |\n|  Total liabilities and stockholders’ equity | $462,675 | $527,854  |\n|  See accompanying notes to consolidated financial statements. | |   |   |\n\n|   | AMAZON.COM, INC. CONSOLIDATED STATEMENTS OF STOCKHOLDERS’ EQUITY (in millions) |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n|   | Common Stock |  |  |  |  |  |   |\n|   | Shares | Amount | Treasury Stock | Additional Paid-In Capital | Accumulated Other Comprehensive Income (Loss) | Retained Earnings | Total Stockholders’ Equity  |\n|  Balance as of January 1, 2021 | 10,066 | $105 | $(1,837) | $42,765 | $(180) | $52,551 | $93,404  |\n|  Net income | — | — | — | — | — | 33,364 | 33,364  |\n|  Other comprehensive income (loss) | — | — | — | — | (1,196) | — | (1,196)  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 109 | 1 | — | 12,672 | — | — | 12,673  |\n|  Balance as of December 31, 2021 | 10,175 | 106 | (1,837) | 55,437 | (1,376) | 85,915 | 138,245  |\n|  Net loss | — | — | — | — | — | (2,722) | (2,722)  |\n|  Other comprehensive income (loss) | — | — | — | — | (3,111) | — | (3,111)  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 113 | 2 | — | 19,629 | — | — | 19,631  |\n|  Common stock repurchased | (46) | — | (6,000) | — | — | — | (6,000)  |\n|  Balance as of December 31, 2022 | 10,242 | 108 | (7,837) | 75,066 | (4,487) | 83,193 | 146,043  |\n|  Net income | — | — | — | — | — | 30,425 | 30,425  |\n|  Other comprehensive income (loss) | — | — | — | — | 1,447 | — | 1,447  |\n|  Stock-based compensation and issuance of employee benefit plan stock | 141 | 1 | — | 23,959 | — | — | 23,960  |\n|  Balance as of December 31, 2023 | 10,383 | $109 | $(7,837) | $99,025 | $(3,040) | $113,618 | $201,875  |\n|  See accompanying notes to consolidated financial statements. | |   |   |   |   |   |   |   |\n\n# AMAZON.COM, INC. <br> NOTES TO CONSOLIDATED FINANCIAL STATEMENTS \n\n## Note 1 - DESCRIPTION OF BUSINESS, ACCOUNTING POLICIES, AND SUPPLEMENTAL DISCLOSURES\n\n## Description of Business\n\nWe seek to be Earth's most customer-centric company. In each of our segments, we serve our primary customer sets, consisting of consumers, sellers, developers, enterprises, content creators, advertisers, and employees. We serve consumers through our online and physical stores and focus on selection, price, and convenience. We offer programs that enable sellers to grow their businesses, sell their products in our stores, and fulfill orders using our services, and programs that allow authors, independent publishers, musicians, filmmakers, Twitch streamers, skill and app developers, and others to publish and sell content. We serve developers and enterprises of all sizes through AWS, which offers a broad set of on-demand technology services, including compute, storage, database, analytics, and machine learning, and other services. We also manufacture and sell electronic devices. In addition, we provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising.\n\nWe have organized our operations into three segments: North America, International, and AWS. See \"Note 10 Segment Information.\"\n\n## Common Stock Split\n\nOn May 27, 2022, we effected a 20 -for- 1 stock split of our common stock and proportionately increased the number of authorized shares of common stock. All share, restricted stock unit (\"RSU\"), and per share or per RSU information throughout this Annual Report on Form 10-K has been retroactively adjusted to reflect the stock split. The shares of common stock retain a par value of $\\$ 0.01$ per share. Accordingly, an amount equal to the par value of the increased shares resulting from the stock split was reclassified from \"Additional paid-in capital\" to \"Common stock.\"\n\n## Prior Period Reclassifications\n\nCertain prior period amounts have been reclassified to conform to the current period presentation. \"Other assets\" were reclassified out of \"Accounts receivable, net and other\" on our consolidated statements of cash flows.\n\n## Principles of Consolidation\n\nThe consolidated financial statements include the accounts of Amazon.com, Inc. and its consolidated entities (collectively, the \"Company\"), consisting of its wholly-owned subsidiaries and those entities in which we have a variable interest and of which we are the primary beneficiary, including certain entities in India and certain entities that support our health care services and seller lending financing activities. Intercompany balances and transactions between consolidated entities are eliminated.\n\n## Use of Estimates\n\nThe preparation of financial statements in conformity with GAAP requires estimates and assumptions that affect the reported amounts of assets and liabilities, revenues and expenses, and related disclosures of contingent liabilities in the consolidated financial statements and accompanying notes. Estimates are used for, but not limited to, income taxes, useful lives of equipment, commitments and contingencies, valuation of acquired intangibles and goodwill, stock-based compensation forfeiture rates, vendor funding, inventory valuation, collectability of receivables, impairment of property and equipment and operating leases, valuation and impairment of investments, self-insurance liabilities, and viewing patterns of capitalized video content. Actual results could differ materially from these estimates. For example, in Q4 2023 we completed a useful life study for our servers and are increasing the useful life from five years to six years in January 2024, which, based on servers that are included in \"Property and equipment, net\" as of December 31, 2023, will have an anticipated impact to our 2024 operating income of $\\$ 3.1$ billion. We had previously increased the useful life of our servers from four years to five years in January 2022.\n\nFor the year ended December 31, 2022, we recorded approximately $\\$ 1.1$ billion, of which $\\$ 720$ million was recorded in the fourth quarter, of impairments of property and equipment and operating leases primarily related to physical stores. These charges were recorded in \"Other operating expense (income), net\" on our consolidated statements of operations and primarily impacted our North America segment. For the year ended December 31, 2022, we also recorded expenses of approximately $\\$ 480$ million, primarily in \"Fulfillment\", on our consolidated statements of operations primarily relating to terminating contracts for certain leases not yet commenced as well as other purchase commitments, which primarily impacted our North America segment.\n\nFor the year ended December 31, 2022, we recorded approximately $\\$ 720$ million, of which $\\$ 640$ million was recorded in the fourth quarter, of estimated severance costs primarily related to planned role eliminations. These charges were recorded primarily in \"Technology and infrastructure,\" \"Fulfillment,\" and \"General and administrative\" on our consolidated statements of operations and primarily impacted our North America segment.\n\nCharges for impairment, expenses for terminating contracts and other commitments, and severance costs were not material to our consolidated results of operations for the years ended December 31, 2021 and 2023.\n\n# Supplemental Cash Flow Information \n\nThe following table shows supplemental cash flow information (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2021 | 2022 | 2023 |\n| SUPPLEMENTAL CASH FLOW INFORMATION: |  |  |  |\n| Cash paid for interest on debt, net of capitalized interest | \\$ 1,098 | \\$ 1,561 | \\$ 2,608 |\n| Cash paid for operating leases | \\$ 6,722 | \\$ 8,633 | \\$ 10,453 |\n| Cash paid for interest on finance leases | \\$ 521 | \\$ 374 | \\$ 308 |\n| Cash paid for interest on financing obligations | \\$ 153 | \\$ 207 | \\$ 196 |\n| Cash paid for income taxes, net of refunds | \\$ 3,688 | \\$ 6,035 | \\$ 11,179 |\n| Assets acquired under operating leases | \\$ 25,369 | \\$ 18,800 | \\$ 14,052 |\n| Property and equipment acquired under finance leases, net of remeasurements and modifications | \\$ 7,061 | \\$ 675 | \\$ 642 |\n| Property and equipment recognized during the construction period of build-to-suit lease arrangements | \\$ 5,846 | \\$ 3,187 | \\$ 357 |\n| Property and equipment derecognized after the construction period of build-to-suit lease arrangements, with the associated leases recognized as operating | \\$ 230 | \\$ 5,158 | \\$ 1,374 |\n\n## Earnings Per Share\n\nBasic earnings per share is calculated using our weighted-average outstanding common shares. Diluted earnings per share is calculated using our weighted-average outstanding common shares including the dilutive effect of stock awards as determined under the treasury stock method. In periods when we have a net loss, stock awards are excluded from our calculation of earnings per share as their inclusion would have an antidilutive effect.\n\nThe following table shows the calculation of diluted shares (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2021 | 2022 | 2023 |\n| Shares used in computation of basic earnings per share | 10,117 | 10,189 | 10,304 |\n| Total dilutive effect of outstanding stock awards | 179 | — | 188 |\n| Shares used in computation of diluted earnings per share | 10,296 | 10,189 | 10,492 |\n\n## Revenue\n\nRevenue is measured based on the amount of consideration that we expect to receive, reduced by estimates for return allowances, promotional discounts, and rebates. Revenue also excludes any amounts collected on behalf of third parties, including sales and indirect taxes. In arrangements where we have multiple performance obligations, the transaction price is allocated to each performance obligation using the relative stand-alone selling price. We generally determine stand-alone selling prices based on the prices charged to customers or using expected cost plus a margin.\n\nA description of our principal revenue generating activities is as follows:\nRetail sales - We offer consumer products through our online and physical stores. Revenue is recognized when control of the goods is transferred to the customer, which generally occurs upon our delivery to a third-party carrier or, in the case of an Amazon delivery, to the customer.\n\nThird-party seller services - We offer programs that enable sellers to sell their products in our stores, and fulfill orders using our services. We are not the seller of record in these transactions. The commissions and any related fulfillment and shipping fees we earn from these arrangements are recognized when the services are rendered, which generally occurs upon delivery of the related products to a third-party carrier or, in the case of an Amazon delivery, to the customer.\n\nAdvertising services - We provide advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising. Revenue is recognized as ads are delivered based on the number of clicks or impressions.\n\nSubscription services - Our subscription sales include fees associated with Amazon Prime memberships and access to content including digital video, audiobooks, digital music, e-books, and other non-AWS subscription services. Prime memberships provide our customers with access to an evolving suite of benefits that represent a single stand-ready obligation. Subscriptions are paid for at the time of or in advance of delivering the services. Revenue from such arrangements is recognized over the subscription period.\n$A W S$ - Our AWS arrangements include global sales of compute, storage, database, and other services. Revenue is allocated to services using stand-alone selling prices and is primarily recognized when the customer uses these services, based on the quantity of services rendered, such as compute or storage capacity delivered on-demand. Certain services, including compute and database, are also offered as a fixed quantity over a specified term, for which revenue is recognized ratably. Sales commissions we pay in connection with contracts that exceed one year are capitalized and amortized over the contract term.\n\nOther - Other revenue includes sales related to various other offerings, such as certain licensing and distribution of video content, health care services, and shipping services, and our co-branded credit card agreements. Revenue is recognized when content is licensed or distributed and as or when services are performed.\n\n# Return Allowances \n\nReturn allowances, which reduce revenue and cost of sales, are estimated using historical experience. Liabilities for return allowances are included in \"Accrued expenses and other\" and were $\\$ 1.0$ billion, $\\$ 1.3$ billion, and $\\$ 1.4$ billion as of December 31, 2021, 2022, and 2023. Additions to the allowance were $\\$ 5.1$ billion, $\\$ 5.5$ billion, and $\\$ 5.2$ billion and deductions from the allowance were $\\$ 4.9$ billion, $\\$ 5.2$ billion, and $\\$ 5.1$ billion in 2021, 2022, and 2023. Included in \"Inventories\" on our consolidated balance sheets are assets totaling $\\$ 882$ million, $\\$ 948$ million, and $\\$ 992$ million as of December 31, 2021, 2022, and 2023, for the rights to recover products from customers associated with our liabilities for return allowances.\n\n## Cost of Sales\n\nCost of sales primarily consists of the purchase price of consumer products, inbound and outbound shipping costs, including costs related to sortation and delivery centers and where we are the transportation service provider, and digital media content costs where we record revenue gross, including video and music. Shipping costs to receive products from our suppliers are included in our inventory, and recognized as cost of sales upon sale of products to our customers. Payment processing and related transaction costs, including those associated with seller transactions, are classified in \"Fulfillment\" on our consolidated statements of operations.\n\n## Vendor Agreements\n\nWe have agreements with our vendors to receive consideration primarily for cooperative marketing efforts, promotions, incentives, and volume rebates. We generally consider these amounts received from vendors to be a reduction of the prices we pay for their goods, including property and equipment, or services, and are recorded as a reduction of the cost of inventory, cost of services, or cost of property and equipment. Volume rebates typically depend on reaching minimum purchase thresholds. We evaluate the likelihood of reaching purchase thresholds using past experience and current year forecasts. When volume rebates can be reasonably estimated, we record a portion of the rebate as we make progress towards the purchase threshold.\n\n## Fulfillment\n\nFulfillment costs primarily consist of those costs incurred in operating and staffing our North America and International segments' fulfillment centers, physical stores, and customer service centers, including facilities and equipment expenses, such as depreciation and amortization, and rent; costs attributable to buying, receiving, inspecting, and warehousing inventories; picking, packaging, and preparing customer orders for shipment; payment processing and related transaction costs, including costs associated with our guarantee for certain seller transactions; responding to inquiries from customers; and supply chain management for our manufactured electronic devices. Fulfillment costs also include amounts paid to third parties that assist us in fulfillment and customer service operations.\n\n# Technology and Infrastructure \n\nTechnology and infrastructure costs include payroll and related expenses for employees involved in the research and development of new and existing products and services, development, design, and maintenance of our stores, curation and display of products and services made available in our online stores, and infrastructure costs. Infrastructure costs include servers, networking equipment, and data center related depreciation and amortization, rent, utilities, and other expenses necessary to support AWS and other Amazon businesses. Collectively, these costs reflect the investments we make in order to offer a wide variety of products and services to our customers, including expenditures related to initiatives to build and deploy innovative and efficient software and electronic devices and the development of a satellite network for global broadband service and autonomous vehicles for ride-hailing services. Technology and infrastructure costs are generally expensed as incurred.\n\n## Sales and Marketing\n\nSales and marketing costs include advertising and payroll and related expenses for personnel engaged in marketing and selling activities, including sales commissions related to AWS. We pay commissions to third parties when their customer referrals result in sales. We also participate in cooperative advertising arrangements with certain of our vendors, and other third parties.\n\nAdvertising and other promotional costs to market our products and services are expensed as incurred and were $\\$ 16.9$ billion, $\\$ 20.6$ billion, and $\\$ 20.3$ billion in 2021, 2022, and 2023.\n\n## General and Administrative\n\nGeneral and administrative expenses primarily consist of costs for corporate functions, including payroll and related expenses; facilities and equipment expenses, such as depreciation and amortization expense and rent; and professional fees.\n\n## Stock-Based Compensation\n\nCompensation cost for all equity-classified stock awards expected to vest is measured at fair value on the date of grant and recognized over the service period. The fair value of restricted stock units is determined based on the number of shares granted and the quoted price of our common stock. Such value is recognized as expense over the service period, net of estimated forfeitures, using the accelerated method. Under this method, approximately $50 \\%$ of the grant date fair value is recognized as expense in the first year of grant for the majority of our stock-based compensation awards. The accelerated method also adds a higher level of sensitivity and complexity in estimating forfeitures. If an award is forfeited early in its life, the adjustment to compensation expense is much greater under an accelerated method than under a straight-line method. The estimated number of stock awards that will ultimately vest requires judgment, and to the extent actual results or updated estimates differ from our current estimates, such amounts will be recorded as a cumulative adjustment in the period estimates are revised. We consider many factors when estimating expected forfeitures, including historical forfeiture experience by grant year and employee level. Additionally, stock-based compensation includes stock appreciation rights that are expected to settle in cash. These liability-classified awards are remeasured to fair value at the end of each reporting period until settlement or expiration.\n\n## Other Operating Expense (Income), Net\n\nOther operating expense (income), net, consists primarily of the amortization of intangible assets, and asset impairments for physical store closures in 2022 and for fulfillment network facilities and physical store closures in 2023.\n\n## Other Income (Expense), Net\n\nOther income (expense), net, is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :-- | --: | --: | --: |\n|  | 2021 | 2022 | 2023 |\n| Marketable equity securities valuation gains (losses) | $\\$ 11,526$ | $\\$(13,870)$ | $\\$ 984$ |\n| Equity warrant valuation gains (losses) | 1,315 | $(2,132)$ | 26 |\n| Upward adjustments relating to equity investments in private companies | 1,866 | 76 | 40 |\n| Foreign currency gains (losses) | $(55)$ | $(340)$ | 65 |\n| Other, net | $(19)$ | $(540)$ | $(177)$ |\n| Total other income (expense), net | $\\$ 14,633$ | $\\$(16,806)$ | $\\$ 938$ |\n\nIncluded in other income (expense), net in 2022 and 2023 is a marketable equity securities valuation gain (loss) of $\\$(12.7)$ billion and $\\$ 797$ million from our equity investment in Rivian Automotive, Inc. (\"Rivian\"). Our investment in Rivian's preferred stock was accounted for at cost, with adjustments for observable changes in prices or impairments, prior to Rivian's initial public offering in November 2021, which resulted in the conversion of our preferred stock to Class A common stock. As of December 31, 2023, we held 158 million shares of Rivian's Class A common stock, representing an approximate 16\\% ownership interest, and an approximate $15 \\%$ voting interest. We determined that we have the ability to exercise significant influence over Rivian through our equity investment, our commercial arrangement for the purchase of electric vehicles and jointly-owned intellectual property, and one of our employees serving on Rivian's board of directors. We elected the fair value option to account for our equity investment in Rivian, which is included in \"Marketable securities\" on our consolidated balance sheets, and had a fair value of $\\$ 2.9$ billion and $\\$ 3.7$ billion as of December 31, 2022 and December 31, 2023. The investment was subject to regulatory sales restrictions resulting in a discount for lack of marketability of approximately $\\$ 800$ million as of December 31, 2021, which expired in Q1 2022.\n\nRequired summarized financial information of Rivian as disclosed in its most recent SEC filings is as follows (in millions):\n\n|  Revenues | Year Ended December 31, 2021 | Year Ended December 31, 2022 | Nine Months Ended September 30, 2023  |\n| --- | --- | --- | --- |\n|   | \\$ 55 | \\$ 1,658 | \\$ 3,119  |\n|  Gross profit | (465) | $(3,123)$ | $(1,424)$  |\n|  Loss from operations | $(4,220)$ | $(6,856)$ | $(4,158)$  |\n|  Net loss | $(4,688)$ | $(6,752)$ | $(3,911)$  |\n|   |  | December 31, 2022 | September 30, 2023  |\n|  Total current assets |  | \\$ 13,130 | \\$ 12,086  |\n|  Total assets |  | 17,876 | 16,456  |\n|  Total current liabilities |  | 2,424 | 2,624  |\n|  Total liabilities |  | 4,077 | 5,904  |\n\n# Income Taxes\n\nIncome tax expense includes U.S. (federal and state) and foreign income taxes. Certain foreign subsidiary earnings and losses are subject to current U.S. taxation and the subsequent repatriation of those earnings is not subject to tax in the U.S. We intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nDeferred income tax balances reflect the effects of temporary differences between the carrying amounts of assets and liabilities and their tax bases, as well as net operating loss and tax credit carryforwards, and are stated at enacted tax rates expected to be in effect when taxes are actually paid or recovered.\n\nDeferred tax assets represent amounts available to reduce income taxes payable in future periods. Deferred tax assets are evaluated for future realization and reduced by a valuation allowance to the extent we believe they will not be realized. We consider many factors when assessing the likelihood of future realization of our deferred tax assets, including recent cumulative loss experience and expectations of future earnings, capital gains and investment in such jurisdiction, the carry-forward periods available to us for tax reporting purposes, and other relevant factors.\n\nWe utilize a two-step approach to recognizing and measuring uncertain income tax positions (income tax contingencies). The first step is to evaluate the tax position for recognition by determining if the weight of available evidence indicates it is more likely than not the position will be sustained on audit, including resolution of related appeals or litigation processes. The second step is to measure the tax benefit as the largest amount which is more than $50 \\%$ likely of being realized upon ultimate settlement. We consider many factors when evaluating our tax positions and estimating our tax benefits, which may require periodic adjustments and which may not accurately forecast actual outcomes. We include interest and penalties related to our income tax contingencies in income tax expense.\n\n# Fair Value of Financial Instruments \n\nFair value is defined as the price that would be received to sell an asset or paid to transfer a liability in an orderly transaction between market participants at the measurement date. To increase the comparability of fair value measures, the following hierarchy prioritizes the inputs to valuation methodologies used to measure fair value:\n\nLevel 1 - Valuations based on quoted prices for identical assets and liabilities in active markets.\nLevel 2 - Valuations based on observable inputs other than quoted prices included in Level 1, such as quoted prices for similar assets and liabilities in active markets, quoted prices for identical or similar assets and liabilities in markets that are not active, or other inputs that are observable or can be corroborated by observable market data.\n\nLevel 3 - Valuations based on unobservable inputs reflecting our own assumptions, consistent with reasonably available assumptions made by other market participants. These valuations require significant judgment.\n\nWe measure the fair value of money market funds and certain marketable equity securities based on quoted prices in active markets for identical assets or liabilities. Other marketable securities were valued either based on recent trades of securities in inactive markets or based on quoted market prices of similar instruments and other significant inputs derived from or corroborated by observable market data. We did not hold significant amounts of marketable securities categorized as Level 3 assets as of December 31, 2022 and 2023.\n\nWe hold equity warrants giving us the right to acquire stock of other companies. As of December 31, 2022 and 2023, these warrants had a fair value of $\\$ 2.1$ billion and $\\$ 2.2$ billion, and are recorded within \"Other assets\" on our consolidated balance sheets with gains and losses recognized in \"Other income (expense), net\" on our consolidated statements of operations. These warrants are classified as Level 2 and 3 assets.\n\n## Cash and Cash Equivalents\n\nWe classify all highly liquid instruments with an original maturity of three months or less as cash equivalents.\n\n## Inventories\n\nInventories, consisting of products available for sale, are primarily accounted for using the first-in, first-out method, and are valued at the lower of cost and net realizable value. This valuation requires us to make judgments, based on currently available information, about the likely method of disposition, such as through sales to individual customers, returns to product vendors, or liquidations, and expected recoverable values of each disposition category. The inventory valuation allowance, representing a write-down of inventory, was $\\$ 2.8$ billion and $\\$ 3.0$ billion as of December 31, 2022 and 2023.\n\nWe provide Fulfillment by Amazon services in connection with certain of our sellers' programs. Third-party sellers maintain ownership of their inventory, regardless of whether fulfillment is provided by us or the third-party sellers, and therefore these products are not included in our inventories.\n\nWe also purchase electronic device components from a variety of suppliers and use several contract manufacturers to provide manufacturing services for our products. During the normal course of business, in order to manage manufacturing lead times and help ensure adequate supply, we enter into agreements with contract manufacturers and suppliers for certain electronic device components. We have certain non-cancellable purchase commitments arising from these agreements. These commitments are based on forecasted customer demand. If we reduce these commitments, we may incur additional costs. We also have firm, non-cancellable commitments for certain products offered in our Whole Foods Market stores.\n\n## Accounts Receivable, Net and Other\n\nIncluded in \"Accounts receivable, net and other\" on our consolidated balance sheets are receivables primarily related to customers, vendors, and sellers, as well as prepaid expenses and other current assets. As of December 31, 2022 and 2023, customer receivables, net, were $\\$ 26.6$ billion and $\\$ 34.1$ billion, vendor receivables, net, were $\\$ 6.9$ billion and $\\$ 8.5$ billion, seller receivables, net, were $\\$ 1.3$ billion and $\\$ 1.0$ billion, and other receivables, net, were $\\$ 3.1$ billion and $\\$ 3.3$ billion. Seller receivables are amounts due from sellers related to our seller lending program, which provides funding to sellers primarily to procure inventory. Prepaid expenses and other current assets were $\\$ 4.5$ billion and $\\$ 5.4$ billion as of December 31, 2022 and December 31, 2023.\n\nWe estimate losses on receivables based on expected losses, including our historical experience of actual losses. Receivables are considered impaired and written-off when it is probable that all contractual payments due will not be collected in accordance with the terms of the agreement. The allowance for doubtful accounts was $\\$ 1.1$ billion, $\\$ 1.4$ billion, and $\\$ 1.7$ billion as of December 31, 2021, 2022, and 2023. Additions to the allowance were $\\$ 1.0$ billion, $\\$ 1.6$ billion, and $\\$ 1.9$ billion, and deductions to the allowance were $\\$ 1.1$ billion, $\\$ 1.3$ billion, and $\\$ 1.6$ billion in 2021, 2022, and 2023.\n\n# Software Development Costs \n\nWe incur software development costs related to products to be sold, leased, or marketed to external users, internal-use software, and our websites. Software development costs capitalized were not significant for the years presented. All other costs, including those related to design or maintenance, are expensed as incurred.\n\n## Property and Equipment, Net\n\nProperty and equipment are stated at cost less accumulated depreciation and amortization. Incentives that we receive from property and equipment vendors are recorded as a reduction to our costs. Property includes buildings and land that we own, along with property we have acquired under build-to-suit lease arrangements when we have control over the building during the construction period and finance lease arrangements. Equipment includes assets such as servers and networking equipment, heavy equipment, and other fulfillment equipment. Depreciation and amortization is recorded on a straight-line basis over the estimated useful lives of the assets (generally the lesser of 40 years or the remaining life of the underlying building, four years prior to January 1, 2022 and five years subsequent to January 1, 2022 for our servers, five years prior to January 1, 2022 and six years subsequent to January 1, 2022 for our networking equipment, ten years for heavy equipment, and three to ten years for other fulfillment equipment). Depreciation and amortization expense is classified within the corresponding operating expense categories on our consolidated statements of operations.\n\n## Leases\n\nWe categorize leases with contractual terms longer than twelve months as either operating or finance. Finance leases are generally those leases that allow us to substantially utilize or pay for the entire asset over its estimated life. Assets acquired under finance leases are recorded in \"Property and equipment, net.\" All other leases are categorized as operating leases. Our leases generally have terms that range from one to ten years for equipment and one to twenty years for property.\n\nCertain lease contracts include obligations to pay for other services, such as operations and maintenance. For leases of property, we account for these other services as a component of the lease. For substantially all other leases, the services are accounted for separately and we allocate payments to the lease and other services components based on estimated stand-alone prices.\n\nLease liabilities are recognized at the present value of the fixed lease payments, reduced by landlord incentives using a discount rate based on similarly secured borrowings available to us. Lease assets are recognized based on the initial present value of the fixed lease payments, reduced by landlord incentives, plus any direct costs from executing the leases or lease prepayments reclassified from \"Other assets\" upon lease commencement. Leasehold improvements are capitalized at cost and amortized over the lesser of their expected useful life or the lease term.\n\nWhen we have the option to extend the lease term, terminate the lease before the contractual expiration date, or purchase the leased asset, and it is reasonably certain that we will exercise the option, we consider the option in determining the classification and measurement of the lease. Our leases may include variable payments based on measures that include changes in price indices, market interest rates, or the level of sales at a physical store, which are expensed as incurred.\n\nCosts associated with operating lease assets are recognized on a straight-line basis within operating expenses over the term of the lease. Finance lease assets are amortized within operating expenses on a straight-line basis over the shorter of the estimated useful lives of the assets or, in the instance where title does not transfer at the end of the lease term, the lease term. The interest component of a finance lease is included in interest expense and recognized using the effective interest method over the lease term.\n\nWe establish assets and liabilities for the present value of estimated future costs to retire long-lived assets at the termination or expiration of a lease. Such assets are amortized over the lease period into operating expense, and the recorded liabilities are accreted to the future value of the estimated retirement costs.\n\n## Financing Obligations\n\nWe record assets and liabilities for estimated construction costs under build-to-suit lease arrangements when we have control over the building during the construction period. If we continue to control the building after the construction period, the arrangement is classified as a financing obligation instead of a lease. The building is depreciated over the shorter of its useful life or the term of the obligation.\n\nIf we do not control the building after the construction period ends, the assets and liabilities for construction costs are derecognized, and we classify the lease as operating.\n\n# Goodwill and Indefinite-Lived Intangible Assets \n\nWe evaluate goodwill and indefinite-lived intangible assets for impairment annually or more frequently when an event occurs or circumstances change that indicate the carrying value may not be recoverable. We may elect to utilize a qualitative assessment to evaluate whether it is more likely than not that the fair value of a reporting unit or indefinite-lived intangible asset is less than its carrying value and if so, we perform a quantitative test. We compare the carrying value of each reporting unit and indefinite-lived intangible asset to its estimated fair value and if the fair value is determined to be less than the carrying value, we recognize an impairment loss for the difference. We estimate the fair value of the reporting units using discounted cash flows. Forecasts of future cash flows are based on our best estimate of future net sales and operating expenses, based primarily on expected category expansion, pricing, market segment share, and general economic conditions.\n\nWe completed the required annual impairment test of goodwill for all reporting units and indefinite-lived intangible assets as of April 1, 2023, resulting in no impairments. The fair value of our reporting units substantially exceeded their carrying value. There were no events that caused us to update our annual impairment test. See \"Note 5 - Acquisitions, Goodwill, and Acquired Intangible Assets.\"\n\n## Other Assets\n\nIncluded in \"Other assets\" on our consolidated balance sheets are amounts primarily related to video and music content, net of accumulated amortization; long-term deferred tax assets; acquired intangible assets, net of accumulated amortization; equity warrant assets and certain equity investments; satellite network launch services deposits; and affordable housing loans. We recognize certain transactions with governments when there is reasonable assurance that incentives included in the agreements, such as cash or certain tax credits, will be received and we are able to comply with any related conditions. These incentives are recorded as reductions to the cost of related assets or expenses.\n\n## Digital Video and Music Content\n\nWe obtain video content, inclusive of episodic television and movies, and music content for customers through licensing agreements that have a wide range of licensing provisions including both fixed and variable payment schedules. When the license fee for a specific video or music title is determinable or reasonably estimable and the content is available to us, we recognize an asset and a corresponding liability for the amounts owed. We reduce the liability as payments are made and we amortize the asset to \"Cost of sales\" on an accelerated basis, based on estimated usage or viewing patterns, or on a straight-line basis. If the licensing fee is not determinable or reasonably estimable, no asset or liability is recorded and licensing costs are expensed as incurred. We also develop original video content for which the production costs are capitalized and amortized to \"Cost of sales\" predominantly on an accelerated basis that follows the estimated viewing patterns associated with the content. The weighted average remaining life of our capitalized video content is 3.5 years. We review usage and viewing patterns impacting the amortization of capitalized video content on an ongoing basis and reflect any changes prospectively.\n\nOur produced and licensed video content is primarily monetized together as a unit, referred to as a film group, in each major geography where we offer Amazon Prime memberships. These film groups are evaluated for impairment whenever an event occurs or circumstances change indicating the fair value is less than the carrying value. The total capitalized costs of video, which is primarily released content, and music as of December 31, 2022 and 2023 were $\\$ 16.7$ billion and $\\$ 17.4$ billion. Total video and music expense was $\\$ 16.6$ billion and $\\$ 18.9$ billion for the year ended December 31, 2022 and 2023. Total video and music expense includes licensing and production costs associated with content offered within Amazon Prime memberships, and costs associated with digital subscriptions and sold or rented content.\n\n## Investments\n\nWe generally invest our excess cash in AAA-rated money market funds and investment grade short- to intermediate-term marketable debt securities. Such investments are included in \"Cash and cash equivalents\" or \"Marketable securities\" on the accompanying consolidated balance sheets.\n\nMarketable debt securities are classified as available-for-sale and reported at fair value with unrealized gains and losses included in \"Accumulated other comprehensive income (loss).\" Each reporting period, we evaluate whether declines in fair value below carrying value are due to expected credit losses, as well as our ability and intent to hold the investment until a forecasted recovery occurs. Expected credit losses are recorded as an allowance through \"Other income (expense), net\" on our consolidated statements of operations.\n\nConvertible notes classified as available for sale, equity investments in private companies for which we do not have the ability to exercise significant influence and accounted for at cost, and equity investments accounted for using the equity method of accounting are included within \"Other assets\" on our consolidated balance sheets.\n\nIn Q3 2023, we invested in a $\\$ 1.25$ billion note from Anthropic, PBC, which is convertible to equity. The note is classified as available for sale and reported at fair value with unrealized gains and losses included in \"Accumulated other comprehensive income (loss).\" The note is classified as a Level 3 asset. We have an agreement that expires in Q1 2024 to invest up to an additional $\\$ 2.75$ billion in a second convertible note. We also have a commercial arrangement primarily for the provision of AWS cloud services, which includes the use of AWS chips.\n\nEquity investments in private companies for which we do not have the ability to exercise significant influence are accounted for at cost, with adjustments for observable changes in prices or impairments, with adjustments recognized in \"Other income (expense), net\" on our consolidated statements of operations. Each reporting period, we perform a qualitative assessment to evaluate whether the investment is impaired. Our assessment includes a review of recent operating results and trends, recent sales/acquisitions of the investee securities, and other publicly available data. If the investment is impaired, we write it down to its estimated fair value. As of December 31, 2022 and 2023, these investments had a carrying value of $\\$ 715$ million and $\\$ 754$ million.\n\nEquity investments are accounted for using the equity method of accounting, or at fair value if we elect the fair value option, if the investment gives us the ability to exercise significant influence, but not control, over an investee. Our share of the earnings or losses as reported by equity-method investees, amortization of basis differences, related gains or losses, and impairments, if any, are recognized in \"Equity-method investment activity, net of tax\" on our consolidated statements of operations. Each reporting period, we evaluate whether declines in fair value below carrying value are other-than-temporary and if so, we write down the investment to its estimated fair value.\n\nEquity investments that have readily determinable fair values, including investments for which we have elected the fair value option, are included in \"Marketable securities\" on our consolidated balance sheets and measured at fair value with changes recognized in \"Other income (expense), net\" on our consolidated statements of operations.\n\n# Long-Lived Assets \n\nLong-lived assets, other than goodwill and indefinite-lived intangible assets, are reviewed for impairment whenever events or changes in circumstances indicate that the carrying amount of the assets might not be recoverable. Conditions that would necessitate an impairment assessment include a significant decline in the observable market value of an asset, a significant change in the extent or manner in which an asset is used, or any other significant adverse change that would indicate that the carrying amount of an asset or group of assets may not be recoverable.\n\nFor long-lived assets used in operations, including lease assets, impairment losses are only recorded if the asset's carrying amount is not recoverable through its undiscounted, probability-weighted future cash flows. We measure the impairment loss based on the difference between the carrying amount and estimated fair value. Long-lived assets are considered held for sale when certain criteria are met, including when management has committed to a plan to sell the asset, the asset is available for sale in its immediate condition, and the sale is probable within one year of the reporting date. Assets held for sale are reported at the lower of cost or fair value less costs to sell. Assets held for sale were not significant as of December 31, 2022 and 2023.\n\n## Accrued Expenses and Other\n\nIncluded in \"Accrued expenses and other\" on our consolidated balance sheets are liabilities primarily related to leases and asset retirement obligations, tax-related liabilities, current debt, payroll and related expenses, unredeemed gift cards, selfinsurance liabilities, customer liabilities, marketing liabilities, acquired digital media content, and other operating expenses.\n\nAs of December 31, 2022 and 2023, our liabilities for payroll related expenses were $\\$ 7.7$ billion and our liabilities for unredeemed gift cards were $\\$ 5.4$ billion and $\\$ 5.3$ billion. We reduce the liability for a gift card when redeemed by a customer. The portion of gift cards that we do not expect to be redeemed is recognized based on customer usage patterns.\n\n## Self-Insurance Liabilities\n\nAlthough we maintain certain high-deductible, third-party insurance coverage for catastrophic losses, we effectively selfinsure for exposure primarily related to workers' compensation, employee health care benefits, general and product liability, and automobile liability, including liability resulting from third-party transportation service providers. We estimate selfinsurance liabilities by considering historical claims experience, frequency and costs of claims, projected claims development, inflation, and other actuarial assumptions. Changes in the number or costs of claims, healthcare costs, judgment and settlement amounts, associated legal expenses, and other factors could cause actual results to differ materially from these estimates. In the fourth quarter of 2022, we increased our reserves for general, product, and automobile liabilities by $\\$ 1.3$ billion primarily driven by changes in our estimates about the costs of asserted and unasserted claims, which was primarily recorded in \"Cost of sales\" on our consolidated statements of operations and impacted our North America segment. Increases to our reserves driven by changes in estimates were not material to our consolidated results of operations for the years ended December 31, 2021 and\n\n2023. As of December 31, 2022 and 2023, our total self-insurance liabilities were $\\$ 4.0$ billion and $\\$ 6.3$ billion and are included in \"Accrued expenses and other\" on our consolidated balance sheets.\n\n# Unearned Revenue \n\nUnearned revenue is recorded when payments are received or due in advance of performing our service obligations and is recognized over the service period. Unearned revenue primarily relates to prepayments of AWS services and Amazon Prime memberships. Our total unearned revenue as of December 31, 2022 was $\\$ 16.1$ billion, of which $\\$ 12.4$ billion was recognized as revenue during the year ended December 31, 2023 and our total unearned revenue as of December 31, 2023 was $\\$ 20.6$ billion. Included in \"Other long-term liabilities\" on our consolidated balance sheets was $\\$ 2.9$ billion and $\\$ 5.7$ billion of unearned revenue as of December 31, 2022 and 2023.\n\nAdditionally, we have performance obligations, primarily related to AWS, associated with commitments in customer contracts for future services that have not yet been recognized in our financial statements. For contracts with original terms that exceed one year, those commitments not yet recognized were $\\$ 155.7$ billion as of December 31, 2023. The weighted average remaining life of our long-term contracts is 4.0 years. However, the amount and timing of revenue recognition is largely driven by customer usage, which can extend beyond the original contractual term.\n\n## Other Long-Term Liabilities\n\nIncluded in \"Other long-term liabilities\" on our consolidated balance sheets are liabilities primarily related to financing obligations, unearned revenue, asset retirement obligations, tax contingencies, digital video and music content, and deferred tax liabilities.\n\n## Foreign Currency\n\nWe have internationally-focused stores for which the net sales generated, as well as most of the related expenses directly incurred from those operations, are denominated in local functional currencies. The functional currency of our subsidiaries that either operate or support these stores is generally the same as the local currency. Assets and liabilities of these subsidiaries are translated into U.S. Dollars at period-end foreign exchange rates, and revenues and expenses are translated at average rates prevailing throughout the period. Translation adjustments are included in \"Accumulated other comprehensive income (loss),\" a separate component of stockholders' equity. Transaction gains and losses including intercompany transactions denominated in a currency other than the functional currency of the entity involved are included in \"Other income (expense), net\" on our consolidated statements of operations. In connection with the settlement and remeasurement of intercompany balances, we recorded gains (losses) of $\\$ 19$ million, $\\$ 386$ million, and $\\$(329)$ million in 2021, 2022, and 2023.\n\n## Accounting Pronouncements Not Yet Adopted\n\nIn December 2023, the Financial Accounting Standards Board issued an Accounting Standards Update (\"ASU\") amending existing income tax disclosure guidance, primarily requiring more detailed disclosure for income taxes paid and the effective tax rate reconciliation. The ASU is effective for annual reporting periods beginning after December 15, 2024, with early adoption permitted and can be applied on either a prospective or retroactive basis. We are currently evaluating the ASU to determine its impact on our income tax disclosures.\n\n# Note 2 - FINANCIAL INSTRUMENTS \n\n## Cash, Cash Equivalents, Restricted Cash, and Marketable Securities\n\nAs of December 31, 2022 and 2023, our cash, cash equivalents, restricted cash, and marketable securities primarily consisted of cash, AAA-rated money market funds, U.S. and foreign government and agency securities, other investment grade securities, and marketable equity securities. Cash equivalents and marketable securities are recorded at fair value. The following table summarizes, by major security type, our cash, cash equivalents, restricted cash, and marketable securities that are measured at fair value on a recurring basis and are categorized using the fair value hierarchy (in millions):\n\n|  | December 31, 2022 |  |  |  |\n| :--: | :--: | :--: | :--: | :--: |\n|  | Cost or Amortized Cost | Gross Unrealized Gains | Gross Unrealized Losses | Total Estimated Fair Value |\n| Cash | \\$ 10,666 | \\$ — | \\$ — | \\$ 10,666 |\n| Level 1 securities: |  |  |  |  |\n| Money market funds | 27,899 | — | — | 27,899 |\n| Equity securities (1) |  |  |  | 3,709 |\n| Level 2 securities: |  |  |  |  |\n| Foreign government and agency securities | 537 | — | (2) | 535 |\n| U.S. government and agency securities | 2,301 | — | (155) | 2,146 |\n| Corporate debt securities | 23,111 | — | (484) | 22,627 |\n| Asset-backed securities | 2,721 | — | (149) | 2,572 |\n| Other debt securities | 249 | — | (12) | 237 |\n|  | \\$ 67,484 | \\$ — | \\$ (802) | \\$ 70,391 |\n| Less: Restricted cash, cash equivalents, and marketable securities (2) |  |  |  | (365) |\n| Total cash, cash equivalents, and marketable securities |  |  |  | \\$ 70,026 |\n\n|   | December 31, 2023  |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | Cost orAmortizedCost | GrossUnrealizedGains | GrossUnrealizedLosses | TotalEstimatedFair Value  |\n|  Cash | $11,706 | $— | $— | $11,706  |\n|  Level 1 securities: |  |  |  |   |\n|  Money market funds | 39,160 | — | — | 39,160  |\n|  Equity securities (1) |  |  |  | 4,658  |\n|  Level 2 securities: |  |  |  |   |\n|  Foreign government and agency securities | 505 | — | — | 505  |\n|  U.S. government and agency securities | 1,789 | 1 | (91) | 1,699  |\n|  Corporate debt securities | 27,996 | — | (191) | 27,805  |\n|  Asset-backed securities | 1,707 | — | (61) | 1,646  |\n|  Other debt securities | 108 | — | (4) | 104  |\n|   | $82,971 | $1 | $(347) | $87,283  |\n|  Less: Restricted cash, cash equivalents, and marketable securities (2) |  |  |  | (503)  |\n|  Total cash, cash equivalents, and marketable securities |  |  |  | $86,780  |\n|  (1) The related unrealized gain (loss) recorded in “Other income (expense), net” was $11.6 billion, $(13.6) billion, and $1.0 billion for the years ended December 31, 2021, 2022, and 2023.(2) We are required to pledge or otherwise restrict a portion of our cash, cash equivalents, and marketable debt securities primarily as collateral for real estate, amounts due to third-party sellers in certain jurisdictions, debt, and standby and trade letters of credit. We classify cash, cash equivalents, and marketable debt securities with use restrictions of less than twelve months as “Accounts receivable, net and other” and of twelve months or longer as non-current “Other assets” on our consolidated balance sheets. See “Note 7 — Commitments and Contingencies.” | |   |   |   |   |\n|  The following table summarizes gross gains and gross losses realized on sales of marketable debt securities (in millions): | |   |   |   |   |\n|   | Year Ended December 31,  |   |   |   |\n|   | 2021 | 2022 | 2023  |   |\n|  Realized gains | $85 | $43 | $2  |   |\n|  Realized losses | 38 | 341 | 67  |   |\n|  The following table summarizes the remaining contractual maturities of our cash equivalents and marketable debt securities as of December 31, 2023 (in millions): | |   |   |   |   |\n|   |  | Amortized Cost | Estimated Fair Value |   |\n|  Due within one year |  | $65,224 | $65,159 |   |\n|  Due after one year through five years |  | 4,635 | 4,430 |   |\n|  Due after five years through ten years |  | 411 | 394 |   |\n|  Due after ten years |  | 995 | 936 |   |\n|  Total |  | $71,265 | $70,919 |   |\n|  Actual maturities may differ from the contractual maturities because borrowers may have certain prepayment conditions. | |   |   |   |   |\n\n# Consolidated Statements of Cash Flows Reconciliation\n\nThe following table provides a reconciliation of the amount of cash, cash equivalents, and restricted cash reported within the consolidated balance sheets to the total of the same such amounts shown in the consolidated statements of cash flows (in millions):\n\n|   | December 31, 2022 | December 31, 2023  |\n| --- | --- | --- |\n|  Cash and cash equivalents | \\$ 53,888 | \\$ 73,387  |\n|  Restricted cash included in accounts receivable, net and other | 358 | 497  |\n|  Restricted cash included in other assets | 7 | 6  |\n|  Total cash, cash equivalents, and restricted cash shown in the consolidated statements of cash flows | \\$ 54,253 | \\$ 73,890  |\n\n## Note 3 - PROPERTY AND EQUIPMENT\n\nProperty and equipment, at cost, consisted of the following (in millions):\n\n|   | December 31, |   |\n| --- | --- | --- |\n|   | 2022 | 2023  |\n|  Gross property and equipment (1): |  |   |\n|  Land and buildings | \\$ 91,650 | \\$ 105,293  |\n|  Equipment | 157,458 | 185,039  |\n|  Other assets | 4,602 | 5,116  |\n|  Construction in progress | 30,020 | 28,840  |\n|  Gross property and equipment | 283,730 | 324,288  |\n|  Total accumulated depreciation and amortization (1) | 97,015 | 120,111  |\n|  Total property and equipment, net | \\$ 186,715 | \\$ 204,177  |\n\n(1) Includes the original cost and accumulated depreciation of fully-depreciated assets.\n\nDepreciation and amortization expense on property and equipment was $\\$ 22.9$ billion, $\\$ 24.9$ billion, and $\\$ 30.2$ billion which includes amortization of property and equipment acquired under finance leases of $\\$ 9.9$ billion, $\\$ 6.1$ billion, and $\\$ 5.9$ billion for 2021, 2022, and 2023.\n\n# Note 4 - LEASES\n\nWe have entered into non-cancellable operating and finance leases for fulfillment network, data center, office, and physical store facilities as well as server and networking equipment, aircraft, and vehicles. Gross assets acquired under finance leases, including those where title transfers at the end of the lease, are recorded in \"Property and equipment, net\" and were $\\$ 68.0$ billion and $\\$ 62.5$ billion as of December 31, 2022 and 2023. Accumulated amortization associated with finance leases was $\\$ 45.2$ billion and $\\$ 44.7$ billion as of December 31, 2022 and 2023.\n\nLease cost recognized in our consolidated statements of operations is summarized as follows (in millions):\n\n|   | Year Ended December 31, |  |   |\n| --- | --- | --- | --- |\n|   | 2021 | 2022 | 2023  |\n|  Operating lease cost | \\$ | 8,847 | \\$  |\n|  Finance lease cost: |  |  |   |\n|  Amortization of lease assets |  | 6,097 | 5,899  |\n|  Interest on lease liabilities |  | 361 | 304  |\n|  Finance lease cost |  | 6,458 | 6,203  |\n|  Variable lease cost |  | 1,852 | 2,165  |\n|  Total lease cost | \\$ | 17,157 | \\$  |\n\nOther information about lease amounts recognized in our consolidated financial statements is as follows:\n\n|   | December 31, 2022 | December 31, 2023  |\n| --- | --- | --- |\n|  Weighted-average remaining lease term - operating leases | 11.6 years | 11.3 years  |\n|  Weighted-average remaining lease term - finance leases | 10.3 years | 11.9 years  |\n|  Weighted-average discount rate - operating leases | $2.8 \\%$ | $3.3 \\%$  |\n|  Weighted-average discount rate - finance leases | $2.3 \\%$ | $2.7 \\%$  |\n\nOur lease liabilities were as follows (in millions):\n\n|   | December 31, 2022 |  |   |\n| --- | --- | --- | --- |\n|   | Operating Leases | Finance Leases | Total  |\n|  Gross lease liabilities | \\$ 81,273 | \\$ 18,019 | \\$ 99,292  |\n|  Less: imputed interest | $(12,233)$ | $(2,236)$ | $(14,469)$  |\n|  Present value of lease liabilities | 69,040 | 15,783 | 84,823  |\n|  Less: current portion of lease liabilities | $(7,458)$ | $(4,397)$ | $(11,855)$  |\n|  Total long-term lease liabilities | \\$ 61,582 | \\$ 11,386 | \\$ 72,968  |\n|   | December 31, 2023 |  |   |\n|   | Operating Leases | Finance Leases | Total  |\n|  Gross lease liabilities | \\$ 90,777 | \\$ 14,106 | \\$ 104,883  |\n|  Less: imputed interest | $(15,138)$ | $(1,997)$ | $(17,135)$  |\n|  Present value of lease liabilities | 75,639 | 12,109 | 87,748  |\n|  Less: current portion of lease liabilities | $(8,419)$ | $(2,032)$ | $(10,451)$  |\n|  Total long-term lease liabilities | \\$ 67,220 | \\$ 10,077 | \\$ 77,297  |\n\n# Note 5 - ACQUISITIONS, GOODWILL, AND ACQUIRED INTANGIBLE ASSETS \n\n## 2021 Acquisition Activity\n\nDuring 2021, we acquired certain companies for an aggregate purchase price of $\\$ 496$ million, net of cash acquired.\n\n## 2022 Acquisition Activity\n\nOn March 17, 2022, we acquired MGM Holdings Inc., for cash consideration of approximately $\\$ 6.1$ billion, net of cash acquired, to provide more digital media content options for customers. We also assumed $\\$ 2.5$ billion of debt, which we repaid immediately after closing. The acquired assets primarily consist of $\\$ 3.4$ billion of video content and $\\$ 4.9$ billion of goodwill.\n\nDuring 2022, we also acquired certain other companies for an aggregate purchase price of $\\$ 141$ million, net of cash acquired.\n\n## 2023 Acquisition Activity\n\nOn February 22, 2023, we acquired 1Life Healthcare, Inc. (One Medical), for cash consideration of approximately $\\$ 3.5$ billion, net of cash acquired, to provide health care options for customers. The acquired assets primarily consist of $\\$ 1.3$ billion of intangible assets and $\\$ 2.5$ billion of goodwill, which is allocated to our North America segment.\n\nDuring 2023, we also acquired certain other companies for an immaterial aggregate purchase price, net of cash acquired.\nPro forma results of operations have not been presented because the effects of the 2023 acquisitions, individually and in the aggregate, were not material to our consolidated results of operations. Acquisition-related costs were expensed as incurred and were not significant.\n\nIn addition, in August 2022, we entered into an agreement to acquire iRobot Corporation, as amended in July 2023, for approximately $\\$ 1.7$ billion, including its debt, subject to customary closing conditions. In January 2024, we and iRobot agreed to terminate the transaction.\n\n## Goodwill\n\nThe goodwill of the acquired companies is primarily related to expected improvements in technology performance and functionality, as well as sales growth from future product and service offerings and new customers, together with certain intangible assets that do not qualify for separate recognition. The goodwill of the acquired companies is generally not deductible for tax purposes. The following summarizes our goodwill activity in 2022 and 2023 by segment (in millions):\n\n|  | North <br> America | International | AWS | Consolidated |\n| :--: | :--: | :--: | :--: | :--: |\n| Goodwill - January 1, 2022 | \\$ 12,758 | \\$ 1,327 | \\$ 1,286 | \\$ 15,371 |\n| New acquisitions | 3,943 | 1,054 | — | 4,997 |\n| Other adjustments (1) | (80) | 30 | (30) | (80) |\n| Goodwill - December 31, 2022 | 16,621 | 2,411 | 1,256 | 20,288 |\n| New acquisitions | 2,494 | — | — | 2,494 |\n| Other adjustments (1) | 11 | 1 | (5) | 7 |\n| Goodwill - December 31, 2023 | \\$ 19,126 | \\$ 2,412 | \\$ 1,251 | \\$ 22,789 |\n\n(1) Primarily includes changes in foreign exchange rates.\n\n# Intangible Assets\n\nAcquired identifiable intangible assets are valued primarily by using discounted cash flows. These assets are included within \"Other assets\" on our consolidated balance sheets and consist of the following (in millions):\n\n|   | December 31, |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- | --- |\n|   | 2022 |  |  | 2023 |  |  |   |\n|   | Acquired Intangibles, Gross (1) | Accumulated Amortization (1) | Acquired Intangibles, Net | Acquired Intangibles, Gross (1) | Accumulated Amortization (1) | Acquired Intangibles, Net | Weighted Average Life Remaining  |\n|  Finite-lived intangible assets (2): |  |  |  |  |  |  |   |\n|  Marketing-related | \\$ 2,407 | \\$ (601) | \\$ 1,806 | \\$ 2,643 | \\$ (738) | \\$ 1,905 | 17.5  |\n|  Contract-based | 3,661 | (813) | 2,848 | 4,800 | $(1,129)$ | 3,671 | 11.7  |\n|  Technology- and content-based | 883 | (643) | 240 | 743 | (340) | 403 | 5.1  |\n|  Customer-related | 184 | (128) | 56 | 749 | (188) | 561 | 6.6  |\n|  Total finite-lived intangible assets | \\$ 7,135 | \\$ (2,185) | \\$ 4,950 | \\$ 8,935 | \\$ (2,395) | \\$ 6,540 | 12.5  |\n|  IPR\\&D and other (3) | \\$ 1,147 |  | \\$ 1,147 | \\$ 1,147 |  | \\$ 1,147 |   |\n|  Total acquired intangibles | \\$ 8,282 | \\$ (2,185) | \\$ 6,097 | \\$ 10,082 | \\$ (2,395) | \\$ 7,687 |   |\n\n(1) Excludes the original cost and accumulated amortization of fully-amortized intangibles. (2) Finite-lived intangible assets, excluding acquired video content, have estimated useful lives of between one and twenty-five years, and are being amortized to operating expenses on a straight-line basis. (3) Intangible assets acquired in a business combination that are in-process and used in research and development activities are considered indefinite-lived until the completion or abandonment of the research and development efforts. Once the research and development efforts are completed, we determine the useful life and begin amortizing the assets. Amortization expense for acquired finite-lived intangibles was $\\$ 512$ million, $\\$ 604$ million, and $\\$ 706$ million in 2021, 2022, and 2023. Expected future amortization expense of acquired finite-lived intangible assets as of December 31, 2023 is as follows (in millions):\n\n|  Year Ended December 31, |  |  |  |  |  |   |\n| --- | --- | --- | --- | --- | --- | --- |\n|  2024 |  |  |  |  |  | \\$ 715  |\n|  2025 |  |  |  |  |  | 631  |\n|  2026 |  |  |  |  |  | 563  |\n|  2027 |  |  |  |  |  | 552  |\n|  2028 |  |  |  |  |  | 534  |\n|  Thereafter |  |  |  |  |  | 3,545  |\n|   |  |  |  |  |  | \\$ 6,540  |\n\n# Note 6 - DEBT \n\nAs of December 31, 2023, we had $\\$ 66.5$ billion of unsecured senior notes outstanding (the \"Notes\") and $\\$ 682$ million of borrowings under our secured revolving credit facility. Our total long-term debt obligations are as follows (in millions):\n\n|  | Maturities (1) | Stated Interest Rates | Effective Interest Rates | December 31, 2022 | December 31, 2023 |\n| :--: | :--: | :--: | :--: | :--: | :--: |\n| 2014 Notes issuance of $\\$ 6.0$ billion | 2024 - 2044 | $3.80 \\%-4.95 \\%$ | $3.90 \\%-5.12 \\%$ | 4,000 | 4,000 |\n| 2017 Notes issuance of $\\$ 17.0$ billion | 2024 - 2057 | $2.80 \\%-5.20 \\%$ | $2.95 \\%-4.33 \\%$ | 16,000 | 15,000 |\n| 2020 Notes issuance of $\\$ 10.0$ billion | 2025 - 2060 | $0.80 \\%-2.70 \\%$ | $0.88 \\%-2.77 \\%$ | 10,000 | 9,000 |\n| 2021 Notes issuance of $\\$ 18.5$ billion | 2024 - 2061 | $0.45 \\%-3.25 \\%$ | $0.57 \\%-3.31 \\%$ | 18,500 | 17,500 |\n| April 2022 Notes issuance of $\\$ 12.8$ billion | 2024 - 2062 | $2.73 \\%-4.10 \\%$ | $2.83 \\%-4.15 \\%$ | 12,750 | 12,750 |\n| December 2022 Notes issuance of $\\$ 8.3$ billion | 2024 - 2032 | $4.55 \\%-4.70 \\%$ | $4.61 \\%-4.83 \\%$ | 8,250 | 8,250 |\n| Credit Facility |  |  |  | 1,042 | 682 |\n| Total face value of long-term debt |  |  |  | 70,542 | 67,182 |\n| Unamortized discount and issuance costs, net |  |  |  | (393) | (374) |\n| Less: current portion of long-term debt |  |  |  | $(2,999)$ | $(8,494)$ |\n| Long-term debt |  |  |  | \\$ 67,150 | \\$ 58,314 |\n\n(1) The weighted-average remaining lives of the 2014, 2017, 2020, 2021, April 2022, and December 2022 Notes were 11.6, $14.1,17.5,13.1,12.3$, and 4.9 years as of December 31, 2023. The combined weighted-average remaining life of the Notes was 12.7 years as of December 31, 2023.\nInterest on the Notes is payable semi-annually in arrears. We may redeem the Notes at any time in whole, or from time to time, in part at specified redemption prices. We are not subject to any financial covenants under the Notes. The estimated fair value of the Notes was approximately $\\$ 61.4$ billion and $\\$ 60.6$ billion as of December 31, 2022 and 2023, which is based on quoted prices for our debt as of those dates.\n\nWe have a $\\$ 1.5$ billion secured revolving credit facility with a lender that is secured by certain seller receivables, which we may from time to time increase in the future subject to lender approval (the \"Credit Facility\"). The Credit Facility is available until August 2025, bears interest based on the daily Secured Overnight Financing Rate plus 1.25\\%, and has a commitment fee of up to $0.45 \\%$ on the undrawn portion. There were $\\$ 1.0$ billion and $\\$ 682$ million of borrowings outstanding under the Credit Facility as of December 31, 2022 and 2023, which had an interest rate of $5.6 \\%$ and $6.6 \\%$, respectively. As of December 31, 2022 and 2023, we have pledged $\\$ 1.2$ billion and $\\$ 806$ million of our cash and seller receivables as collateral for debt related to our Credit Facility. The estimated fair value of the Credit Facility, which is based on Level 2 inputs, approximated its carrying value as of December 31, 2022 and 2023.\n\nAs of December 31, 2023, future principal payments for our total long-term debt were as follows (in millions):\nYear Ended December 31,\n2024\n2025\n2026\n2027\n2028\nThereafter\n\\$ 8,500\n5,286\n3,146\n8,750\n2,250\n39,250\n\\$ 67,182\n\nIn January 2023, we entered into an $\\$ 8.0$ billion unsecured 364-day term loan with a syndicate of lenders (the \"Term Loan\"), maturing in January 2024 and bearing interest at the Secured Overnight Financing Rate specified in the Term Loan plus $0.75 \\%$. The Term Loan was classified as short-term debt and included within \"Accrued expenses and other\" on our consolidated balance sheets. As of December 31, 2023, the entire amount of the Term Loan has been repaid.\n\nWe have U.S. Dollar and Euro commercial paper programs (the \"Commercial Paper Programs\") under which we may from time to time issue unsecured commercial paper up to a total of $\\$ 20.0$ billion (including up to $€ 3.0$ billion) at the date of issue, with individual maturities that may vary but will not exceed 397 days from the date of issue. There were $\\$ 6.8$ billion of\n\nborrowings outstanding under the Commercial Paper Programs as of December 31, 2022, which were included in \"Accrued expenses and other\" on our consolidated balance sheets and had a weighted-average effective interest rate, including issuance costs, of $4.5 \\%$. There were no borrowings outstanding under the Commercial Paper Programs as of December 31, 2023. We use the net proceeds from the issuance of commercial paper for general corporate purposes.\n\nIn November 2023, we entered into a $\\$ 15.0$ billion unsecured revolving credit facility with a syndicate of lenders (the \"Credit Agreement\"), which replaced the prior amended and restated credit agreement entered into in March 2022. The Credit Agreement has a term that extends to November 2028 and may be extended for one or more additional one-year terms if approved by the lenders. The interest rate applicable to outstanding balances under the Credit Agreement is the applicable benchmark rate specified in the Credit Agreement plus $0.45 \\%$, with a commitment fee of $0.03 \\%$ on the undrawn portion of the credit facility. There were no borrowings outstanding under the Credit Agreement or the prior amended and restated credit agreement as of December 31, 2022 and 2023.\n\nIn November 2023, we also entered into a $\\$ 5.0$ billion unsecured 364-day revolving credit facility with a syndicate of lenders (the \"Short-Term Credit Agreement\"), which replaced the prior 364-day revolving credit agreement entered into in November 2022. The Short-Term Credit Agreement matures in October 2024 and may be extended for one additional period of 364 days if approved by the lenders. The interest rate applicable to outstanding balances under the Short-Term Credit Agreement is the Secured Overnight Financing Rate specified in the Short-Term Credit Agreement plus $0.45 \\%$, with a commitment fee of $0.03 \\%$ on the undrawn portion. There were no borrowings outstanding under the Short-Term Credit Agreement or the prior 364-day revolving credit agreement as of December 31, 2022 and 2023.\n\nWe also utilize other short-term credit facilities for working capital purposes. There were $\\$ 1.2$ billion and $\\$ 147$ million of borrowings outstanding under these facilities as of December 31, 2022 and 2023, which were included in \"Accrued expenses and other\" on our consolidated balance sheets. In addition, we had $\\$ 6.8$ billion of unused letters of credit as of December 31, 2023.\n\n# Note 7 - COMMITMENTS AND CONTINGENCIES \n\n## Commitments\n\nThe following summarizes our principal contractual commitments, excluding open orders for purchases that support normal operations and are generally cancellable, as of December 31, 2023 (in millions):\n\n|  | Year Ended December 31, |  |  |  |  |  |\n| :-- | --: | --: | --: | --: | --: | --: |\n|  | $\\mathbf{2 0 2 4}$ | $\\mathbf{2 0 2 5}$ | $\\mathbf{2 0 2 6}$ | $\\mathbf{2 0 2 7}$ | $\\mathbf{2 0 2 8}$ | Thereafter | Total |\n| Long-term debt principal and interest | $\\$ 10,616$ | $\\$ 7,175$ | $\\$ 4,858$ | $\\$ 10,404$ | $\\$ 3,643$ | $\\$ 60,176$ | $\\$ 96,872$ |\n| Operating lease liabilities | 11,229 | 9,922 | 9,156 | 8,321 | 7,546 | 44,603 | 90,777 |\n| Finance lease liabilities, including interest | 2,292 | 1,471 | 1,369 | 1,123 | 1,022 | 6,829 | 14,106 |\n| Financing obligations, including interest (1) | 469 | 462 | 468 | 476 | 484 | 6,282 | 8,641 |\n| Leases not yet commenced | 2,034 | 2,620 | 2,836 | 2,852 | 2,979 | 24,860 | 38,181 |\n| Unconditional purchase obligations (2) | 9,432 | 7,823 | 5,901 | 4,463 | 1,912 | 5,953 | 35,484 |\n| Other commitments (3) | 3,273 | 1,390 | 1,125 | 759 | 680 | 9,121 | 16,348 |\n| Total commitments | $\\$ 39,345$ | $\\$ 30,863$ | $\\$ 25,713$ | $\\$ 28,398$ | $\\$ 18,266$ | $\\$ 157,824$ | $\\$ 300,409$ |\n\n(1) Includes non-cancellable financing obligations for fulfillment network and data center facilities. Excluding interest, current financing obligations of $\\$ 266$ million and $\\$ 271$ million are recorded within \"Accrued expenses and other\" and $\\$ 6.7$ billion and $\\$ 6.6$ billion are recorded within \"Other long-term liabilities\" as of December 31, 2022 and 2023. The weighted-average remaining term of the financing obligations was 17.9 years and 17.0 years and the weighted-average imputed interest rate was $3.1 \\%$ as of December 31, 2022 and 2023.\n(2) Includes unconditional purchase obligations related to long-term agreements to acquire and license digital media content that are not reflected on the consolidated balance sheets, and certain products offered in our Whole Foods Market stores. For those digital media content agreements with variable terms, we do not estimate the total obligation beyond any minimum quantities and/or pricing as of the reporting date. Purchase obligations associated with renewal provisions solely at the option of the content provider are included to the extent such commitments are fixed or a minimum amount is specified. Renewable energy agreements based on actual generation without a fixed or minimum volume commitment are not included. These agreements also provide the right to receive renewable energy certificates for no additional consideration.\n(3) Includes asset retirement obligations, liabilities associated with digital media content agreements with initial terms greater than one year, and the estimated timing and amounts of payments for rent and tenant improvements associated with build-to-suit lease arrangements that are under construction. Excludes approximately $\\$ 5.2$ billion of income tax contingencies for which we cannot make a reasonably reliable estimate of the amount and period of payment, if any.\n\n## Suppliers\n\nDuring 2023, no vendor accounted for $10 \\%$ or more of our purchases. We generally do not have long-term contracts or arrangements with our vendors to guarantee the availability of merchandise, particular payment terms, or the extension of credit limits.\n\n## Other Contingencies\n\nWe are disputing claims and denials of refunds or credits, and monitoring or evaluating potential claims, related to various non-income taxes (such as sales, value added, consumption, service, and similar taxes), including in jurisdictions in which we already collect and remit these taxes. These non-income tax controversies typically include (i) the taxability of products and services, including cross-border intercompany transactions, (ii) collection and withholding on transactions with third parties, including as a result of evolving requirements imposed on marketplaces with respect to third-party sellers, and (iii) the adequacy of compliance with reporting obligations, including evolving documentation requirements. Due to the inherent complexity and uncertainty of these matters and the judicial and regulatory processes in certain jurisdictions, the final outcome of any such controversies may be materially different from our expectations.\n\n## Legal Proceedings\n\nThe Company is involved from time to time in claims, proceedings, and litigation, including the following:\nIn November 2015, Eolas Technologies, Inc. filed a complaint against Amazon.com, Inc. in the United States District Court for the Eastern District of Texas. The complaint alleges, among other things, that the use of \"interactive features\" on www.amazon.com, including \"search suggestions and search results,\" infringes U.S. Patent No. 9,195,507, entitled \"Distributed\n\nHypermedia Method and System for Automatically Invoking External Application Providing Interaction and Display of Embedded Objects Within a Hypermedia Document.\" The complaint sought a judgment of infringement together with costs and attorneys' fees. In February 2016, Eolas filed an amended complaint seeking, among other things, an unspecified amount of damages. In February 2017, Eolas alleged in its damages report that in the event of a finding of liability Amazon could be subject to $\\$ 130$ million to $\\$ 250$ million in damages. In April 2017, the case was transferred to the United States District Court for the Northern District of California. In May 2022, the district court granted summary judgment, holding that the patent is invalid. In June 2022, Eolas filed a notice of appeal. In February 2024, the United States Court of Appeals for the Federal Circuit affirmed the district court's judgment. We dispute the allegations of wrongdoing and will continue to defend ourselves vigorously in this matter.\n\nIn May 2018, Rensselaer Polytechnic Institute and CF Dynamic Advances LLC filed a complaint against Amazon.com, Inc. in the United States District Court for the Northern District of New York. The complaint alleges, among other things, that \"Alexa Voice Software and Alexa enabled devices\" infringe U.S. Patent No. 7,177,798, entitled \"Natural Language Interface Using Constrained Intermediate Dictionary of Results.\" The complaint seeks an injunction, an unspecified amount of damages, enhanced damages, an ongoing royalty, interest, attorneys' fees, and costs. In March 2023, the plaintiffs alleged in their damages report that in the event of a finding of liability Amazon could be subject to $\\$ 140$ million to $\\$ 267$ million in damages. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in this matter.\n\nIn December 2018, Kove IO, Inc. filed a complaint against Amazon Web Services, Inc. in the United States District Court for the Northern District of Illinois. The complaint alleges, among other things, that Amazon S3 and DynamoDB infringe U.S. Patent Nos. 7,814,170 and 7,103,640, each entitled \"Network Distributed Tracking Wire Transfer Protocol\"; and 7,233,978, entitled \"Method and Apparatus for Managing Location Information in a Network Separate from the Data to Which the Location Information Pertains.\" The complaint seeks an unspecified amount of damages, enhanced damages, attorneys' fees, costs, interest, and injunctive relief. In March 2022, the case was stayed pending resolution of review petitions we filed with the United States Patent and Trademark Office. In November 2022, the stay was lifted. In July 2023, Kove alleged in its damages report that in the event of a finding of liability Amazon Web Services could be subject to $\\$ 517$ million to $\\$ 1.03$ billion in damages. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in this matter.\n\nBeginning in June 2019 with Wilcosky v. Amazon.com, Inc., now pending in the United States District Court for the Northern District of Illinois (\"N.D. Ill.\"), private litigants have filed a number of cases in U.S. federal and state courts, including Hogan v. Amazon.com, Inc. (N.D. Ill.), alleging, among other things, that Amazon's collection, storage, use, retention, and protection of biometric identifiers violated the Illinois Biometric Information Privacy Act. The complaints allege purported classes of Illinois residents who had biometric identifiers collected through Amazon products or services, including Amazon Photos, Alexa, AWS cloud services, Ring, Amazon Connect, Amazon's Flex driver app, and Amazon's virtual try-on technology. The complaints seek certification as class actions, unspecified amounts of damages, injunctive relief, attorneys' fees, costs, and interest. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nBeginning in March 2020 with Frame-Wilson v. Amazon.com, Inc. filed in the United States District Court for the Western District of Washington (\"W.D. Wash.\"), private litigants have filed a number of cases in the U.S. and Canada alleging, among other things, price fixing arrangements between Amazon.com, Inc. and vendors and third-party sellers in Amazon's stores, monopolization and attempted monopolization, and consumer protection and unjust enrichment claims. Attorneys General for the District of Columbia and California brought similar suits in May 2021 and September 2022 in the Superior Court of the District of Columbia and the California Superior Court for the County of San Francisco, respectively. Some of the private cases include allegations of several distinct purported classes, including consumers who purchased a product through Amazon's stores and consumers who purchased a product offered by Amazon through another e-commerce retailer. The complaints seek billions of dollars of alleged damages, treble damages, punitive damages, injunctive relief, civil penalties, attorneys' fees, and costs. The Federal Trade Commission and a number of state Attorneys General filed a similar lawsuit in September 2023 in the W.D. Wash. alleging violations of federal antitrust and state antitrust and consumer protection laws. That complaint alleges, among other things, that Amazon has a monopoly in markets for online superstores and marketplace services, and unlawfully maintains those monopolies through anticompetitive practices relating to our pricing policies, advertising practices, the structure of Prime, and promotion of our own products on our website. The complaint seeks injunctive and structural relief, an unspecified amount of damages, and costs. Amazon's motions to dismiss were granted in part and denied in part in Frame-Wilson in March 2022 and March 2023, De Coster v. Amazon.com, Inc. (W.D. Wash.) in January 2023, and the California Attorney General's lawsuit in March 2023. All three courts dismissed claims alleging that Amazon's pricing policies are inherently illegal and denied dismissal of claims alleging that Amazon's pricing policies are an unlawful restraint of trade. In March 2022, the DC Superior Court dismissed the DC Attorney General's lawsuit in its entirety; the dismissal is under appeal. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nIn October 2020, Broadband iTV, Inc. filed a complaint against Amazon.com, Inc., Amazon.com Services LLC, and Amazon Web Services, Inc. in the United States District Court for the Western District of Texas. The complaint alleges, among other things, that certain Amazon Prime Video features and services infringe U.S. Patent Nos. 9,648,388, 10,546,750, and 10,536,751, each entitled \"Video-On-Demand Content Delivery System for Providing Video-On-Demand Services to TV\n\nServices Subscribers\"; 10,028,026, entitled \"System for Addressing On-Demand TV Program Content on TV Services Platform of a Digital TV Services Provider\"; and 9,973,825, entitled \"Dynamic Adjustment of Electronic Program Guide Displays Based on Viewer Preferences for Minimizing Navigation in VOD Program Selection.\" The complaint seeks an unspecified amount of damages. In April 2022, Broadband iTV alleged in its damages report that in the event of a finding of liability Amazon could be subject to $\\$ 166$ million to $\\$ 986$ million in damages. In September 2022, the court granted summary judgment, holding that the patents are invalid. In October 2022, Broadband iTV filed a notice of appeal. We dispute the allegations of wrongdoing and will continue to defend ourselves vigorously in this matter.\n\nIn July 2021, the Luxembourg National Commission for Data Protection (the \"CNPD\") issued a decision against Amazon Europe Core S.à r.l. claiming that Amazon's processing of personal data did not comply with the EU General Data Protection Regulation. The decision imposes a fine of $€ 746$ million and corresponding practice revisions. We believe the CNPD's decision to be without merit and intend to defend ourselves vigorously in this matter.\n\nIn December 2021, the Italian Competition Authority (the \"ICA\") issued a decision against Amazon Services Europe S.à r.l., Amazon Europe Core S.à r.l., Amazon EU S.à r.l., Amazon Italia Services S.r.l., and Amazon Italia Logistica S.r.l. claiming that certain of our marketplace and logistics practices in Italy infringe EU competition rules. The decision imposes remedial actions and a fine of $€ 1.13$ billion, which we have paid and will seek to recover pending conclusion of all appeals. We believe the ICA's decision to be without merit and intend to defend ourselves vigorously in this matter.\n\nIn July 2022, Acceleration Bay, LLC filed a complaint against Amazon Web Services, Inc. in the United States District Court for the District of Delaware. The complaint alleges, among other things, that Amazon EC2, Amazon CloudFront, AWS Lambda, Amazon Lumberyard, Luna, Amazon Prime Video, Twitch, Amazon GameLift, GridMate, Amazon EKS, AWS App Mesh, and Amazon VPC infringe U.S. Patent Nos. 6,701,344, entitled \"Distributed Game Environment\"; 6,714,966, entitled \"Information Delivery Service\"; 6,732,147, entitled \"Leaving a Broadcast Channel\"; 6,829,634, entitled \"Broadcasting Network\"; and 6,910,069, entitled \"Joining a Broadcast Channel.\" The complaint seeks injunctive relief, an unspecified amount of damages, enhanced damages, interest, attorneys' fees, and costs. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in this matter.\n\nIn November 2022, LightGuide, Inc. filed a complaint against Amazon.com, Inc. and Amazon.com Services LLC in the United States District Court for the Eastern District of Texas. The complaint alleges, among other things, that Amazon's Nike Intent Detection System used in certain fulfillment centers infringes U.S. Patent Nos. 7,515,981, entitled \"Light Guided Assembly System\"; and 9,658,614 and 10,528,036, each entitled \"Light Guided Assembly System and Method.\" The complaint seeks an unspecified amount of damages, enhanced damages, attorneys' fees, costs, interest, and injunctive relief. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in this matter.\n\nIn May 2023, Dialect, LLC filed a complaint against Amazon.com, Inc. and Amazon Web Services, Inc. in the United States District Court for the Eastern District for Virginia. The complaint alleges, among other things, that Amazon's Alexaenabled products and services, such as Echo devices, Fire tablets, Fire TV sticks, Fire TVs, Alexa, and Alexa Voice Services, infringe U.S. Patent Nos. 7,693,720 and 9,031,845, each entitled \"Mobile Systems and Methods for Responding to Natural Language Speech Utterance\"; 8,015,006, entitled \"Systems and Methods for Processing Natural Language Speech Utterances with Context-Specific Domain Agents\"; 8,140,327, entitled \"System and Method for Filtering and Eliminating Noise from Natural Language Utterances to Improve Speech Recognition and Parsing\"; 8,195,468 and 9,495,957, each entitled \"Mobile Systems and Methods of Supporting Natural Language Human-Machine Interactions\"; and 9,263,039, entitled \"Systems and Methods for Responding to Natural Language Speech Utterance.\" The complaint seeks an unspecified amount of damages, enhanced damages, attorneys' fees, costs, interest, and injunctive relief. In November 2023, the court granted in part Amazon's motion to dismiss Dialect's complaint and dismissed the ' 845 patent from the case. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in this matter.\n\nBeginning in October 2023, Nokia Technologies Oy and related entities filed complaints alleging infringement of patents related to video-related technologies against Amazon.com, Inc. and related entities in multiple courts in the United States, India, the United Kingdom, Germany, and Brazil, the Unified Patent Court of the European Union, and the United States International Trade Commission. The complaints allege, among other things, that certain Amazon Prime Video services and features of Amazon devices carrying the Prime Video app infringe Nokia's patents; some of the complaints additionally allege infringement by Freevee, Twitch, and Amazon voice assistants. The complaints seek, among other things, injunctive relief and, in some cases, unspecified money damages, enhanced damages, attorneys' fees, costs, interest, and declaratory relief. These matters are at various procedural stages, with preliminary injunctions issued in certain instances. We dispute the allegations of wrongdoing and intend to defend ourselves vigorously in these matters.\n\nIn addition, we are regularly subject to claims, litigation, and other proceedings, including potential regulatory proceedings, involving patent and other intellectual property matters, taxes, labor and employment, competition and antitrust, privacy and data protection, consumer protection, commercial disputes, goods and services offered by us and by third parties, and other matters.\n\nThe outcomes of our legal proceedings and other contingencies are inherently unpredictable, subject to significant uncertainties, and could be material to our operating results and cash flows for a particular period. We evaluate, on a regular basis, developments in our legal proceedings and other contingencies that could affect the amount of liability, including amounts in excess of any previous accruals and reasonably possible losses disclosed, and make adjustments and changes to our accruals and disclosures as appropriate. For the matters we disclose that do not include an estimate of the amount of loss or range of losses, such an estimate is not possible or is immaterial, and we may be unable to estimate the possible loss or range of losses that could potentially result from the application of non-monetary remedies. Until the final resolution of such matters, if any of our estimates and assumptions change or prove to have been incorrect, we may experience losses in excess of the amounts recorded, which could have a material effect on our business, consolidated financial position, results of operations, or cash flows.\n\nSee also \"Note 9 - Income Taxes.\"\n\n# Note 8 - STOCKHOLDERS' EQUITY \n\n## Preferred Stock\n\nWe have authorized 500 million shares of $\\$ 0.01$ par value preferred stock. No preferred stock was outstanding for any year presented.\n\n## Common Stock\n\nCommon shares outstanding plus shares underlying outstanding stock awards totaled 10.5 billion, 10.6 billion, and 10.8 billion, as of December 31, 2021, 2022, and 2023. These totals include all vested and unvested stock awards outstanding, including those awards we estimate will be forfeited.\n\n## Stock Repurchase Activity\n\nIn March 2022, the Board of Directors authorized a program to repurchase up to $\\$ 10.0$ billion of our common stock, with no fixed expiration, which replaced the previous $\\$ 5.0$ billion stock repurchase authorization, approved by the Board of Directors in February 2016. We repurchased 46.2 million shares of our common stock for $\\$ 6.0$ billion in 2022 under these programs. There were no repurchases of common stock in 2021 or 2023. As of December 31, 2023, we have $\\$ 6.1$ billion remaining under the repurchase program.\n\n## Stock Award Plans\n\nEmployees vest in restricted stock unit awards over the corresponding service term, generally between two and five years. The majority of restricted stock unit awards are granted at the date of hire or in Q2 as part of the annual compensation review and primarily vest semi-annually in Q2 and Q4 of the relevant compensation year.\n\n## Stock Award Activity\n\nStock-based compensation expense is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2021 | 2022 | 2023 |\n| Cost of sales | \\$ 540 | \\$ 757 | \\$ 836 |\n| Fulfillment | 1,946 | 2,745 | 3,090 |\n| Technology and infrastructure | 6,645 | 10,621 | 13,434 |\n| Sales and marketing | 2,530 | 3,875 | 4,623 |\n| General and administrative | 1,096 | 1,623 | 2,040 |\n| Total stock-based compensation expense (1) | \\$ 12,757 | \\$ 19,621 | \\$ 24,023 |\n\n(1) The related tax benefits were $\\$ 2.7$ billion, $\\$ 4.3$ billion, and $\\$ 5.4$ billion for 2021, 2022, and 2023.\n\n|   |  |  | Weighted Average Grant-Date  |\n| --- | --- | --- | --- |\n|   | Number of Units | Fair Value | Fair Value  |\n|  Outstanding as of January 1, 2021 | 303.3 | $100 |   |\n|  Units granted | 127.3 | 167 |   |\n|  Units vested | (108.4) | 85 |   |\n|  Units forfeited | (42.3) | 116 |   |\n|  Outstanding as of December 31, 2021 | 279.9 | 134 |   |\n|  Units granted | 262.8 | 142 |   |\n|  Units vested | (113.3) | 114 |   |\n|  Units forfeited | (45.0) | 143 |   |\n|  Outstanding as of December 31, 2022 | 384.4 | 144 |   |\n|  Units granted | 218.1 | 106 |   |\n|  Units vested | (139.9) | 143 |   |\n|  Units forfeited | (56.8) | 135 |   |\n|  Outstanding as of December 31, 2023 | 405.8 | 125 |   |\n|  Scheduled vesting for outstanding restricted stock units as of December 31, 2023, is as follows (in millions): |  |  |   |\n|   | Year Ended |  |   |\n|   | 2024 | 2025 | 2026  |\n|  Scheduled vesting — restricted stock units | 218.3 | 124.6 | 48.7  |\n|   | 11.2 | 1.3 | 1.7  |\n|   | 405.8 |  |   |\n|  As of December 31, 2023, there was $18.3 billion of net unrecognized compensation cost related to unvested stock-based compensation arrangements. This compensation is recognized on an accelerated basis with more than half of the compensation expected to be expensed in the next twelve months, and has a remaining weighted-average recognition period of 0.9 years. The estimated forfeiture rate as of December 31, 2021, 2022, and 2023 was 26.5%, 26.5%, and 26.1%. |  |  |   |\n|  During 2021, 2022, and 2023, the fair value of restricted stock units that vested was $18.2 billion, $12.8 billion, and $17.6billion. |  |  |   |\n|  Common Stock Available for Future Issuance |  |  |   |\n|  As of December 31, 2023, common stock available for future issuance to employees is 1.6 billion shares. |  |  |   |\n|  Note 9 — INCOME TAXES |  |  |   |\n|  In 2021, 2022, and 2023, we recorded a net tax provision (benefit) of $4.8 billion, $(3.2) billion, and $7.1billion. Our U.S. taxable income is reduced by accelerated depreciation deductions and increased by the impact of capitalized research and development expenses. Cash paid for income taxes, net of refunds, was $3.7 billion, $6.0 billion, and $11.2billion for 2021, 2022, and 2023. |  |  |   |\n|  Certain foreign subsidiary earnings and losses are subject to current U.S. taxation and the subsequent repatriation of those earnings is not subject to tax in the U.S. The U.S. tax rules also provide for enhanced accelerated depreciation deductions by allowing us to expense a portion of qualified property, primarily equipment. These enhanced deductions are scheduled to phase out annually from 2023 through 2026. Our federal tax provision included a partial accelerated depreciation deduction election for 2021, and a full election for 2022 and 2023. Effective January 1, 2022, research and development expenses are required to be capitalized and amortized for U.S. tax purposes. |  |  |   |\n\n|   | Year Ended December 31, |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | 2021 | 2022 |  | 2023  |\n|  U.S. Federal: |  |  |  |   |\n|  Current | $2,129 | $2,175 |  | $8,652  |\n|  Deferred | 155 | (6,686) |  | (5,505)  |\n|  Total | 2,284 | (4,511) |  | 3,147  |\n|  U.S. State: |  |  |  |   |\n|  Current | 763 | 1,074 |  | 2,158  |\n|  Deferred | (178) | (1,302) |  | (498)  |\n|  Total | 585 | (228) |  | 1,660  |\n|  International: |  |  |  |   |\n|  Current | 2,209 | 1,682 |  | 2,186  |\n|  Deferred | (287) | (160) |  | 127  |\n|  Total | 1,922 | 1,522 |  | 2,313  |\n|  Provision (benefit) for income taxes, net | $4,791 | $(3,217) |  | $7,120  |\n|  U.S. and international components of income (loss) before income taxes are as follows (in millions): | |   |   |   |   |\n|   | Year Ended December 31, |  |  |   |\n|   | 2021 | 2022 |  | 2023  |\n|  U.S. | $35,879 | $(8,225) |  | $32,328  |\n|  International | 2,272 | 2,289 |  | 5,229  |\n|  Income (loss) before income taxes | $38,151 | $(5,936) |  | $37,557  |\n|  The items accounting for differences between income taxes computed at the federal statutory rate and the provision (benefit) recorded for income taxes are as follows (in millions): | |   |   |   |   |\n|   | Year Ended December 31, |  |  |   |\n|   | 2021 | 2022 |  | 2023  |\n|  Income taxes computed at the federal statutory rate | $8,012 | $(1,246) |  | $7,887  |\n|  Effect of: |  |  |  |   |\n|  Tax impact of foreign earnings and losses | (1,349) | (370) |  | 594  |\n|  State taxes, net of federal benefits | 465 | (173) |  | 1,307  |\n|  Tax credits | (1,136) | (1,006) |  | (2,362)  |\n|  Stock-based compensation (1) | (1,094) | 612 |  | 1,047  |\n|  Foreign income deduction (2) | (301) | (1,258) |  | (1,429)  |\n|  Other, net | 194 | 224 |  | 76  |\n|  Total | $4,791 | $(3,217) |  | $7,120  |\n|  (1) Includes non-deductible stock-based compensation and excess tax benefits or shortfalls from stock-based compensation. Our tax provision includes $1.9 billion of excess tax benefits from stock-based compensation for 2021, and $33 million and $519 million of tax shortfalls from stock-based compensation for 2022 and 2023.(2) U.S. companies are eligible for a deduction that lowers the effective tax rate on certain foreign income. This regime is referred to as the Foreign-Derived Intangible Income deduction and is dependent on the amount of our U.S. taxable income.We generated an income tax benefit in 2022 as compared to a provision for income taxes in 2021 primarily due to a decrease in pretax income and an increase in the foreign income deduction. This was partially offset by a reduction in excess tax benefits from stock-based compensation and a decrease in the tax impact of foreign earnings and losses driven by a decline in the favorable effects of corporate restructuring transactions. The foreign income deduction benefit recognized in 2022 reflects a change in our application of tax regulations related to the computation of qualifying foreign income and includes a tax benefit of approximately $655 million related to years prior to 2022. | |   |   |   |   |\n\nWe recorded a provision for income taxes in 2023 as compared to an income tax benefit in 2022 primarily due to an increase in pretax income, a decrease in the tax impact of foreign earnings and losses driven by a decline in the favorable effects of corporate restructuring transactions, and an increase in tax shortfalls from stock-based compensation. This was partially offset by an increase in federal research and development credits, which included approximately $\\$ 600$ million of tax benefit recorded in 2023 related to a change in the estimated qualifying expenditures associated with our 2022 U.S. federal R\\&D credit.\n\nWe intend to invest substantially all of our foreign subsidiary earnings, as well as our capital in our foreign subsidiaries, indefinitely outside of the U.S. in those jurisdictions in which we would incur significant, additional costs upon repatriation of such amounts.\n\nDeferred income tax assets and liabilities are as follows (in millions):\n\n|   | December 31, |   |\n| --- | --- | --- |\n|   | 2022 | 2023  |\n|  Deferred tax assets (1): |  |   |\n|  Loss carryforwards U.S. - Federal/States | 386 | 610  |\n|  Loss carryforwards - Foreign | 2,831 | 2,796  |\n|  Accrued liabilities, reserves, and other expenses | 3,280 | 3,751  |\n|  Stock-based compensation | 4,295 | 5,279  |\n|  Depreciation and amortization | 1,009 | 1,114  |\n|  Operating lease liabilities | 18,285 | 19,922  |\n|  Capitalized research and development | 6,824 | 14,800  |\n|  Other items | 1,023 | 745  |\n|  Tax credits | 950 | 1,582  |\n|  Total gross deferred tax assets | 38,883 | 50,599  |\n|  Less valuation allowances (2) | $(4,374)$ | $(4,811)$  |\n|  Deferred tax assets, net of valuation allowances | 34,509 | 45,788  |\n|  Deferred tax liabilities: |  |   |\n|  Depreciation and amortization | $(9,039)$ | $(12,454)$  |\n|  Operating lease assets | $(17,140)$ | $(18,648)$  |\n|  Other items | $(817)$ | $(1,489)$  |\n|  Net deferred tax assets (liabilities), net of valuation allowances | \\$ 7,513 | \\$ 13,197  |\n\n(1) Deferred tax assets are presented after tax effects and net of tax contingencies. (2) Relates primarily to deferred tax assets that would only be realizable upon the generation of net income in certain foreign taxing jurisdictions or future capital gains, as well as tax credits. Our valuation allowances primarily relate to foreign deferred tax assets, including substantially all of our foreign net operating loss carryforwards as of December 31, 2023. Our foreign net operating loss carryforwards for income tax purposes as of December 31, 2023 were approximately $\\$ 10.2$ billion before tax effects and certain of these amounts are subject to annual limitations under applicable tax law. If not utilized, a portion of these losses will begin to expire in 2024.\n\n# Income Tax Contingencies\n\nWe are subject to income taxes in the U.S. (federal and state) and numerous foreign jurisdictions. Significant judgment is required in evaluating our tax positions and determining our provision for income taxes. During the ordinary course of business, there are many transactions and calculations for which the ultimate tax determination is uncertain. We establish reserves for taxrelated uncertainties based on estimates of whether, and the extent to which, additional taxes will be due. These reserves are established when we believe that certain positions might be challenged despite our belief that our tax return positions are fully supportable. We adjust these reserves in light of changing facts and circumstances, such as the outcome of tax audits. The provision for income taxes includes the impact of reserve provisions and changes to reserves that are considered appropriate.\n\n|   | December 31, |   |\n| --- | --- | --- |\n|   | 2021 | 2022  |\n|  Gross tax contingencies – January 1 | $2,820 | $3,242  |\n|  Gross increases to tax positions in prior periods | 403 | 274  |\n|  Gross decreases to tax positions in prior periods | (354) | (172)  |\n|  Gross increases to current period tax positions | 507 | 706  |\n|  Settlements with tax authorities | (60) | (20)  |\n|  Lapse of statute of limitations | (74) | (28)  |\n|  Gross tax contingencies – December 31 (1) | $3,242 | $4,002  |\n\n(1) As of December 31, 2023, we had approximately $5.2 billion of income tax contingencies of which $3.3 billion, if fully recognized, would decrease our effective tax rate.\n\nAs of December 31, 2022 and 2023, we had accrued interest and penalties, net of federal income tax benefit, related to tax contingencies of $103 million and $194 million. Interest and penalties, net of federal income tax benefit, recognized for the years ended December 31, 2021, 2022, and 2023 were $28 million, $(7) million, and $91 million.\n\nWe are under examination, or may be subject to examination, by the Internal Revenue Service for the calendar year 2016 and thereafter. These examinations may lead to ordinary course adjustments or proposed adjustments to our taxes or our net operating losses with respect to years under examination as well as subsequent periods.\n\nWe are also subject to taxation in various states and other foreign jurisdictions including China, France, Germany, India, Japan, Luxembourg, and the United Kingdom. We are under, or may be subject to, audit or examination and additional assessments by the relevant authorities in respect of these particular jurisdictions primarily for 2011 and thereafter. We are currently disputing tax assessments in multiple jurisdictions, including with respect to the allocation and characterization of income.\n\nIn September 2022, the Luxembourg tax authority (“LTA”) denied the tax basis of certain intangible assets that we distributed from Luxembourg to the U.S. in 2021. When we are assessed by the LTA, we will need to remit taxes related to this matter. We believe the LTA’s position is without merit, we intend to defend ourselves vigorously in this matter, and we expect to recoup taxes paid.\n\nThe Indian tax authority (“ITA”) has asserted that tax applies to cloud services fees paid to Amazon in the U.S. We will need to remit taxes related to this matter until it is resolved, which payments could be significant in the aggregate. We believe the ITA’s position is without merit, we are defending our position vigorously in the Indian courts, and we expect to recoup taxes paid. If this matter is adversely resolved, we could recognize significant additional tax expense, including for taxes previously paid.\n\nIn October 2014, the European Commission opened a formal investigation to examine whether decisions by the tax authorities in Luxembourg with regard to the corporate income tax paid by certain of our subsidiaries comply with European Union rules on state aid. On October 4, 2017, the European Commission announced its decision that determinations by the tax authorities in Luxembourg did not comply with European Union rules on state aid. Based on that decision, the European Commission announced an estimated recovery amount of approximately €250 million, plus interest, for the period May 2006 through June 2014, and ordered Luxembourg tax authorities to calculate the actual amount of additional taxes subject to recovery. Luxembourg computed an initial recovery amount, consistent with the European Commission’s decision, which we deposited into escrow in March 2018, subject to adjustment pending conclusion of all appeals. In December 2017, Luxembourg appealed the European Commission’s decision. In May 2018, we appealed. On May 12, 2021, the European Union General Court annulled the European Commission’s state aid decision. In July 2021, the European Commission appealed the decision to the European Court of Justice. In December 2023, the European Court of Justice affirmed the European Union General Court’s decision.\n\nChanges in tax laws, regulations, administrative practices, principles, and interpretations may impact our tax contingencies. Due to various factors, including the inherent complexities and uncertainties of the judicial, administrative, and regulatory processes in certain jurisdictions, the timing of the resolution of income tax controversies is highly uncertain, and the amounts ultimately paid, if any, upon resolution of the issues raised by the taxing authorities may differ from the amounts accrued. It is reasonably possible that within the next twelve months we will receive additional assessments by various tax authorities or possibly reach resolution of income tax controversies in one or more jurisdictions. These assessments or settlements could result in changes to our contingencies related to positions on prior years’ tax filings. The actual amount of any change could vary significantly depending on the ultimate timing and nature of any settlements. We cannot currently provide an estimate of the range of possible outcomes.\n\n# Note 10 - SEGMENT INFORMATION \n\nWe have organized our operations into three segments: North America, International, and AWS. We allocate to segment results the operating expenses \"Fulfillment,\" \"Technology and infrastructure,\" \"Sales and marketing,\" and \"General and administrative\" based on usage, which is generally reflected in the segment in which the costs are incurred. The majority of technology costs recorded in \"Technology and infrastructure\" are incurred in the U.S. and are included in our North America and AWS segments. The majority of infrastructure costs recorded in \"Technology and infrastructure\" are allocated to the AWS segment based on usage. There are no internal revenue transactions between our reportable segments. Our chief operating decision maker (\"CODM\") regularly reviews consolidated net sales, consolidated operating expenses, and consolidated operating income (loss) by segment. Amounts included in consolidated operating expenses include \"Cost of sales,\" \"Fulfillment,\" \"Technology and infrastructure,\" \"Sales and marketing,\" \"General and administrative,\" and \"Other operating expense (income), net.\" Our CODM manages our business by reviewing annual forecasts and consolidated results by segment on a quarterly basis.\n\n## North America\n\nThe North America segment primarily consists of amounts earned from retail sales of consumer products (including from sellers) and advertising and subscription services through North America-focused online and physical stores. This segment includes export sales from these online stores.\n\n## International\n\nThe International segment primarily consists of amounts earned from retail sales of consumer products (including from sellers) and advertising and subscription services through internationally-focused online stores. This segment includes export sales from these internationally-focused online stores (including export sales from these online stores to customers in the U.S., Mexico, and Canada), but excludes export sales from our North America-focused online stores.\n\n## AWS\n\nThe AWS segment consists of amounts earned from global sales of compute, storage, database, and other services for start-ups, enterprises, government agencies, and academic institutions.\n\nInformation on reportable segments and reconciliation to consolidated net income (loss) is as follows (in millions):\n\n|  | Year Ended December 31, |  |  |\n| :--: | :--: | :--: | :--: |\n|  | 2021 | 2022 | 2023 |\n| North America |  |  |  |\n| Net sales | \\$ 279,833 | \\$ 315,880 | \\$ 352,828 |\n| Operating expenses | 272,562 | 318,727 | 337,951 |\n| Operating income (loss) | \\$ 7,271 | \\$ $(2,847)$ | \\$ 14,877 |\n| International |  |  |  |\n| Net sales | \\$ 127,787 | \\$ 118,007 | \\$ 131,200 |\n| Operating expenses | 128,711 | 125,753 | 133,856 |\n| Operating loss | \\$ (924) | \\$ $(7,746)$ | \\$ $(2,656)$ |\n| AWS |  |  |  |\n| Net sales | \\$ 62,202 | \\$ 80,096 | \\$ 90,757 |\n| Operating expenses | 43,670 | 57,255 | 66,126 |\n| Operating income | \\$ 18,532 | \\$ 22,841 | \\$ 24,631 |\n| Consolidated |  |  |  |\n| Net sales | \\$ 469,822 | \\$ 513,983 | \\$ 574,785 |\n| Operating expenses | 444,943 | 501,735 | 537,933 |\n| Operating income | 24,879 | 12,248 | 36,852 |\n| Total non-operating income (expense) | 13,272 | $(18,184)$ | 705 |\n| Benefit (provision) for income taxes | $(4,791)$ | 3,217 | $(7,120)$ |\n| Equity-method investment activity, net of tax | 4 | (3) | (12) |\n| Net income (loss) | \\$ 33,364 | \\$ $(2,722)$ | \\$ 30,425 |\n\n|   | Year Ended December 31, |   |   |   |\n| --- | --- | --- | --- | --- |\n|   | 2021 | 2022 | 2023 |   |\n|  Net Sales: |  |  |  |   |\n|  Online stores (1) | $222,075 | $220,004 | $231,872 |   |\n|  Physical stores (2) | 17,075 | 18,963 | 20,030 |   |\n|  Third-party seller services (3) | 103,366 | 117,716 | 140,053 |   |\n|  Advertising services (4) | 31,160 | 37,739 | 46,906 |   |\n|  Subscription services (5) | 31,768 | 35,218 | 40,209 |   |\n|  AWS | 62,202 | 80,096 | 90,757 |   |\n|  Other (6) | 2,176 | 4,247 | 4,958 |   |\n|  Consolidated | $469,822 | $513,983 | $574,785 |   |\n|  (1) Includes product sales and digital media content where we record revenue gross. We leverage our retail infrastructure to offer a wide selection of consumable and durable goods that includes media products available in both a physical and digital format, such as books, videos, games, music, and software. These product sales include digital products sold on a transactional basis. Digital media content subscriptions that provide unlimited viewing or usage rights are included in “Subscription services.” |  |  |  |   |\n|  (2) Includes product sales where our customers physically select items in a store. Sales to customers who order goods online for delivery or pickup at our physical stores are included in “Online stores.” |  |  |  |   |\n|  (3) Includes commissions and any related fulfillment and shipping fees, and other third-party seller services. |  |  |  |   |\n|  (4) Includes sales of advertising services to sellers, vendors, publishers, authors, and others, through programs such as sponsored ads, display, and video advertising. |  |  |  |   |\n|  (5) Includes annual and monthly fees associated with Amazon Prime memberships, as well as digital video, audiobook, digital music, e-book, and other non-AWS subscription services. |  |  |  |   |\n|  (6) Includes sales related to various other offerings, such as certain licensing and distribution of video content, health care services, and shipping services, and our co-branded credit card agreements. |  |  |  |   |\n|  Net sales are attributed to countries primarily based on country-focused online and physical stores or, for AWS purposes, the selling entity. Net sales attributed to countries that represent a significant portion of consolidated net sales are as follows (in millions): |  |  |  |   |\n|   | Year Ended December 31, |  |  |   |\n|   | 2021 | 2022 | 2023 |   |\n|  United States | $314,006 | $356,113 | $395,637 |   |\n|  Germany | 37,326 | 33,598 | 37,588 |   |\n|  United Kingdom | 31,914 | 30,074 | 33,591 |   |\n|  Japan | 23,071 | 24,396 | 26,002 |   |\n|  Rest of world | 63,505 | 69,802 | 81,967 |   |\n|  Consolidated | $469,822 | $513,983 | $574,785 |   |\n\n|  Total segment assets exclude corporate assets, such as cash and cash equivalents, marketable securities, other long-term investments, corporate facilities, goodwill and other acquired intangible assets, and tax assets. Technology infrastructure assets are allocated among the segments based on usage, with the majority allocated to the AWS segment. Total segment assets reconciled to consolidated amounts are as follows (in millions): |  |  |   |\n| --- | --- | --- | --- |\n|   | December 31, |  |   |\n|   | 2021 | 2022 | 2023  |\n|  North America (1) | $161,255 | $185,268 | $196,029  |\n|  International (1) | 57,983 | 64,666 | 69,718  |\n|  AWS (2) | 63,835 | 88,491 | 108,533  |\n|  Corporate | 137,476 | 124,250 | 153,574  |\n|  Consolidated | $420,549 | $462,675 | $527,854  |\n|  (1) | North America and International segment assets primarily consist of property and equipment, operating leases, inventory, accounts receivable, and digital video and music content.  |   |   |\n|  (2) | AWS segment assets primarily consist of property and equipment, accounts receivable, and operating leases.  |   |   |\n|   | Property and equipment, net by segment is as follows (in millions):  |   |   |\n|   | December 31, |  |   |\n|   | 2021 | 2022 | 2023  |\n|  North America | $83,640 | $90,076 | $93,632  |\n|  International | 21,718 | 23,347 | 24,357  |\n|  AWS | 43,245 | 60,324 | 72,701  |\n|  Corporate | 11,678 | 12,968 | 13,487  |\n|  Consolidated | $160,281 | $186,715 | $204,177  |\n|  Total net additions to property and equipment by segment are as follows (in millions): |  |  |   |\n|   | Year Ended December 31, |  |   |\n|   | 2021 | 2022 | 2023  |\n|  North America (1) | $37,397 | $23,682 | $17,529  |\n|  International (1) | 10,259 | 6,711 | 4,144  |\n|  AWS (2) | 22,047 | 27,755 | 24,843  |\n|  Corporate | 2,622 | 2,688 | 1,828  |\n|  Consolidated | $72,325 | $60,836 | $48,344  |\n|  (1) | Includes property and equipment added under finance leases of $3.6 billion, $422 million, and $525 million in 2021, 2022, and 2023, and under build-to-suit lease arrangements of $5.6 billion, $3.2 billion, and $356 million in 2021, 2022, and 2023.  |   |   |\n|  (2) | Includes property and equipment added under finance leases of $3.5 billion, $253 million, and $117 million in 2021, 2022, and 2023, and under build-to-suit lease arrangements of $51 million, $20 million, and $1 million in 2021, 2022, and 2023.  |   |   |\n|   | U.S. property and equipment, net and operating leases were $155.0 billion, $180.0 billion, and $196.0 billion, as of December 31, 2021, 2022, and 2023, and non-U.S. property and equipment, net and operating leases were $61.3 billion, $72.9 billion, and $80.7 billion as of December 31, 2021, 2022, and 2023. Except for the U.S., property and equipment, net and operating leases in any single country were less than 10% of consolidated property and equipment, net and operating leases.  |   |   |\n|   | Depreciation and amortization expense on property and equipment, including corporate property and equipment, are allocated to all segments based on usage. Total depreciation and amortization expense, by segment, is as follows (in millions):  |   |   |\n|   | Year Ended December 31, |  |   |\n|   | 2021 | 2022 | 2023  |\n|  North America | $9,234 | $11,565 | $13,678  |\n|  International | 3,022 | 3,483 | 4,016  |\n|  AWS | 10,653 | 9,876 | 12,531  |\n|  Consolidated | $22,909 | $24,924 | $30,225  |\n\n# Item 9. Changes in and Disagreements with Accountants On Accounting and Financial Disclosure \n\nNone.\n\n## Item 9A. Controls and Procedures\n\n## Evaluation of Disclosure Controls and Procedures\n\nWe carried out an evaluation required by the Securities Exchange Act of 1934 (the \"1934 Act\"), under the supervision and with the participation of our principal executive officer and principal financial officer, of the effectiveness of the design and operation of our disclosure controls and procedures, as defined in Rule 13a-15(e) of the 1934 Act, as of December 31, 2023. Based on this evaluation, our principal executive officer and principal financial officer concluded that, as of December 31, 2023, our disclosure controls and procedures were effective to provide reasonable assurance that information required to be disclosed by us in the reports that we file or submit under the 1934 Act is recorded, processed, summarized, and reported within the time periods specified in the SEC's rules and forms and to provide reasonable assurance that such information is accumulated and communicated to our management, including our principal executive officer and principal financial officer, as appropriate to allow timely decisions regarding required disclosure.\n\n## Management's Report on Internal Control over Financial Reporting\n\nManagement is responsible for establishing and maintaining adequate internal control over financial reporting, as defined in Rule 13a-15(f) of the 1934 Act. Management has assessed the effectiveness of our internal control over financial reporting as of December 31, 2023 based on criteria established in Internal Control - Integrated Framework (2013) issued by the Committee of Sponsoring Organizations of the Treadway Commission. As a result of this assessment, management concluded that, as of December 31, 2023, our internal control over financial reporting was effective in providing reasonable assurance regarding the reliability of financial reporting and the preparation of financial statements for external purposes in accordance with generally accepted accounting principles. Ernst \\& Young has independently assessed the effectiveness of our internal control over financial reporting and its report is included below.\n\n## Changes in Internal Control Over Financial Reporting\n\nThere were no changes in our internal control over financial reporting during the quarter ended December 31, 2023 that materially affected, or are reasonably likely to materially affect, our internal control over financial reporting.\n\n## Limitations on Controls\n\nOur disclosure controls and procedures and internal control over financial reporting are designed to provide reasonable assurance of achieving their objectives as specified above. Management does not expect, however, that our disclosure controls and procedures or our internal control over financial reporting will prevent or detect all error and fraud. Any control system, no matter how well designed and operated, is based upon certain assumptions and can provide only reasonable, not absolute, assurance that its objectives will be met. Further, no evaluation of controls can provide absolute assurance that misstatements due to error or fraud will not occur or that all control issues and instances of fraud, if any, within the Company have been detected.\n\n# Report of Independent Registered Public Accounting Firm \n\nThe Board of Directors and Shareholders\nAmazon.com, Inc.\n\n## Opinion on Internal Control Over Financial Reporting\n\nWe have audited Amazon.com, Inc.'s internal control over financial reporting as of December 31, 2023, based on criteria established in Internal Control-Integrated Framework issued by the Committee of Sponsoring Organizations of the Treadway Commission (2013 framework) (the COSO criteria). In our opinion, Amazon.com, Inc. (the Company) maintained, in all material respects, effective internal control over financial reporting as of December 31, 2023, based on the COSO criteria.\n\nWe also have audited, in accordance with the standards of the Public Company Accounting Oversight Board (United States) (PCAOB), the consolidated balance sheets of the Company as of December 31, 2023 and 2022, the related consolidated statements of operations, comprehensive income (loss), stockholders' equity, and cash flows for each of the three years in the period ended December 31, 2023 and the related notes and our report dated February 1, 2024 expressed an unqualified opinion thereon.\n\n## Basis for Opinion\n\nThe Company's management is responsible for maintaining effective internal control over financial reporting, and for its assessment of the effectiveness of internal control over financial reporting included in the accompanying Management's Report on Internal Control over Financial Reporting. Our responsibility is to express an opinion on the Company's internal control over financial reporting based on our audit. We are a public accounting firm registered with the PCAOB and are required to be independent with respect to the Company in accordance with the U.S. federal securities laws and the applicable rules and regulations of the Securities and Exchange Commission and the PCAOB.\n\nWe conducted our audit in accordance with the standards of the PCAOB. Those standards require that we plan and perform the audit to obtain reasonable assurance about whether effective internal control over financial reporting was maintained in all material respects.\n\nOur audit included obtaining an understanding of internal control over financial reporting, assessing the risk that a material weakness exists, testing and evaluating the design and operating effectiveness of internal control based on the assessed risk, and performing such other procedures as we considered necessary in the circumstances. We believe that our audit provides a reasonable basis for our opinion.\n\n## Definition and Limitations of Internal Control Over Financial Reporting\n\nA company's internal control over financial reporting is a process designed to provide reasonable assurance regarding the reliability of financial reporting and the preparation of financial statements for external purposes in accordance with generally accepted accounting principles. A company's internal control over financial reporting includes those policies and procedures that (1) pertain to the maintenance of records that, in reasonable detail, accurately and fairly reflect the transactions and dispositions of the assets of the company; (2) provide reasonable assurance that transactions are recorded as necessary to permit preparation of financial statements in accordance with generally accepted accounting principles, and that receipts and expenditures of the company are being made only in accordance with authorizations of management and directors of the company; and (3) provide reasonable assurance regarding prevention or timely detection of unauthorized acquisition, use, or disposition of the company's assets that could have a material effect on the financial statements.\n\nBecause of its inherent limitations, internal control over financial reporting may not prevent or detect misstatements. Also, projections of any evaluation of effectiveness to future periods are subject to the risk that controls may become inadequate because of changes in conditions, or that the degree of compliance with the policies or procedures may deteriorate.\n\n# Item 9B. Other Information \n\nOn November 3, 2023, Jonathan Rubinstein, Director, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 22,953 shares of Amazon.com, Inc. common stock over a period ending on February 9, 2026, subject to certain conditions.\n\nOn November 6, 2023, Douglas Herrington, CEO Worldwide Amazon Stores, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 130,162 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2024, subject to certain conditions.\n\nOn November 8, 2023, Jeffrey Bezos, our founder and Executive Chair, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 50,000,000 shares of Amazon.com, Inc. common stock over a period ending on January 31, 2025, subject to certain conditions.\n\nOn November 13, 2023, Shelley Reynolds, Vice President, Worldwide Controller, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 11,200 shares of Amazon.com, Inc. common stock over a period ending on November 29, 2024, subject to certain conditions.\n\nOn November 13, 2023, David Zapolsky, Senior Vice President, Global Public Policy and General Counsel, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 48,480 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2024, subject to certain conditions.\n\nOn November 16, 2023, Andrew Jassy, President and Chief Executive Officer, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 190,900 shares of Amazon.com, Inc. common stock over a period ending on December 31, 2024, subject to certain conditions.\n\nOn November 21, 2023, Brian Olsavsky, Senior Vice President and Chief Financial Officer, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 31,400 shares of Amazon.com, Inc. common stock over a period ending on May 28,2024 , subject to certain conditions.\n\nOn November 27, 2023, Judith McGrath, Director, adopted a trading plan intended to satisfy Rule 10b5-1(c) to sell up to 5,760 shares of Amazon.com, Inc. common stock over a period ending on March 8, 2024, subject to certain conditions.\n\n## Item 9C. Disclosure Regarding Foreign Jurisdictions that Prevent Inspections\n\nNot applicable.\n\n## PART III\n\n## Item 10. Directors, Executive Officers, and Corporate Governance\n\nInformation regarding our Executive Officers required by Item 10 of Part III is set forth in Item 1 of Part I \"Business Information About Our Executive Officers.\" Information required by Item 10 of Part III regarding our Directors and any material changes to the process by which security holders may recommend nominees to the Board of Directors is included in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders, and is incorporated herein by reference. Information relating to our Code of Business Conduct and Ethics and, to the extent applicable, compliance with Section 16(a) of the 1934 Act is set forth in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders and is incorporated herein by reference. To the extent permissible under Nasdaq rules, we intend to disclose amendments to our Code of Business Conduct and Ethics, as well as waivers of the provisions thereof, on our investor relations website under the heading \"Corporate Governance\" at amazon.com/ir.\n\n## Item 11. Executive Compensation\n\nInformation required by Item 11 of Part III is included in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n## Item 12. Security Ownership of Certain Beneficial Owners and Management and Related Shareholder Matters\n\nInformation required by Item 12 of Part III is included in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n# Item 13. Certain Relationships and Related Transactions, and Director Independence \n\nInformation required by Item 13 of Part III is included in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n## Item 14. Principal Accountant Fees and Services\n\nInformation required by Item 14 of Part III is included in our Proxy Statement relating to our 2024 Annual Meeting of Shareholders and is incorporated herein by reference.\n\n# PART IV \n\n## Item 15. Exhibits, Financial Statement Schedules\n\n(a) List of Documents Filed as a Part of This Report:\n(1) Index to Consolidated Financial Statements:\n\nReport of Ernst \\& Young LLP, Independent Registered Public Accounting Firm\nConsolidated Statements of Cash Flows for each of the three years ended December 31, 2023\nConsolidated Statements of Operations for each of the three years ended December 31, 2023\nConsolidated Statements of Comprehensive Income (Loss) for each of the three years ended December 31, 2023\n\nConsolidated Balance Sheets as of December 31, 2022 and 2023\nConsolidated Statements of Stockholders’ Equity for each of the three years ended December 31, 2023\nNotes to Consolidated Financial Statements\nReport of Ernst \\& Young LLP, Independent Registered Public Accounting Firm\n(2) Index to Financial Statement Schedules:\n\nAll schedules have been omitted because the required information is included in the consolidated financial statements or the notes thereto, or because it is not required.\n(3) Index to Exhibits\n\nSee exhibits listed under Part (b) below.\n(b) Exhibits:\n\nExhibit Number\nDescription\n3.1 Amended and Restated Certificate of Incorporation of Amazon.com, Inc. (incorporated by reference to the Company's Current Report on Form 8-K, filed May 27, 2022).\n3.2 Amended and Restated Bylaws of Amazon.com, Inc. (incorporated by reference to the Company's Current Report on Form 8-K, filed January 6, 2023).\n4.1 Indenture, dated as of November 29, 2012, between Amazon.com, Inc. and Wells Fargo Bank, National Association, as trustee (incorporated by reference to the Company's Current Report on Form 8-K, filed November 29, 2012).\n4.2 Supplemental Indenture, dated as of April 13, 2022, among Amazon.com, Inc., Wells Fargo Bank, National Association, as prior trustee, and Computershare Trust Company, National Association, as successor trustee, containing Form of $2.730 \\%$ Note due 2024, Form of $3.000 \\%$ Note due 2025, Form of $3.300 \\%$ Note due 2027, Form of $3.450 \\%$ Note due 2029, Form of $3.600 \\%$ Note due 2032, Form of $3.950 \\%$ Note due 2052, and Form of $4.100 \\%$ Note due 2062 (incorporated by reference to the Company's Current Report on Form 8-K, filed April 13, 2022).\n4.3 Officers' Certificate of Amazon.com, Inc., dated as of December 5, 2014, containing Form of 2.600\\% Note due 2019, Form of $3.300 \\%$ Note due 2021, Form of $3.800 \\%$ Note due 2024, Form of $4.800 \\%$ Note due 2034, and Form of $4.950 \\%$ Note due 2044 (incorporated by reference to the Company's Current Report on Form 8-K, filed December 5, 2014).\n4.4 Officers' Certificate of Amazon.com, Inc., dated as of August 22, 2017, containing Form of 1.900\\% Note due 2020, Form of $2.400 \\%$ Note due 2023, Form of $2.800 \\%$ Note due 2024, Form of $3.150 \\%$ Note due 2027, Form of $3.875 \\%$ Note due 2037, Form of $4.050 \\%$ Note due 2047, and Form of $4.250 \\%$ Note due 2057 (incorporated by reference to the Company's Current Report on Form 8-K, filed August 22, 2017).\n4.5 Officers' Certificate of Amazon.com, Inc., dated as of December 20, 2017, containing Form of 5.200\\% Note due 2025 (incorporated by reference to the Company's Current Report on Form 8-K, filed December 20, 2017).\n\n|  4.6 | Officers’ Certificate of Amazon.com, Inc., dated as of June 3, 2020, containing Form of 0.400% Note due 2023, Form of 0.800% Note due 2025, Form of 1.200% Note due 2027, Form of 1.500% Note due 2030, Form of 2.500% Note due 2050, and Form of 2.700% Note due 2060 (incorporated by reference to the Company’s Current Report on Form 8-K, filed June 3, 2020).  |\n| --- | --- |\n|  4.7 | Officers’ Certificate of Amazon.com, Inc., dated as of May 12, 2021, containing Form of 0.250% Note due 2023, Form of 0.450% Note due 2024, Form of 1.000% Note due 2026, Form of 1.650% Note due 2028, Form of 2.100% Note due 2031, Form of 2.875% Note due 2041, Form of 3.100% Note due 2051, and Form of 3.250% Note due 2061 (incorporated by reference to the Company’s Current Report on Form 8-K, filed May 12, 2021).  |\n|  4.8 | Officers’ Certificate of Amazon.com, Inc., dated as of December 1, 2022, containing Form of 4.700% Note due 2024, Form of 4.600% Note due 2025, Form of 4.550% Note due 2027, Form of 4.650% Note due 2029, and Form of 4.700% Note due 2032 (incorporated by reference to the Company’s Current Report on Form 8-K, filed December 1, 2022).  |\n|  4.9 | Description of Securities (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2019).  |\n|  10.1† | 1997 Stock Incentive Plan (amended and restated) (incorporated by reference to the Company’s Quarterly Report on Form 10-Q for the Quarter ended June 30, 2022).  |\n|  10.2† | 1999 Nonofficer Employee Stock Option Plan (amended and restated) (incorporated by reference to the Company’s Quarterly Report on Form 10-Q for the Quarter ended June 30, 2022).  |\n|  10.3† | Form of Indemnification Agreement between Amazon.com, Inc. and each of its Directors (incorporated by reference to Exhibit 10.1 to the Company’s Registration Statement on Form S-1 (Registration No. 333-23795) filed March 24, 1997, as amended on April 21, 1997).  |\n|  10.4† | Form of Restricted Stock Unit Agreement for Officers and Employees (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2002).  |\n|  10.5† | Form of Restricted Stock Unit Agreement for Directors (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2002).  |\n|  10.6† | Form of Restricted Stock Agreement (incorporated by reference to the Company’s Annual Report on Form 10-K for the Year ended December 31, 2001).  |\n|  10.7† | Form of Global Restricted Stock Unit Award Agreement for Executive Officers.  |\n|  10.8 | Term Loan Agreement, dated as of January 3, 2023, among Amazon.com, Inc., Toronto Dominion (Texas) LLC, as administrative agent, and the other lenders party thereto (incorporated by reference to the Company’s Current Report on Form 8-K, filed January 3, 2023).  |\n|  10.9 | Five-Year Revolving Credit Agreement, dated as of November 1, 2023, among Amazon.com, Inc., Citibank N.A., as administrative agent, and the lenders party thereto (incorporated by reference to the Company’s Current Report on Form 8-K, filed November 1, 2023).  |\n|  10.10 | 364-Day Revolving Credit Agreement, dated as of November 1, 2023, among Amazon.com, Inc., Citibank N.A., as administrative agent, and the lenders party thereto (incorporated by reference to the Company’s Current Report on Form 8-K, filed November 1, 2023).  |\n|  21.1 | List of Significant Subsidiaries.  |\n|  23.1 | Consent of Independent Registered Public Accounting Firm.  |\n|  31.1 | Certification of Andrew R. Jassy, President and Chief Executive Officer of Amazon.com, Inc., pursuant to Rule 13a-14(a) under the Securities Exchange Act of 1934.  |\n|  31.2 | Certification of Brian T. Olsavsky, Senior Vice President and Chief Financial Officer of Amazon.com, Inc., pursuant to Rule 13a-14(a) under the Securities Exchange Act of 1934.  |\n|  32.1 | Certification of Andrew R. Jassy, President and Chief Executive Officer of Amazon.com, Inc., pursuant to 18 U.S.C. Section 1350.  |\n\n|  32.2 | Certification of Brian T. Olsavsky, Senior Vice President and Chief Financial Officer of Amazon.com, Inc.,pursuant to 18 U.S.C. Section 1350.  |\n| --- | --- |\n|  97.1 | Amazon.com, Inc. Clawback Policy.  |\n|  101 | The following financial statements from the Company’s Annual Report on Form 10-K for the year endedDecember 31, 2023, formatted in Inline XBRL: (i) Consolidated Statements of Cash Flows, (ii) Consolidated Statements of Operations, (iii) Consolidated Statements of Comprehensive Income (Loss), (iv) Consolidated Balance Sheets, (v) Consolidated Statements of Stockholders’ Equity, and (vi) Notes to Consolidated Financial Statements, tagged as blocks of text and including detailed tags.As permitted by Item 601(b)(4)(iii)(A) of Regulation S-K, the Company has not filed with this Annual Report on Form 10-K certain instruments defining the rights of holders of long-term debt of the Company and its subsidiaries because the total amount of securities authorized thereunder does not exceed 10 percent of the total assets of the Company and its subsidiaries on a consolidated basis. The Company agrees to furnish a copy of such agreements to the Commission upon request.  |\n|  104 | The cover page from the Company’s Annual Report on Form 10-K for the year ended December 31, 2023, formatted in Inline XBRL (included as Exhibit 101).  |\n|  † | Executive Compensation Plan or Agreement.  |\n\n# Item 16. *Form 10-K Summary*\n\nNone.\n\n# SIGNATURES \n\nPursuant to the requirements of Section 13 or 15(d) of the Securities Exchange Act of 1934, the registrant has duly caused this Report to be signed on its behalf by the undersigned, thereunto duly authorized, as of February 1, 2024.\n\nAMAZON.COM, INC.\n\nBy: $\\qquad$ /s/ Andrew R. Jassy\n\n## Andrew R. Jassy <br> President and Chief Executive Officer\n\nPursuant to the requirements of the Securities Exchange Act of 1934, this Report has been signed below by the following persons on behalf of the registrant and in the capacities indicated as of February 1, 2024.\n\nSignature\n/s/ Andrew R. Jassy\nAndrew R. Jassy\n/s/ Brian T. Olsavsky\nBrian T. Olsavsky\n/s/ Shelley L. Reynolds\nShelley L. Reynolds\n/s/ Jeffrey P. Bezos\nJeffrey P. Bezos\n/s/ Keith B. Alexander\nKeith B. Alexander\n/s/ Edith W. Cooper\nEdith W. Cooper\n/s/ Jamie S. Gorelick\nJamie S. Gorelick\n/s/ Daniel P. Huttenlocher\nDaniel P. Huttenlocher\n/s/ Judith A. McGrath\nJudith A. McGrath\n/s/ Indra K. Nooyi\nIndra K. Nooyi\n/s/ Jonathan J. Rubinstein\nJonathan J. Rubinstein\n/s/ Brad D. Smith\nBrad D. Smith\n/s/ Patricia Q. Stonesifer\nPatricia Q. Stonesifer\n/s/ Wendell P. Weeks\nWendell P. Weeks\n\nTitle\nPresident and Chief Executive Officer (Principal Executive Officer) and Director\n\nSenior Vice President and Chief Financial Officer (Principal Financial Officer)\n\nVice President, Worldwide Controller (Principal Accounting Officer)\n\nExecutive Chair\n\nDirector\n\nDirector\n\nDirector\n\nDirector\n\nDirector\n\nDirector\n\nDirector\n\n# Stock Price Performance Graph \n\nThe graph set forth below compares cumulative total return on the common stock with the cumulative total return of the NYSE Technology Index, the S\\&P 500 Index, and the S\\&P 500 Retailing Index, resulting from an initial investment of $\\$ 100$ in each and, except in the case of the NYSE Technology Index, assuming the reinvestment of any dividends, based on closing prices. Measurement points are the last trading day of each of Amazon's fiscal years ended December 31, 2018, 2019, 2020, 2021, 2022, and 2023.\n![img-2.jpeg](img-2.jpeg)\n\nNote: Stock price performance shown in the Stock Price Performance Graph for the common stock is historical and not necessarily indicative of future price performance.\n\n![img-3.jpeg](img-3.jpeg)\n\nMIX\nPaper from responsible sources\nFSC\nFSC* C103573","airweave_system_metadata":{"source_name":"google_drive","entity_type":"GoogleDriveFileEntity","sync_id":"fc35b7d2-5f26-409b-988d-288d322bffc6","sync_job_id":"55ed7cd1-0f08-4d86-9027-0594e96ac986","hash":"58e7aa9a5e71f843215cfd17584b34340dae61076953563f36217baa72666bbb","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://www.googleapis.com/drive/v3/files/1ptT2zH7b7fHP79g9QiTIjzkg8rTQE-2y?alt=media","size":1314396,"file_type":"pdf","mime_type":"application/pdf","local_path":"/tmp/airweave/processing/55ed7cd1-0f08-4d86-9027-0594e96ac986/6b79c144-0d0d-4389-a984-11abbad68a1d-Amazon-com-Inc-2023-Annual-Report.pdf","file_id":"1ptT2zH7b7fHP79g9QiTIjzkg8rTQE-2y","title":"Amazon-com-Inc-2023-Annual-Report.pdf","created_time":"2025-12-02T00:08:51.996000Z","modified_time":"2025-11-05T11:46:52Z","description":null,"starred":false,"trashed":false,"explicitly_trashed":false,"parents":["1JGFkudZ0KIuEA73ENKAQWn9ALxrA9H-H"],"owners":[],"shared":false,"web_view_link":"https://drive.google.com/file/d/1ptT2zH7b7fHP79g9QiTIjzkg8rTQE-2y/view?usp=drivesdk","icon_link":"https://drive-thirdparty.googleusercontent.com/16/type/application/pdf","md5_checksum":"0d3337fbfc63f79f921c48b085bef00e","shared_with_me_time":null,"modified_by_me_time":null,"viewed_by_me_time":null,"web_url":"https://drive.google.com/file/d/1ptT2zH7b7fHP79g9QiTIjzkg8rTQE-2y/view?usp=drivesdk"}
{"entity_id":"file_2b020d45-f5f8-80ad-9601-e17b0d11bbd2_3163197093942457910","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n**Path**: Page: Mistral\n\n**File Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n**Caption**: \n\n# Content\n\n# Airweave\n\n## Access Sync\n\n### User Role\n- **Role**: Access\n- **Entity**: Org\n\n### Schedules\n- **New Access**\n- **In-Mem Access-Graph Construction**\n- **In-Mem Access-Graph Construction**\n\n### Data Sync\n- **Data Sync**\n- **Document**: PDF\n- **Screenshot**: PDF\n\n## WINDOWS Server\n- **AD (LDA)**\n- **SP 2019**\n\n## Optional Support\n- **Optional Support**\n- **Search**\n- **Grafana**\n- **Prometheus**\n- **PG Bouncer**","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"cb8e4430f7561259d04cc286944c0e5c99aee8a3480297b82e63406aeedbad14","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WUEYYNQ5%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215658Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDr4%2FgC1B7bu9dhvqgHsg2O%2FwusFFxTO2F9aeX1lwOC6gIhALV1SZf2lYUYlqmsnVOPuaLBA0CcxHk4oh4eIrDIKYlPKv8DCE4QABoMNjM3NDIzMTgzODA1IgyFT5Js5%2FEW5ZMHpnAq3AM53pXzB6MpH7QxHXiPo0CdPFyfJujNQoAfnGdEidpE4PVYRWCLRgCNRw4Fpi3o5TyDViwD6XDo%2BXf7ZXWP%2F1Zw368TgWMjEe3PxU9wmOp74SxDgiznxqbJU4wJ9f9G0M2%2Bx4nZpXF6HTFtkakcDR6f%2FITbpuFEfJ5ct52bzQi1s1ZbLSykJ5JBveqXXTdQ4B%2FXOWF6Ui8ze5fFES6QLOn1RfhfOLgxwC9qbHZtrjeZ1LVCBzcFaPkGvZ7O6aTAPxO1PUqtmFtUjI4FjW%2B5OhPRHVX2CMvLRLJ8dAbCxp%2BZ%2B9%2BDqt4o1lhgO6U5mhggiMAVFJ17VBfvW4ymWriI286XJGwdzEU4pt4AtpvMCwQBHEg9svNWDPkHSus0kcM8%2Fa%2FoBEPbhwvLbGjy6UkM2qu%2FuTB7cxGQf7NuAvwKbviTJHTFrBDn3%2BzBdsFUM4HbtA4f4JTjKO2OgnBXpQoVFgu3jN%2FB%2FQ6omXZII53u6ljFO%2BAgaCI%2B2tsA%2B%2F8DIcKvA3ueWOYvn1502WYYZiPkP0mFl4eDup1N%2FjAUlJ3MwA7jtnBxIJcwKhGLXy0v2l3s6AzEGzaNAgOtMTEfvgD6CUKz5LfUrPCPW7h6UXfW0416RlIGl6%2FVhMzzIZ4TeDCX8cfJBjqkAfHmG2qMp%2BcgTuTdZwRUmeY6SJRwdqKaLhrXDhKcTcNCu6BRK%2B2Cc%2FzWmWZlpFpM6uy46Ev%2Br7fyzhdDFiLrwlb4Mf1FaLfIAGElheeLEVgVv9MwcRKs7W9tCwI8KMXbJTuKN4DmHB%2FJTz32A8jczzipOyYaP3irtLwtEZZCIX8HGDrSmzUfSAy%2FabbsqdkPvN9eX0S0G8vBCH2XjI7Uwrpx3vrd&X-Amz-Signature=f4e1b51146a6d34a7b50ee4f81c916415a26bdfc2fd9fdfc134b4195cf422109&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/2b1bdcf9-8d4a-4156-892e-344e48ecd597-f85251e5-058b-483f-9b2e-debf4dd99667.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WUEYYNQ5%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215658Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDr4%2FgC1B7bu9dhvqgHsg2O%2FwusFFxTO2F9aeX1lwOC6gIhALV1SZf2lYUYlqmsnVOPuaLBA0CcxHk4oh4eIrDIKYlPKv8DCE4QABoMNjM3NDIzMTgzODA1IgyFT5Js5%2FEW5ZMHpnAq3AM53pXzB6MpH7QxHXiPo0CdPFyfJujNQoAfnGdEidpE4PVYRWCLRgCNRw4Fpi3o5TyDViwD6XDo%2BXf7ZXWP%2F1Zw368TgWMjEe3PxU9wmOp74SxDgiznxqbJU4wJ9f9G0M2%2Bx4nZpXF6HTFtkakcDR6f%2FITbpuFEfJ5ct52bzQi1s1ZbLSykJ5JBveqXXTdQ4B%2FXOWF6Ui8ze5fFES6QLOn1RfhfOLgxwC9qbHZtrjeZ1LVCBzcFaPkGvZ7O6aTAPxO1PUqtmFtUjI4FjW%2B5OhPRHVX2CMvLRLJ8dAbCxp%2BZ%2B9%2BDqt4o1lhgO6U5mhggiMAVFJ17VBfvW4ymWriI286XJGwdzEU4pt4AtpvMCwQBHEg9svNWDPkHSus0kcM8%2Fa%2FoBEPbhwvLbGjy6UkM2qu%2FuTB7cxGQf7NuAvwKbviTJHTFrBDn3%2BzBdsFUM4HbtA4f4JTjKO2OgnBXpQoVFgu3jN%2FB%2FQ6omXZII53u6ljFO%2BAgaCI%2B2tsA%2B%2F8DIcKvA3ueWOYvn1502WYYZiPkP0mFl4eDup1N%2FjAUlJ3MwA7jtnBxIJcwKhGLXy0v2l3s6AzEGzaNAgOtMTEfvgD6CUKz5LfUrPCPW7h6UXfW0416RlIGl6%2FVhMzzIZ4TeDCX8cfJBjqkAfHmG2qMp%2BcgTuTdZwRUmeY6SJRwdqKaLhrXDhKcTcNCu6BRK%2B2Cc%2FzWmWZlpFpM6uy46Ev%2Br7fyzhdDFiLrwlb4Mf1FaLfIAGElheeLEVgVv9MwcRKs7W9tCwI8KMXbJTuKN4DmHB%2FJTz32A8jczzipOyYaP3irtLwtEZZCIX8HGDrSmzUfSAy%2FabbsqdkPvN9eX0S0G8vBCH2XjI7Uwrpx3vrd&X-Amz-Signature=f4e1b51146a6d34a7b50ee4f81c916415a26bdfc2fd9fdfc134b4195cf422109&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","expiry_time":"2025-12-04T22:56:58.337000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WUEYYNQ5%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215658Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDr4%2FgC1B7bu9dhvqgHsg2O%2FwusFFxTO2F9aeX1lwOC6gIhALV1SZf2lYUYlqmsnVOPuaLBA0CcxHk4oh4eIrDIKYlPKv8DCE4QABoMNjM3NDIzMTgzODA1IgyFT5Js5%2FEW5ZMHpnAq3AM53pXzB6MpH7QxHXiPo0CdPFyfJujNQoAfnGdEidpE4PVYRWCLRgCNRw4Fpi3o5TyDViwD6XDo%2BXf7ZXWP%2F1Zw368TgWMjEe3PxU9wmOp74SxDgiznxqbJU4wJ9f9G0M2%2Bx4nZpXF6HTFtkakcDR6f%2FITbpuFEfJ5ct52bzQi1s1ZbLSykJ5JBveqXXTdQ4B%2FXOWF6Ui8ze5fFES6QLOn1RfhfOLgxwC9qbHZtrjeZ1LVCBzcFaPkGvZ7O6aTAPxO1PUqtmFtUjI4FjW%2B5OhPRHVX2CMvLRLJ8dAbCxp%2BZ%2B9%2BDqt4o1lhgO6U5mhggiMAVFJ17VBfvW4ymWriI286XJGwdzEU4pt4AtpvMCwQBHEg9svNWDPkHSus0kcM8%2Fa%2FoBEPbhwvLbGjy6UkM2qu%2FuTB7cxGQf7NuAvwKbviTJHTFrBDn3%2BzBdsFUM4HbtA4f4JTjKO2OgnBXpQoVFgu3jN%2FB%2FQ6omXZII53u6ljFO%2BAgaCI%2B2tsA%2B%2F8DIcKvA3ueWOYvn1502WYYZiPkP0mFl4eDup1N%2FjAUlJ3MwA7jtnBxIJcwKhGLXy0v2l3s6AzEGzaNAgOtMTEfvgD6CUKz5LfUrPCPW7h6UXfW0416RlIGl6%2FVhMzzIZ4TeDCX8cfJBjqkAfHmG2qMp%2BcgTuTdZwRUmeY6SJRwdqKaLhrXDhKcTcNCu6BRK%2B2Cc%2FzWmWZlpFpM6uy46Ev%2Br7fyzhdDFiLrwlb4Mf1FaLfIAGElheeLEVgVv9MwcRKs7W9tCwI8KMXbJTuKN4DmHB%2FJTz32A8jczzipOyYaP3irtLwtEZZCIX8HGDrSmzUfSAy%2FabbsqdkPvN9eX0S0G8vBCH2XjI7Uwrpx3vrd&X-Amz-Signature=f4e1b51146a6d34a7b50ee4f81c916415a26bdfc2fd9fdfc134b4195cf422109&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466WUEYYNQ5%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215658Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDr4%2FgC1B7bu9dhvqgHsg2O%2FwusFFxTO2F9aeX1lwOC6gIhALV1SZf2lYUYlqmsnVOPuaLBA0CcxHk4oh4eIrDIKYlPKv8DCE4QABoMNjM3NDIzMTgzODA1IgyFT5Js5%2FEW5ZMHpnAq3AM53pXzB6MpH7QxHXiPo0CdPFyfJujNQoAfnGdEidpE4PVYRWCLRgCNRw4Fpi3o5TyDViwD6XDo%2BXf7ZXWP%2F1Zw368TgWMjEe3PxU9wmOp74SxDgiznxqbJU4wJ9f9G0M2%2Bx4nZpXF6HTFtkakcDR6f%2FITbpuFEfJ5ct52bzQi1s1ZbLSykJ5JBveqXXTdQ4B%2FXOWF6Ui8ze5fFES6QLOn1RfhfOLgxwC9qbHZtrjeZ1LVCBzcFaPkGvZ7O6aTAPxO1PUqtmFtUjI4FjW%2B5OhPRHVX2CMvLRLJ8dAbCxp%2BZ%2B9%2BDqt4o1lhgO6U5mhggiMAVFJ17VBfvW4ymWriI286XJGwdzEU4pt4AtpvMCwQBHEg9svNWDPkHSus0kcM8%2Fa%2FoBEPbhwvLbGjy6UkM2qu%2FuTB7cxGQf7NuAvwKbviTJHTFrBDn3%2BzBdsFUM4HbtA4f4JTjKO2OgnBXpQoVFgu3jN%2FB%2FQ6omXZII53u6ljFO%2BAgaCI%2B2tsA%2B%2F8DIcKvA3ueWOYvn1502WYYZiPkP0mFl4eDup1N%2FjAUlJ3MwA7jtnBxIJcwKhGLXy0v2l3s6AzEGzaNAgOtMTEfvgD6CUKz5LfUrPCPW7h6UXfW0416RlIGl6%2FVhMzzIZ4TeDCX8cfJBjqkAfHmG2qMp%2BcgTuTdZwRUmeY6SJRwdqKaLhrXDhKcTcNCu6BRK%2B2Cc%2FzWmWZlpFpM6uy46Ev%2Br7fyzhdDFiLrwlb4Mf1FaLfIAGElheeLEVgVv9MwcRKs7W9tCwI8KMXbJTuKN4DmHB%2FJTz32A8jczzipOyYaP3irtLwtEZZCIX8HGDrSmzUfSAy%2FabbsqdkPvN9eX0S0G8vBCH2XjI7Uwrpx3vrd&X-Amz-Signature=f4e1b51146a6d34a7b50ee4f81c916415a26bdfc2fd9fdfc134b4195cf422109&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"file_27720d45-f5f8-802d-8de5-d00bdef43488_-3094605296904771318","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"airweave-mistral-high-level.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: airweave-mistral-high-level.png\n**Path**: Page: Mistral\n\n**File Name**: airweave-mistral-high-level.png\n**Caption**: \n\n# Content\n\n![img-0.jpeg](img-0.jpeg)\n\n# 2. Mistral Search\n\n- **Raw data + ACLs**\n- **1. Airweave Search**\n- **/search?user_email=jean@acme.corp**\n- **S3 (airweave-outbound)**\n- **example: Lambda set on S3 events**\n\n## 1. Airweave Search\n\n- **1. Airweave Search**\n- **2. Mistral Search**\n- **3. Mistral AI**\n- **4. Mistral embeddings/LLMs**","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"84e1064eef02d564b82a1740508834c85f6494f28c6fd0c646857672e4c2098f","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=1fb8b6341f851863ab4b655dd4e8ee1c338d0e9dde8770f6e4765ed234c641db&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/2176226c-d990-41d3-9dd5-0e9fcdc3ff3d-airweave-mistral-high-level.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=1fb8b6341f851863ab4b655dd4e8ee1c338d0e9dde8770f6e4765ed234c641db&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"airweave-mistral-high-level.png","expiry_time":"2025-12-04T22:56:57.428000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=1fb8b6341f851863ab4b655dd4e8ee1c338d0e9dde8770f6e4765ed234c641db&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/226667f9-dc0e-461b-979b-87932d65a7a0/airweave-mistral-high-level.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=1fb8b6341f851863ab4b655dd4e8ee1c338d0e9dde8770f6e4765ed234c641db&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"file_27720d45-f5f8-8072-a1f5-f115df5b57c9_5196030399127667391","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"image.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: image.png\n**Path**: Page: Mistral\n\n**File Name**: image.png\n**Caption**: \n\n# Content\n\nBUILD SMARTER AGENTS.\n\n![img-0.jpeg](img-0.jpeg)","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"3cb93ebe25f84b5f2f394999c6b6f7549065eb50f66332797d6471aa0a58b1df","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=fd1539926c91aaab4bfc06c96b0bc0487f5b622b5a1e0d4b79c89b617ae30347&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/35c8c398-0a33-450c-ae92-d0010af58044-image.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=fd1539926c91aaab4bfc06c96b0bc0487f5b622b5a1e0d4b79c89b617ae30347&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"image.png","expiry_time":"2025-12-04T22:56:57.483000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=fd1539926c91aaab4bfc06c96b0bc0487f5b622b5a1e0d4b79c89b617ae30347&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/9835137b-fae7-410d-a338-15cee9066958/image.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466QSMDTZ3W%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215657Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIFccoZrJBZbAPPEKhRHIwX9CGsvAPk3oHNqiKbYDMp7lAiEAsiCgX0TZHA2gKkg0VLyuJUP1%2BEQ%2F7thANn1u8Ewud8Mq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDH1S9eYhvM%2FcuZOZWCrcAyfve8HlCCrSh6iY5bscQmJ1AOMQlowhUofUlYf0g2UmTVbUMuB9vV4nYyKuNuTSe%2BlsHrBlEpgFIWP%2FMuWePbCIqu1lfMgSnc%2Fb6Cc3ilNxYqIk6beUQbcIVQILBh7lXS%2FcMylC7bAk7leNldCCGy%2F%2Bt1jTigxWrpan9wv3KEML1b6esfKvlr9VZwvZEHluf%2Bwr%2BC0XFmKp5ILwlvscUjtNZnxu9K%2FZPiNb42FsFOeJnmBYp%2FGOrn3iSCNyhvnpuJKhY5d4AgCMYqBBd5TPbbG99z63KyZZDT44ygyVy%2FbDNc%2FcIiFKw1cTTmvM9DNBARK06kaCekhHEGwKx8f3HwL0E4mXDlixqEQ1BSB91uyCCcTi5zQGLjSXSMOl7nBNDQR8Tco9rA9L1pmTL3jc2ntTWECTRbDaNEleVXsgVkEniWRsKyJnlUfTngZDkmAc8salFy4suhNhrnKz%2FxibYqGfV9rtLb9y1ZAC%2FT7FQbDFZN8VNLJ9VO62Qp4IcneaXnmJ6XMr4bPiHsjfkdXp6jgpZP6RDKjN7cUtTxNCfb8lGwXFZD0Ym9DwWVL4xoDxBNxfIe542%2Bgs%2FjgfJKSfVIvdnSYK1mLhS%2BA81qdun%2BjAKcFrIcdxqp%2BfhnjZMODxx8kGOqUBhWzuMFndpsa1TwQSr%2BVJgm8VGZH1R%2BvTCT1axdXAFA6G2SQWC%2BTcKw2TGqtjazhA3iDHhUCcbqkYiB2OcXEogSSSiuoLtq%2BCdy%2B6K23YNpyK3w8yr7qLsSBgTSZth%2Fyxp0KcKHxbayc9tS1DY9pO%2FNVgwUqqHihvxpOWafMp1VlTjw7orsIJfOlWhFO5E%2FFJ8lYc55hpFVZe%2BRwj3D8Yjheg7QU7&X-Amz-Signature=fd1539926c91aaab4bfc06c96b0bc0487f5b622b5a1e0d4b79c89b617ae30347&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"2aa20d45-f5f8-807b-a8e6-ced7ac89525a","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"Reads for Mistral POC","created_at":"2025-11-13T04:27:00","updated_at":"2025-11-20T19:30:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Reads for Mistral POC\n**Path**: Page: Mistral\n\n**Title**: Reads for Mistral POC\n**Content**: [https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups](https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups)\n\n[https://learn.microsoft.com/en-gb/graph/overview](https://learn.microsoft.com/en-gb/graph/overview)\n\n[https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data](https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data)\n\n[https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG](https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG)\n\n[[link]\n\n[File: Claims-Based Identity for Windows.pdf]\n\n**Active Directory\n**[https://en.wikipedia.org/wiki/Active_Directory](https://en.wikipedia.org/wiki/Active_Directory) \n[https://www.youtube.com/watch?v=vy3e6ekuqqg](https://www.youtube.com/watch?v=vy3e6ekuqqg)\n\n[https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol](https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"2ec84294a615700136e4bd8c6cf1488a817d9898316bb56fbca986f95ac578b2","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2aa20d45-f5f8-807b-a8e6-ced7ac89525a","parent_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","parent_type":"page_id","title":"Reads for Mistral POC","created_time":"2025-11-13T04:27:00","updated_time":"2025-11-20T19:30:00","content":"[https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups](https://learn.microsoft.com/en-us/entra/fundamentals/concept-learn-about-groups)\n\n[https://learn.microsoft.com/en-gb/graph/overview](https://learn.microsoft.com/en-gb/graph/overview)\n\n[https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data](https://learn.microsoft.com/en-gb/graph/patterns/analyze-storage-data)\n\n[https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG](https://youtu.be/ME0LAuNYpe0?si=SZZ2WSqiD7x-AqgG)\n\n[[link]\n\n[File: Claims-Based Identity for Windows.pdf]\n\n**Active Directory\n**[https://en.wikipedia.org/wiki/Active_Directory](https://en.wikipedia.org/wiki/Active_Directory) \n[https://www.youtube.com/watch?v=vy3e6ekuqqg](https://www.youtube.com/watch?v=vy3e6ekuqqg)\n\n[https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol](https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol)","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":null,"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/Reads-for-Mistral-POC-2aa20d45f5f8807ba8e6ced7ac89525a","content_blocks_count":8,"max_depth":0,"web_url":"https://www.notion.so/Reads-for-Mistral-POC-2aa20d45f5f8807ba8e6ced7ac89525a"}
{"entity_id":"file_2b020d45-f5f8-80ad-9601-e17b0d11bbd2_-6063531371973080470","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","name":"Mistral x Airweave","entity_type":"NotionPageEntity"}],"name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n**Path**: Page: Mistral → Page: Mistral x Airweave\n\n**File Name**: f85251e5-058b-483f-9b2e-debf4dd99667.png\n**Caption**: \n\n# Content\n\n# Airweave\n\n## Access Sync\n\n### User Role\n- **Role**: Access\n- **Entity**: Org\n\n### Schedules\n- **New Access**\n- **In-Mem Access-Graph Construction**\n- **In-Mem Access-Graph Construction**\n\n### Data Sync\n- **Data Sync**\n- **Document**: PDF\n- **Screenshot**: PDF\n\n## WINDOWS Server\n- **AD (LDA)**\n- **SP 2019**\n\n## Optional Support\n- **Optional Support**\n- **Search**\n- **Grafana**\n- **Prometheus**\n- **PG Bouncer**","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"9a74a15db131eb5d393317502607c03a762f5a1e6b38cd5092c18895dabf4d3f","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SKKPZNSB%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215711Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDjzFwOemEwP5s9BzYKpXtvcwzKptoOAUyPP5EINqoJ9QIhAMJQkV0%2FeMwp8x3oXhcww%2B2e1VKCy6toB0VERYNwjy8SKv8DCE4QABoMNjM3NDIzMTgzODA1IgxdmfZllRjQDOrGhbkq3AM6MI33mcYmeTG3OHybnokw86pqFQnbvnxC6J%2ByO%2Bp9i6FnWzxQ5aDJjv0ysgb0iJj6gyLdCqWqfoSU%2F1E2ii3zZsd0r2KfrPbob1yUXvOq8%2Fc1HrLEBD%2B2d3P%2BEn5a8yO2EVXDhADjXTiG3ww8w%2FapEFaI3lQa5aR%2FsNU0YUBI%2Fp1QQlmcCwwYXgDa4r2ogHY8b0vN0vmJEhNtAKQJsQ1GmKLc0qi7kYWcUA023y63qv6ILk8b3xbwDLGRr8qRe4%2FX9vr8dB%2BuGv%2Fv%2FX3kA34qz6uxaGKeyzOiSBmvddjf%2FRqNxQmnQsP2QnK%2FKmXh5PCIqMeMo1Q46Z3Bih77no8GODaUGBKXL%2Bjm2QQXzflYwzDOEGnUQJYf4SdJwW%2BlVGPRd83w%2BIia6YZFzGmxAwk9ZICOs0L5poFxQPJ9iv2kWRD%2F7G6xtC5X1fPss26%2FoT8YPiGyHP1zLSSzTBE1s%2BAbEaYbnJoxEYT4QS4vbPp00PEmBfSptt%2F8Uj0DHJBh5iH2b4IWgBa0yKlRSVEQQw1LEjRdDWDB18rwh2jueBFY%2F3LrTknqqNp92djO3ipQJY8nnscD77xbGrNnsA1g082ADNPVbnymnROtAhZ4jSuNxsMWd9Yw2arrr5LNxTDl8MfJBjqkAcsWkY6PeJHuef3pgscAPJXRumN7LNHlbCfLM1D%2F%2FyDjIu10KslQi0da32kNUUsxfzuvhTf3mY8%2FtmScjm3Olt4kctPXI0Q%2Baci3pCb3GiHj5vWm61Cu9LcPMrSySeCgaAHC%2B%2FANo6aRNJMte7rq3wkKSbtS6oWACkxPZ3IuzWoSTixX%2FFwrFoE6ECbrcZtbwtO%2BsQZHMTrVmwBYfXtOGpLlwenw&X-Amz-Signature=f5120ba0231e9de90338dcc6e36a26b017482aac8973aeaaf7a628cf9453a6d5&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"image","mime_type":"image/png","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/adfef39d-f9c7-4978-b2c7-f35c0f33c134-f85251e5-058b-483f-9b2e-debf4dd99667.png","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SKKPZNSB%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215711Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDjzFwOemEwP5s9BzYKpXtvcwzKptoOAUyPP5EINqoJ9QIhAMJQkV0%2FeMwp8x3oXhcww%2B2e1VKCy6toB0VERYNwjy8SKv8DCE4QABoMNjM3NDIzMTgzODA1IgxdmfZllRjQDOrGhbkq3AM6MI33mcYmeTG3OHybnokw86pqFQnbvnxC6J%2ByO%2Bp9i6FnWzxQ5aDJjv0ysgb0iJj6gyLdCqWqfoSU%2F1E2ii3zZsd0r2KfrPbob1yUXvOq8%2Fc1HrLEBD%2B2d3P%2BEn5a8yO2EVXDhADjXTiG3ww8w%2FapEFaI3lQa5aR%2FsNU0YUBI%2Fp1QQlmcCwwYXgDa4r2ogHY8b0vN0vmJEhNtAKQJsQ1GmKLc0qi7kYWcUA023y63qv6ILk8b3xbwDLGRr8qRe4%2FX9vr8dB%2BuGv%2Fv%2FX3kA34qz6uxaGKeyzOiSBmvddjf%2FRqNxQmnQsP2QnK%2FKmXh5PCIqMeMo1Q46Z3Bih77no8GODaUGBKXL%2Bjm2QQXzflYwzDOEGnUQJYf4SdJwW%2BlVGPRd83w%2BIia6YZFzGmxAwk9ZICOs0L5poFxQPJ9iv2kWRD%2F7G6xtC5X1fPss26%2FoT8YPiGyHP1zLSSzTBE1s%2BAbEaYbnJoxEYT4QS4vbPp00PEmBfSptt%2F8Uj0DHJBh5iH2b4IWgBa0yKlRSVEQQw1LEjRdDWDB18rwh2jueBFY%2F3LrTknqqNp92djO3ipQJY8nnscD77xbGrNnsA1g082ADNPVbnymnROtAhZ4jSuNxsMWd9Yw2arrr5LNxTDl8MfJBjqkAcsWkY6PeJHuef3pgscAPJXRumN7LNHlbCfLM1D%2F%2FyDjIu10KslQi0da32kNUUsxfzuvhTf3mY8%2FtmScjm3Olt4kctPXI0Q%2Baci3pCb3GiHj5vWm61Cu9LcPMrSySeCgaAHC%2B%2FANo6aRNJMte7rq3wkKSbtS6oWACkxPZ3IuzWoSTixX%2FFwrFoE6ECbrcZtbwtO%2BsQZHMTrVmwBYfXtOGpLlwenw&X-Amz-Signature=f5120ba0231e9de90338dcc6e36a26b017482aac8973aeaaf7a628cf9453a6d5&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"f85251e5-058b-483f-9b2e-debf4dd99667.png","expiry_time":"2025-12-04T22:57:11.904000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SKKPZNSB%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215711Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDjzFwOemEwP5s9BzYKpXtvcwzKptoOAUyPP5EINqoJ9QIhAMJQkV0%2FeMwp8x3oXhcww%2B2e1VKCy6toB0VERYNwjy8SKv8DCE4QABoMNjM3NDIzMTgzODA1IgxdmfZllRjQDOrGhbkq3AM6MI33mcYmeTG3OHybnokw86pqFQnbvnxC6J%2ByO%2Bp9i6FnWzxQ5aDJjv0ysgb0iJj6gyLdCqWqfoSU%2F1E2ii3zZsd0r2KfrPbob1yUXvOq8%2Fc1HrLEBD%2B2d3P%2BEn5a8yO2EVXDhADjXTiG3ww8w%2FapEFaI3lQa5aR%2FsNU0YUBI%2Fp1QQlmcCwwYXgDa4r2ogHY8b0vN0vmJEhNtAKQJsQ1GmKLc0qi7kYWcUA023y63qv6ILk8b3xbwDLGRr8qRe4%2FX9vr8dB%2BuGv%2Fv%2FX3kA34qz6uxaGKeyzOiSBmvddjf%2FRqNxQmnQsP2QnK%2FKmXh5PCIqMeMo1Q46Z3Bih77no8GODaUGBKXL%2Bjm2QQXzflYwzDOEGnUQJYf4SdJwW%2BlVGPRd83w%2BIia6YZFzGmxAwk9ZICOs0L5poFxQPJ9iv2kWRD%2F7G6xtC5X1fPss26%2FoT8YPiGyHP1zLSSzTBE1s%2BAbEaYbnJoxEYT4QS4vbPp00PEmBfSptt%2F8Uj0DHJBh5iH2b4IWgBa0yKlRSVEQQw1LEjRdDWDB18rwh2jueBFY%2F3LrTknqqNp92djO3ipQJY8nnscD77xbGrNnsA1g082ADNPVbnymnROtAhZ4jSuNxsMWd9Yw2arrr5LNxTDl8MfJBjqkAcsWkY6PeJHuef3pgscAPJXRumN7LNHlbCfLM1D%2F%2FyDjIu10KslQi0da32kNUUsxfzuvhTf3mY8%2FtmScjm3Olt4kctPXI0Q%2Baci3pCb3GiHj5vWm61Cu9LcPMrSySeCgaAHC%2B%2FANo6aRNJMte7rq3wkKSbtS6oWACkxPZ3IuzWoSTixX%2FFwrFoE6ECbrcZtbwtO%2BsQZHMTrVmwBYfXtOGpLlwenw&X-Amz-Signature=f5120ba0231e9de90338dcc6e36a26b017482aac8973aeaaf7a628cf9453a6d5&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/0b784578-8341-484f-baf9-fcb8de1f4643/f85251e5-058b-483f-9b2e-debf4dd99667.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466SKKPZNSB%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215711Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJIMEYCIQDjzFwOemEwP5s9BzYKpXtvcwzKptoOAUyPP5EINqoJ9QIhAMJQkV0%2FeMwp8x3oXhcww%2B2e1VKCy6toB0VERYNwjy8SKv8DCE4QABoMNjM3NDIzMTgzODA1IgxdmfZllRjQDOrGhbkq3AM6MI33mcYmeTG3OHybnokw86pqFQnbvnxC6J%2ByO%2Bp9i6FnWzxQ5aDJjv0ysgb0iJj6gyLdCqWqfoSU%2F1E2ii3zZsd0r2KfrPbob1yUXvOq8%2Fc1HrLEBD%2B2d3P%2BEn5a8yO2EVXDhADjXTiG3ww8w%2FapEFaI3lQa5aR%2FsNU0YUBI%2Fp1QQlmcCwwYXgDa4r2ogHY8b0vN0vmJEhNtAKQJsQ1GmKLc0qi7kYWcUA023y63qv6ILk8b3xbwDLGRr8qRe4%2FX9vr8dB%2BuGv%2Fv%2FX3kA34qz6uxaGKeyzOiSBmvddjf%2FRqNxQmnQsP2QnK%2FKmXh5PCIqMeMo1Q46Z3Bih77no8GODaUGBKXL%2Bjm2QQXzflYwzDOEGnUQJYf4SdJwW%2BlVGPRd83w%2BIia6YZFzGmxAwk9ZICOs0L5poFxQPJ9iv2kWRD%2F7G6xtC5X1fPss26%2FoT8YPiGyHP1zLSSzTBE1s%2BAbEaYbnJoxEYT4QS4vbPp00PEmBfSptt%2F8Uj0DHJBh5iH2b4IWgBa0yKlRSVEQQw1LEjRdDWDB18rwh2jueBFY%2F3LrTknqqNp92djO3ipQJY8nnscD77xbGrNnsA1g082ADNPVbnymnROtAhZ4jSuNxsMWd9Yw2arrr5LNxTDl8MfJBjqkAcsWkY6PeJHuef3pgscAPJXRumN7LNHlbCfLM1D%2F%2FyDjIu10KslQi0da32kNUUsxfzuvhTf3mY8%2FtmScjm3Olt4kctPXI0Q%2Baci3pCb3GiHj5vWm61Cu9LcPMrSySeCgaAHC%2B%2FANo6aRNJMte7rq3wkKSbtS6oWACkxPZ3IuzWoSTixX%2FFwrFoE6ECbrcZtbwtO%2BsQZHMTrVmwBYfXtOGpLlwenw&X-Amz-Signature=f5120ba0231e9de90338dcc6e36a26b017482aac8973aeaaf7a628cf9453a6d5&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"29520d45-f5f8-806f-8e5a-e5e00ad6b99c","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","name":"Mistral x Airweave","entity_type":"NotionPageEntity"}],"name":"Mistral x Airweave POC","created_at":"2025-10-23T09:57:00","updated_at":"2025-11-03T18:57:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Mistral x Airweave POC\n**Path**: Page: Mistral → Page: Mistral x Airweave\n\n**Title**: Mistral x Airweave POC\n**Content**: ## Context & Goals\n\n- **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n- **Scope:**\n\n  - Connect and index SharePoint content through Airweave.\n\n  - Serve retrievals, embedding and reranking through Mistral.\n\n  - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n- Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n- Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n1. **Performance:** <2s latency for query-response - p95.\n\n1. **Security:** Only deployed Mistral applications can access Airweave. \n\n1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n- Measure search quality, search and sync latency in an on-prem environment\n\n- Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n- Measure involvement necessary from both parties\n\n  - how many hours of infra rollout hours are necessary?\n\n  - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n- Angles for modularization\n\n  - what must modules be drop-in replaceable?\n\n  - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"d8a02311ea48182a1e4781aafde73158087b934ac8e5f50e707fd09e19e6cc35","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"29520d45-f5f8-806f-8e5a-e5e00ad6b99c","parent_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","parent_type":"page_id","title":"Mistral x Airweave POC","created_time":"2025-10-23T09:57:00","updated_time":"2025-11-03T18:57:00","content":"## Context & Goals\n\n- **Objective:** Validate joint on-prem deployment of Airweave for SharePoint at Acme Corp, integrated with Mistral inference and application stack.\n\n- **Scope:**\n\n  - Connect and index SharePoint content through Airweave.\n\n  - Serve retrievals, embedding and reranking through Mistral.\n\n  - Enforce role-based access control on data.\n\n*Acme Corp is the customer to be discussed after sign the mutual NDA.*\n\n## Functional Requirements\n\n### **Data Layer**\n\nConnect to on-prem Acme Corp’s SharePoint and index documents with access controls mapped onto the data for authorized access, using scheduled and/or webhook integrations. Use Mistral’s on-prem embedding model + OCR model for the vector embeddings.\n\n### **Search Layer**\n\nMistral uses the Airweave API for search and browse queries using the on-prem Airweave deployment. Airweave is not visible to the customer directly, but is instead behind the Mistral application layer. \n\nAirweave uses:\n\n- Mistral LLM/OSS reranker for reranking in search (preference for OSS reranker)\n\n- Mistral LLM for answer completion + agentic search\n\nMistral can use the graph structure of the indexed information called `breadcrumbs` in Airweave to specify certain subtrees in search, e.g. “all files under parent directory ‘sales’”.\n\n### **Deployment**\n\nHelm Chart embedding Airweave as a dependency in Mistral’s on-prem chart, re-using Mistral’s microservices architecture (PostgreSQL, Redis, Temporal) as much as possible.\n\n## Non-Functional Requirements\n\n1. **Sync speed: **<5m latency for updated files and access controls - p95. Permission sync latency < Data sync latency.\n\n1. **Performance:** <2s latency for query-response - p95.\n\n1. **Security:** Only deployed Mistral applications can access Airweave. \n\n1. **Reliability:** Restart-safe Helm deployment; persistent volume for vector DB.\n\n1. **Modularized destinations: **drop-in replaceable search backends \n\n## Customer Engineering Process\n\nForward-deployed joint motion between Mistral and Airweave at Acme Corp.\n\n1. Mistral shares Helm values and service topology; Airweave adapts its chart as a dependency with environment-specific overrides. Shared PostgreSQL, Redis, Vespa, and Temporal services reused where possible. \n\n1. Airweave deploys inside Acme’s cluster via Mistral Helm release, in collaboration with Acme Corp infra team. Secure intra-cluster communication gets validated; persistence configured for vector DB.\n\n1. (until satisfactory) Feedback gathered from deployment, product iteration + custom engineering, refined and delivered in week sub-sprints.\n\n---\n\n## Learning Goals\n\n- Measure search quality, search and sync latency in an on-prem environment\n\n- Validate joint deployment pattern (Helm dependency model); how to most reproducibly integrate Airweave’s stack into Mistral’s larger application stack? \n\n- Measure involvement necessary from both parties\n\n  - how many hours of infra rollout hours are necessary?\n\n  - how much custom work, e.g. connectors, is necessary for a satisfied customer? \n\n- Angles for modularization\n\n  - what must modules be drop-in replaceable?\n\n  - how to best increase deployment feasibility, given constrained microservices architecture (e.g. run search on Postgres instance)","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":{"type":"external","external":{"url":"https://www.notion.so/icons/fog_gray.svg"}},"cover":{"type":"file","file":{"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/fcd7092b-a8be-45a2-8821-456d70287760/download.png?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4666XRN66KJ%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215712Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIF8KXvXm9wHUCmECj1F8lJlNIyrc7PQW3WC8%2FWypSS1VAiEAgnNeI9J7orLvnE87fd6xMDplxv2lv5Z%2FM0lQDtXt4%2Fkq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDIWdvo3U4o0GAs%2B3IircAw5aVqqTyz6QS663ZW7Ap4QoDg1rD8dojqn34%2FbaNgBgO%2BhsmJMIopq5SJHwHOc7d8X2H8k376iDsZqk%2FoLm2CK1Thrh%2BI3%2FvV%2FUtgeVzvbRcQ4eK8pXEpcgO47POv%2FNWh2RehCU%2F8QeU7RwJZ9oLyx%2FwB%2BoT8Ns1AArApWH42XIIwcDXzvjybU8u5IaVNaYyKFlk0S50qpKUnY%2B4%2BU1F1SJYPmRnd5nqg0CEDs3UOeebgr6PMQJP2G%2F2ETdCtn9i%2FPX89S6SUQBjOshVo2m%2FdvcrIPfVJ6eb2HtGfAppGxTmZGloz%2F95nkQOtVAQ5Slp2rOfP9Rd7JPkzjb7u%2B7idc4fFzqbS7Zq%2BkkLacBtQZEuMEs%2F8a9%2F3HENOn9jnULZ5ujM036f67a39uEshd7VqrXMD6nkkWy6lxf80nwBOXvqQ9Lac1ZWtWlck0Ax9YCEglNWbXWc9jkD2difX%2Bro%2Fx2GfcEgMJRJLvUuFC%2BYaSPiHvkZdZ7iu5Ll0GvMPBTbpm45XCh2qs6t5SRYhSMlXWDuq%2FzSC0egtCyQJIoKM9GZEidZP1%2Fh6p%2BVkEA67GfElNyaquFCFSniZkGq1iYR%2BgTWGTP3kOfkpJ5KdX2rbh3RGPiN63WsCbIIThQMODxx8kGOqUBsLdjJJnGxAYuitnVK6Z%2FfQ6iXOPLtUz5SBotWYh3m7TWgwbASu1bDUMxN3vxcAVjze7t%2BnXvO4OjrzZxtCo6adQzrPfkEAUcAPsMacI%2FXVJAunCSxBBjKf3M8FdyZNf0gn5NngOog6PhcFbpkvAv%2BmfVjrQ1tJMkeMvx8POkYbReCBJ47A9KZXLrgV%2FuJV7OVrejft54wG5ROpvGIKRyOFNJaGZM&X-Amz-Signature=5e53b1ef56aade8b4b88fb52e4b043bd414f6b1e3cb36ec7fda6afacb2f7e7a1&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","expiry_time":"2025-12-04T22:57:12.809Z"}},"archived":false,"in_trash":false,"url":"https://www.notion.so/Mistral-x-Airweave-POC-29520d45f5f8806f8e5ae5e00ad6b99c","content_blocks_count":39,"max_depth":1,"web_url":"https://www.notion.so/Mistral-x-Airweave-POC-29520d45f5f8806f8e5ae5e00ad6b99c"}
{"entity_id":"file_2af20d45-f5f8-8014-8456-c58ebdcd656e_8364551869767165506","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"}],"name":"Claims-Based Identity for Windows.pdf","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionFileEntity\n**Name**: Claims-Based Identity for Windows.pdf\n**Path**: Page: Mistral\n\n**File Name**: Claims-Based Identity for Windows.pdf\n**Caption**: \n\n# Content\n\n# 2 DavidChappell \\& Associates \n\n## CLAIMS-BASED IDENTITY FOR WINDOWS\n\nTECHNOLOGIES AND SCENARIOS\n\nDAVID CHAPPELL\nFEBRUARY 2011\n\nUnderstanding Claims-Based Identity ..... 3\nThe Problem: Working with Identity in Applications ..... 3\nThe Solution: Claims-Based Identity ..... 4\nClaims, Tokens, and STSs ..... 4\nIdentity Providers and Identity Libraries ..... 5\nUsing Multiple Identity Providers ..... 7\nFederation Providers ..... 8\nImplementing Claims-Based Identity: Microsoft Technologies ..... 10\nWindows Live ID ..... 11\nActive Directory Federation Services 2.0 ..... 11\nWindows Azure AppFabric Access Control ..... 12\nWindows Identity Foundation ..... 13\nUsing Claims-Based Identity: Scenarios ..... 13\nOn-Premises Scenarios ..... 14\nAccessing an Enterprise Application ..... 14\nAccessing an Enterprise Application via the Internet ..... 15\nProviding Single Sign-On to an Enterprise Application in Another Organization ..... 16\nCloud Scenarios ..... 19\nProviding Single Sign-On to an Enterprise Application in the Cloud ..... 19\nProviding Single Sign-On to a SaaS Application ..... 20\nAllowing Logins with Facebook, Google, and Other Cloud Identity Providers ..... 22\nConclusion ..... 24\nAbout the Author ..... 24\n\n# UNDERSTANDING CLAIMS-BASED IDENTITY \n\nFor people who create applications, working with identity traditionally hasn't been much fun. First, a developer needs to decide which identity technology is right for a particular application. If the application will be accessed in different ways, such as within an organization, across different organizations, and via the public Internet, one identity technology might not be enough-the application might need to support multiple options. The developer also needs to figure out how to find and keep track of identity information for each of the application's users. The application will get some of what it needs directly from those users, but it might also need to look up other information in a directory service or someplace else. IT administrators must also be involved to configure this software correctly. Add the cloud to the mix, and things get even more complicated.\n\nThis is all more complex than it needs to be. Why not create a single interoperable approach to identity that works in pretty much every situation, both on-premises and in the cloud? And rather than making applications hunt for identity information, why not make sure that this single approach lets users supply each application with the identity information it requires?\n\nClaims-based identity achieves these goals. It provides a common way for applications to acquire the identity information they need about users inside their organization, in other organizations, and on the Internet. It also provides a consistent approach for applications running on-premises or in the cloud.\n\nTaking advantage of claims-based identity requires developers to understand how and why to create claims-based applications. It also requires infrastructure software that applications can rely on. This overview describes the basics of claims-based identity, then looks at how a group of Microsoft technologies help make this world a reality. Those technologies are Active Directory Federation Services (AD FS) 2.0, the Windows Azure AppFabric Access Control service (ACS), and Windows Identity Foundation (WIF).\n\n## THE PROBLEM: WORKING WITH IDENTITY IN APPLICATIONS\n\nSometimes, working with identity is simple. Think of a Windows application that doesn't need to know much about its users, for example, and that will be accessed only by people within a single organization. This application can just rely on Windows Integrated Authentication (WIA), which uses Kerberos under the covers. Kerberos is implemented as part of Active Directory Domain Services (AD DS, originally known as just \"Active Directory\"), and it provides a way to authenticate users and convey basic information about them. Or suppose you're creating an application that will be accessed solely by Internet users. Again, the common approach to handling identity is straightforward: just require each user to supply a username and password.\n\nYet the requirements for modern applications are rarely this simple. What if you need more information about each user than is provided by either Kerberos or a simple username and password? Your application will now need to acquire this information from some other source, such as AD DS, or keep track of the information itself. Or suppose the application must be accessed both by employees inside the organization and by customers via the Internet-what now? Should the application support both Kerberos and username/password-based logins? And what about the case where you'd like to let users from a business partner access this application without requiring a separate login? This kind of access can't be accomplished very well with either Kerberos or username/password logins-more is required.\n\nThe right solution is to have one approach to identity that works in all of these scenarios. To be effective, this single approach must be based on widely recognized industry standards that interoperate across both platform and organizational boundaries. But standards alone aren't enough. The solution also needs to be widely implemented in products from multiple vendors and be simple for developers to use. This unified, broadly supported approach is exactly what claims-based identity is meant to provide.\n\n# THE SOLUTION: CLAIMS-BASED IDENTITY \n\nClaims-based identity is a straightforward idea, founded on a small number of concepts: claims, tokens, identity providers, and a few more. This section describes the basics of this technology, starting with a look at these fundamental notions.\n\nBefore launching into this description, however, there's an important point to make. While this paper focuses on the mechanics, using the technology described here can require more, such as business agreements between different organizations. Addressing the technical challenges is essential, but they're not always the whole story.\n\n## Claims, Tokens, and STSs\n\nWhat is an identity? In the real world, the question is hard to answer-the discussion quickly veers into the metaphysical. In the digital world, however, the answer is simple: A digital identity is a set of information about somebody or something. While all kinds of entities can have digital identities, including computers and applications, we're most often concerned with identifying people. Accordingly, this overview will always refer to things with identities as \"users\".\n\nWhen a digital identity is transferred across a network, it's just a bunch of bytes. It's common to refer to a set of bytes containing identity information as a security token or just a token. In a claims-based world, a token contains one or more claims, each of which carries some piece of information about the user it identifies. Figure 1 shows how this looks.\n![img-0.jpeg](img-0.jpeg)\n\nFigure 1: A token contains claims about a user along with a digital signature that can be used to verify its issuer.\n\nClaims can represent pretty much anything about a user. In this example, for instance, the first three claims in the token contain the user's name, an identifier for a role she belongs to, and her age. Other tokens can contain other claims, depending on what's required. A claim might also indicate the user's right to do something, such as access a file, or restrict some right, such as setting an employee's\n\npurchasing limit. And while it's common today to use tokens defined with the XML-based Security Assertion Markup Language (SAML), this isn't required. Web applications might use a simpler approach called Simple Web Token (SWT), for example.\n\nTo verify its source and to guard against unauthorized changes, a token's issuer digitally signs each token when it's created. As Figure 1 shows, the resulting digital signature is carried as part of the token.\n\nBut who issues tokens? In a claims-based world, tokens are created by software known as a security token service (STS). Figure 2 illustrates the process.\n![img-1.jpeg](img-1.jpeg)\n\nFigure 2: A user acquires a token containing some set of claims from an STS.\nIn a typical scenario, an application working on behalf of a user, such as a Web browser or some other client, asks an STS for a token containing claims for this user (step 1). Various protocols can be used to make this request, but however it's done, the STS authenticates the user in some way, such as by validating her Kerberos ticket or checking her password (step 2). This lets the STS be certain that the user is who she claims to be.\n\nThe request sent to an STS typically contains a URI identifying the application this user wishes to access. The STS then looks up information about both the user and the application in a database (step 3). As the figure shows, this database maintains account information and other attributes about users and applications. Once the STS has found what it needs, it generates the token and returns it to the requester (step 4).\n\n# Identity Providers and Identity Libraries \n\nClaims, tokens, and STSs are the foundation of claims-based identity. They're all just means to an end, however. The real goal is to help a user present her digital identity to an application, then let the application use this information to make decisions. Figure 3 shows a simple picture of how this happens.\n\n![img-2.jpeg](img-2.jpeg)\n\nFigure 3: A browser or other client can acquire a token from an STS, then present this token and the claims it contains to an application.\n\nAs the figure shows, a Web browser or other client acting on behalf of a user gets a token for a particular application from an STS (step 1). Once it has this token, the browser or client sends it to the application (step 2), which is configured with a list of one or more trusted STSs. To process the token, the application depends on an identity library, a reusable set of code for working with tokens and the protocols that convey them. This library verifies the token's signature, which lets the application know which STS issued the token, then checks whether this STS is on the trusted list (step 3). If the application does trust the STS that issued this token, it accepts the token's claims as correct and uses them to decide what the user is allowed to do or in other ways (step 4).\n\nIf the token contains the user's role, for example, the application can assume that the user really has the rights and permissions associated with that role. Since the user was required to authenticate herself to get this token, the application doesn't need to authenticate her again. (In fact, because it relies on the claims in the token, an application is sometimes referred to as a relying party.)\n\nNotice an important difference between what's happening here and the way that applications frequently handle identity: Rather than requiring the application itself to authenticate the user, claims-based identity relies on the STS to do this. This gets developers out of the business of authenticating users, something that definitely counts as progress. All an application needs to do is determine that the token a user presents was created by an STS this application trusts. How the user proved its identity to this STS—with a password, a digital signature, or something else-isn't the application's problem. This lets the application be deployed unchanged in different contexts, a significant improvement over the usual situation today.\n\nAlthough it's not shown in the figure, there's an essential first step before any of this can happen: An administrator must configure the STS to issue the right claims for this user and this application. Without this, the STS likely can't create a token containing the claims that the application needs. While doing this might seem like a burden, the reality is that this information must also be configured in the non-claims-\n\nbased world. The big difference is that now the claims are all in one place, accessible through the STS, rather than spread across different systems.\n\nFigure 3 also illustrates another important concept, which is that an STS can be owned by some identity provider (IdP). Sometimes called an issuer, the identity provider is what stands behind the truth of the claims in the tokens this STS creates. In fact, this is why the contents of a token are called \"claims\": They're statements that this identity provider claims are true. An application that receives this token can decide whether it trusts this identity provider and the claims it makes about this user.\n\nIdentity providers come in many forms. If you use a token issued by an STS on your company's network, for example, the identity provider is your company. If you use a token issued by the STS provided by a service on the Internet, such as Windows Live ID, Facebook, or Google, this service is acting as the identity provider. But whoever the identity provider is, being able to acquire and use a token containing claims is useful.\n\nTo see why, think about the pre-claims world we (mostly) live in today. In this environment, an application typically gets only simple identity information from a user, such as her login name. All of the other information it needs about that user must be acquired from somewhere else. The application might need to access a local directory service, for instance, or maintain its own application-specific database. With claims-based identity, however, an application can specify exactly what claims it needs and which identity providers it trusts, then expect each user to present those claims in a token issued by one of those providers. A claims-aware application is still free to create its own user database, of course, but the need to do this shrinks. Instead, each request can potentially contain everything the application needs to know about this user.\n\n# Using Multiple Identity Providers \n\nIn many cases, a user has only one identity provider-and thus one STS-to choose. When you access an application inside your organization, for example, the application might only accept tokens issued by your company's STS. In some situations, though, an application might accept tokens issued by multiple identity providers-it might trust several different STSs.\n\nFor example, think about an application on the public Internet that wishes to let its users log in using a Facebook identity, a Google identity, or a Windows Live ID identity. Since hundreds of millions of people have accounts with these services, why not accept them? Or suppose the application wishes to accept identities directly from multiple instances of Active Directory-what then? Both of these situations require the application to trust multiple STSs at multiple identity providers, then to let the user choose which one he wants to use. Figure 4 shows how this looks.\n\n![img-3.jpeg](img-3.jpeg)\n\nFigure 4: If an application accepts identities from multiple identity providers, the user can select which one to use.\n\nIn this situation, the user accesses the application and learns which STSs it trusts (step 1). For example, the application might provide a login screen that lets the user choose to use his Facebook identity, his Google identity, or his Windows Live ID identity. The user then chooses one, and his browser or other client software contacts that identity provider. This provider's STS authenticates the user, perhaps by requiring him to enter a username and password, then returns a token for this identity (step 3). As before, this token is then sent to the application (step 4), which validates it as usual and uses the claims it contains (step 4).\n\nFor some applications, accepting tokens from multiple identity providers, especially public providers, makes no sense. Letting employees use their Facebook identity to log into a critical business application inside your company probably isn't a good idea. But there are plenty of situations where this can be useful. Think of an enterprise application that must be accessible to employees, partners, and customers, for example, or a consumer application on the public Internet that wishes to make login as painless as possible. Addressing this requirement is an important part of modern identity technology.\n\n# Federation Providers \n\nIn a claims-based world, a user always initially gets her identity from an STS owned by some identity provider. But suppose the application she wants to access doesn't trust this STS-what then? One possibility is that there's just no way for her to access this application. There's also another option, however: even though the application she wants to access doesn't trust her STS, it might trust another STS that in turn trusts her STS. This approach, called identity federation, is both common and useful. With federation, an identity provider offers an STS as usual, but another STS is also offered by a federation provider (FP). The federation provider STS is then configured by an administrator to trust the identity\n\nprovider STS. Figure 5 shows how a user can provide identity information to an application when federation is used.\n![img-4.jpeg](img-4.jpeg)\n\nFigure 5: An STS can act as a federation provider, accepting one token and producing another.\nAs always, the process begins when the user accesses an application from a browser or another client, learning which STSs that application trusts (step 1). Here, the application trusts only the federation provider STS. The user's browser or client software then contacts that federation provider, learning which STSs it trusts (step 2). In this example, the federation provider STS is configured to trust the identity provider's STS, and so the user's browser or client software contacts this STS. As usual, the user is authenticated in some way, then gets back an IdP token created by this STS (step 3).\n\nThis token can't be used to access the application, however, since that application doesn't trust the STS that issued it. Fortunately, this token can be used to acquire a token that the application will accept. To do this, the browser or client software sends the IdP token to the federation provider (step 4). The federation provider validates this token, ensuring that it came from an STS it trusts. Once it determines this, it creates a new token for this user (step 5), then returns this FP token (step 6). The user's software submits this token to the application (step 7), which verifies that the FP token was issued by an STS that it trusts. The application then uses the claims in the token as usual (step 8).\n\nFrom the user's point of view, all of these exchanges are invisible. She accesses the application without explicitly logging into it, that is, she gets what's known as single sign-on. The mechanics are a little more complex, but the core idea underlying identity federation is straightforward. It is that not only applications can trust STSs; one STS can trust another STS as well.\n\nStep 5 in the figure is worth examining in more detail. As just described, the federation provider receives a token issued by another STS, then generates a new token for the user. But exactly what claims does this\n\nnew token contain? The answer depends on what the federation provider's STS is configured to do. In the simplest case, it might copy every claim from the IdP token directly into the FP token unchanged. In a more realistic scenario, the federation provider STS performs claims transformation, emitting a token that doesn't contain the exact set of claims that it received from the identity provider.\n\nFor example, suppose the IdP token contains a claim indicating that this user is a member of the role \"Administrator\", expressing that claim as a character string containing this English word. It's possible that the application understands the administrator role, but expects the claim to be expressed as a numeric code or in Chinese or in some other way. The federation provider can perform this translation, inserting a claim in the correct format in the FP token it generates.\n\nClaims transformation can do other things as well. When it creates the FP token, for example, the federation provider might omit claims from the IdP token that aren't meaningful to this application. Or it might add claims to the FP token that aren't present in the IdP token, such as an indication of the IdP that issued the original token. Claims transformation is a powerful idea, and it can be used in a variety of ways.\n\n# IMPLEMENTING CLAIMS-BASED IDENTITY: MICROSOFT TECHNOLOGIES \n\nImplementing claims-based identity requires several things. Identity provider STSs must be available to issue tokens to users. Because identity federation is common, federation provider STSs are also essential. And finally, developers will need to build claims-aware applications that know how to receive tokens and use the claims they contain. Rather than having every developer write this code from scratch, it makes sense to provide a standard identity library that any application can use.\n\nThe rise of cloud computing adds another requirement. All three of these things-an identity provider STS, a federation provider STS, and an identity library-should be available both on premises (e.g., running in an organization's data center) and in the cloud. Without this, some important scenarios are hard to address.\n\nThe Microsoft platform for claims-based identity targets all of these options. Figure 6 summarizes the technologies it includes today.\n![img-5.jpeg](img-5.jpeg)\n\nFigure 6: Microsoft provides cloud and on-premises technologies for an identity provider STS, a federation provider STS, and an identity library.\n\nIn the cloud, Microsoft provides Windows Live ID as an identity provider STS, while Windows Azure AppFabric Access Control provides a federation provider STS. For an identity library, applications can use Windows Identity Foundation (WIF, commonly pronounced \"Dub-I-F\").\n\nFor on-premises use, Microsoft makes available Active Directory Federation Services (AD FS) 2.0. As Figure 6 shows, this technology can be used as both an identity provider STS and a federation provider STS. And for an identity library, applications once again can use Windows Identity Foundation.\n\nIt's important to note that while this overview focuses on Microsoft technologies, claims-based identity is a multi-vendor effort. Given this, there are alternative technologies from other vendors for all of the boxes in this figure. And because interactions among the parties are based on industry standards, the offerings from Microsoft and other vendors can be combined in various ways. For example, using the Microsoft identity platform doesn't require relying on Windows Live ID for a cloud identity provider STSother providers, such as those from Google and Facebook, can also be used. Similarly, AD FS 2.0 isn't the only option for on-premises STSs; WIF can work with tokens created by products from IBM and other vendors.\n\nThe focus here is on the Microsoft technologies, however, and the best way to understand how they fit together is to walk through scenarios showing how they're used. Before doing this, we first need to look at the basics of each one.\n\n# WINDOWS LIVE ID \n\nWindows Live ID implements an identity provider STS in the cloud. Today, the most popular applications that accept tokens issued by this STS are Microsoft offerings such as Hotmail. Any application can choose to accept these tokens, however-it's not usable only by Microsoft itself.\n\nThe token provided by Windows Live ID contains a very simple set of claims, primarily just a globally unique identifier. The structure of this identifier is opaque, which means that an application can't derive any meaning from the identifier's content or structure. An application can use this value to recognize individual users, however. For example, a Web site that accepts Windows Live ID logins might ask each user for information such as his name and shipping address, then store this data along with the user's Windows Live ID identifier. The next time the user logs in, the application can use this identifier to look up his information.\n\n## ACTIVE DIRECTORY FEDERATION SERVICES 2.0\n\nHaving an identity provider STS in the cloud is useful. But for enterprises, having one on-premises is much more important. Business applications inside your organization probably don't let employees log in with a Windows Live ID, a Facebook identity, or any other token issued by an identity provider STS in the cloud. Instead, they require a token issued by an STS that they control.\n\nActive Directory Federation Services 2.0 can fill this role. As its name suggests, AD FS 2.0 is the follow-on to the original Active Directory Federation Services technology. Don't be misled by the word \"federation\" in the technology's name, however. In fact, AD FS 2.0 can act as either an identity provider STS or a federation provider STS. The same AD FS 2.0 instance can even act in both roles simultaneously. And since it's part of Active Directory, AD FS 2.0 is available to current users at no extra cost. This makes claims-\n\nbased identity immediately accessible to the large number of organizations that use Active Directory today.\n\nAD FS 2.0 contains several advances over its predecessor. It supports both browsers and other clients, for example, such as those built using Windows Communication Foundation (WCF) ${ }^{1}$. Also unlike the first AD FS release, AD FS 2.0 supports the SAML 2.0 protocol as well as WS-Federation and WS-Trust, letting it work in a broader range of environments.\n\nThe AD FS 2.0 STS can be used entirely inside an organization, exposed on the Internet, or both. The claims it supplies can come from Active Directory Domain Services, of course, but this isn't the only choice. AD FS 2.0 also supports using SQL Server as an attribute store, that is, a source for claims, and developers are free to create custom attribute stores as well. To help manage an organization's attribute stores, including Active Directory and others, Microsoft provides Forefront Identity Manager (FIM). This technology offers a way to synchronize information across different attribute stores, along with an identity management portal with pre-defined workflows for password resets, group management, and more.\n\nYet it's worth reiterating that claims-based identity doesn't require using AD FS 2.0. Any STS from any vendor (or even a custom-built STS) that supports standard protocols and token formats can be used. Still, one of Microsoft's primary goals in providing AD FS 2.0 is to make widely available a fully-featured STS built on Active Directory. Ubiquitous STSs are fundamental to making the benefits of claims-based identity real.\n\n# WINDOWS AZURE APPFABRIC ACCESS CONTROL \n\nIdentity federation is useful in many situations. For applications running on premises, such as a business application within an enterprise, using a federation provider STS that's also on premises is often the right choice. But for an application running in the cloud, using a federation provider STS that runs in the cloud is likely to be better. The Windows Azure AppFabric Access Control service fills that role.\n\nACS is most commonly applied today in two scenarios:\n\nLetting an application running in the cloud accept tokens issued by multiple on-premises identity provider STSs, such as AD FS 2.0. This can give on-premises users in various organizations single signon to the cloud application. This is especially useful for independent software vendors (ISVs) who wish to allow easy access to a Software as a Service (SaaS) application by customers in many different enterprises.\n\nLetting an application running in the cloud accept identities issued by multiple cloud identity provider STSs. ACS has built-in support for handling the protocols and token formats used by Windows Live ID, Google, Facebook, Yahoo, and OpenID. An application that trusts the ACS federation provider STS can choose to accept identities from any of these identity providers while still being shielded from the idiosyncratic details of each one.\n\n[^0]\n[^0]:    ${ }^{1}$ In the jargon of identity, AD FS 2.0 supports both active and passive clients, while the first release of AD FS supported only passive clients.\n\nACS also provides another important function: built-in support for claims transformation. As described earlier, a federation provider STS commonly emits a token whose claims differ from the IdP token it received. To help do this more intelligently, ACS includes a rules engine for defining these transformations.\n\nACS lets clients request tokens using various protocols, including WS-Federation, WS-Trust, OpenID 2.0, and OAuth 2.0. It can accept and issue tokens in various formats as well, including SAML 1.1, SAML 2.0, and Simple Web Token (SWT). The technology also allows delegated authorization using OAuth 2.0, which provides a controlled way for an application to act on behalf of a user.\n\n# WINDOWS IDENTITY FOUNDATION \n\nWhether it's offered by an identity provider or a federation provider, an STS creates tokens containing claims. Yet those tokens are useless unless applications are able to accept and use them. The goal of WIF is to make this easier by helping developers create claims-aware Windows applications.\n\nWIF is a set of .NET Framework classes that implement essential identity functions, such as receiving a token, verifying its signature, and accessing the claims it contains. It supports tokens created using either the SAML 1.1 or SAML 2.0 formats, so it can accept tokens issued by AD FS 2.0, ACS, or STSs from other vendors. WIF supports various standard protocols as well, including WS-Federation and WS-Trust, and it's extensible, allowing other technologies to be added. For example, Microsoft provides a sample WIF extension that implements the OAuth 2.0 protocol with SWT tokens.\n\nEach claim is extracted into an instance of a WIF-defined Claim class, providing a consistent way for developers to work with a token's information. This class's properties include things such as:\n\nClaimType, indicating what kind of claim this is. Does the claim contain a user's name, for example, or a role, or something else? Claim types are identified by strings, which are just URIs.\n\nValue, containing the actual content of the claim, such as the user's name.\n$\\square$ Issuer, which specifies the identity provider STS this claim came from. In other words, this is the entity asserting that this claim is true.\n\nMicrosoft itself is using WIF to add support for claims-based identity to its own products, including SharePoint 2010 and others.\n\nAlong with helping developers create claims-aware applications, WIF also provides support for creating a custom STS. Even though a primary goal of AD FS 2.0 is to reduce the need to hand roll your own STS, there are situations where building an STS can make sense. One important example of using WIF in this way already exists: AD FS 2.0 itself is built on WIF.\n\n## USING CLAIMS-BASED IDENTITY: SCENARIOS\n\nGetting your mind around claims-based identity requires understanding the basics of this technology. Still, the best way to get a feel for the approach is to walk through examples of how it's applied. Accordingly, this section looks at a number of different ways that claims can be used both on premises and in the cloud, each illustrated using the Microsoft technologies just described.\n\nClaims-based identity was first used to address problems within and between enterprises. This is still where the technology is most widely used today, and so it makes sense to look at on-premises scenarios first. This section walks through three examples:\n\nAccessing an enterprise application, where the application, the identity provider STS, and all of the users are within the same organization.\n\nAccessing an enterprise application via the Internet, which extends the first scenario to include remote Internet access by users outside the organization.\n\nUsing identity federation between enterprises, where a user in one organization accesses an application in another organization.\n\n# Accessing an Enterprise Application \n\nMost enterprises act as an identity provider today, and nearly every enterprise application must deal with identity. AD FS 2.0 and WIF can provide the foundation for using claims-based identity with on-premises applications, those running inside an organization. Figure 7 shows how this looks.\n![img-6.jpeg](img-6.jpeg)\n\nFigure 7: An enterprise can use AD FS 2.0 and WIF to support claims-based identity for its internal applications.\n\nIn this example, a user logs in using AD DS, getting an initial Kerberos ticket (step 1). The user then accesses a claims-aware application built using WIF, learning which STSs it trusts (step 2). This application only trusts the STS within its own enterprise, and so the user's browser or client requests a token from\n\nthat STS, supplying a Kerberos ticket to authenticate the user (step 3). AD FS 2.0, acting as an identity provider STS, verifies the ticket, then looks in AD DS for the information it needs to create the requested token (step 4). Exactly what claims appear in this token depends on both the user requesting it and the application that user is accessing - each application can indicate which claims it needs. Once the token has been created, the AD FS 2.0 STS sends it back to the user's browser or client (step 5), which sends it on to the application (step 6). The application then uses WIF to verify the token's signature and make its claims available for use (step 7).\n\nOne big plus of a claims-based approach is worth re-emphasizing here: Rather than having to go look for the information it needs about a user, the application can instead get everything handed to it in the token. If the application needs, say, the user's job title, it can specify this in its list of required claims. When the STS creates a token for the application, it finds the user's job title in AD DS and inserts it as a claim that the application can use. Without this, the application developer must write his own code to dig this information out of AD DS. Claims-based identity makes the developer's life significantly easier.\n\n# Accessing an Enterprise Application via the Internet \n\nSuppose this organization wishes to make this on-premises application accessible to remote employees via the Internet. Rather than modifying the application to accept username/password logins, a traditional solution, the same claims-based approach can be used-the application remains unchanged. Figure 8 shows how this looks.\n![img-7.jpeg](img-7.jpeg)\n\nFigure 8: An enterprise can use the AD FS 2.0 STS to create tokens for users on the Internet.\n\nHere, the user is on another computer outside the enterprise. As before, she accesses the application and learns which STSs it trusts (step 1). Once again, the application trusts only the STS in its own enterprise, and so the user's browser or client requests a token from that STS. Implemented using AD FS 2.0, that STS authenticates the user and sends back the token ${ }^{2}$ (step 2). The user's browser or client then submits this token to the application (step 3). The application relies on WIF to verify the token, then uses the claims it contains (step 4).\n\nRather than requiring the application to implement a different way of handling identity for Internet access, a claims-based approach lets it handle this situation just like the inside-the-enterprise case. Still, some extra complexity creeps in. When the user requests a token in step 2, for example, how does she authenticate herself to the STS? Kerberos tickets work just fine for users inside the enterprise, as shown earlier in Figure 7, but they don't work as well for Internet users. Instead, the user might provide a username and password in step 2 to authenticate her request, an option that Microsoft supports in AD FS 2.0. Since the users in this scenario are employees, they already have accounts in AD DS, and so they can log in with no trouble.\n\nBut what if the users aren't employees? Suppose the application needs to be exposed via the Internet to customers as well. Can this approach still work? The answer, unsurprisingly, is yes. Although it's not an especially common option, information about external users can also be stored in AD DS, letting it be accessed by AD FS 2.0.\n\nBut wait a minute: If Internet users still need usernames and passwords, how is the claims-based approach making things better? One important improvement is that it frees each application from the need to store sensitive password information, moving that responsibility instead to the much smaller number of STSs. Also, users no longer have a password for each application. Instead, they'll (at most) have one for each STS they use. While claims-based identity doesn't eliminate the need for usernames and passwords, it does help make the world simpler and more secure.\n\n# Providing Single Sign-On to an Enterprise Application in Another Organization \n\nAnother common identity challenge is letting users in one organization access an application running in some other organization. For example, suppose your company wishes to make an internal SharePoint site accessible to employees at a partner firm. One way to do this is to give each of these external users their own account in your company. While this approach works, it's unappealing. Those users won't like having a separate login, and your firm's administrators won't like having to administer accounts for people outside your company. Doing this also creates security risks-how can your administrators know when an external user has left his company and so should no longer have an account?\n\nA better solution is to let the external users access your application using their own identities. This approach requires no separate logins and no new accounts. What it does require, however, is creating a relationship between your firm and its partner. Doing this will likely require some kind of business\n\n[^0]\n[^0]:    ${ }^{2}$ To avoid opening the enterprise's firewall, it's possible to run an instance of AD FS 2.0 in a proxy role inside this organization's DMZ. This proxy then forwards requests to the full AD FS 2.0 service running inside the firewall.\n\nagreement between the two organizations, a topic that's beyond the scope of this discussion. It also, of course, requires putting in place the right technology.\n\nOne approach is to configure an application running in one organization to trust the identity provider STS in another. Figure 9 shows how this looks.\n![img-8.jpeg](img-8.jpeg)\n\nFigure 9: If the application trusts the STS in the client's enterprise, it can accept and use a token issued by that STS.\n\nIn this scenario, a user in enterprise $X$ accesses an application in enterprise $Y$ and learns which STSs it trusts (step 1). Here, that application is configured to trust both its own STS (the one in enterprise $Y$ ) and the identity provider STS in enterprise $X$. All that's required is for the user in enterprise $X$ to get a token from its own STS (step 2), then submit this token to the application (step 3). The application uses WIF to verify the token and extract its claims, then uses those claims in any way it likes (step 4).\n\nThis solution is simple to understand, but it's not without problems. Suppose this application has users in several different enterprises, for instance. With the approach shown here, the application would need to be configured to trust the identity provider STS in each one, an unappealing prospect. A better solution is to use federated identity, introducing a federation provider STS into the mix. Doing this means that the application only needs to trust its own STS, making life significantly simpler for the people who build and administer this application. Figure 10 shows this more likely situation.\n\n![img-9.jpeg](img-9.jpeg)\n\nFigure 10: If the application trusts only the STS in its own enterprise, the client must get a token from that STS to access the application.\n\nThis scenario starts in the same way: The user in enterprise $X$ accesses an application in enterprise $Y$ and learns which STSs it trusts (step 1). This time, however, that application is configured to trust only its own STS, the one in enterprise $Y$. Once it determines this, the browser or client on the user's system contacts the STS in enterprise $Y$ to learn which STSs it trusts (step 2). Here, that STS is acting in the role of federation provider, and so it's configured to trust the STS in enterprise X. Accordingly, the user's client or browser requests a token from the enterprise $X$ STS (step 3), which is acting in the role of identity provider.\n\nThe application won't accept this IdP token, however-it was issued by an STS that the application doesn't trust. Instead, the user's browser or client submits the IdP token to the federation provider STS in enterprise $Y$ (step 4). Because this STS is configured to trust the STS in enterprise $X$, the enterprise $Y$ STS can verify the token it receives from enterprise $X$, then issue an FP token that allows this user to access the application (step 5). The user presents this token to the application (step 6), and the application uses WIF to verify the token and extract its claims. The application can now use these claims as usual (step 7).\n\nNotice that the federation provider STS in enterprise $Y$ is acting as a claims transformer, accepting a token issued by STS $X$, then creating its own token. The contents of the token STS $Y$ creates might well be different from those in the token it receives from STS X-it's free to add, remove, or modify the claims. In fact, AD FS 2.0 provides a fairly sophisticated way for an administrator to define rules for these transformations. It's even possible to prohibit issuing tokens entirely when necessary.\n\nNotice also how convenient it is for the application to get the information it needs about a user directly in the token. When both user and application are in the same organization, the application might be able to access, say, AD DS directly to get information such as the user's job title. When they're in different organizations, as in the scenario shown here, the application almost certainly won't be allowed to do this. Getting everything it needs handed to it in the user's token is very nice indeed.\n\nOne final issue worth discussing is this: In step 2 above, the federation provider STS directs the user's browser or client to an identity provider STS. But if the federation provider STS trusts multiple identity providers, as it probably does, how does it know which one it should send this user to? This problem is known as home realm discovery, and there are several possible solutions. One option, which AD FS 2.0 supports, is to present the user with a list of possibilities, letting her choose the one she recognizes as her own organization. Another option is to have the user provide her email address, then let the federation provider STS infer her identity provider from the address's domain name. However it's done, using identity federation typically requires solving this problem in some way.\n\n# CLOUD SCENARIOS \n\nOn-premises scenarios are important, but more and more applications run in the cloud. Using claimsbased identity can simplify life for developers and users here, too. Once again, it's useful to look at several possibilities:\n\nAccessing a cloud-based application, where the user and the identity provider STS are inside an enterprise, but the application is running in the cloud.\n\nUsing cloud-based identity federation, which extends the first scenario by adding a federation provider STS that runs in the cloud.\n\nUsing multiple identity providers with cloud-based federation, where an application running in the cloud uses a cloud-based federation provider STS to accept identities issued by multiple identity provider STSs.\n\n## Providing Single Sign-On to an Enterprise Application in the Cloud\n\nSuppose a developer wants to build an application on a cloud platform, such as Windows Azure or Amazon Web Services, then make it available to users in her enterprise. Or suppose an enterprise decides to move an existing on-premises application to a cloud platform. How can users in the enterprise access this application without having a separate login with its own username and password?\n\nOne approach is to configure the application to trust the enterprise's identity provider STS. Figure 11 shows how this might look.\n\n![img-10.jpeg](img-10.jpeg)\n\nFigure 11: An enterprise can use AD FS 2.0 and WIF to provide single sign-on to an application running in the cloud.\n\nThis scenario isn't really new; in fact, it's very similar to the first scenario shown back in Figure 7. As in that example, the user accesses the application and learns which STS it trusts (step 1), then gets a token from that STS (step 2). Although it's not shown in the figure, the user probably authenticates himself to the STS using a Kerberos ticket, just as in Figure 7. Once the user has a token from this identity provider STS, his browser or client submits it to the application (step 3). The application uses WIF to validate and process the token, then uses the claims as usual (step 4).\n\nFrom the user's point of view, this looks just like accessing an on-premises application. And since the application is configured to trust the identity provider STS in enterprise $X$, there's no need for identity federation. This simple scenario can work well for cloud applications used by a single enterprise.\n\n# Providing Single Sign-On to a SaaS Application \n\nIn the identity federation scenario shown earlier in Figure 10, the federation provider STS ran inside the same organization as the application being accessed. This isn't required, however. As long as the application trusts the federation provider STS, that STS can run anywhere-even in the cloud.\n\nWindows Azure AppFabric Access Control is exactly that: a federation provider STS that runs in the cloud. While it can be used by applications running either on-premises or in the cloud, the most interesting ACS\n\nscenarios today are for cloud-based applications. For example, suppose a SaaS application wishes to provide single sign-on to users in many organizations, each with its own identity provider STS. While it would be possible to configure the application to trust the STS in each organization, doing this is problematic. A better solution is to use ACS. Figure 12 shows how the interaction works with one of those organizations.\n![img-11.jpeg](img-11.jpeg)\n\nFigure 12: A cloud application can use the Access Control service as a federation provider STS, making it easier to offer single sign-on to users in multiple enterprises.\n\nAlthough the figure looks a bit different, this is really just another example of federation like those shown earlier. Here's what happens, step by step:\n\nAs before, the user accesses the application and learns that it trusts only the federation provider STS provided by ACS (step 1).\n\nThe user's browser or client contacts that STS to learn which STSs it trusts, a list that includes the STS in enterprise $X$ (step 2).\n\nThe browser or client gets a token from this identity provider STS, implemented here with AD FS 2.0 (step 3).\n\nThe browser or client sends the token to the ACS STS (step 4).\nThe ACS STS validates this IdP token, then creates an FP token using the ACS rules engine (step 5). This new token may well contain some claims that are different from those in the original AD FS token; as usual, the federation provider STS can perform claims transformation.\n\nThe token created by ACS is then returned to the browser or client (step 6).\n\nThe browser or client sends the token to the application (step 7).\n\n- The application uses WIF to validate the FP token, then uses the claims it contains (step 8).\n\nNotice how using ACS as a federation provider STS simplifies life for the cloud application. Rather than trusting the identity provider STS in each of its customers, it can instead trust only the ACS STS. Because ACS is explicitly designed to handle this kind of federation scenario, configuring it to trust various identity provider STSs is straightforward. Using this cloud-based federation provider STS also lets the application rely on the rules engine ACS provides, giving it one place to define any necessary claims transformations. Rather than dealing with diverse tokens issued by diverse identity provider STSs, the application always gets a token in the same format containing an expected set of claims.\n\n# Allowing Logins with Facebook, Google, and Other Cloud Identity Providers \n\nIn the example just described, the identity provider STSs were assumed to be inside enterprises, and so they were provided by technologies such as AD FS 2.0. For a SaaS vendor providing a multi-tenant business application, this is a common situation. But think about a cloud application that's used mostly by consumers rather than business users. Consumers don't get their identities from AD FS 2.0-pretty much nobody runs Active Directory in their home. Instead, people rely on cloud identity providers such as Google, Facebook, Windows Live ID, and Yahoo.\n\nAccepting these identities can make life simpler for a cloud application's users. For the creators of the application, however, doing this introduces some complexities. Because these identity providers use different protocols and token formats-they don't all conform to a single standard-implementing support for them is non-trivial. And without a federation provider STS, the cloud application must be configured to trust all of them.\n\nThe Access Control service addresses both problems. It's designed to maintain trust relationships with multiple identity providers, as already described, and it also has built-in support for the protocols and token formats used by today's most popular cloud identity providers. Because of this, using ACS can make it simpler for cloud applications to accept diverse identities. Figure 13 shows how this looks.\n\n![img-12.jpeg](img-12.jpeg)\n\nFigure 13: The Access Control service makes it easier for an application to accept identities from multiple cloud identity providers.\n\nOnce again, this is really just a federation scenario like those already described, and so it starts with the user accessing the application and learning which STSs it trusts (step 1). Here, the only directly trusted STS is provided by ACS, as the figure shows. But suppose this application will actually accept identities from, say, Google and Facebook-how does it convey this to the user? One popular option is to display icons on the login page presented to the user for each identity provider that this application trusts, then let the user select the one it wishes to use, which is what's done here (step 2). Once this choice has been made, the user's browser contacts the chosen identity provider STS. This STS authenticates the user, probably by making him enter a username and password, then returns a token for this identity (step 3).\n\nThe application doesn't directly trust the identity provider STS, however, so the user's browser must send this newly received IdP token to ACS (step 4). An administrator has configured the ACS STS to indicate that this application trusts both Google and Facebook, and so once it has verified that the incoming token is from one of these identity providers, the ACS STS creates a new token (step 5). This FP token is returned to the user's browser (step 6), then forwarded to the application (step 7). As usual, the application relies on WIF to validate the FP token, then uses the claims it contains (step 8).\n\nAs the figure shows, ACS has built-in support for Windows Live ID, Google, Facebook, Yahoo, and any identity provider that uses OpenID 2.0. As the figure also shows, however, this scenario only supports Web browsers-these cloud identity providers don't currently allow any other option. Another challenge with cloud identity providers is that they typically provide only very simple claims. Recall, for instance, that Windows Live ID sends just an opaque unique identifier. An application is free to request other information from the user, of course, then store that information itself, but ACS doesn't provide a service to do this.\n\n# CONCLUSION \n\nWithout claims-based identity, application developers are faced with a diverse set of scenarios, each with its own identity solution. Using claims-based identity collapses all of these down to just one problem: How does an application get information about a user from a trusted source? As this overview has shown, claims-based identity provides a consistent answer across a wide range of scenarios, both on premises and in the cloud. And even though the technologies described in this overview are from Microsoft, there are no proprietary links between them; all communication is based on industry standards.\n\nChanging how people and applications work with identity is not a small thing. The whole world needn't change at once, however. Claims-based applications can be built and deployed alongside existing applications, which makes migration to this much-improved approach simpler. And with the advent of AD FS 2.0, Windows Azure AppFabric Access Control, and Windows Identity Foundation, all of the pieces required to use claims-based identity on Windows are here.\n\nClaims-based identity is far from a Microsoft-only initiative-many vendors are involved. Still, making these components widely available for Windows is bound to make the approach more popular. For anyone who cares about improving the way we use identity in the digital world, this is certainly a step forward.\n\n## ABOUT THE AUTHOR\n\nDavid Chappell is Principal of Chappell \\& Associates (www.davidchappell.com) in San Francisco, California. Through his speaking, writing, and consulting, he helps people around the world understand, use, and make better decisions about new technology.","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionFileEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"20338678b7d23ef32434435e38c63d95eae79f46f6e6b3d6e6cf2f51666fad7c","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XYFBLEU4%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215709Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIE%2BeEWxXi8qa9fDFTnf40AmZHVRueP%2BN%2Fqep785JLNxVAiEA0uz%2F3YLXhRWNOolaaxSIJABWqo3Yw9f9i3mq833YPhYq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDJydGVUgCd8iUuMroircA3FuRmmnQKBn6qfldyLjH4BNFMK8joXuXECr25GAAUKnFYx0LmrnR%2FH%2BGu%2FBRHDZUEwJBYdHAhBXmyijNKsI4zgbJg%2BsYNnc6LT6MhuXddJFLd6P7UEY2gI3JvYaajkrsPAnX9kIlEdBKqHq%2BxgIt%2BwDnbr9D9FDGaGNsqOeHgPIjHBEwfaSwnIjlBDo%2Bsyq89Ty2Wr1jnzVHeOQdyvPygcRwCX9kg94mY2mnVV3nQvaRaMt9DwnyUAUAJN6HDiRPK1ca9Ne8wD6Z99XUCIUMFftTZuqCUU5EmcZlARxZ5U8v5PK2Z5Lqwf1MLLjLYl59402%2B9KijLP3fbAgI0z7%2F4ki%2FKpVMQx2%2Fj0as2Dq0ODtGb2NdymVP80eSWeQf6DkWPZbZgfRvuR9aqhKh8v8hqKjO2JpsZ8vrFTd2e3Y3IwiVvUxfIzZ6OjZ6HWsnxJePC0sfUK3ELl%2FmZdNqWZB42vwfxNifhoEbjMlw00DN3YO%2F1%2Bq8lS%2FPmxWbGFy2BgVyrlQeLtiAfWUn2%2BHu0XKY63D%2FQMVD%2FQRizcjMR5WNgRWq8jSKTtHCmHyYSXuDk5xBkDet3q7DOWrvRH9j8p9zUzT%2BuQlHohDvJdDfRX8OG2JeB7PueQzW3pKPPUGMMjxx8kGOqUBpbPFNAstGO2J9f5jhPIsvbr2T5ynr%2B0CyXozQGv9erI1ptjRJBrQYZEdIPR72Pawt0VbldQcrHPGbMYn8JcXheFYm%2BvnlV2%2BxMDaDVJW4HO86TVUxe3hPnJExfTufnZiI822mkzLBxIE4TbbRLE%2BHfaFEWSh1MAvMm728dQyAmVVXj1Ocw8%2FVH1OP9WVITd%2FHSlm5KS%2FWYfOAJ7ujiL%2BAETPTAgp&X-Amz-Signature=4c559aee2563985bacb40c3847ad632b9fca31f50c145c0edc7f4f8dd19edbc8&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","size":0,"file_type":"application","mime_type":"application/pdf","local_path":"/tmp/airweave/processing/a5823c12-d69d-4861-806a-33b7ad538996/8ab5e314-e16a-4a3c-ad64-62a4b896938a-Claims-Based Identity for Windows.pdf","file_id":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XYFBLEU4%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215709Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIE%2BeEWxXi8qa9fDFTnf40AmZHVRueP%2BN%2Fqep785JLNxVAiEA0uz%2F3YLXhRWNOolaaxSIJABWqo3Yw9f9i3mq833YPhYq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDJydGVUgCd8iUuMroircA3FuRmmnQKBn6qfldyLjH4BNFMK8joXuXECr25GAAUKnFYx0LmrnR%2FH%2BGu%2FBRHDZUEwJBYdHAhBXmyijNKsI4zgbJg%2BsYNnc6LT6MhuXddJFLd6P7UEY2gI3JvYaajkrsPAnX9kIlEdBKqHq%2BxgIt%2BwDnbr9D9FDGaGNsqOeHgPIjHBEwfaSwnIjlBDo%2Bsyq89Ty2Wr1jnzVHeOQdyvPygcRwCX9kg94mY2mnVV3nQvaRaMt9DwnyUAUAJN6HDiRPK1ca9Ne8wD6Z99XUCIUMFftTZuqCUU5EmcZlARxZ5U8v5PK2Z5Lqwf1MLLjLYl59402%2B9KijLP3fbAgI0z7%2F4ki%2FKpVMQx2%2Fj0as2Dq0ODtGb2NdymVP80eSWeQf6DkWPZbZgfRvuR9aqhKh8v8hqKjO2JpsZ8vrFTd2e3Y3IwiVvUxfIzZ6OjZ6HWsnxJePC0sfUK3ELl%2FmZdNqWZB42vwfxNifhoEbjMlw00DN3YO%2F1%2Bq8lS%2FPmxWbGFy2BgVyrlQeLtiAfWUn2%2BHu0XKY63D%2FQMVD%2FQRizcjMR5WNgRWq8jSKTtHCmHyYSXuDk5xBkDet3q7DOWrvRH9j8p9zUzT%2BuQlHohDvJdDfRX8OG2JeB7PueQzW3pKPPUGMMjxx8kGOqUBpbPFNAstGO2J9f5jhPIsvbr2T5ynr%2B0CyXozQGv9erI1ptjRJBrQYZEdIPR72Pawt0VbldQcrHPGbMYn8JcXheFYm%2BvnlV2%2BxMDaDVJW4HO86TVUxe3hPnJExfTufnZiI822mkzLBxIE4TbbRLE%2BHfaFEWSh1MAvMm728dQyAmVVXj1Ocw8%2FVH1OP9WVITd%2FHSlm5KS%2FWYfOAJ7ujiL%2BAETPTAgp&X-Amz-Signature=4c559aee2563985bacb40c3847ad632b9fca31f50c145c0edc7f4f8dd19edbc8&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","file_name":"Claims-Based Identity for Windows.pdf","expiry_time":"2025-12-04T22:57:09.775000","caption":"","web_url_value":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XYFBLEU4%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215709Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIE%2BeEWxXi8qa9fDFTnf40AmZHVRueP%2BN%2Fqep785JLNxVAiEA0uz%2F3YLXhRWNOolaaxSIJABWqo3Yw9f9i3mq833YPhYq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDJydGVUgCd8iUuMroircA3FuRmmnQKBn6qfldyLjH4BNFMK8joXuXECr25GAAUKnFYx0LmrnR%2FH%2BGu%2FBRHDZUEwJBYdHAhBXmyijNKsI4zgbJg%2BsYNnc6LT6MhuXddJFLd6P7UEY2gI3JvYaajkrsPAnX9kIlEdBKqHq%2BxgIt%2BwDnbr9D9FDGaGNsqOeHgPIjHBEwfaSwnIjlBDo%2Bsyq89Ty2Wr1jnzVHeOQdyvPygcRwCX9kg94mY2mnVV3nQvaRaMt9DwnyUAUAJN6HDiRPK1ca9Ne8wD6Z99XUCIUMFftTZuqCUU5EmcZlARxZ5U8v5PK2Z5Lqwf1MLLjLYl59402%2B9KijLP3fbAgI0z7%2F4ki%2FKpVMQx2%2Fj0as2Dq0ODtGb2NdymVP80eSWeQf6DkWPZbZgfRvuR9aqhKh8v8hqKjO2JpsZ8vrFTd2e3Y3IwiVvUxfIzZ6OjZ6HWsnxJePC0sfUK3ELl%2FmZdNqWZB42vwfxNifhoEbjMlw00DN3YO%2F1%2Bq8lS%2FPmxWbGFy2BgVyrlQeLtiAfWUn2%2BHu0XKY63D%2FQMVD%2FQRizcjMR5WNgRWq8jSKTtHCmHyYSXuDk5xBkDet3q7DOWrvRH9j8p9zUzT%2BuQlHohDvJdDfRX8OG2JeB7PueQzW3pKPPUGMMjxx8kGOqUBpbPFNAstGO2J9f5jhPIsvbr2T5ynr%2B0CyXozQGv9erI1ptjRJBrQYZEdIPR72Pawt0VbldQcrHPGbMYn8JcXheFYm%2BvnlV2%2BxMDaDVJW4HO86TVUxe3hPnJExfTufnZiI822mkzLBxIE4TbbRLE%2BHfaFEWSh1MAvMm728dQyAmVVXj1Ocw8%2FVH1OP9WVITd%2FHSlm5KS%2FWYfOAJ7ujiL%2BAETPTAgp&X-Amz-Signature=4c559aee2563985bacb40c3847ad632b9fca31f50c145c0edc7f4f8dd19edbc8&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject","web_url":"https://prod-files-secure.s3.us-west-2.amazonaws.com/95e03634-f1a9-4ab6-a1da-6b020aef92bc/a97a69c1-08af-4bdc-9bef-89a6c20bb628/Claims-Based_Identity_for_Windows.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XYFBLEU4%2F20251204%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20251204T215709Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEIX%2F%2F%2F%2F%2F%2F%2F%2F%2F%2FwEaCXVzLXdlc3QtMiJHMEUCIE%2BeEWxXi8qa9fDFTnf40AmZHVRueP%2BN%2Fqep785JLNxVAiEA0uz%2F3YLXhRWNOolaaxSIJABWqo3Yw9f9i3mq833YPhYq%2FwMIThAAGgw2Mzc0MjMxODM4MDUiDJydGVUgCd8iUuMroircA3FuRmmnQKBn6qfldyLjH4BNFMK8joXuXECr25GAAUKnFYx0LmrnR%2FH%2BGu%2FBRHDZUEwJBYdHAhBXmyijNKsI4zgbJg%2BsYNnc6LT6MhuXddJFLd6P7UEY2gI3JvYaajkrsPAnX9kIlEdBKqHq%2BxgIt%2BwDnbr9D9FDGaGNsqOeHgPIjHBEwfaSwnIjlBDo%2Bsyq89Ty2Wr1jnzVHeOQdyvPygcRwCX9kg94mY2mnVV3nQvaRaMt9DwnyUAUAJN6HDiRPK1ca9Ne8wD6Z99XUCIUMFftTZuqCUU5EmcZlARxZ5U8v5PK2Z5Lqwf1MLLjLYl59402%2B9KijLP3fbAgI0z7%2F4ki%2FKpVMQx2%2Fj0as2Dq0ODtGb2NdymVP80eSWeQf6DkWPZbZgfRvuR9aqhKh8v8hqKjO2JpsZ8vrFTd2e3Y3IwiVvUxfIzZ6OjZ6HWsnxJePC0sfUK3ELl%2FmZdNqWZB42vwfxNifhoEbjMlw00DN3YO%2F1%2Bq8lS%2FPmxWbGFy2BgVyrlQeLtiAfWUn2%2BHu0XKY63D%2FQMVD%2FQRizcjMR5WNgRWq8jSKTtHCmHyYSXuDk5xBkDet3q7DOWrvRH9j8p9zUzT%2BuQlHohDvJdDfRX8OG2JeB7PueQzW3pKPPUGMMjxx8kGOqUBpbPFNAstGO2J9f5jhPIsvbr2T5ynr%2B0CyXozQGv9erI1ptjRJBrQYZEdIPR72Pawt0VbldQcrHPGbMYn8JcXheFYm%2BvnlV2%2BxMDaDVJW4HO86TVUxe3hPnJExfTufnZiI822mkzLBxIE4TbbRLE%2BHfaFEWSh1MAvMm728dQyAmVVXj1Ocw8%2FVH1OP9WVITd%2FHSlm5KS%2FWYfOAJ7ujiL%2BAETPTAgp&X-Amz-Signature=4c559aee2563985bacb40c3847ad632b9fca31f50c145c0edc7f4f8dd19edbc8&X-Amz-SignedHeaders=host&x-amz-checksum-mode=ENABLED&x-id=GetObject"}
{"entity_id":"2b020d45-f5f8-80bb-939c-f66db23cc099","breadcrumbs":[{"entity_id":"2ac20d45-f5f8-8016-b699-fd0990ca8ab1","name":"Mistral","entity_type":"NotionPageEntity"},{"entity_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","name":"Mistral x Airweave","entity_type":"NotionPageEntity"}],"name":"Solution Architecture","created_at":"2025-11-19T03:48:00","updated_at":"2025-11-20T18:40:00","textual_representation":"# Metadata\n\n**Source**: notion\n**Type**: NotionPageEntity\n**Name**: Solution Architecture\n**Path**: Page: Mistral → Page: Mistral x Airweave\n\n**Title**: Solution Architecture\n**Content**: The system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n- System of record for entities and metadata\n\n- CRUD operations and durability\n\n- Entity hash comparison for idempotent sync\n\n- Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n- Vector database storing embeddings and payloads\n\n- Supports hybrid and semantic search with filters\n\n- Can be replaced by different Vector Database\n\n### 3. Redis\n\n- Pub/Sub for sync and cache invalidation\n\n- Low‑latency caching\n\n- In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n- Public endpoints for UI\n\n- Triggers and schedules syncs\n\n- Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n- TypeScript React application\n\n- Collections and sync schedule management\n\n### 3. Temporal\n\n- Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n- Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n- Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n- Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n- Source permissions are ingested and normalized\n\n- *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n- Build in‑memory transitive permission principals from Postgres\n\n- Load or refresh into Redis for fast evaluation\n**Properties Text**: ","airweave_system_metadata":{"source_name":"notion","entity_type":"NotionPageEntity","sync_id":"ddda81c5-3b74-4603-91e1-fadcebe8fed9","sync_job_id":"a5823c12-d69d-4861-806a-33b7ad538996","hash":"cb12485cc72087cfd7d6bebd4ccbed534f17f9c901ceb1f89e163c595d099db8","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"page_id":"2b020d45-f5f8-80bb-939c-f66db23cc099","parent_id":"27720d45-f5f8-8035-99fc-df7f6a327c8b","parent_type":"page_id","title":"Solution Architecture","created_time":"2025-11-19T03:48:00","updated_time":"2025-11-20T18:40:00","content":"The system synchronizes data from connected sources, enforces access controls, and exposes low‑latency search and retrieval endpoints for Le Chat.\n\n[Image: f85251e5-058b-483f-9b2e-debf4dd99667.png]\n\n[[link]\n\n# Solution Overview\n\nAirweave integrates with Mistral to ingest, secure, and serve enterprise knowledge for agentic workflows. \n\n# Components\n\n## Storage\n\nHigh‑availability data layer backing sync, permissions, and search.\n\n### 1. Postgres\n\n- System of record for entities and metadata\n\n- CRUD operations and durability\n\n- Entity hash comparison for idempotent sync\n\n- Stores raw access tuples for ACLs/RBAC\n\n### 2. Qdrant\n\n- Vector database storing embeddings and payloads\n\n- Supports hybrid and semantic search with filters\n\n- Can be replaced by different Vector Database\n\n### 3. Redis\n\n- Pub/Sub for sync and cache invalidation\n\n- Low‑latency caching\n\n- In‑memory Access Control data structures\n\n## Services\n\nOwning API surfaces, orchestration, and user experience.\n\n### 1. Airweave Backend\n\n- Public endpoints for UI\n\n- Triggers and schedules syncs\n\n- Search and retrieval APIs (permission‑aware) for Le Chat\n\n### 2. Airweave UI\n\n- TypeScript React application\n\n- Collections and sync schedule management\n\n### 3. Temporal\n\n- Orchestrates sync scheduling and workflows\n\n### 4. PgBouncer (optional)\n\n- Connection pooling for Postgres, not necessary\n\n# Processes\n\nCore runtime flows from ingestion to enforcement.\n\n## 1. Data Sync\n\n- Temporal schedules jobs; Sync Worker assigns entity tasks to a pre‑configured worker pool\n\n- Workers upsert entities, compute hashes, and write to Postgres and Qdrant\n\n## 2. Access Sync\n\n- Source permissions are ingested and normalized\n\n- *Access control tuples are persisted in Postgres*\n\n## 3. Access Graph Construction\n\n- Build in‑memory transitive permission principals from Postgres\n\n- Load or refresh into Redis for fast evaluation","properties":{},"properties_text":"","property_entities":[],"files":[],"icon":null,"cover":null,"archived":false,"in_trash":false,"url":"https://www.notion.so/Solution-Architecture-2b020d45f5f880bb939cf66db23cc099","content_blocks_count":45,"max_depth":0,"web_url":"https://www.notion.so/Solution-Architecture-2b020d45f5f880bb939cf66db23cc099"}
{"entity_id":"907754163","breadcrumbs":[],"name":"airweave","created_at":"2024-12-24T10:00:06Z","updated_at":"2025-12-04T21:32:34Z","textual_representation":"# Metadata\n\n**Source**: github\n**Type**: GitHubRepositoryEntity\n**Name**: airweave\n\n**Name**: airweave\n**Full Name**: airweave-ai/airweave\n**Description**: Context retrieval for AI agents across apps and databases\n**Default Branch**: main\n**Language**: Python","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubRepositoryEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"805c9592f2c4715b76484f67b8687cb72f499018cca338e3c97541ad934a774a","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"repo_id":907754163,"full_name":"airweave-ai/airweave","description":"Context retrieval for AI agents across apps and databases","default_branch":"main","language":"Python","fork":false,"size":127095,"stars_count":5315,"watchers_count":5315,"forks_count":639,"open_issues_count":54,"web_url":"https://github.com/airweave-ai/airweave"}
{"entity_id":"airweave-ai/airweave/converters","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"}],"name":"converters","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: github\n**Type**: GitHubDirectoryEntity\n**Name**: converters\n**Path**: HubRepository: airweave\n\n**Name**: converters\n**Path**: converters\n**Repo Name**: airweave\n**Repo Owner**: airweave-ai\n**Branch**: vespa_test","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubDirectoryEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"551684c586c1f571ea4e994fbe62b46eb0870ddb67595158f043b1eecd49222a","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"full_path":"airweave-ai/airweave/converters","path":"converters","repo_name":"airweave","repo_owner":"airweave-ai","branch":"vespa_test","web_url":"https://github.com/airweave-ai/airweave/tree/vespa_test/converters"}
{"entity_id":"airweave-ai/airweave/converters/__init__.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"__init__.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Text converters for converting files and URLs to markdown.\"\"\"\n\nfrom .code_converter import CodeConverter\nfrom .html_converter import HtmlConverter\nfrom .mistral_converter import MistralConverter\nfrom .txt_converter import TxtConverter\nfrom .web_converter import WebConverter\nfrom .xlsx_converter import XlsxConverter\n\n# Singleton instances\nmistral_converter = MistralConverter()\nhtml_converter = HtmlConverter()\nxlsx_converter = XlsxConverter()  # Local openpyxl extraction (not Mistral)\ntxt_converter = TxtConverter()\ncode_converter = CodeConverter()\nweb_converter = WebConverter()  # URL fetching and HTML to markdown\n\n# Aliases for backward compatibility\npdf_converter = mistral_converter  # PDF uses Mistral OCR\ndocx_converter = mistral_converter  # DOCX uses Mistral OCR\npptx_converter = mistral_converter  # PPTX uses Mistral OCR\nimg_converter = mistral_converter  # Images use Mistral OCR\n\n__all__ = [\n    \"mistral_converter\",\n    \"pdf_converter\",\n    \"docx_converter\",\n    \"img_converter\",\n    \"html_converter\",\n    \"pptx_converter\",\n    \"txt_converter\",\n    \"xlsx_converter\",\n    \"code_converter\",\n    \"web_converter\",\n]\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"4cc2f49c42faa234a8ce865c9ffbdfaa63d2aef0ed1269c4e52c8b03645103b4","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/__init__.py","size":1133,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/3d4416a5-bd9b-4370-9caf-7483766c2961-converters__init__.py","repo_name":"airweave","path_in_repo":"converters/__init__.py","repo_owner":"airweave-ai","language":"Python","commit_id":"054660b2baa72a5181762056ba2941d4c6f2f1c7","full_path":"airweave-ai/airweave/converters/__init__.py","branch":"vespa_test","sha":"054660b2baa72a5181762056ba2941d4c6f2f1c7","line_count":36,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/__init__.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/__init__.py"}
{"entity_id":"airweave-ai/airweave/converters/__pycache__","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"__pycache__","created_at":null,"updated_at":null,"textual_representation":"# Metadata\n\n**Source**: github\n**Type**: GitHubDirectoryEntity\n**Name**: __pycache__\n**Path**: HubRepository: airweave → HubDirectory: converters\n\n**Name**: __pycache__\n**Path**: converters/__pycache__\n**Repo Name**: airweave\n**Repo Owner**: airweave-ai\n**Branch**: vespa_test","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubDirectoryEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"8fbf1db85409e2f35018afeedf8c772e90c3ac712ec7c251c9a50e4eadc606a0","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"full_path":"airweave-ai/airweave/converters/__pycache__","path":"converters/__pycache__","repo_name":"airweave","repo_owner":"airweave-ai","branch":"vespa_test","web_url":"https://github.com/airweave-ai/airweave/tree/vespa_test/converters/__pycache__"}
{"entity_id":"airweave-ai/airweave/converters/_base.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"_base.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Base converter interface for text converters.\"\"\"\n\nfrom abc import ABC, abstractmethod\nfrom typing import Dict, List\n\n\nclass BaseTextConverter(ABC):\n    \"\"\"Base class for all text converters.\"\"\"\n\n    @abstractmethod\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Batch convert files to markdown text.\n\n        Args:\n            file_paths: List of file paths to convert\n\n        Returns:\n            Dict mapping file_path -> markdown text content\n        \"\"\"\n        pass\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"ef11916406f0614297944d73e1d14e694f021db8d5c71af824b0f1e23b74c5a1","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/_base.py","size":515,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/3dd64a74-a2ac-4565-b3ce-b4684233b0f2-converters_base.py","repo_name":"airweave","path_in_repo":"converters/_base.py","repo_owner":"airweave-ai","language":"Python","commit_id":"6d66a1f4b1faec705a940f5c76917d605dfb2f6b","full_path":"airweave-ai/airweave/converters/_base.py","branch":"vespa_test","sha":"6d66a1f4b1faec705a940f5c76917d605dfb2f6b","line_count":21,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/_base.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/_base.py"}
{"entity_id":"airweave-ai/airweave/converters/code_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"code_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Code file to markdown converter.\"\"\"\n\nimport asyncio\nfrom typing import Dict, List\n\nimport aiofiles\n\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\n\n\nclass CodeConverter(BaseTextConverter):\n    \"\"\"Converts code files to markdown code fences.\n\n    Simple converter that wraps code content in markdown code fences\n    with appropriate language tags. No AI summarization - code-specific\n    embeddings will be used later for optimal retrieval.\n    \"\"\"\n\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Convert code files to markdown code fences.\n\n        Args:\n            file_paths: List of code file paths\n\n        Returns:\n            Dict mapping file_path -> markdown (code fence with language tag)\n        \"\"\"\n        logger.debug(f\"Converting {len(file_paths)} code files to markdown...\")\n\n        results = {}\n        semaphore = asyncio.Semaphore(20)  # Limit concurrent file reads\n\n        async def _convert_one(path: str):\n            async with semaphore:\n                try:\n                    # Read file\n                    async with aiofiles.open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                        code = await f.read()\n\n                    if not code or not code.strip():\n                        logger.warning(f\"Code file {path} is empty\")\n                        results[path] = None\n                        return\n\n                    # Return raw code (no fence - CodeChunker uses auto-detection)\n                    results[path] = code\n                    logger.debug(f\"Converted code file: {path} ({len(code)} characters)\")\n\n                except Exception as e:\n                    logger.error(f\"Failed to process code file {path}: {e}\")\n                    results[path] = None\n\n        await asyncio.gather(*[_convert_one(p) for p in file_paths], return_exceptions=True)\n\n        successful = sum(1 for r in results.values() if r)\n        logger.debug(f\"Code conversion complete: {successful}/{len(file_paths)} successful\")\n\n        return results\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"a62c5e8d802f7015ecba38d886983ac7c2f17841a07104d4d65460e6c1218274","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/code_converter.py","size":2105,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/936388e3-8c1b-4134-bed7-c86469081e67-converterscode_converter.py","repo_name":"airweave","path_in_repo":"converters/code_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"97d283c1a21090417af0b92b579c297bff57f06d","full_path":"airweave-ai/airweave/converters/code_converter.py","branch":"vespa_test","sha":"97d283c1a21090417af0b92b579c297bff57f06d","line_count":60,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/code_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/code_converter.py"}
{"entity_id":"airweave-ai/airweave/converters/html_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"html_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"HTML to markdown converter.\"\"\"\n\nimport asyncio\nfrom typing import Dict, List\n\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\nfrom airweave.platform.sync.async_helpers import run_in_thread_pool\nfrom airweave.platform.sync.exceptions import EntityProcessingError\n\n\nclass HtmlConverter(BaseTextConverter):\n    \"\"\"Converts HTML files to markdown text using html-to-markdown.\"\"\"\n\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Convert HTML files to markdown text.\n\n        Args:\n            file_paths: List of file paths to convert\n\n        Returns:\n            Dict mapping file_path -> markdown text content (None if failed)\n\n        Raises:\n            EntityProcessingError: If html-to-markdown package not installed\n        \"\"\"\n        try:\n            from html_to_markdown import convert\n        except ImportError:\n            logger.error(\"html-to-markdown package not installed for HTML conversion\")\n            raise EntityProcessingError(\n                \"HTML conversion requires html-to-markdown package. \"\n                \"Install with: pip install html-to-markdown\"\n            )\n\n        logger.info(f\"Converting {len(file_paths)} HTML files to markdown...\")\n\n        results = {}\n        semaphore = asyncio.Semaphore(20)  # Limit concurrent conversions\n\n        async def _convert_one(path: str):\n            async with semaphore:\n                try:\n\n                    def _convert():\n                        # Read HTML file\n                        with open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                            html_content = f.read()\n\n                        if not html_content or not html_content.strip():\n                            return None\n\n                        # Convert to markdown using html-to-markdown (Rust-powered)\n                        markdown = convert(html_content)\n\n                        return markdown.strip() if markdown else None\n\n                    text = await run_in_thread_pool(_convert)\n\n                    if text:\n                        results[path] = text\n                        logger.debug(f\"Converted HTML file: {path} ({len(text)} characters)\")\n                    else:\n                        logger.warning(f\"HTML conversion produced no content for {path}\")\n                        results[path] = None\n\n                except Exception as e:\n                    logger.error(f\"HTML conversion failed for {path}: {e}\")\n                    results[path] = None\n\n        await asyncio.gather(*[_convert_one(p) for p in file_paths], return_exceptions=True)\n\n        successful = sum(1 for r in results.values() if r)\n        logger.info(f\"HTML conversion complete: {successful}/{len(file_paths)} files successful\")\n\n        return results\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"2540587d94a965ea7ee74f7bc58e47800a9385ddf2685b8f6f6ee98e4bce1013","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/html_converter.py","size":2838,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/c4e2962a-dc9f-4270-86ee-521a4538d128-convertershtml_converter.py","repo_name":"airweave","path_in_repo":"converters/html_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"d6559c99ce3159bc56a8c8b026e1d61f9bdf665d","full_path":"airweave-ai/airweave/converters/html_converter.py","branch":"vespa_test","sha":"d6559c99ce3159bc56a8c8b026e1d61f9bdf665d","line_count":77,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/html_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/html_converter.py"}
{"entity_id":"airweave-ai/airweave/converters/mistral_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"mistral_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Unified converter for documents and images using Mistral OCR.\"\"\"\n\nimport asyncio\nimport hashlib\nimport json\nimport os\nimport tempfile\nimport time\nfrom typing import Dict, List, Optional\n\nfrom httpx import HTTPStatusError, ReadTimeout, TimeoutException\nfrom tenacity import retry, retry_if_exception_type, stop_after_attempt, wait_exponential\n\nfrom airweave.core.config import settings\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\nfrom airweave.platform.rate_limiters import MistralRateLimiter\nfrom airweave.platform.sync.async_helpers import run_in_thread_pool\nfrom airweave.platform.sync.exceptions import EntityProcessingError, SyncFailureError\n\n# ==================== CONFIGURATION (Module-Level Constants) ====================\n\n# Mistral OCR file size limit\nMAX_FILE_SIZE_BYTES = 50_000_000  # 50MB Mistral limit\n\n# Retry configuration (matching Notion pattern)\nMAX_RETRIES = 5  # Maximum retry attempts\nRETRY_MIN_WAIT = 10  # Minimum wait between retries (seconds)\nRETRY_MAX_WAIT = 60  # Maximum wait between retries (seconds)\nRETRY_MULTIPLIER = 2  # Exponential backoff multiplier\n\n\n# ==================== MISTRAL CONVERTER ====================\n\n\nclass MistralConverter(BaseTextConverter):\n    \"\"\"Converts documents and images to markdown using Mistral OCR.\n\n    Supported formats:\n    - Documents: PDF, DOCX, PPTX (with splitting)\n    - Images: JPG, JPEG, PNG (with compression if >50MB)\n\n    Document splitting (recursive halving):\n    - PDF: Split by pages using PyPDF2\n    - DOCX: Split by paragraphs using python-docx\n    - PPTX: Split by slides using python-pptx\n    \"\"\"\n\n    # Supported formats\n    SUPPORTED_DOCUMENT_FORMATS = {\".pdf\", \".docx\", \".pptx\"}\n    SUPPORTED_IMAGE_FORMATS = {\".jpg\", \".jpeg\", \".png\"}\n    SUPPORTED_FORMATS = SUPPORTED_DOCUMENT_FORMATS | SUPPORTED_IMAGE_FORMATS\n\n    def __init__(self):\n        \"\"\"Initialize converter with lazy Mistral client initialization.\"\"\"\n        self.max_file_size = MAX_FILE_SIZE_BYTES\n        self.rate_limiter = MistralRateLimiter()  # Singleton - shared across all converters in pod\n        self._mistral_client = None\n        self._mistral_initialized = False\n\n    def _ensure_mistral_client(self):\n        \"\"\"Ensure Mistral client is initialized (lazy initialization).\n\n        Raises:\n            SyncFailureError: If Mistral API key not configured or mistralai package not installed\n        \"\"\"\n        if self._mistral_initialized:\n            return\n\n        # Require Mistral API key\n        if not hasattr(settings, \"MISTRAL_API_KEY\") or not settings.MISTRAL_API_KEY:\n            raise SyncFailureError(\"MISTRAL_API_KEY required for document conversion\")\n\n        try:\n            from mistralai import Mistral\n\n            self._mistral_client = Mistral(api_key=settings.MISTRAL_API_KEY)\n            self._mistral_initialized = True\n            logger.debug(\"Mistral client initialized for document conversion\")\n        except ImportError:\n            raise SyncFailureError(\"mistralai package required but not installed\")\n\n    async def _mistral_api_call_with_retry(self, operation):\n        \"\"\"Generic wrapper for Mistral API calls with rate limiting + retry.\n\n        Args:\n            operation: Sync function to call (will be run in thread pool)\n\n        Returns:\n            Result from operation\n\n        Raises:\n            Exception: If operation fails after retries\n        \"\"\"\n\n        @retry(\n            retry=retry_if_exception_type(\n                (TimeoutException, ReadTimeout, HTTPStatusError, Exception)\n            ),\n            stop=stop_after_attempt(MAX_RETRIES),\n            wait=wait_exponential(\n                multiplier=RETRY_MULTIPLIER, min=RETRY_MIN_WAIT, max=RETRY_MAX_WAIT\n            ),\n            reraise=True,\n        )\n        async def _call():\n            await self.rate_limiter.acquire()  # Rate limit before each attempt\n            return await run_in_thread_pool(operation)\n\n        return await _call()\n\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Convert document files to markdown text using Mistral batch OCR API.\n\n        Args:\n            file_paths: List of document file paths to convert\n\n        Returns:\n            Dict mapping file_path -> markdown text content (None if failed)\n        \"\"\"\n        # Ensure Mistral client is initialized before processing\n        self._ensure_mistral_client()\n\n        try:\n            # Step 1: Prepare files (split large ones)\n            file_chunks_map = await self._prepare_and_split_files(file_paths)\n\n            # Check if all files failed during preparation\n            if not file_chunks_map:\n                logger.warning(\"All files failed during preparation\")\n                return {path: None for path in file_paths}\n\n            # Step 2: Upload all chunks to Mistral\n            upload_map = await self._upload_chunks_to_mistral(file_chunks_map)\n\n            # Step 3: Create JSONL batch file with signed URLs\n            jsonl_path, custom_id_to_upload_key = await self._create_batch_jsonl(upload_map)\n\n            # Step 4: Submit batch job\n            job_id, batch_file_id = await self._submit_batch_job(jsonl_path)\n\n            # Step 5: Poll for completion\n            await self._poll_batch_job(job_id, timeout=600)\n\n            # Step 6: Download and parse results\n            upload_key_results = await self._download_batch_results(job_id, custom_id_to_upload_key)\n\n            # Step 7: Combine chunks back to original files\n            final_results = await self._combine_chunk_results(\n                upload_key_results, file_chunks_map, file_paths\n            )\n\n            # Step 8: Cleanup\n            await self._cleanup_mistral_files(upload_map, batch_file_id)\n            await self._cleanup_temp_chunks(file_chunks_map)\n\n            # Step 9: Delete JSONL\n            try:\n                os.unlink(jsonl_path)\n            except Exception:\n                pass\n\n            return final_results\n\n        except EntityProcessingError:\n            raise\n        except Exception as e:\n            # Check if this is an infrastructure failure\n            error_msg = str(e).lower()\n            is_infrastructure_failure = any(\n                keyword in error_msg\n                for keyword in [\"timeout\", \"api\", \"network\", \"connection\", \"rate limit\"]\n            )\n\n            if is_infrastructure_failure:\n                logger.error(f\"Mistral infrastructure failure: {e}\")\n                raise SyncFailureError(f\"Mistral infrastructure failure: {e}\")\n\n            # Other unexpected errors\n            logger.error(f\"Mistral batch conversion failed: {e}\")\n            raise SyncFailureError(f\"Mistral batch conversion failed: {e}\")\n\n    # ==================== FILE PREPARATION & SPLITTING ====================\n\n    async def _prepare_and_split_files(self, file_paths: List[str]) -> Dict[str, List[str]]:\n        \"\"\"Check file sizes and split if >50MB.\n\n        Handles errors per-file: if one file fails, others continue processing.\n\n        Args:\n            file_paths: Original document file paths\n\n        Returns:\n            Dict mapping original_path -> [chunk_paths]\n            Failed files are NOT included (will be marked as None in final results)\n        \"\"\"\n        file_chunks_map = {}\n\n        # Handle duplicate paths (same file multiple times in batch)\n        for idx, path in enumerate(file_paths):\n            try:\n                file_size = os.path.getsize(path)\n                # Create unique key for duplicate paths\n                unique_key = f\"{path}__batch_idx_{idx}\"\n\n                # Get file extension\n                _, ext = os.path.splitext(path)\n                ext = ext.lower()\n\n                if file_size <= self.max_file_size:\n                    # Use as-is\n                    file_chunks_map[unique_key] = [path]\n                    size_mb = file_size / 1_000_000\n                    logger.debug(f\"Document {os.path.basename(path)}: {size_mb:.1f}MB (OK)\")\n                else:\n                    # Split into chunks\n                    size_mb = file_size / 1_000_000\n                    logger.debug(\n                        f\"Document {os.path.basename(path)} is {size_mb:.1f}MB, splitting...\"\n                    )\n                    chunks = await self._split_large_document(path, file_size, ext)\n\n                    if not chunks:\n                        size_mb = file_size / 1_000_000\n                        raise EntityProcessingError(\n                            f\"Failed to split large document: {path} ({size_mb:.1f}MB)\"\n                        )\n\n                    file_chunks_map[unique_key] = chunks\n                    logger.debug(f\"Split into {len(chunks)} chunks\")\n\n            except EntityProcessingError as e:\n                # Entity-level error - log warning and skip this file, continue with others\n                logger.warning(f\"Skipping file {os.path.basename(path)}: {e}\")\n                continue\n            except Exception as e:\n                # Unexpected error - also skip this file\n                logger.error(f\"Unexpected error preparing {os.path.basename(path)}: {e}\")\n                continue\n\n        return file_chunks_map\n\n    async def _split_large_document(self, path: str, file_size: int, ext: str) -> List[str]:\n        \"\"\"Dispatch to format-specific handler.\n\n        - Images: Compress if >50MB\n        - Documents: Split by pages/paragraphs/slides\n\n        Args:\n            path: File path\n            file_size: File size in bytes\n            ext: File extension (e.g., '.pdf', '.jpg')\n\n        Returns:\n            List of chunk/compressed file paths\n\n        Raises:\n            EntityProcessingError: If format unsupported or processing fails\n        \"\"\"\n        # Images - compress if needed\n        if ext in self.SUPPORTED_IMAGE_FORMATS:\n            compressed_path = await self._compress_image_if_needed(path, file_size)\n            return [compressed_path]\n\n        # Documents - split\n        if ext == \".pdf\":\n            return await self._split_pdf_by_pages(path, file_size)\n        elif ext == \".docx\":\n            return await self._split_docx_by_paragraphs(path, file_size)\n        elif ext == \".pptx\":\n            return await self._split_pptx_by_slides(path, file_size)\n        else:\n            raise EntityProcessingError(f\"Unsupported format: {ext}\")\n\n    # ==================== PDF SPLITTING ====================\n\n    async def _split_pdf_by_pages(self, pdf_path: str, file_size: int) -> List[str]:\n        \"\"\"Split PDF into chunks <max_file_size using recursive halving.\n\n        Args:\n            pdf_path: Path to large PDF\n            file_size: Size in bytes\n\n        Returns:\n            List of temporary chunk file paths\n\n        Raises:\n            EntityProcessingError: If splitting fails\n        \"\"\"\n        try:\n            import PyPDF2\n        except ImportError:\n            raise SyncFailureError(\"PyPDF2 required to split large PDF but not installed\")\n\n        def _split():\n            with open(pdf_path, \"rb\") as f:\n                reader = PyPDF2.PdfReader(f)\n                num_pages = len(reader.pages)\n\n                if num_pages == 0:\n                    raise EntityProcessingError(f\"PDF {pdf_path} has no pages\")\n\n                logger.debug(f\"PDF has {num_pages} pages, splitting recursively...\")\n\n                # Recursively split using halving strategy\n                return self._split_pages_recursive(reader, 0, num_pages)\n\n        try:\n            return await run_in_thread_pool(_split)\n        except EntityProcessingError:\n            raise\n        except Exception as e:\n            raise EntityProcessingError(f\"PDF splitting failed for {pdf_path}: {e}\")\n\n    def _split_pages_recursive(self, reader, start_idx: int, end_idx: int) -> List[str]:\n        \"\"\"Recursively split page range in half until chunks are small enough.\n\n        Args:\n            reader: PyPDF2 PdfReader object\n            start_idx: Starting page index\n            end_idx: Ending page index (exclusive)\n\n        Returns:\n            List of chunk file paths\n\n        Raises:\n            EntityProcessingError: If single page exceeds size limit\n        \"\"\"\n        import PyPDF2\n\n        num_pages = end_idx - start_idx\n\n        # Create chunk with this page range\n        writer = PyPDF2.PdfWriter()\n        for i in range(start_idx, end_idx):\n            writer.add_page(reader.pages[i])\n\n        # Write to temp file\n        temp_fd, temp_path = tempfile.mkstemp(suffix=\".pdf\")\n        with os.fdopen(temp_fd, \"wb\") as temp_file:\n            writer.write(temp_file)\n\n        chunk_size = os.path.getsize(temp_path)\n\n        # Check if chunk is small enough\n        if chunk_size <= self.max_file_size:\n            logger.debug(\n                f\"✓ PDF chunk pages {start_idx + 1}-{end_idx}: {chunk_size / 1_000_000:.1f}MB (OK)\"\n            )\n            return [temp_path]\n\n        # Chunk too large - need to split\n        os.unlink(temp_path)  # Delete oversized chunk\n\n        # Edge case: single page exceeds limit\n        if num_pages == 1:\n            limit_mb = self.max_file_size / 1_000_000\n            page_mb = chunk_size / 1_000_000\n            raise EntityProcessingError(\n                f\"Single page {start_idx + 1} in PDF ({page_mb:.2f}MB) exceeds limit \"\n                f\"({limit_mb:.2f}MB) - cannot split further\"\n            )\n\n        # Split in half and recurse\n        mid_idx = start_idx + (num_pages // 2)\n\n        chunk_mb = chunk_size / 1_000_000\n        logger.debug(\n            f\"✂️  PDF chunk pages {start_idx + 1}-{end_idx} too large ({chunk_mb:.1f}MB), \"\n            f\"splitting at page {mid_idx}\"\n        )\n\n        # Recursively process each half\n        first_half = self._split_pages_recursive(reader, start_idx, mid_idx)\n        second_half = self._split_pages_recursive(reader, mid_idx, end_idx)\n\n        return first_half + second_half\n\n    # ==================== DOCX SPLITTING ====================\n\n    async def _split_docx_by_paragraphs(self, docx_path: str, file_size: int) -> List[str]:\n        \"\"\"Split DOCX by paragraphs using RECURSIVE halving.\n\n        Args:\n            docx_path: Path to large DOCX\n            file_size: Size in bytes\n\n        Returns:\n            List of temporary chunk file paths\n\n        Raises:\n            EntityProcessingError: If document has no paragraphs or single paragraph too large\n            SyncFailureError: If python-docx package not installed\n        \"\"\"\n        try:\n            from docx import Document\n        except ImportError:\n            raise SyncFailureError(\"python-docx package required but not installed\")\n\n        def _split():\n            doc = Document(docx_path)\n            all_paragraphs = list(doc.paragraphs)\n\n            if not all_paragraphs:\n                raise EntityProcessingError(f\"DOCX {docx_path} has no paragraphs\")\n\n            logger.debug(f\"DOCX has {len(all_paragraphs)} paragraphs, splitting recursively...\")\n\n            # Recursively split paragraph range\n            return self._split_paragraphs_recursive(all_paragraphs, 0, len(all_paragraphs))\n\n        try:\n            return await run_in_thread_pool(_split)\n        except EntityProcessingError:\n            raise\n        except Exception as e:\n            raise EntityProcessingError(f\"DOCX splitting failed for {docx_path}: {e}\")\n\n    def _split_paragraphs_recursive(self, paragraphs: List, start: int, end: int) -> List[str]:\n        \"\"\"Recursively split paragraph range until chunk <50MB.\n\n        Args:\n            paragraphs: List of paragraph objects\n            start: Starting paragraph index\n            end: Ending paragraph index (exclusive)\n\n        Returns:\n            List of chunk file paths\n\n        Raises:\n            EntityProcessingError: If single paragraph exceeds size limit\n        \"\"\"\n        from docx import Document\n\n        # Create chunk with this range\n        chunk_doc = Document()\n        for i in range(start, end):\n            chunk_doc.add_paragraph(paragraphs[i].text, style=paragraphs[i].style)\n\n        # Save and check size\n        temp_fd, temp_path = tempfile.mkstemp(suffix=\".docx\")\n        os.close(temp_fd)\n        chunk_doc.save(temp_path)\n        chunk_size = os.path.getsize(temp_path)\n\n        if chunk_size <= self.max_file_size:\n            logger.debug(\n                f\"✓ DOCX chunk paragraphs {start + 1}-{end}: {chunk_size / 1_000_000:.1f}MB (OK)\"\n            )\n            return [temp_path]\n\n        # Chunk too large - split\n        os.unlink(temp_path)\n\n        # Edge case: Single paragraph too large\n        if end - start == 1:\n            limit_mb = self.max_file_size / 1_000_000\n            chunk_mb = chunk_size / 1_000_000\n            raise EntityProcessingError(\n                f\"Single paragraph in DOCX ({chunk_mb:.2f}MB) exceeds limit \"\n                f\"({limit_mb:.2f}MB) - cannot split further\"\n            )\n\n        # Split in half\n        mid = start + (end - start) // 2\n        logger.debug(f\"✂️  DOCX chunk paragraphs {start + 1}-{end} too large, splitting at {mid}\")\n\n        first_half = self._split_paragraphs_recursive(paragraphs, start, mid)\n        second_half = self._split_paragraphs_recursive(paragraphs, mid, end)\n\n        return first_half + second_half\n\n    # ==================== PPTX SPLITTING ====================\n\n    async def _split_pptx_by_slides(self, pptx_path: str, file_size: int) -> List[str]:\n        \"\"\"Split PPTX by slides using RECURSIVE halving.\n\n        Args:\n            pptx_path: Path to large PPTX\n            file_size: Size in bytes\n\n        Returns:\n            List of temporary chunk file paths\n\n        Raises:\n            EntityProcessingError: If presentation has no slides or single slide too large\n            SyncFailureError: If python-pptx package not installed\n        \"\"\"\n        try:\n            from pptx import Presentation\n        except ImportError:\n            raise SyncFailureError(\"python-pptx package required but not installed\")\n\n        def _split():\n            prs = Presentation(pptx_path)\n            num_slides = len(prs.slides)\n\n            if num_slides == 0:\n                raise EntityProcessingError(f\"PPTX {pptx_path} has no slides\")\n\n            logger.debug(f\"PPTX has {num_slides} slides, splitting recursively...\")\n\n            # Recursively split slide range\n            return self._split_slides_recursive(pptx_path, 0, num_slides)\n\n        try:\n            return await run_in_thread_pool(_split)\n        except EntityProcessingError:\n            raise\n        except Exception as e:\n            raise EntityProcessingError(f\"PPTX splitting failed for {pptx_path}: {e}\")\n\n    def _split_slides_recursive(self, template_path: str, start: int, end: int) -> List[str]:\n        \"\"\"Recursively split slide range until chunk <50MB.\n\n        Args:\n            template_path: Path to original PPTX (used as template)\n            start: Starting slide index\n            end: Ending slide index (exclusive)\n\n        Returns:\n            List of chunk file paths\n\n        Raises:\n            EntityProcessingError: If single slide exceeds size limit\n        \"\"\"\n        import shutil\n\n        # For simplicity, copy the original and use as chunk\n        # (Full slide extraction is complex; Mistral OCR handles visual content)\n        temp_fd, temp_path = tempfile.mkstemp(suffix=\".pptx\")\n        os.close(temp_fd)\n        shutil.copy2(template_path, temp_path)\n\n        chunk_size = os.path.getsize(temp_path)\n\n        if chunk_size <= self.max_file_size:\n            logger.debug(\n                f\"✓ PPTX chunk slides {start + 1}-{end}: {chunk_size / 1_000_000:.1f}MB (OK)\"\n            )\n            return [temp_path]\n\n        # Too large - split\n        os.unlink(temp_path)\n\n        # Edge case: Single slide too large\n        if end - start == 1:\n            limit_mb = self.max_file_size / 1_000_000\n            slide_mb = chunk_size / 1_000_000\n            raise EntityProcessingError(\n                f\"Single slide in PPTX ({slide_mb:.2f}MB) exceeds limit \"\n                f\"({limit_mb:.2f}MB) - cannot split further\"\n            )\n\n        # Split in half\n        mid = start + (end - start) // 2\n        logger.debug(f\"✂️  PPTX chunk slides {start + 1}-{end} too large, splitting at {mid}\")\n\n        first_half = self._split_slides_recursive(template_path, start, mid)\n        second_half = self._split_slides_recursive(template_path, mid, end)\n\n        return first_half + second_half\n\n    # ==================== IMAGE COMPRESSION ====================\n\n    async def _compress_image_if_needed(self, image_path: str, file_size: int) -> str:\n        \"\"\"Compress image if >50MB using Pillow.\n\n        Args:\n            image_path: Path to image file\n            file_size: File size in bytes\n\n        Returns:\n            Path to compressed image (or original if <50MB)\n\n        Raises:\n            SyncFailureError: If Pillow not installed\n            EntityProcessingError: If cannot compress below 50MB\n        \"\"\"\n        if file_size <= self.max_file_size:\n            return image_path  # No compression needed\n\n        try:\n            from PIL import Image\n        except ImportError:\n            raise SyncFailureError(\n                \"Pillow package required for image compression but not installed\"\n            )\n\n        def _compress():\n            img = Image.open(image_path)\n            _, ext = os.path.splitext(image_path)\n            ext = ext.lower()\n\n            # PNG compression: Convert to JPEG (lossy but effective)\n            if ext == \".png\":\n                # Convert RGBA to RGB if needed\n                if img.mode in (\"RGBA\", \"LA\", \"P\"):\n                    background = Image.new(\"RGB\", img.size, (255, 255, 255))\n                    background.paste(img, mask=img.split()[-1] if img.mode == \"RGBA\" else None)\n                    img = background\n\n                # Try quality levels for JPEG conversion\n                for quality in range(85, 19, -10):\n                    temp_fd, temp_path = tempfile.mkstemp(suffix=\".jpg\")\n                    os.close(temp_fd)\n\n                    img.save(temp_path, \"JPEG\", quality=quality, optimize=True)\n                    compressed_size = os.path.getsize(temp_path)\n\n                    if compressed_size <= self.max_file_size:\n                        size_mb = file_size / 1_000_000\n                        compressed_mb = compressed_size / 1_000_000\n                        logger.debug(\n                            f\"Compressed PNG→JPEG {os.path.basename(image_path)}: \"\n                            f\"{size_mb:.2f}MB → {compressed_mb:.2f}MB (quality={quality}%)\"\n                        )\n                        return temp_path\n\n                    os.unlink(temp_path)\n\n            # JPEG compression: Use quality parameter\n            else:\n                for quality in range(85, 19, -10):\n                    temp_fd, temp_path = tempfile.mkstemp(suffix=ext)\n                    os.close(temp_fd)\n\n                    img.save(temp_path, quality=quality, optimize=True)\n                    compressed_size = os.path.getsize(temp_path)\n\n                    if compressed_size <= self.max_file_size:\n                        size_mb = file_size / 1_000_000\n                        compressed_mb = compressed_size / 1_000_000\n                        logger.debug(\n                            f\"Compressed {os.path.basename(image_path)}: \"\n                            f\"{size_mb:.2f}MB → {compressed_mb:.2f}MB (quality={quality}%)\"\n                        )\n                        return temp_path\n\n                    os.unlink(temp_path)\n\n            # Cannot compress enough\n            size_mb = file_size / 1_000_000\n            limit_mb = self.max_file_size / 1_000_000\n            raise EntityProcessingError(\n                f\"Cannot compress {os.path.basename(image_path)} below {limit_mb:.2f}MB \"\n                f\"(original: {size_mb:.2f}MB)\"\n            )\n\n        return await run_in_thread_pool(_compress)\n\n    # ==================== MISTRAL API CALLS (WITH RATE LIMITING) ====================\n\n    async def _upload_chunks_to_mistral(\n        self, file_chunks_map: Dict[str, List[str]]\n    ) -> Dict[str, dict]:\n        \"\"\"Upload all chunk files to Mistral and get signed URLs.\n\n        Args:\n            file_chunks_map: Mapping of original_path -> [chunk_paths]\n\n        Returns:\n            Dict mapping upload_key -> {'file_id', 'signed_url'}\n        \"\"\"\n        # Flatten all chunks with their unique keys\n        all_chunks = []\n        for unique_key, chunks in file_chunks_map.items():\n            for chunk_path in chunks:\n                all_chunks.append((unique_key, chunk_path))\n\n        logger.debug(f\"Uploading {len(all_chunks)} document chunks to Mistral...\")\n\n        # Upload concurrently with semaphore (10 concurrent max)\n        semaphore = asyncio.Semaphore(10)\n        upload_map = {}\n\n        failed_uploads = []  # Track failed uploads\n\n        async def _upload_one(unique_key: str, chunk_path: str):\n            async with semaphore:\n                try:\n                    # Upload file with retry + rate limiting\n                    def _upload():\n                        with open(chunk_path, \"rb\") as f:\n                            return self._mistral_client.files.upload(\n                                file={\"file_name\": os.path.basename(chunk_path), \"content\": f},\n                                purpose=\"ocr\",\n                            ).id\n\n                    file_id = await self._mistral_api_call_with_retry(_upload)\n\n                    # Get signed URL with retry + rate limiting\n                    signed_url = await self._mistral_api_call_with_retry(\n                        lambda: self._mistral_client.files.get_signed_url(file_id=file_id).url\n                    )\n\n                    # Store result\n                    upload_key = f\"{unique_key}__chunk_{chunk_path}\"\n                    upload_map[upload_key] = {\"file_id\": file_id, \"signed_url\": signed_url}\n\n                    logger.debug(f\"Uploaded {os.path.basename(chunk_path)}\")\n\n                except Exception as e:\n                    # Log error but don't fail entire batch - track for later\n                    logger.error(f\"Upload failed for {os.path.basename(chunk_path)}: {e}\")\n                    upload_key = f\"{unique_key}__chunk_{chunk_path}\"\n                    failed_uploads.append((upload_key, chunk_path, str(e)))\n\n        await asyncio.gather(\n            *[_upload_one(uk, cp) for uk, cp in all_chunks], return_exceptions=True\n        )\n\n        logger.debug(f\"Uploaded {len(upload_map)} chunks successfully\")\n        return upload_map\n\n    async def _create_batch_jsonl(self, upload_map: Dict[str, dict]) -> tuple:\n        \"\"\"Create JSONL batch file with signed URLs.\n\n        Detects file type (image vs document) and uses appropriate Mistral API type.\n\n        Args:\n            upload_map: Dict of upload_key -> {'file_id', 'signed_url'}\n\n        Returns:\n            Tuple of (jsonl_path, custom_id_to_upload_key_mapping)\n        \"\"\"\n\n        def _create():\n            temp_fd, jsonl_path = tempfile.mkstemp(suffix=\".jsonl\")\n            custom_id_to_upload_key = {}\n\n            with os.fdopen(temp_fd, \"w\") as f:\n                for upload_key, upload_info in upload_map.items():\n                    # Use hash as custom_id (avoid path length issues)\n                    custom_id = hashlib.md5(upload_key.encode()).hexdigest()\n                    custom_id_to_upload_key[custom_id] = upload_key\n\n                    # Extract file path and extension to determine type\n                    file_path = upload_key.split(\"__chunk_\")[1]\n                    _, ext = os.path.splitext(file_path)\n                    ext = ext.lower()\n\n                    # Choose document_url or image_url based on extension\n                    if ext in self.SUPPORTED_IMAGE_FORMATS:\n                        doc_type = \"image_url\"\n                    else:\n                        doc_type = \"document_url\"\n\n                    entry = {\n                        \"custom_id\": custom_id,\n                        \"body\": {\n                            \"document\": {\n                                \"type\": doc_type,\n                                doc_type: upload_info[\"signed_url\"],\n                            }\n                        },\n                    }\n                    f.write(json.dumps(entry) + \"\\n\")\n\n            logger.debug(f\"Created batch JSONL with {len(upload_map)} entries: {jsonl_path}\")\n            return jsonl_path, custom_id_to_upload_key\n\n        return await run_in_thread_pool(_create)\n\n    async def _submit_batch_job(self, jsonl_path: str) -> tuple:\n        \"\"\"Upload JSONL and create batch job.\n\n        Args:\n            jsonl_path: Path to JSONL file\n\n        Returns:\n            Tuple of (job_id, batch_file_id)\n\n        Raises:\n            EntityProcessingError: If submission fails\n        \"\"\"\n        try:\n            # Upload JSONL with retry + rate limiting\n            def _upload_jsonl():\n                with open(jsonl_path, \"rb\") as f:\n                    return self._mistral_client.files.upload(\n                        file={\"file_name\": \"batch.jsonl\", \"content\": f}, purpose=\"batch\"\n                    ).id\n\n            batch_file_id = await self._mistral_api_call_with_retry(_upload_jsonl)\n\n            # Create batch job with retry + rate limiting\n            job_id = await self._mistral_api_call_with_retry(\n                lambda: self._mistral_client.batch.jobs.create(\n                    input_files=[batch_file_id], model=\"mistral-ocr-latest\", endpoint=\"/v1/ocr\"\n                ).id\n            )\n\n            logger.debug(f\"Submitted batch job {job_id} (batch file: {batch_file_id})\")\n            return job_id, batch_file_id\n\n        except Exception as e:\n            raise EntityProcessingError(f\"Failed to submit Mistral batch job: {e}\")\n\n    async def _poll_batch_job(self, job_id: str, timeout: int = 600):\n        \"\"\"Poll batch job until complete.\n\n        Args:\n            job_id: Mistral batch job ID\n            timeout: Maximum wait time in seconds\n\n        Raises:\n            EntityProcessingError: If job fails or times out\n        \"\"\"\n        start_time = time.time()\n        last_log = 0\n\n        while True:\n            elapsed = time.time() - start_time\n\n            if elapsed > timeout:\n                raise EntityProcessingError(f\"Mistral batch job {job_id} timeout after {timeout}s\")\n\n            # Check status with retry + rate limiting\n            try:\n                job = await self._mistral_api_call_with_retry(\n                    lambda: self._mistral_client.batch.jobs.get(job_id=job_id)\n                )\n            except Exception as e:\n                raise EntityProcessingError(f\"Failed to check batch job status: {e}\")\n\n            if job.status == \"SUCCESS\":\n                logger.debug(f\"Batch job {job_id} completed successfully\")\n                return job\n\n            elif job.status == \"FAILED\":\n                error_msg = getattr(job, \"error\", \"Unknown error\")\n                raise EntityProcessingError(f\"Mistral batch job {job_id} failed: {error_msg}\")\n\n            # Log progress every 10 seconds\n            if elapsed - last_log >= 10:\n                succeeded = getattr(job, \"succeeded_requests\", 0)\n                total = getattr(job, \"total_requests\", 0)\n                logger.debug(f\"Batch OCR progress: {succeeded}/{total} ({int(elapsed)}s elapsed)\")\n                last_log = elapsed\n\n            await asyncio.sleep(2)  # Poll every 2 seconds\n\n    async def _download_batch_results(  # noqa: C901\n        self, job_id: str, custom_id_to_upload_key: Dict[str, str]\n    ) -> Dict[str, str]:\n        \"\"\"Download and parse batch results.\n\n        Args:\n            job_id: Mistral batch job ID\n            custom_id_to_upload_key: Mapping of custom_id -> upload_key\n\n        Returns:\n            Dict mapping upload_key -> markdown content\n        \"\"\"\n        try:\n            # Get job with retry + rate limiting to get output file ID\n            job = await self._mistral_api_call_with_retry(\n                lambda: self._mistral_client.batch.jobs.get(job_id=job_id)\n            )\n            if not hasattr(job, \"output_file\") or not job.output_file:\n                raise Exception(\"Batch job has no output file\")\n\n            # Download output file with retry + rate limiting\n            response = await self._mistral_api_call_with_retry(\n                lambda: self._mistral_client.files.download(file_id=job.output_file)\n            )\n\n            # Handle different response types\n            try:\n                if isinstance(response, bytes):\n                    result_data = response\n                elif hasattr(response, \"read\"):\n                    result_data = response.read()\n                elif hasattr(response, \"content\"):\n                    result_data = response.content\n                elif hasattr(response, \"text\"):\n                    result_data = response.text.encode(\"utf-8\")\n                else:\n                    result_data = str(response).encode(\"utf-8\")\n            except Exception:\n                result_data = response\n\n        except Exception as e:\n            raise EntityProcessingError(f\"Failed to download batch results: {e}\")\n\n        # Parse JSONL results\n        upload_key_results = {}\n\n        # Handle both bytes and str\n        if isinstance(result_data, bytes):\n            result_text = result_data.decode(\"utf-8\")\n        else:\n            result_text = str(result_data)\n\n        for line in result_text.strip().split(\"\\n\"):\n            if not line:\n                continue\n\n            try:\n                item = json.loads(line)\n                custom_id = item.get(\"custom_id\")\n\n                if not custom_id or custom_id not in custom_id_to_upload_key:\n                    logger.warning(f\"Unknown custom_id in results: {custom_id}\")\n                    continue\n\n                upload_key = custom_id_to_upload_key[custom_id]\n\n                # Check if Mistral returned an error for this specific file\n                if \"error\" in item and item[\"error\"]:\n                    error_info = item[\"error\"]\n                    if isinstance(error_info, dict):\n                        error_msg = error_info.get(\"message\", \"Unknown error\")\n                        error_code = error_info.get(\"code\", \"N/A\")\n                    else:\n                        error_msg = str(error_info)\n                        error_code = \"N/A\"\n                    logger.error(f\"Mistral OCR failed for {upload_key}: [{error_code}] {error_msg}\")\n                    upload_key_results[upload_key] = None\n                    continue\n\n                # Extract markdown from response\n                if \"response\" in item and \"body\" in item[\"response\"]:\n                    pages = item[\"response\"][\"body\"].get(\"pages\", [])\n                    if pages:\n                        markdown = \"\\n\\n\".join([p.get(\"markdown\", \"\") for p in pages])\n                        upload_key_results[upload_key] = markdown\n                    else:\n                        logger.warning(f\"No pages in OCR result for {upload_key}\")\n                        upload_key_results[upload_key] = None\n                else:\n                    logger.warning(f\"No OCR result for {upload_key}\")\n                    upload_key_results[upload_key] = None\n\n            except Exception as e:\n                logger.error(f\"Failed to parse batch result line: {e}\")\n                continue\n\n        logger.debug(f\"Parsed {len(upload_key_results)} OCR results from batch\")\n        return upload_key_results\n\n    @staticmethod\n    def _warn_if_empty_markdown(\n        markdown: Optional[str],\n        file_name: str,\n        chunk_idx: Optional[int] = None,\n        total_chunks: Optional[int] = None,\n    ):\n        if isinstance(markdown, str) and not markdown.strip():\n            if chunk_idx is None:\n                logger.warning(f\"OCR returned empty markdown for {file_name}\")\n            else:\n                logger.warning(\n                    f\"OCR returned empty markdown for chunk {chunk_idx}/{total_chunks} \"\n                    f\"of {file_name}\"\n                )\n\n    def _process_single_chunk_result(\n        self,\n        upload_key_results: Dict[str, str],\n        unique_key: str,\n        chunk_path: str,\n        file_name: str,\n    ) -> Optional[str]:\n        upload_key = f\"{unique_key}__chunk_{chunk_path}\"\n        markdown = upload_key_results.get(upload_key)\n\n        if markdown is None:\n            logger.error(\n                f\"Conversion failed for {file_name}: Upload or OCR failed \"\n                f\"(check logs above for details)\"\n            )\n            return None\n\n        self._warn_if_empty_markdown(markdown, file_name)\n        return markdown\n\n    def _process_multi_chunk_result(\n        self,\n        upload_key_results: Dict[str, str],\n        unique_key: str,\n        chunk_paths: List[str],\n        file_name: str,\n    ) -> Optional[str]:\n        combined = \"\"\n\n        for idx, chunk_path in enumerate(chunk_paths, start=1):\n            upload_key = f\"{unique_key}__chunk_{chunk_path}\"\n            chunk_md = upload_key_results.get(upload_key)\n\n            if chunk_md is None:\n                logger.error(\n                    f\"Conversion failed for {file_name}: Chunk {idx}/{len(chunk_paths)} \"\n                    f\"upload or OCR failed\"\n                )\n                return None\n\n            self._warn_if_empty_markdown(chunk_md, file_name, idx, len(chunk_paths))\n\n            if idx > 1:\n                combined += \"\\n\\n---\\n\\n\"\n            combined += chunk_md\n\n        logger.debug(f\"Successfully combined {len(chunk_paths)} chunks for {file_name}\")\n        return combined\n\n    async def _combine_chunk_results(\n        self,\n        upload_key_results: Dict[str, str],\n        file_chunks_map: Dict[str, List[str]],\n        original_file_paths: List[str],\n    ) -> Dict[str, str]:  # noqa: C901\n        \"\"\"Combine chunk markdown back to original files.\n\n        Args:\n            upload_key_results: Dict of upload_key -> markdown (None if OCR failed)\n            file_chunks_map: Dict of unique_key -> [chunk_paths]\n            original_file_paths: Original list of file paths requested\n\n        Returns:\n            Dict mapping original_path -> combined markdown (None if failed)\n\n        Note: None results are EXPLICITLY logged with reason:\n        - File skipped during preparation (e.g., page too large)\n        - Upload failed\n        - Mistral OCR failed\n        - Chunk recombination failed\n        \"\"\"\n        final_results = {}\n\n        # Process files that were successfully prepared\n        for unique_key, chunk_paths in file_chunks_map.items():\n            # Strip __batch_idx_X suffix to get original path\n            original_path = unique_key.split(\"__batch_idx_\")[0]\n            file_name = os.path.basename(original_path)\n\n            if len(chunk_paths) == 1:\n                final_results[original_path] = self._process_single_chunk_result(\n                    upload_key_results, unique_key, chunk_paths[0], file_name\n                )\n            else:\n                final_results[original_path] = self._process_multi_chunk_result(\n                    upload_key_results, unique_key, chunk_paths, file_name\n                )\n\n        # Mark files that failed during preparation as None\n        for path in original_file_paths:\n            if path not in final_results:\n                # Explicit: File was skipped during preparation\n                logger.error(\n                    f\"Conversion failed for {os.path.basename(path)}: \"\n                    f\"File skipped during preparation (e.g., page/paragraph/slide too large)\"\n                )\n                final_results[path] = None\n\n        return final_results\n\n    # ==================== CLEANUP ====================\n\n    async def _cleanup_mistral_files(self, upload_map: Dict[str, dict], batch_file_id: str):\n        \"\"\"Delete uploaded files from Mistral cloud (best effort).\n\n        Args:\n            upload_map: Dict of upload_key -> {'file_id', 'signed_url'}\n            batch_file_id: ID of uploaded batch JSONL file\n        \"\"\"\n\n        async def _delete(file_id):\n            try:\n                # Delete with retry + rate limiting (best effort)\n                await self._mistral_api_call_with_retry(\n                    lambda: self._mistral_client.files.delete(file_id=file_id)\n                )\n            except Exception:\n                pass  # Best effort cleanup - don't fail if deletion fails\n\n        # Collect all file IDs\n        file_ids = [info[\"file_id\"] for info in upload_map.values()]\n        file_ids.append(batch_file_id)\n\n        await asyncio.gather(*[_delete(fid) for fid in file_ids], return_exceptions=True)\n        logger.debug(f\"Cleaned up {len(file_ids)} files from Mistral\")\n\n    async def _cleanup_temp_chunks(self, file_chunks_map: Dict[str, List[str]]):\n        \"\"\"Delete temporary chunk files (best effort).\n\n        Args:\n            file_chunks_map: Dict of unique_key -> [chunk_paths]\n        \"\"\"\n        for unique_key, chunk_paths in file_chunks_map.items():\n            original_path = unique_key.split(\"__batch_idx_\")[0]\n            for chunk_path in chunk_paths:\n                if chunk_path != original_path:  # Don't delete original\n                    try:\n                        os.unlink(chunk_path)\n                        logger.debug(f\"Deleted temp chunk {chunk_path}\")\n                    except Exception:\n                        pass  # Best effort\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"355157c22c67e0b1f0ac97cedb6cf22e7112d052f44021ce32628e13c03dc4de","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/mistral_converter.py","size":41692,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/631301a5-8d1c-49e7-b025-8feb14f53f2a-convertersmistral_converter.py","repo_name":"airweave","path_in_repo":"converters/mistral_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"958f5b46859f2769bcc7b31dab7ed3af35fe4b17","full_path":"airweave-ai/airweave/converters/mistral_converter.py","branch":"vespa_test","sha":"958f5b46859f2769bcc7b31dab7ed3af35fe4b17","line_count":1100,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/mistral_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/mistral_converter.py"}
{"entity_id":"airweave-ai/airweave/converters/txt_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"txt_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Text file to markdown converter.\"\"\"\n\nimport asyncio\nimport csv\nimport json\nimport os\nimport xml.dom.minidom\nfrom typing import Dict, List\n\nimport aiofiles\n\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\nfrom airweave.platform.sync.async_helpers import run_in_thread_pool\nfrom airweave.platform.sync.exceptions import EntityProcessingError\n\n\nclass TxtConverter(BaseTextConverter):\n    \"\"\"Converts text files (TXT, CSV, JSON, XML, MD, YAML, TOML) to markdown.\n\n    Features:\n    - CSV: Converts to markdown tables\n    - JSON: Pretty-prints with code fence\n    - XML: Pretty-prints with code fence\n    - Others: Returns as plain text\n    \"\"\"\n\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Convert text files to markdown.\n\n        Args:\n            file_paths: List of text file paths\n\n        Returns:\n            Dict mapping file_path -> markdown content (None if failed)\n        \"\"\"\n        logger.debug(f\"Converting {len(file_paths)} text files to markdown...\")\n\n        results = {}\n        semaphore = asyncio.Semaphore(20)  # Limit concurrent file reads\n\n        async def _convert_one(path: str):\n            async with semaphore:\n                try:\n                    # Determine format from extension\n                    _, ext = os.path.splitext(path)\n                    ext = ext.lower()\n\n                    # Dispatch to format-specific handler\n                    if ext == \".csv\":\n                        text = await self._convert_csv(path)\n                    elif ext == \".json\":\n                        text = await self._convert_json(path)\n                    elif ext == \".xml\":\n                        text = await self._convert_xml(path)\n                    else:\n                        # Plain text (TXT, MD, YAML, TOML, etc.)\n                        text = await self._convert_plain_text(path)\n\n                    if text and text.strip():\n                        results[path] = text.strip()\n                        logger.debug(f\"Converted text file: {path} ({len(text)} chars)\")\n                    else:\n                        logger.warning(f\"Text file conversion produced no content: {path}\")\n                        results[path] = None\n\n                except Exception as e:\n                    logger.error(f\"Text file conversion failed for {path}: {e}\")\n                    results[path] = None\n\n        await asyncio.gather(*[_convert_one(p) for p in file_paths], return_exceptions=True)\n\n        successful = sum(1 for r in results.values() if r)\n        logger.debug(f\"Text conversion complete: {successful}/{len(file_paths)} successful\")\n\n        return results\n\n    async def _convert_plain_text(self, path: str) -> str:\n        \"\"\"Read plain text file.\n\n        Args:\n            path: Path to text file\n\n        Returns:\n            File content as string\n        \"\"\"\n        async with aiofiles.open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n            return await f.read()\n\n    async def _convert_csv(self, path: str) -> str:\n        \"\"\"Convert CSV to markdown table.\n\n        Args:\n            path: Path to CSV file\n\n        Returns:\n            Markdown table string\n\n        Raises:\n            EntityProcessingError: If CSV is empty\n        \"\"\"\n\n        def _read_and_convert():\n            with open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                reader = csv.reader(f)\n                rows = list(reader)\n\n            if not rows:\n                raise EntityProcessingError(f\"CSV file {path} is empty\")\n\n            # Create markdown table\n            md = []\n\n            # Header\n            md.append(\"| \" + \" | \".join(rows[0]) + \" |\")\n            md.append(\"|\" + \"|\".join([\"---\"] * len(rows[0])) + \"|\")\n\n            # Data rows\n            for row in rows[1:]:\n                # Pad if row is shorter than header\n                padded = row + [\"\"] * (len(rows[0]) - len(row))\n                md.append(\"| \" + \" | \".join(padded[: len(rows[0])]) + \" |\")\n\n            return \"\\n\".join(md)\n\n        return await run_in_thread_pool(_read_and_convert)\n\n    async def _convert_json(self, path: str) -> str:\n        \"\"\"Convert JSON to pretty-printed code fence.\n\n        Args:\n            path: Path to JSON file\n\n        Returns:\n            Formatted JSON in markdown code fence\n\n        Raises:\n            EntityProcessingError: If JSON syntax is invalid\n        \"\"\"\n\n        def _read_and_format():\n            with open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                data = json.load(f)\n\n            formatted = json.dumps(data, indent=2)\n            return f\"```json\\n{formatted}\\n```\"\n\n        try:\n            return await run_in_thread_pool(_read_and_format)\n        except json.JSONDecodeError as e:\n            logger.error(f\"Invalid JSON in {path}: {e}\")\n            raise EntityProcessingError(f\"Invalid JSON syntax in {path}\")\n\n    async def _convert_xml(self, path: str) -> str:\n        \"\"\"Convert XML to pretty-printed code fence.\n\n        Args:\n            path: Path to XML file\n\n        Returns:\n            Formatted XML in markdown code fence\n        \"\"\"\n\n        def _read_and_format():\n            with open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                content = f.read()\n\n            dom = xml.dom.minidom.parseString(content)\n            formatted = dom.toprettyxml()\n            return f\"```xml\\n{formatted}\\n```\"\n\n        try:\n            return await run_in_thread_pool(_read_and_format)\n        except Exception as e:\n            logger.warning(f\"XML parsing failed for {path}: {e}, using raw content\")\n            # Fallback to raw content\n            with open(path, \"r\", encoding=\"utf-8\", errors=\"ignore\") as f:\n                raw = f.read()\n            return f\"```xml\\n{raw}\\n```\" if raw.strip() else None\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"32dc2ee76b59915fd08f6e0e5b472559e13ebe878f1add4ddf4a9513e635b53e","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/txt_converter.py","size":5877,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/6f899f41-bd1e-439c-927f-daf10cba1ea4-converterstxt_converter.py","repo_name":"airweave","path_in_repo":"converters/txt_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"6c05bdce0fa8618ac7c95dd84ced13bbbdbe0be0","full_path":"airweave-ai/airweave/converters/txt_converter.py","branch":"vespa_test","sha":"6c05bdce0fa8618ac7c95dd84ced13bbbdbe0be0","line_count":180,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/txt_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/txt_converter.py"}
{"entity_id":"airweave-ai/airweave/converters/web_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"web_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"Web converter for fetching URLs and converting to markdown using Firecrawl.\"\"\"\n\nimport asyncio\nfrom typing import Any, Dict, List, Optional\n\nfrom httpx import HTTPStatusError, ReadTimeout, TimeoutException\nfrom tenacity import retry, retry_if_exception_type, stop_after_attempt, wait_exponential\n\nfrom airweave.core.config import settings\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\nfrom airweave.platform.rate_limiters import FirecrawlRateLimiter\nfrom airweave.platform.sync.exceptions import SyncFailureError\n\n# ==================== CONFIGURATION ====================\n\n# Retry configuration\nMAX_RETRIES = 3\nRETRY_MIN_WAIT = 10  # seconds\nRETRY_MAX_WAIT = 120  # seconds (longer for rate limits)\nRETRY_MULTIPLIER = 2\n\n# Batch job polling\nPOLL_INTERVAL_SECONDS = 2\nPOLL_TIMEOUT_SECONDS = 600  # 10 minutes max for a batch\n\n\nclass WebConverter(BaseTextConverter):\n    \"\"\"Converter that fetches URLs and converts HTML to markdown.\n\n    Uses Firecrawl batch scrape API to efficiently process multiple URLs.\n    Returns markdown content for each URL.\n\n    Error handling:\n    - Per-URL failures: Returns None for that URL (entity will be skipped)\n    - Batch failures: Returns all None (all entities in batch will be skipped)\n    - Infrastructure failures (API key, auth, quota): Raises SyncFailureError (fails entire sync)\n    \"\"\"\n\n    # Batch size from Firecrawl Growth plan (100 concurrent browsers)\n    BATCH_SIZE = FirecrawlRateLimiter.FIRECRAWL_CONCURRENT_BROWSERS\n\n    def __init__(self):\n        \"\"\"Initialize the web converter with lazy Firecrawl client.\"\"\"\n        self.rate_limiter = FirecrawlRateLimiter()  # Singleton - shared across pod\n        self._firecrawl_client: Optional[Any] = None\n        self._initialized = False\n\n    def _ensure_client(self):\n        \"\"\"Ensure Firecrawl client is initialized (lazy initialization).\n\n        Raises:\n            SyncFailureError: If API key not configured or package not installed\n        \"\"\"\n        if self._initialized:\n            return\n\n        api_key = getattr(settings, \"FIRECRAWL_API_KEY\", None)\n        if not api_key:\n            raise SyncFailureError(\"FIRECRAWL_API_KEY required for web conversion\")\n\n        try:\n            from firecrawl import AsyncFirecrawl\n\n            self._firecrawl_client = AsyncFirecrawl(api_key=api_key)\n            self._initialized = True\n            logger.debug(\"Firecrawl client initialized for web conversion\")\n        except ImportError:\n            raise SyncFailureError(\"firecrawl-py package required but not installed\")\n\n    async def convert_batch(self, urls: List[str]) -> Dict[str, str]:\n        \"\"\"Fetch URLs and convert to markdown using Firecrawl batch scrape.\n\n        Args:\n            urls: List of URLs to fetch and convert\n\n        Returns:\n            Dict mapping URL -> markdown content (None if that URL failed).\n            Even if the entire batch fails, returns all None values so entities\n            can be skipped individually rather than failing the entire sync.\n\n        Raises:\n            SyncFailureError: Only for true infrastructure failures (API key missing,\n                              unauthorized, forbidden, payment required, quota exceeded)\n        \"\"\"\n        if not urls:\n            return {}\n\n        # Ensure client is initialized (raises SyncFailureError if not possible)\n        self._ensure_client()\n\n        # Initialize all URLs as None (failed) - will be updated with successful results\n        results: Dict[str, str] = {url: None for url in urls}\n\n        try:\n            # Rate limit before API call (batch counts as 1 request)\n            await self.rate_limiter.acquire()\n\n            # Start batch scrape and wait for completion\n            batch_result = await self._batch_scrape_with_retry(urls)\n\n            # Extract results - updates dict with successful conversions\n            self._extract_results(urls, batch_result, results)\n\n            return results\n\n        except SyncFailureError:\n            # Infrastructure failure - propagate to fail sync\n            raise\n        except Exception as e:\n            error_msg = str(e).lower()\n\n            # Check for infrastructure failures that should fail the sync\n            is_infrastructure = any(\n                kw in error_msg\n                for kw in [\n                    \"api key\",\n                    \"unauthorized\",\n                    \"forbidden\",\n                    \"payment required\",\n                    \"rate limit\",\n                    \"quota exceeded\",\n                ]\n            )\n\n            if is_infrastructure:\n                logger.error(f\"Firecrawl infrastructure failure: {e}\")\n                raise SyncFailureError(f\"Firecrawl infrastructure failure: {e}\")\n\n            # Other errors (timeout, network issues) - log but return partial results\n            # Individual URL failures are already handled by returning None\n            # Even if entire batch fails, return all None - entities will be skipped individually\n            logger.warning(f\"Firecrawl batch scrape error (entities will be skipped): {e}\")\n\n            # Return partial results - URLs with None will be skipped by entity pipeline\n            return results\n\n    async def _batch_scrape_with_retry(self, urls: List[str]):\n        \"\"\"Execute batch scrape with retry logic.\n\n        Args:\n            urls: List of URLs to scrape\n\n        Returns:\n            Firecrawl batch scrape result object\n\n        Raises:\n            Exception: If all retries fail\n        \"\"\"\n\n        @retry(\n            retry=retry_if_exception_type(\n                (TimeoutException, ReadTimeout, HTTPStatusError, asyncio.TimeoutError)\n            ),\n            stop=stop_after_attempt(MAX_RETRIES),\n            wait=wait_exponential(\n                multiplier=RETRY_MULTIPLIER, min=RETRY_MIN_WAIT, max=RETRY_MAX_WAIT\n            ),\n            reraise=True,\n        )\n        async def _call():\n            # batch_scrape polls internally until complete\n            return await self._firecrawl_client.batch_scrape(\n                urls,\n                formats=[\"markdown\"],\n                poll_interval=POLL_INTERVAL_SECONDS,\n                wait_timeout=POLL_TIMEOUT_SECONDS,\n            )\n\n        return await _call()\n\n    def _extract_results(self, urls: List[str], batch_result, results: Dict[str, str]) -> None:\n        \"\"\"Extract markdown content from batch scrape result.\n\n        Updates results dict in-place with successful conversions.\n        URLs that fail remain as None in the dict.\n\n        Args:\n            urls: Original list of URLs\n            batch_result: Firecrawl batch scrape result object\n            results: Dict to update (already initialized with all URLs -> None)\n        \"\"\"\n        # Check if we got any data\n        if not hasattr(batch_result, \"data\") or not batch_result.data:\n            logger.warning(\"Firecrawl batch returned no data\")\n            return\n\n        # Process each document in the result\n        for doc in batch_result.data:\n            # Extract source URL from metadata\n            source_url = self._get_source_url(doc)\n            if not source_url:\n                logger.warning(\"Firecrawl doc missing sourceURL in metadata\")\n                continue\n\n            # Extract markdown content\n            markdown = getattr(doc, \"markdown\", None)\n\n            if not markdown:\n                logger.warning(f\"Firecrawl returned no markdown for {source_url}\")\n                # Leave as None in results\n                continue\n\n            # Match back to original URL (handle trailing slashes etc)\n            matched_url = self._match_url(source_url, urls)\n            if matched_url:\n                results[matched_url] = markdown\n            elif source_url in results:\n                # Fallback: use source_url directly if it was in input\n                results[source_url] = markdown\n            else:\n                logger.warning(f\"Could not match Firecrawl result URL: {source_url}\")\n\n        # Log summary\n        successful = sum(1 for v in results.values() if v is not None)\n        failed = len(results) - successful\n\n        if failed > 0:\n            failed_urls = [url for url, content in results.items() if content is None]\n            logger.warning(\n                f\"Firecrawl: {successful}/{len(results)} URLs succeeded, \"\n                f\"{failed} failed: {failed_urls[:3]}{'...' if len(failed_urls) > 3 else ''}\"\n            )\n        else:\n            logger.debug(f\"Firecrawl: all {successful} URLs converted successfully\")\n\n    def _get_source_url(self, doc) -> Optional[str]:\n        \"\"\"Extract source URL from Firecrawl document metadata.\n\n        Args:\n            doc: Firecrawl document object\n\n        Returns:\n            Source URL string or None\n        \"\"\"\n        if not hasattr(doc, \"metadata\") or not doc.metadata:\n            return None\n\n        # Firecrawl v4 uses snake_case: source_url\n        # Try attribute access first (for typed objects)\n        source_url = getattr(doc.metadata, \"source_url\", None)\n        if source_url:\n            return source_url\n\n        # Fallback: try camelCase for older SDK versions\n        source_url = getattr(doc.metadata, \"sourceURL\", None)\n        if source_url:\n            return source_url\n\n        # Try dict access (for untyped dicts)\n        if isinstance(doc.metadata, dict):\n            return doc.metadata.get(\"source_url\") or doc.metadata.get(\"sourceURL\")\n\n        return None\n\n    def _match_url(self, source_url: str, original_urls: List[str]) -> Optional[str]:\n        \"\"\"Match a source URL back to the original URL list.\n\n        Handles minor differences like trailing slashes.\n\n        Args:\n            source_url: URL from Firecrawl response\n            original_urls: List of original input URLs\n\n        Returns:\n            Matched original URL or None\n        \"\"\"\n        # Exact match\n        if source_url in original_urls:\n            return source_url\n\n        # Try normalized comparison (trailing slashes)\n        normalized_source = source_url.rstrip(\"/\")\n        for url in original_urls:\n            if url.rstrip(\"/\") == normalized_source:\n                return url\n\n        return None\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"dbc618db92467a31ae631b8f707146579b54ee784e340e521b009064af76099a","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/web_converter.py","size":10244,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/56497121-5007-4898-a231-6f1991557b11-convertersweb_converter.py","repo_name":"airweave","path_in_repo":"converters/web_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"126b2cdb47ddce5d1a2d90a2a9d4a05425aa79e9","full_path":"airweave-ai/airweave/converters/web_converter.py","branch":"vespa_test","sha":"126b2cdb47ddce5d1a2d90a2a9d4a05425aa79e9","line_count":279,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/web_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/web_converter.py"}
{"entity_id":"airweave-ai/airweave/converters/xlsx_converter.py","breadcrumbs":[{"entity_id":"907754163","name":"airweave","entity_type":"GitHubRepositoryEntity"},{"entity_id":"airweave-ai/airweave/converters","name":"converters","entity_type":"GitHubDirectoryEntity"}],"name":"xlsx_converter.py","created_at":null,"updated_at":null,"textual_representation":"\n\n# Content\n\n\"\"\"XLSX to markdown converter using openpyxl.\"\"\"\n\nimport asyncio\nfrom typing import Dict, List\n\nfrom airweave.core.logging import logger\nfrom airweave.platform.converters._base import BaseTextConverter\nfrom airweave.platform.sync.async_helpers import run_in_thread_pool\nfrom airweave.platform.sync.exceptions import EntityProcessingError, SyncFailureError\n\n\nclass XlsxConverter(BaseTextConverter):\n    \"\"\"Converts XLSX files to markdown using local openpyxl extraction.\n\n    Note: XLSX is not supported by Mistral OCR, so we use local extraction.\n    Extracts all sheets as markdown tables with formulas and cell values.\n    \"\"\"\n\n    async def convert_batch(self, file_paths: List[str]) -> Dict[str, str]:\n        \"\"\"Convert XLSX files to markdown text using openpyxl.\n\n        Args:\n            file_paths: List of XLSX file paths to convert\n\n        Returns:\n            Dict mapping file_path -> markdown text content (None if failed)\n\n        Raises:\n            SyncFailureError: If openpyxl package not installed\n        \"\"\"\n        # Check package availability upfront\n        try:\n            import openpyxl  # noqa: F401\n        except ImportError:\n            raise SyncFailureError(\n                \"openpyxl package required for XLSX conversion but not installed\"\n            )\n\n        logger.debug(f\"Converting {len(file_paths)} XLSX files to markdown...\")\n\n        results = {}\n        semaphore = asyncio.Semaphore(10)  # Limit concurrent file reads\n\n        async def _convert_one(path: str):\n            async with semaphore:\n                try:\n                    markdown = await self._extract_xlsx_to_markdown(path)\n\n                    if not markdown or not markdown.strip():\n                        logger.warning(f\"XLSX extraction produced no content for {path}\")\n                        results[path] = None\n                    else:\n                        results[path] = markdown\n                        logger.debug(f\"Extracted XLSX: {path} ({len(markdown)} characters)\")\n\n                except EntityProcessingError as e:\n                    logger.warning(f\"XLSX conversion failed for {path}: {e}\")\n                    results[path] = None\n                except Exception as e:\n                    logger.error(f\"Unexpected error converting XLSX {path}: {e}\")\n                    results[path] = None\n\n        await asyncio.gather(*[_convert_one(p) for p in file_paths], return_exceptions=True)\n\n        successful = sum(1 for r in results.values() if r)\n        logger.debug(f\"XLSX conversion complete: {successful}/{len(file_paths)} files successful\")\n\n        return results\n\n    async def _extract_xlsx_to_markdown(self, xlsx_path: str) -> str:  # noqa: C901\n        \"\"\"Extract XLSX content to markdown format.\n\n        Args:\n            xlsx_path: Path to XLSX file\n\n        Returns:\n            Markdown formatted string with all sheets\n\n        Raises:\n            EntityProcessingError: If file cannot be opened or has no sheets\n        \"\"\"\n\n        def _extract() -> str:  # noqa: C901\n            from openpyxl import load_workbook\n\n            try:\n                # Load workbook with formula evaluation\n                wb = load_workbook(xlsx_path, data_only=False)\n            except Exception as e:\n                raise EntityProcessingError(f\"Failed to open XLSX file {xlsx_path}: {e}\")\n\n            sheet_names = wb.sheetnames\n\n            if not sheet_names:\n                raise EntityProcessingError(f\"XLSX file {xlsx_path} has no sheets\")\n\n            markdown_parts = []\n\n            # Process each sheet\n            for sheet_name in sheet_names:\n                sheet = wb[sheet_name]\n\n                # Get max row and column\n                max_row = sheet.max_row\n                max_col = sheet.max_column\n\n                if max_row == 0 or max_col == 0:\n                    # Empty sheet - skip\n                    logger.debug(f\"Sheet '{sheet_name}' is empty, skipping\")\n                    continue\n\n                # Add sheet header\n                markdown_parts.append(f\"## Sheet: {sheet_name}\\n\")\n\n                # Extract all rows\n                rows_data = []\n                for row in sheet.iter_rows(min_row=1, max_row=max_row, max_col=max_col):\n                    row_values = []\n                    for cell in row:\n                        # Get cell value (formulas will be evaluated if data_only=True)\n                        value = cell.value\n                        if value is None:\n                            row_values.append(\"\")\n                        else:\n                            row_values.append(str(value))\n                    rows_data.append(row_values)\n\n                if not rows_data:\n                    markdown_parts.append(\"*Empty sheet*\\n\")\n                    continue\n\n                # Convert to markdown table\n                # Use first row as header\n                if len(rows_data) > 1:\n                    header = rows_data[0]\n                    data_rows = rows_data[1:]\n\n                    # Create markdown table\n                    # Header row\n                    markdown_parts.append(\"| \" + \" | \".join(header) + \" |\")\n                    # Separator row\n                    markdown_parts.append(\"| \" + \" | \".join([\"---\"] * len(header)) + \" |\")\n\n                    # Data rows\n                    for row in data_rows:\n                        # Pad row if shorter than header\n                        padded_row = row + [\"\"] * (len(header) - len(row))\n                        markdown_parts.append(\"| \" + \" | \".join(padded_row[: len(header)]) + \" |\")\n                else:\n                    # Single row - just show as list\n                    for value in rows_data[0]:\n                        if value:\n                            markdown_parts.append(f\"- {value}\")\n\n                markdown_parts.append(\"\")  # Blank line between sheets\n\n            # Combine all sheets\n            if not markdown_parts:\n                raise EntityProcessingError(f\"XLSX file {xlsx_path} has no extractable content\")\n\n            return \"\\n\".join(markdown_parts)\n\n        try:\n            return await run_in_thread_pool(_extract)\n        except EntityProcessingError:\n            raise\n        except Exception as e:\n            raise EntityProcessingError(f\"XLSX extraction failed for {xlsx_path}: {e}\")\n","airweave_system_metadata":{"source_name":"github","entity_type":"GitHubCodeFileEntity","sync_id":"0b36ebfb-4f5c-422f-8af9-1c491567edd2","sync_job_id":"be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89","hash":"521e262fd4de69195536167fd7f30f9deaffcace3d90303f0caf3075d1073036","chunk_index":null,"original_entity_id":null,"vectors":null,"db_entity_id":null,"db_created_at":null,"db_updated_at":null},"url":"https://raw.githubusercontent.com/airweave-ai/airweave/vespa_test/converters/xlsx_converter.py","size":6335,"file_type":"text","mime_type":"text/x-python","local_path":"/tmp/airweave/processing/be5e6ca8-742c-487d-8f5e-a6f3bb4aaf89/ee2f73cc-fb25-467b-aed0-0ba41e323470-convertersxlsx_converter.py","repo_name":"airweave","path_in_repo":"converters/xlsx_converter.py","repo_owner":"airweave-ai","language":"Python","commit_id":"8ad64977689ec675b65840967e16aa81132e0562","full_path":"airweave-ai/airweave/converters/xlsx_converter.py","branch":"vespa_test","sha":"8ad64977689ec675b65840967e16aa81132e0562","line_count":169,"is_binary":false,"html_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/xlsx_converter.py","web_url":"https://github.com/airweave-ai/airweave/blob/vespa_test/converters/xlsx_converter.py"}
